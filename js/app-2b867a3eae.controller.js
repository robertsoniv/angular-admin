!function(){"use strict";angular.module("orderCloud",["ngAnimate","ngCookies","ngMessages","ngResource","ngSanitize","ngTouch","ui.tree","ui.router","ui.select","ui.bootstrap","toastr","angular-busy","jcs-autoValidate","treeControl","hl.sticky","angularPayments","ordercloud-angular-sdk"])}(),function(){"use strict";!function(){angular.module("orderCloud").run(["$templateCache",function($templateCache){$templateCache.put("account/templates/account.html",'<header class="c-jumbotron">\r\n	<div class="container container-smooth">\r\n		<div class="row">\r\n			<div class="col-sm-10 col-md-8 col-lg-6 col-sm-offset-2 col-md-offset-4 col-lg-offset-6">\r\n				<div class="l-page-header">\r\n					<h3 class="l-page-header__title text-right">\r\n						<i class="fa fa-user-circle-o"></i> My Account\r\n					</h3>\r\n				</div>\r\n\r\n			</div>\r\n		</div>\r\n	</div>\r\n</header>\r\n<br>\r\n<div class="container container-smooth">\r\n	<article class="row">\r\n		<div class="col-sm-10 col-md-8 col-lg-6 col-sm-offset-2 col-md-offset-4 col-lg-offset-6">\r\n			<form class="progressive" class="text-right" name="account.profileForm" autocomplete="off" novalidate ng-submit="account.updateProfile()" oc-readonly-roles="MeAdmin"\r\n			    pretty-submit>\r\n				<fieldset class="form-group row">\r\n					<div class="col-xs-6">\r\n						<label for="FirstName">First name</label>\r\n						<input id="FirstName" name="FirstName" type="text" class="form-control" ng-model="account.profile.FirstName" required>\r\n					</div>\r\n					<div class="col-xs-6">\r\n						<label for="LastName">Last name</label>\r\n						<input id="LastName" name="LastName" type="text" class="form-control" ng-model="account.profile.LastName" required>\r\n					</div>\r\n				</fieldset>\r\n				<fieldset class="form-group">\r\n					<label for="Email">Email address</label>\r\n					<input id="Email" name="Email" type="email" class="form-control" ng-model="account.profile.Email" required>\r\n				</fieldset>\r\n				<fieldset class="form-group">\r\n					<label for="Phone">Phone number</label>\r\n					<input id="Phone" name="Phone" type="tel" placeholder="(Optional)" class="form-control" ng-model="account.profile.Phone">\r\n				</fieldset>\r\n				<button type="submit" class="btn btn-default" oc-if-roles="MeAdmin">Update profile</button>\r\n				<button type="button" class="btn btn-default" oc-if-roles="MeAdmin" ng-click="account.changePassword()"><i class="fa fa-lock"></i> Change Password</button>\r\n			</form>\r\n			<hr>\r\n			<form name="account.settingsForm" ng-submit="account.updateUsername()" autocomplete="off" novalidate oc-readonly-roles="MeAdmin"\r\n			    pretty-submit>\r\n				<fieldset class="form-group">\r\n					<label for="Username">Username</label>\r\n					<input id="Username" name="Username" ng-change="account.usernameChange()" type="text" class="form-control" ng-model="account.profile.Username"\r\n					    required>\r\n					<p class="help-block">Your user ID is <code>{{account.profile.ID}}</code> and can be changed\r\n						<a ui-sref="sellerUsers" oc-if-roles="AdminUserReader || AdminUserAdmin">in admin users</a>\r\n						<span ng-if="!application.userIsAuthorized([\'AdminUserReader\', \'AdminUserAdmin\'], true)">by the site administrator.</span>\r\n					</p>\r\n				</fieldset>\r\n				<button type="submit" class="btn btn-default" oc-if-roles="MeAdmin">Update username</button>\r\n			</form>\r\n			<hr>\r\n			<button type="button" class="btn btn-danger btn-block" ng-click="application.logout()"><i class="fa fa-power-off"></i> Logout</button>\r\n		</div>\r\n	</article>\r\n</div>'),$templateCache.put("account/templates/changePassword.modal.html",'<form name="ChangePasswordForm" ng-submit="changePasswordModal.submit()" novalidate autocomplete="off">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="changePasswordModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><i class="fa fa-lock"></i> Change Password</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-group">\r\n            <div class="form-group">\r\n                <label>Current Password</label>\r\n                <input type="password" ng-model="changePasswordModal.currentUser.CurrentPassword" class="form-control" required />\r\n            </div>\r\n            <div class="form-group">\r\n                <label>New Password</label>\r\n                <input type="password" ng-model="changePasswordModal.currentUser.NewPassword" pattern="^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$"\r\n                    pattern-err-type="customPassword" class="form-control" confirmpassword="{{changePasswordModal.currentUser.ConfirmPassword}}"\r\n                    required />\r\n            </div>\r\n            <div class="form-group">\r\n                <label>Confirm Password</label>\r\n                <input type="password" ng-model="changePasswordModal.currentUser.ConfirmPassword" pattern="^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$"\r\n                    pattern-err-type="customPassword" class="form-control" confirmpassword="{{changePasswordModal.currentUser.NewPassword}}"\r\n                    required />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="ChangePasswordForm.$invalid || changePasswordModal.currentUser.NewPassword != changePasswordModal.currentUser.ConfirmPassword">\r\n            Update Password\r\n        </button>\r\n    </div>\r\n</form>'),$templateCache.put("account/templates/confirmPassword.modal.html",'<form name="confirmPasswordModal.form" ng-submit="confirmPasswordModal.submit()">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="confirmPasswordModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">Confirm Your Password</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-group">\r\n            <label for="ConfirmPassword">Please enter your password to continue</label>\r\n            <input id="ConfirmPassword" name="ConfirmPassword" type="password" ng-model="confirmPasswordModal.password" class="form-control"\r\n                autofocus required />\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button class="btn btn-primary btn-block" type="submit" ng-disabled="confirmPasswordModal.form.$invalid">Update Profile</button>\r\n    </div>\r\n</form>'),$templateCache.put("base/templates/base.tpl.html",'<nav class="navbar navbar-default navbar-fixed-top">\r\n    <div class="container container-smooth">\r\n        <!-- Brand and toggle get grouped for better mobile display -->\r\n        <div class="navbar-header">\r\n            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"\r\n                aria-expanded="false">\r\n                <span class="sr-only">Toggle navigation</span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n            </button>\r\n            <a class="navbar-brand" ui-sref="home">{{application.name}}</a>\r\n        </div>\r\n\r\n        <!-- Collect the nav links, forms, and other content for toggling -->\r\n        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\r\n            <ul class="nav navbar-nav">\r\n                <li ng-class="{active: application.$state.is(\'products\') || application.$state.includes(\'product\')}" oc-if-roles="ProductRoles">\r\n                    <a ng-click="base.selectNavItem(\'products\')"><i class="fa fa-cube"></i> Products</a>\r\n                </li>\r\n                <li ng-class="{active: application.$state.is(\'catalogs\') || application.$state.includes(\'catalog\')}" oc-if-roles="CatalogRoles">\r\n                    <a ng-click="base.selectNavItem(\'catalogs\')"><i class="fa fa-sitemap"></i> Catalogs</a>\r\n                </li>\r\n                <li ng-class="{active: application.$state.is(\'buyers\') || application.$state.includes(\'buyer\')}" oc-if-roles="{Items:[\'BuyerRoles\', \'CatalogRoles\'], Any:false}">\r\n                    <!--TODO: Add oc-if-roles="CatalogRoles"-->\r\n                    <a ng-click="base.selectNavItem(\'buyers\')"><i class="fa fa-tags"></i> Buyers</a>\r\n                </li>\r\n                <li ng-class="{active: application.$state.is(\'orders\') || application.$state.includes(\'orderDetail\')}" oc-if-roles="{Items:[\'BuyerRoles\', \'OrderRoles\'], Any:false}">\r\n                    <a ng-click="base.selectNavItem(\'orders\')"><i class="fa fa-inbox"></i> Orders</a>\r\n                </li>\r\n            </ul>\r\n            <ul class="nav navbar-nav navbar-right">\r\n                <li uib-dropdown oc-if-roles="{Items: [\'SellerUserRoles\', \'SellerUserGroupRoles\', \'AddressRoles\', \'SetSecurityProfile\'], Any:true}">\r\n                    <a uib-dropdown-toggle role="button">Seller <span class="caret"></span></a>\r\n                    <ul class="dropdown-menu">\r\n                        <li ng-class="{active: application.$state.is(\'sellerUsers\')}" oc-if-roles="SellerUserRoles">\r\n                            <a ng-click="base.selectNavItem(\'sellerUsers\')"><i class="fa fa-user"></i> Users</a>\r\n                        </li>\r\n                        <li ng-class="{active: application.$state.is(\'sellerUserGroups\') || application.$state.includes(\'adminUserGroup\')}" oc-if-roles="SellerUserGroupRoles">\r\n                            <a ng-click="base.selectNavItem(\'sellerUserGroups\')"><i class="fa fa-users"></i> User Groups</a>\r\n                        </li>\r\n                        <li ng-class="{active: application.$state.is(\'sellerAddresses\')}" oc-if-roles="AddressRoles">\r\n                            <a ng-click="base.selectNavItem(\'sellerAddresses\')"><i class="fa fa-map-marker"></i> Addresses</a>\r\n                        </li>\r\n                        <li ng-class="{active: application.$state.is(\'permissions\')}" oc-if-roles="SetSecurityProfile">\r\n                            <a ng-click="base.selectNavItem(\'permissions\')"><i class="fa fa-lock"></i> Permissions</a>\r\n                        </li>\r\n                    </ul>\r\n                </li>\r\n                <li ng-class="{active: application.$state.is(\'account\')}">\r\n                    <a ng-click="base.selectNavItem(\'account\')"><i class="fa fa-user-circle-o"></i> <span class="hidden-sm hidden-md hidden-lg">My Account</span></a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <!-- /.navbar-collapse -->\r\n    </div>\r\n    <!-- /.container-fluid -->\r\n</nav>\r\n<main ui-view ng-class="{\'container container-smooth\': base.addContainerClass()}" cg-busy="application.stateLoading(\'base\')"></main>'),$templateCache.put("home/templates/home.tpl.html",'<article>\r\n    <header class="jumbotron text-center">\r\n        <h1 ng-bind="application.name"></h1>\r\n        <p>Welcome to the OrderCloud Seller Application!</p>\r\n    </header>\r\n</article>'),$templateCache.put("login/templates/login.html",'<main class="login" ng-switch="login.form" cg-busy="login.loading">\r\n\r\n    <!--LOGIN FORM-->\r\n    <div ng-switch-when="login">\r\n        <div class="panel panel-default">\r\n            <form class="panel-body" name="LoginForm" ng-submit="login.submit()" pretty-submit>\r\n                <h3 class="text-center">Seller Login</h3>\r\n                <div class="form-group">\r\n                    <label for="Username" class="sr-only">Username</label>\r\n                    <input id="Username" type="text" class="form-control" placeholder="Username" autocapitalize="off" autofocus autocorrect="off" autocomplete="off" ng-model="login.credentials.Username" ng-required="true" />\r\n                </div>\r\n                <div class="form-group">\r\n                    <label for="Password" class="sr-only">Password</label>\r\n                    <input type="password" class="form-control" placeholder="Password" id="Password" ng-model="login.credentials.Password" ng-required="true" />\r\n                </div>\r\n\r\n                <div class="form-group text-center">\r\n                    <div class="checkbox">\r\n                        <label for="Remember">\r\n                            <input type="checkbox" id="Remember" ng-model="login.rememberStatus">\r\n                            Remember Me\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <button id="submit_login" type="submit" class="btn btn-primary btn-block" ng-disabled="LoginForm.$invalid">Submit</button>\r\n\r\n            </form>\r\n        </div>\r\n        <div class="text-center">\r\n            <a id="forgot_password" ng-click="login.setForm(\'forgot\')">Forgot Password?</a>\r\n        </div>\r\n    </div>\r\n\r\n    <!--FORGOT PASSWORD-->\r\n    <div ng-switch-when="forgot">\r\n        <div class="panel panel-default">\r\n            <form class="panel-body" name="ForgotPasswordForm" ng-submit="login.forgotPassword()">\r\n                <h3 class="text-center">Forgot Password</h3>\r\n                <div class="form-group">\r\n                    <label for="Email" class="sr-only">Email</label>\r\n                    <input type="text" class="form-control" id="Email" placeholder="Email Address" ng-model="login.credentials.Email" ng-required="true" />\r\n                </div>\r\n                <button type="submit" id="email_submit" class="btn btn-primary btn-block" ng-disabled="ForgotPasswordForm.$invalid">Submit</button>\r\n            </form>\r\n        </div>\r\n        <div class="text-center">\r\n            <a id="back_to_login" ng-click="login.setForm(\'login\')">Back to Login</a>\r\n        </div>\r\n    </div>\r\n\r\n    <!--RESET PASSWORD-->\r\n    <div ng-switch-when="reset">\r\n        <div class="panel panel-default">\r\n            <form class="panel-body" name="ResetPasswordForm" ng-submit="login.resetPassword()" >\r\n                <h3 class="text-center">Reset Password</h3>\r\n                <div class="form-group">\r\n                    <label for="ResetUsername" class="sr-only">Username</label>\r\n                    <input type="text" class="form-control" id="ResetUsername" placeholder="Username" ng-model="login.credentials.ResetUsername" ng-required="true" />\r\n                </div>\r\n                <div class="form-group">\r\n                    <label for="NewPassword" class="sr-only">New Password</label>\r\n                    <input type="password" class="form-control" id="NewPassword" name="NewPassword" placeholder="New Password" ng-model="login.credentials.NewPassword" ng-required="true" autofocus/>\r\n                </div>\r\n                <div class="form-group">\r\n                    <label for="ConfirmPassword" class="sr-only">Confirm Password</label>\r\n                    <input type="password" class="form-control" id="ConfirmPassword" placeholder="Confirm New Password" ng-model="login.credentials.ConfirmPassword" ng-required="true" />\r\n                </div>\r\n                <button type="submit" id="reset_submit" class="btn btn-primary btn-block" ng-disabled="ResetPasswordForm.$invalid || login.credentials.NewPassword != login.credentials.ConfirmPassword">Submit</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n\r\n    <!--RESET PASSWORD BY TOKEN-->\r\n    <div ng-switch-when="resetByToken">\r\n        <div class="panel panel-default">\r\n            <form class="panel-body" name="ResetPasswordForm" ng-submit="login.resetPasswordByToken()" >\r\n                <h3 class="text-center">Reset Password</h3>\r\n                <div class="alert alert-info">\r\n                    Due to a change in how we store password information, <br>as of <b>TBD</b> you must reset your password. <br> You can use the same password as before. \r\n                </div>\r\n                <div class="form-group">\r\n                    <label for="NewPassword" class="sr-only">New Password</label>\r\n                    <input type="password" class="form-control" id="NewPassword" name="NewPassword" placeholder="New Password" ng-model="login.credentials.NewPassword" ng-required="true" autofocus/>\r\n                </div>\r\n                <div class="form-group">\r\n                    <label for="ConfirmPassword" class="sr-only">Confirm Password</label>\r\n                    <input type="password" class="form-control" id="ConfirmPassword" placeholder="Confirm New Password" ng-model="login.credentials.ConfirmPassword" ng-required="true" />\r\n                </div>\r\n                <button type="submit" id="reset_submit" class="btn btn-primary btn-block" ng-disabled="ResetPasswordForm.$invalid || login.credentials.NewPassword != login.credentials.ConfirmPassword">Submit</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-switch-when="verificationCodeSuccess">\r\n        <div class="alert alert-success text-center" id="forgot_message">Forgot password email has been sent. <br> Please check your email in order to reset your password.</div>\r\n    </div>\r\n\r\n    <div ng-switch-when="resetSuccess">\r\n        <div class="alert alert-success text-center">Your password has been reset.</div>\r\n        <div class="text-center">\r\n            <a id="back_to_login2" ng-click="login.setForm(\'login\')">Back to Login</a>\r\n        </div>\r\n    </div>\r\n</main>\r\n'),$templateCache.put("permissions/templates/permissions.html",'<header class="l-page-header">\r\n    <h3 class="l-page-header__title">\r\n        {{permissions.pageTitle}}\r\n    </h3>\r\n</header>\r\n<form name="permissions.form" oc-readonly-roles="SetSecurityProfile">\r\n    <fieldset class="form-group">\r\n        <div class="checkbox" ng-repeat="profile in permissions.profiles">\r\n            <label for="{{profile.ID}}">\r\n                <input type="checkbox" id="{{profile.ID}}" name="{{profile.ID}}" ng-model="profile.selected" ng-change="permissions.updateAssignment(this, userGroup.group.ID)">\r\n                <b ng-if="profile.selected">{{profile.Name}}</b> <span ng-if="!profile.selected">{{profile.Name}}</span>\r\n            </label>\r\n        </div>\r\n    </fieldset>\r\n</form>\r\n'),$templateCache.put("sellerAddresses/templates/sellerAddressCreate.modal.html",'<form name="sellerAddressCreateModal.form" class="form-horizontal" ng-submit="sellerAddressCreateModal.submit()" cg-busy="sellerAddressCreateModal.loading" autocomplete="off" novalidate>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="sellerAddressCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Seller Address</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressID">Address ID</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressID" name="ID" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="sellerAddressCreateModal.sellerAddress.ID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressName">Address Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressName" name="AddressName" ng-model="sellerAddressCreateModal.sellerAddress.AddressName" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressCompanyName">Company Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressCompanyName" name="CompanyName" placeholder="(Optional)" ng-model="sellerAddressCreateModal.sellerAddress.CompanyName" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressFirstName">First Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressFirstName" name="FirstName" placeholder="(Optional)" ng-model="sellerAddressCreateModal.sellerAddress.FirstName" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressLastName">Last Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressLastName" name="LastName" placeholder="(Optional)" ng-model="sellerAddressCreateModal.sellerAddress.LastName" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressStreet1">Street 1</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressStreet1" name="Street1" ng-model="sellerAddressCreateModal.sellerAddress.Street1" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressStreet2">Street 2</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressStreet2" name="Street2" placeholder="(Optional)" ng-model="sellerAddressCreateModal.sellerAddress.Street2" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressCity">City</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressCity" name="City" ng-model="sellerAddressCreateModal.sellerAddress.City" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-if="(sellerAddressCreateModal.states | filter:{country:sellerAddressCreateModal.sellerAddress.Country}).length">\r\n            <label class="col-sm-3 control-label" for="addressState">State</label>\r\n            <div class="col-sm-9">\r\n                <select id="addressState" name="State" class="form-control" ng-options="state.value as state.label for state in sellerAddressCreateModal.states | filter:{country:sellerAddressCreateModal.sellerAddress.Country}" ng-model="sellerAddressCreateModal.sellerAddress.State" required></select>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-if="!(sellerAddressCreateModal.states | filter:{country:sellerAddressCreateModal.sellerAddress.Country}).length">\r\n            <label class="col-sm-3 control-label" for="addressState">State</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressState" name="State" ng-model="sellerAddressCreateModal.sellerAddress.State" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressZip">Zip</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressZip" name="Zip" ng-model="sellerAddressCreateModal.sellerAddress.Zip" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressID">Country</label>\r\n            <div class="col-sm-9">\r\n                <select id="addressCountry" name="Country" class="form-control" ng-options="country.value as country.label for country in sellerAddressCreateModal.countries" ng-model="sellerAddressCreateModal.sellerAddress.Country" required></select>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressPhone">Phone</label>\r\n            <div class="col-sm-9">\r\n                <input type="tel" class="form-control" id="addressPhone" name="Phone" ng-model="sellerAddressCreateModal.sellerAddress.Phone" />\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="sellerAddressCreateModal.form.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("sellerAddresses/templates/sellerAddressEdit.modal.html",'<form name="sellerAddressEditModal.form" class="form-horizontal" ng-submit="sellerAddressEditModal.submit()" cg-busy="sellerAddressEditModal.loading" autocomplete="off" novalidate oc-readonly-roles="AddressAdmin">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="sellerAddressEditModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span> {{sellerAddressEditModal.sellerAddressName}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressID">Address ID</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressID" name="ID" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="sellerAddressEditModal.sellerAddress.ID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressName">Address Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressName" name="AddressName" ng-model="sellerAddressEditModal.sellerAddress.AddressName" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressCompanyName">Company Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressCompanyName" name="CompanyName" placeholder="(Optional)" ng-model="sellerAddressEditModal.sellerAddress.CompanyName" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressFirstName">First Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressFirstName" name="FirstName" placeholder="(Optional)" ng-model="sellerAddressEditModal.sellerAddress.FirstName" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressLastName">Last Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressLastName" name="LastName" placeholder="(Optional)" ng-model="sellerAddressEditModal.sellerAddress.LastName" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressStreet1">Street 1</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressStreet1" name="Street1" ng-model="sellerAddressEditModal.sellerAddress.Street1" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressStreet2">Street 2</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressStreet2" name="Street2" placeholder="(Optional)" ng-model="sellerAddressEditModal.sellerAddress.Street2" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressCity">City</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressCity" name="City" ng-model="sellerAddressEditModal.sellerAddress.City" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-if="(sellerAddressEditModal.states | filter:{country:sellerAddressEditModal.sellerAddress.Country}).length">\r\n            <label class="col-sm-3 control-label" for="addressState">State</label>\r\n            <div class="col-sm-9">\r\n                <select id="addressState" name="State" class="form-control" ng-options="state.value as state.label for state in sellerAddressEditModal.states | filter:{country:sellerAddressEditModal.sellerAddress.Country}" ng-model="sellerAddressEditModal.sellerAddress.State" required></select>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-if="!(sellerAddressEditModal.states | filter:{country:sellerAddressEditModal.sellerAddress.Country}).length">\r\n            <label class="col-sm-3 control-label" for="addressState">State</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressState" name="State" ng-model="sellerAddressEditModal.sellerAddress.State" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressZip">Zip</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressZip" name="Zip" ng-model="sellerAddressEditModal.sellerAddress.Zip" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressID">Country</label>\r\n            <div class="col-sm-9">\r\n                <select id="addressCountry" name="Country" class="form-control" ng-options="country.value as country.label for country in sellerAddressEditModal.countries" ng-model="sellerAddressEditModal.sellerAddress.Country" required></select>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressPhone">Phone</label>\r\n            <div class="col-sm-9">\r\n                <input type="tel" class="form-control" id="addressPhone" name="Phone" ng-model="sellerAddressEditModal.sellerAddress.Phone" />\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block">Save</button>\r\n    </div>\r\n</form>\r\n'),$templateCache.put("sellerAddresses/templates/sellerAddresses.html",'<article ui-view>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Seller Addresses\r\n        </h3>\r\n        <!--====== CREATE ======-->\r\n        <div class="l-page-header__btns" oc-if-roles="AddressAdmin">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="sellerAddresses.createAddress()"><i class="fa fa-plus-circle"></i>\r\n                New Seller Address\r\n            </button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <div ng-if="sellerAddresses.list.Items.length || (!sellerAddresses.list.Items.length && sellerAddresses.searchResults)">\r\n        <form name="sellerAddresses.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon"><i class="fa fa-search"></i></span>\r\n                    <input type="search" name="search" autofocus="sellerAddresses.searchResults" ng-change="sellerAddresses.search()" ng-model-options="{debounce:1000}" placeholder="Search seller addresses..." ng-model="sellerAddresses.parameters.search" class="form-control">\r\n                    <span ng-if="sellerAddresses.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="sellerAddresses.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear Search</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="sellerAddresses.searchLoading">\r\n        <div class="no-matches" ng-if="!sellerAddresses.list.Items.length">\r\n            <b ng-if="sellerAddresses.searchResults">No matches found.</b>\r\n            <b ng-if="!sellerAddresses.searchResults">This seller organization does not have any seller addresses.</b>\r\n        </div>\r\n        <div ng-if="sellerAddresses.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6">\r\n                    <button ng-if="sellerAddresses.selectedCount" class="btn btn-danger btn-xs" ng-click="sellerAddresses.deleteSelected()">\r\n                        <i class="fa fa-trash"></i> Delete {{sellerAddresses.selectedCount == 1 ? "Address" : (sellerAddresses.selectedCount + " Addresses")}}\r\n                    </button>\r\n                </div>\r\n                <div class="col-xs-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? sellerAddresses.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        sellerAddresses.list.Meta.ItemRange[1] + \' of \' + sellerAddresses.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-selleraddress-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col oc-if-roles="AddressAdmin">\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th ng-click="sellerAddresses.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="sellerAddresses.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="sellerAddresses.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="sellerAddresses.updateSort(\'AddressName\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="sellerAddresses.parameters.sortBy == \'AddressName\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="sellerAddresses.parameters.sortBy == \'!AddressName\'"></i>\r\n                        </th>\r\n                        <th ng-click="sellerAddresses.updateSort(\'Street1\')">\r\n                            Address\r\n                            <i class="fa fa-caret-down" ng-show="sellerAddresses.parameters.sortBy == \'Street1\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="sellerAddresses.parameters.sortBy == \'!Street1\'"></i>\r\n                        </th>\r\n                        <th oc-if-roles="AddressAdmin"></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="sellerAddress in sellerAddresses.list.Items">\r\n                        <td>{{sellerAddress.ID}}</td>\r\n                        <td>\r\n                            <a href="" ng-click="sellerAddresses.editAddress(this)">{{sellerAddress.AddressName}}</a>\r\n                        </td>\r\n                        <td>{{sellerAddress | address}} <br ng-if="application.$ocMedia(\'max-width:767px\')"> {{sellerAddress.City + \', \' + sellerAddress.State + \' \' +\r\n                            sellerAddress.Zip}}\r\n                        </td>\r\n                        <td oc-if-roles="AddressAdmin">\r\n                            <button type="button" class="btn btn-danger btn-xs" ng-click="sellerAddresses.deleteAddress(this)">\r\n                                <i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span>\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                ng-if="sellerAddresses.list.Meta.TotalPages > 1"\r\n                total-items="sellerAddresses.list.Meta.TotalCount"\r\n                items-per-page="sellerAddresses.list.Meta.PageSize"\r\n                max-size="5"\r\n                boundary-links="sellerAddresses.list.Meta.TotalPages > 5"\r\n                ng-model="sellerAddresses.list.Meta.Page"\r\n                ng-change="sellerAddresses.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="sellerAddresses.list.Meta.Page < sellerAddresses.list.Meta.TotalPages"\r\n                    ng-click="sellerAddresses.loadMore()">Load More\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n</article>\r\n'),
$templateCache.put("sellerUserGroups/templates/sellerUserGroup.html",'<ol class="breadcrumb">\r\n    <li><a href="" ui-sref="sellerUserGroups">Seller User Groups</a></li>\r\n    <li class="active">{{sellerUserGroup.group.Name}}</li>\r\n</ol>\r\n<div class="row">\r\n    <div class="col-sm-4 col-lg-3">\r\n        <nav class="navmenu navmenu-default navmenu-inline" role="navigation">\r\n            <a href="" class="navmenu-brand">\r\n                <i class="fa fa-bars pull-right visible-xs" ng-click="sellerUserGroup.showNav = !sellerUserGroup.showNav"></i>\r\n                {{sellerUserGroup.group.Name}}\r\n            </a>\r\n            <ul class="nav navmenu-nav" uib-collapse="!sellerUserGroup.showNav && (application.$ocMedia(\'max-width:767px\'))">\r\n                <li ng-class="{\'active\':application.$state.is(\'sellerUserGroup\')}">\r\n                    <a href="" ui-sref="sellerUserGroup"><i class="fa fa-cog"></i> Settings</a>\r\n                </li>\r\n                <li ui-sref-active="active">\r\n                    <a href="" ui-sref=".permissions"><i class="fa fa-lock"></i> Group Permissions</a>\r\n                </li>\r\n                <li ui-sref-active="active">\r\n                    <a href="" ui-sref=".users"><i class="fa fa-user"></i> Users</a>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    </div>\r\n    <article class="col-sm-8 col-lg-9" ui-view cg-busy="application.stateLoading(\'sellerUserGroup\')">\r\n        <header class="l-page-header">\r\n            <h3 class="l-page-header__title">Seller User Group Settings</h3>\r\n        </header>\r\n        <div class="row">\r\n            <div class="col-sm-9 col-lg-8">\r\n                <form name="sellerUserGroup.editForm" class="form-horizontal" ng-submit="sellerUserGroup.update()" oc-readonly-roles="AdminUserGroupAdmin">\r\n                    <fieldset class="form-group">\r\n                        <label for="userGroupID" class="col-sm-4 control-label">User Group ID</label>\r\n                        <div class="col-sm-8">\r\n                            <input type="text" id="userGroupID" class="form-control" name="ID" ng-model="sellerUserGroup.model.ID" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name">\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <label for="userGroupName" class="col-sm-4 control-label">Name</label>\r\n                        <div class="col-sm-8">\r\n                            <input type="text" id="userGroupName" class="form-control" name="Name" ng-model="sellerUserGroup.model.Name" required>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <label for="userGroupDescription" class="col-sm-4 control-label">Description</label>\r\n                        <div class="col-sm-8">\r\n                            <textarea rows="4" id="userGroupDescription" class="form-control" name="Description" ng-model="sellerUserGroup.model.Description" placeholder="(Optional)"></textarea>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <div class="col-sm-offset-4 col-sm-8">\r\n                            <button type="submit" class="btn btn-primary btn-block">Update User Group</button>\r\n                        </div>\r\n                    </fieldset>\r\n                    <hr>\r\n                    <button type="button" class="btn btn-danger btn-block" ng-click="sellerUserGroup.delete()"><i class="fa fa-trash-o"></i> Delete User Group</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </article>\r\n</div>'),$templateCache.put("sellerUserGroups/templates/sellerUserGroupCreate.modal.html",'<form name="sellerUserGroupCreateModal.form" class="form-horizontal" ng-submit="sellerUserGroupCreateModal.submit()" novalidate>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="sellerUserGroupCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Seller User Group</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-group">\r\n            <label for="UserGroupID" class="control-label col-sm-3">User Group ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="UserGroupID" name="ID" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="sellerUserGroupCreateModal.userGroup.ID"/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="UserGroupName" class="control-label col-sm-3">Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="UserGroupName" name="Name" type="text" class="form-control" ng-model="sellerUserGroupCreateModal.userGroup.Name" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="UserGroupDescription" class="control-label col-sm-3">Description</label>\r\n            <div class="col-sm-9">\r\n                <textarea rows="4" id="UserGroupDescription" placeholder="Describe this group..." name="Description" type="text" class="form-control" ng-model="sellerUserGroupCreateModal.userGroup.Description"></textarea>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" cg-busy="sellerUserGroupCreateModal.loading" ng-disabled="sellerUserGroupCreateModal.form.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("sellerUserGroups/templates/sellerUserGroups.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">Seller User Groups</h3>\r\n        <div class="l-page-header__btns" oc-if-roles="AdminUserGroupAdmin">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="sellerUserGroups.createGroup()"><i class="fa fa-plus-circle"></i> New Seller User Group</button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <div ng-if="sellerUserGroups.list.Items.length || (!sellerUserGroups.list.Items.length && sellerUserGroups.searchResults)">\r\n        <form name="sellerUserGroups.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="sellerUserGroups.search()" ng-model-options="{debounce:1000}" placeholder="Search seller user groups..." ng-model="sellerUserGroups.parameters.search" class="form-control">\r\n                    <span ng-if="sellerUserGroups.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="sellerUserGroups.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear Search</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="sellerUserGroups.searchLoading">\r\n        <div class="no-matches" ng-if="!sellerUserGroups.list.Items.length">\r\n            <b ng-if="sellerUserGroups.searchResults">No matches found.</b>\r\n            <b ng-if="!sellerUserGroups.searchResults">This seller organization does not have any seller user groups.</b>\r\n        </div>\r\n        <div ng-if="sellerUserGroups.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6 col-xs-offset-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? sellerUserGroups.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        sellerUserGroups.list.Meta.ItemRange[1] + \' of \' + sellerUserGroups.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-usergroup-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col oc-if-roles="AdminUserGroupAdmin">\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th ng-click="sellerUserGroups.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="sellerUserGroups.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="sellerUserGroups.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="sellerUserGroups.updateSort(\'Name\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="sellerUserGroups.parameters.sortBy == \'Name\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="sellerUserGroups.parameters.sortBy == \'!Name\'"></i>\r\n                        </th>\r\n                        <th>Description</th>\r\n                        <th oc-if-roles="AdminUserGroupAdmin"></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="sellerUserGroup in sellerUserGroups.list.Items">\r\n                        <td>\r\n                            {{sellerUserGroup.ID}}\r\n                        </td>\r\n                        <td><a href="" ui-sref="sellerUserGroup({sellerusergroupid:sellerUserGroup.ID})">{{sellerUserGroup.Name}}</a></td>\r\n                        <td>{{sellerUserGroup.Description}}</td>\r\n                        <td oc-if-roles="AdminUserGroupAdmin">\r\n                            <button class="btn btn-danger btn-xs" ng-click="sellerUserGroups.deleteGroup(this)"><i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span></button>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                ng-if="sellerUserGroups.list.Meta.TotalPages > 1"\r\n                total-items="sellerUserGroups.list.Meta.TotalCount"\r\n                items-per-page="sellerUserGroups.list.Meta.PageSize"\r\n                max-size="5"\r\n                boundary-links="sellerUserGroups.list.Meta.TotalPages > 5"\r\n                ng-model="sellerUserGroups.list.Meta.Page"\r\n                ng-change="sellerUserGroups.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="sellerUserGroups.list.Meta.Page < sellerUserGroups.list.Meta.TotalPages"\r\n                    ng-click="sellerUserGroups.loadMore()">Load More</button>\r\n        </div>\r\n    </div>\r\n</article>'),$templateCache.put("sellerUsers/templates/sellerUserCreate.modal.html",'<form name="sellerUserCreateModal.form" class="form-horizontal" ng-submit="sellerUserCreateModal.submit()" novalidate>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="sellerUserCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Seller User</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-group">\r\n            <label for="ID" class="control-label col-sm-3">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="ID" name="ID" type="text" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="sellerUserCreateModal.user.ID"/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Username" class="control-label col-sm-3">Username</label>\r\n            <div class="col-sm-9">\r\n                <input id="Username" name="Username" type="text" class="form-control" ng-model="sellerUserCreateModal.user.Username" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Password" class="control-label col-sm-3">Password</label>\r\n            <div class="col-sm-9">\r\n                <input id="Password" name="Password" type="password" pattern=\'^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$\' pattern-err-type="customPassword" class="form-control" ng-model="sellerUserCreateModal.user.Password" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="FirstName" class="control-label col-sm-3">First Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="FirstName" name="FirstName" type="text" class="form-control" ng-model="sellerUserCreateModal.user.FirstName" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="LastName" class="control-label col-sm-3">Last Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="LastName" name="LastName" type="text" class="form-control" ng-model="sellerUserCreateModal.user.LastName" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Phone" class="control-label col-sm-3">Phone Number</label>\r\n            <div class="col-sm-9">\r\n                <input id="Phone" name="Phone" placeholder="(Optional)" type="tel" class="form-control" ng-model="sellerUserCreateModal.user.Phone" />\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Email" class="control-label col-sm-3">Email Address</label>\r\n            <div class="col-sm-9">\r\n                <input id="Email" name="Email" type="email" class="form-control" ng-model="sellerUserCreateModal.user.Email" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <div class="col-sm-offset-3 col-sm-9">\r\n                <div class="checkbox">\r\n                    <label for="Active">\r\n                        <input id="Active" name="Active" type="checkbox" ng-model="sellerUserCreateModal.user.Active"/>\r\n                        Active\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-block btn-primary" ng-disabled="sellerUserCreateModal.form.form" cg-busy="sellerUserCreateModal.loading">Submit</button>\r\n    </div>\r\n</form>'),$templateCache.put("sellerUsers/templates/sellerUserEdit.modal.html",'<form name="sellerUserEditModal.form" class="form-horizontal" ng-submit="sellerUserEditModal.submit()" novalidate ng-disabled="sellerUserEditModal.loading" oc-readonly-roles="AdminUserAdmin">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="sellerUserEditModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span>{{sellerUserEditModal.fullName || sellerUserEditModal.username}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-group">\r\n            <label for="ID" class="control-label col-sm-3">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="ID" name="ID" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="sellerUserEditModal.user.ID"/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Name" class="control-label col-sm-3">Username</label>\r\n            <div class="col-sm-9">\r\n                <input id="Name" name="Name" type="text" class="form-control" ng-model="sellerUserEditModal.user.Username" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="FirstName" class="control-label col-sm-3">First Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="FirstName" name="FirstName" type="text" class="form-control" ng-model="sellerUserEditModal.user.FirstName" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="LastName" class="control-label col-sm-3">Last Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="LastName" name="LastName" type="text" class="form-control" ng-model="sellerUserEditModal.user.LastName" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Phone" class="control-label col-sm-3">Phone Number</label>\r\n            <div class="col-sm-9">\r\n                <input id="Phone" name="Phone" type="tel" class="form-control" ng-model="sellerUserEditModal.user.Phone" />\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Email" class="control-label col-sm-3">Email Address</label>\r\n            <div class="col-sm-9">\r\n                <input id="Email" name="Email" type="email" class="form-control" ng-model="sellerUserEditModal.user.Email" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <div class="col-sm-offset-3 col-sm-9">\r\n                <div class="checkbox">\r\n                    <label for="Active">\r\n                        <input id="Active" name="Active" type="checkbox" ng-model="sellerUserEditModal.user.Active"/>\r\n                        Active\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer" >\r\n        <button type="submit" class="btn btn-block btn-primary" cg-busy="sellerUserEditModal.loading">Update</button>\r\n    </div>\r\n</form>'),$templateCache.put("sellerUsers/templates/sellerUserGroupUsers.html",'<header class="l-page-header">\r\n    <h3 class="l-page-header__title">\r\n        Users\r\n    </h3>\r\n    <!--====== CREATE ======-->\r\n    <div class="l-page-header__btns" oc-if-roles="AdminUserAdmin">\r\n        <button type="button" class="btn btn-primary btn-block" ng-click="sellerUserGroupUsers.createUser()"><i class="fa fa-plus-circle"></i>\r\n            New Seller User\r\n        </button>\r\n    </div>\r\n</header>\r\n\r\n<!--====== SEARCH/FILTERS ======-->\r\n<div ng-if="sellerUserGroupUsers.list.Items.length || (!sellerUserGroupUsers.list.Items.length && sellerUserGroupUsers.searchResults)">\r\n    <form name="sellerUserGroupUsers.searchForm" pretty-submit>\r\n        <fieldset class="form-group">\r\n            <div class="input-group">\r\n                <span class="input-group-addon">\r\n                    <i class="fa fa-search"></i>\r\n                </span>\r\n                <input type="search" ng-change="sellerUserGroupUsers.search()" ng-model-options="{debounce:1000}" placeholder="Search users..." ng-model="sellerUserGroupUsers.parameters.search" class="form-control">\r\n                <span ng-if="sellerUserGroupUsers.searchResults" class="input-group-btn">\r\n                    <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="sellerUserGroupUsers.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear</span></button>\r\n                </span>\r\n            </div>\r\n        </fieldset>\r\n    </form>\r\n</div>\r\n\r\n<div cg-busy="sellerUserGroupUsers.searchLoading">\r\n    <div class="no-matches" ng-if="!sellerUserGroupUsers.list.Items.length">\r\n        <b ng-if="sellerUserGroupUsers.searchResults">No matches found.</b>\r\n        <b ng-if="!sellerUserGroupUsers.searchResults">This seller organization does not have any seller users.</b>\r\n    </div>\r\n    <div ng-if="sellerUserGroupUsers.list.Items.length">\r\n        <div class="row">\r\n            <div class="col-xs-6">\r\n                <div class="btn-group" ng-if="sellerUserGroupUsers.changedAssignments.length">\r\n                    <button class="btn btn-primary btn-xs" ng-click="sellerUserGroupUsers.updateAssignments()">\r\n                        Update Assignments\r\n                    </button>\r\n                    <button class="btn btn-default btn-xs" ng-click="sellerUserGroupUsers.resetAssignments()">\r\n                        <i class="fa fa-times"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div class="col-xs-6">\r\n                <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? sellerUserGroupUsers.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                    sellerUserGroupUsers.list.Meta.ItemRange[1] + \' of \' + sellerUserGroupUsers.list.Meta.TotalCount + \' results\'}}</p>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default table-responsive">\r\n            <table class="table table-striped table-bordered l-user-table__usergroup" oc-readonly-roles="AdminUserGroupAdmin">\r\n                <colgroup>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                </colgroup>\r\n                <thead>\r\n                <tr>\r\n                    <th class="text-center" ng-click="application.userIsAuthorized([\'AdminUserGroupAdmin\']) ? sellerUserGroupUsers.selectAllItems() : angular.noop()">\r\n                        Assign\r\n                        <!--<input type="checkbox" ng-model="sellerUserGroupUsers.allItemsSelected" ng-change="sellerUserGroupUsers.selectAllItems()" />-->\r\n                    </th>\r\n                    <!--<th ng-click="sellerUserGroupUsers.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="sellerUserGroupUsers.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="sellerUserGroupUsers.parameters.sortBy == \'!ID\'"></i>\r\n                    </th>-->\r\n                    <th ng-click="sellerUserGroupUsers.updateSort(\'Username\')">\r\n                        Username\r\n                        <i class="fa fa-caret-down" ng-show="sellerUserGroupUsers.parameters.sortBy == \'Username\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="sellerUserGroupUsers.parameters.sortBy == \'!Username\'"></i>\r\n                    </th>\r\n                    <!--<th ng-click="sellerUserGroupUsers.updateSort(\'FirstName\')">\r\n                        First Name\r\n                        <i class="fa fa-caret-down" ng-show="sellerUserGroupUsers.parameters.sortBy == \'FirstName\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="sellerUserGroupUsers.parameters.sortBy == \'!FirstName\'"></i>\r\n                    </th>\r\n                    <th ng-click="sellerUserGroupUsers.updateSort(\'LastName\')">\r\n                        Last Name\r\n                        <i class="fa fa-caret-down" ng-show="sellerUserGroupUsers.parameters.sortBy == \'LastName\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="sellerUserGroupUsers.parameters.sortBy == \'!LastName\'"></i>\r\n                    </th>-->\r\n                    <th ng-click="sellerUserGroupUsers.updateSort(\'Email\')">\r\n                        Email\r\n                        <i class="fa fa-caret-down" ng-show="sellerUserGroupUsers.parameters.sortBy == \'Email\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="sellerUserGroupUsers.parameters.sortBy == \'!Email\'"></i>\r\n                    </th>\r\n                    <th oc-if-roles="AdminUserGroupAdmin"></th>\r\n                    <!--<th>\r\n                        Active\r\n                    </th>-->\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr ng-repeat="user in sellerUserGroupUsers.list.Items">\r\n                    <td class="text-center">\r\n                        <input type="checkbox" ng-model="user.Assigned" ng-change="sellerUserGroupUsers.selectItem(this)"/>\r\n                    </td>\r\n                    <!--<td>\r\n                        <a href="">{{user.ID}}</a>\r\n                    </td>-->\r\n                    <td><a href="" ng-click="sellerUserGroupUsers.editUser(this)">{{user.Username}}</a></td>\r\n                    <!--<td>{{user.FirstName}}</td>\r\n                    <td>{{user.LastName}}</td>-->\r\n                    <td>{{user.Email}}</td>\r\n                    <td oc-if-roles="AdminUserGroupAdmin">\r\n                        <button class="btn btn-danger btn-xs" type="button" ng-click="sellerUserGroupUsers.deleteUser(this)"><i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span></button>\r\n                    </td>\r\n                    <!--<td class="text-center"><i class="fa fa-circle" ng-class="{active:user.Active}"></i></td>-->\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <ul uib-pagination\r\n            class="pagination-sm pull-right hidden-xs"\r\n            ng-if="users.list.Meta.TotalPages > 1"\r\n            total-items="users.list.Meta.TotalCount"\r\n            items-per-page="users.list.Meta.PageSize"\r\n            max-size="5"\r\n            boundary-links="users.list.Meta.TotalPages > 5"\r\n            ng-model="users.list.Meta.Page"\r\n            ng-change="users.pageChanged()">\r\n        </ul>\r\n        <button type="button"\r\n                class="btn btn-default btn-block btn-lg visible-xs"\r\n                ng-show="users.list.Meta.Page < users.list.Meta.TotalPages"\r\n                ng-click="users.loadMore()">Load More</button>\r\n    </div>\r\n</div>'),$templateCache.put("sellerUsers/templates/sellerUsers.html",'<article ui-view>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Seller Users\r\n        </h3>\r\n        <!--====== CREATE ======-->\r\n        <div class="l-page-header__btns" oc-if-roles="AdminUserAdmin">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="sellerUsers.createUser()"><i class="fa fa-plus-circle"></i>\r\n                New Seller User\r\n            </button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <div ng-if="sellerUsers.list.Items.length || (!sellerUsers.list.Items.length && sellerUsers.searchResults)">\r\n        <form name="SellerUsersSearchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="sellerUsers.search()" ng-model-options="{debounce:1000}" placeholder="Search seller users..." ng-model="sellerUsers.parameters.search" class="form-control">\r\n                    <span ng-if="sellerUsers.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="sellerUsers.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear Search</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="sellerUsers.searchLoading">\r\n        <div class="no-matches" ng-if="!sellerUsers.list.Items.length">\r\n            <b ng-if="sellerUsers.searchResults">No matches found.</b>\r\n            <b ng-if="!sellerUsers.searchResults">This seller organization does not have any seller users.</b>\r\n        </div>\r\n        <div ng-if="sellerUsers.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6">\r\n                    <button ng-if="sellerUsers.selectedCount" class="btn btn-danger btn-xs" ng-click="sellerUsers.deleteSelected()" oc-if-roles="AdminUserAdmin">\r\n                        <i class="fa fa-trash"></i> Delete {{sellerUsers.selectedCount == 1 ? "User" : (sellerUsers.selectedCount + " Users")}}\r\n                    </button>\r\n                </div>\r\n                <div class="col-xs-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? sellerUsers.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        sellerUsers.list.Meta.ItemRange[1] + \' of \' + sellerUsers.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-user-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col oc-if-roles="AdminUserAdmin">\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th ng-click="sellerUsers.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="sellerUsers.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="sellerUsers.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="sellerUsers.updateSort(\'Username\')">\r\n                            Username\r\n                            <i class="fa fa-caret-down" ng-show="sellerUsers.parameters.sortBy == \'Username\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="sellerUsers.parameters.sortBy == \'!Username\'"></i>\r\n                        </th>\r\n                        <th ng-click="sellerUsers.updateSort(\'FirstName\')">\r\n                            First Name\r\n                            <i class="fa fa-caret-down" ng-show="sellerUsers.parameters.sortBy == \'FirstName\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="sellerUsers.parameters.sortBy == \'!FirstName\'"></i>\r\n                        </th>\r\n                        <th ng-click="sellerUsers.updateSort(\'LastName\')">\r\n                            Last Name\r\n                            <i class="fa fa-caret-down" ng-show="sellerUsers.parameters.sortBy == \'LastName\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="sellerUsers.parameters.sortBy == \'!LastName\'"></i>\r\n                        </th>\r\n                        <th ng-click="sellerUsers.updateSort(\'Email\')">\r\n                            Email\r\n                            <i class="fa fa-caret-down" ng-show="sellerUsers.parameters.sortBy == \'Email\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="sellerUsers.parameters.sortBy == \'!Email\'"></i>\r\n                        </th>\r\n                        <th>\r\n                            Active\r\n                        </th>\r\n                        <th oc-if-roles="AdminUserAdmin"></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="user in sellerUsers.list.Items">\r\n                        <td>{{user.ID}}</td>\r\n                        <td><a href="" ng-click="sellerUsers.editUser(this)">{{user.Username}}</a></td>\r\n                        <td>{{user.FirstName}}</td>\r\n                        <td>{{user.LastName}}</td>\r\n                        <td>{{user.Email}}</td>\r\n                        <td class="text-center">\r\n                            <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':user.Active}"></i>\r\n                        </td>\r\n                        <td oc-if-roles="AdminUserAdmin">\r\n                            <button type="button" ng-click="sellerUsers.deleteUser(this)" class="btn btn-danger btn-xs">\r\n                                <i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span>\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                ng-if="sellerUsers.list.Meta.TotalPages > 1"\r\n                total-items="sellerUsers.list.Meta.TotalCount"\r\n                items-per-page="sellerUsers.list.Meta.PageSize"\r\n                max-size="5"\r\n                boundary-links="sellerUsers.list.Meta.TotalPages > 5"\r\n                ng-model="sellerUsers.list.Meta.Page"\r\n                ng-change="sellerUsers.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="sellerUsers.list.Meta.Page < sellerUsers.list.Meta.TotalPages"\r\n                    ng-click="sellerUsers.loadMore()">Load More\r\n            </button>\r\n        </div>\r\n    </div>\r\n</article>\r\n'),
$templateCache.put("buyerManagement/addresses/templates/addressCreate.modal.html",'<form name="addressCreateModal.form" class="form-horizontal" ng-submit="addressCreateModal.submit()" autocomplete="off" novalidate>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="addressCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Address</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressID">Address ID</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressID" name="ID" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="addressCreateModal.address.ID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressName">Address Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressName" name="AddressName" ng-model="addressCreateModal.address.AddressName" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressCompanyName">Company Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressCompanyName" name="CompanyName" placeholder="(Optional)" ng-model="addressCreateModal.address.CompanyName" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressFirstName">First Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressFirstName" name="FirstName" placeholder="(Optional)" ng-model="addressCreateModal.address.FirstName" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressLastName">Last Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressLastName" name="LastName" placeholder="(Optional)" ng-model="addressCreateModal.address.LastName" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressStreet1">Street 1</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressStreet1" name="Street1" ng-model="addressCreateModal.address.Street1" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressStreet2">Street 2</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressStreet2" name="Street2" placeholder="(Optional)" ng-model="addressCreateModal.address.Street2" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressCity">City</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressCity" name="City" ng-model="addressCreateModal.address.City" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-if="(addressCreateModal.states | filter:{country:addressCreateModal.address.Country}).length">\r\n            <label class="col-sm-3 control-label" for="addressState">State</label>\r\n            <div class="col-sm-9">\r\n                <select id="addressState" name="State" class="form-control" ng-options="state.value as state.label for state in addressCreateModal.states | filter:{country:addressCreateModal.address.Country}" ng-model="addressCreateModal.address.State" required></select>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-if="!(addressCreateModal.states | filter:{country:addressCreateModal.address.Country}).length">\r\n            <label class="col-sm-3 control-label" for="addressState">State</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressState" name="State" ng-model="addressCreateModal.address.State" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressZip">Zip</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressZip" name="Zip" ng-model="addressCreateModal.address.Zip" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressID">Country</label>\r\n            <div class="col-sm-9">\r\n                <select id="addressCountry" name="Country" class="form-control" ng-options="country.value as country.label for country in addressCreateModal.countries" ng-model="addressCreateModal.address.Country" required></select>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressPhone">Phone</label>\r\n            <div class="col-sm-9">\r\n                <input type="tel" class="form-control" id="addressPhone" name="Phone" ng-model="addressCreateModal.address.Phone" />\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" cg-busy="addressCreateModal.loading" ng-disabled="addressCreateModal.form.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/addresses/templates/addressEdit.modal.html",'<form name="addressEditModal.form" class="form-horizontal" ng-submit="addressEditModal.submit()" autocomplete="off" novalidate oc-readonly-roles="AddressAdmin">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="addressEditModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span>{{addressEditModal.addressName}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressID">Address ID</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressID" name="ID" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="addressEditModal.address.ID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressName">Address Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressName" name="AddressName" ng-model="addressEditModal.address.AddressName" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressCompanyName">Company Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressCompanyName" name="CompanyName" placeholder="(Optional)" ng-model="addressEditModal.address.CompanyName" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressFirstName">First Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressFirstName" name="FirstName" placeholder="(Optional)" ng-model="addressEditModal.address.FirstName" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressLastName">Last Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressLastName" name="LastName" placeholder="(Optional)" ng-model="addressEditModal.address.LastName" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressStreet1">Street 1</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressStreet1" name="Street1" ng-model="addressEditModal.address.Street1" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressStreet2">Street 2</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressStreet2" name="Street2" placeholder="(Optional)" ng-model="addressEditModal.address.Street2" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressCity">City</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressCity" name="City" ng-model="addressEditModal.address.City" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-if="(addressEditModal.states | filter:{country:addressEditModal.address.Country}).length">\r\n            <label class="col-sm-3 control-label" for="addressState">State</label>\r\n            <div class="col-sm-9">\r\n                <select id="addressState" name="State" class="form-control" ng-options="state.value as state.label for state in addressEditModal.states | filter:{country:addressEditModal.address.Country}" ng-model="addressEditModal.address.State" required></select>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-if="!(addressEditModal.states | filter:{country:addressEditModal.address.Country}).length">\r\n            <label class="col-sm-3 control-label" for="addressState">State</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressState" name="State" ng-model="addressEditModal.address.State" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressZip">Zip</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="addressZip" name="Zip" ng-model="addressEditModal.address.Zip" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressID">Country</label>\r\n            <div class="col-sm-9">\r\n                <select id="addressCountry" name="Country" class="form-control" ng-options="country.value as country.label for country in addressEditModal.countries" ng-model="addressEditModal.address.Country" required></select>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="addressPhone">Phone</label>\r\n            <div class="col-sm-9">\r\n                <input type="tel" class="form-control" id="addressPhone" name="Phone" ng-model="addressEditModal.address.Phone" />\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" cg-busy="addressEditModal.loading">Save</button>\r\n    </div>\r\n</form>\r\n'),$templateCache.put("buyerManagement/addresses/templates/addresses.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Addresses\r\n        </h3>\r\n        <!--====== CREATE ======-->\r\n        <div class="l-page-header__btns" oc-if-roles="AddressAdmin">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="addresses.createAddress()"><i class="fa fa-plus-circle"></i>\r\n                New Address\r\n            </button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH ======-->\r\n    <div ng-if="addresses.list.Items.length || (!addresses.list.Items.length && addresses.searchResults)">\r\n        <form name="addresses.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon"><i class="fa fa-search"></i></span>\r\n                    <input type="search" ng-change="addresses.search()" ng-model-options="{debounce:1000}" placeholder="Search addresses..." ng-model="addresses.parameters.search" class="form-control">\r\n                <span ng-if="addresses.searchResults" class="input-group-btn">\r\n                    <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="addresses.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear Search</span></button>\r\n                </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="addresses.searchLoading">\r\n        <div class="no-matches" ng-if="!addresses.list.Items.length">\r\n            <b ng-if="addresses.searchResults">No matches found.</b>\r\n            <b ng-if="!addresses.searchResults">This buyer organization does not have any addresses.</b>\r\n        </div>\r\n        <div ng-if="addresses.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6">\r\n                    <div class="btn-group" ng-if="addresses.changedAssignments.length">\r\n                        <button ng-click="addresses.updateAssignments()" class="btn btn-primary btn-xs">\r\n                            Update Assignments\r\n                        </button>\r\n                        <button class="btn btn-default btn-xs" ng-click="addresses.resetAssignments()">\r\n                            <i class="fa fa-times"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div class="col-xs-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? addresses.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        addresses.list.Meta.ItemRange[1] + \' of \' + addresses.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-address-table" ng-class="{\'l-address-table__usergroup\':addresses.userGroupID}" oc-readonly-roles="AddressAdmin">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col oc-if-roles="AddressAdmin">\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th class="text-center" ng-click="application.userIsAuthorized([\'AddressAdmin\']) ? addresses.selectAllItems(\'shipping\') : angular.noop()">\r\n                            Shipping\r\n                        </th>\r\n                        <th class="text-center" ng-click="application.userIsAuthorized([\'AddressAdmin\']) ? addresses.selectAllItems(\'billing\') : angular.noop()">\r\n                            Billing\r\n                        </th>\r\n                        <th ng-click="addresses.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="addresses.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="addresses.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="addresses.updateSort(\'AddressName\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="addresses.parameters.sortBy == \'AddressName\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="addresses.parameters.sortBy == \'!AddressName\'"></i>\r\n                        </th>\r\n                        <th ng-click="addresses.updateSort(\'Street1\')">\r\n                            Address\r\n                            <i class="fa fa-caret-down" ng-show="addresses.parameters.sortBy == \'Street1\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="addresses.parameters.sortBy == \'!Street1\'"></i>\r\n                        </th>\r\n                        <th oc-if-roles="AddressAdmin"></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="address in addresses.list.Items">\r\n                        <td class="text-center">\r\n                            <input type="checkbox" ng-model="address.shipping" ng-change="addresses.selectItem(this, \'shipping\')" />\r\n                        </td>\r\n                        <td class="text-center">\r\n                            <input type="checkbox" ng-model="address.billing" ng-change="addresses.selectItem(this, \'billing\')" />\r\n                        </td>\r\n                        <td>{{address.ID}}</td>\r\n                        <td>\r\n                            <a href="" ng-click="addresses.editAddress(this)">{{address.AddressName}}</a>\r\n                        </td>\r\n                        <td>{{address | address}} <br ng-if="application.$ocMedia(\'max-width:767px\')"> {{address.City + \', \' + address.State + \' \' +\r\n                            address.Zip}}\r\n                        </td>\r\n                        <td oc-if-roles="AddressAdmin">\r\n                            <button type="button" class="btn btn-danger btn-block btn-xs" ng-click="addresses.deleteAddress(this)"><i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span></button>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                ng-if="addresses.list.Meta.TotalPages > 1"\r\n                total-items="addresses.list.Meta.TotalCount"\r\n                items-per-page="addresses.list.Meta.PageSize"\r\n                max-size="5"\r\n                boundary-links="addresses.list.Meta.TotalPages > 5"\r\n                ng-model="addresses.list.Meta.Page"\r\n                ng-change="addresses.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="addresses.list.Meta.Page < addresses.list.Meta.TotalPages"\r\n                    ng-click="addresses.loadMore()">Load More\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n</article>\r\n'),$templateCache.put("buyerManagement/approvalRules/templates/approvalRuleCreate.modal.html",'<form name="approvalRuleCreateModal.form" ng-submit="approvalRuleCreateModal.submit()" novalidate>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="approvalRuleCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Approval Rule</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-horizontal">\r\n            <div class="form-group">\r\n                <label for="ID" class="control-label col-sm-3">ID</label>\r\n                <div class="col-sm-9">\r\n                    <input id="ID" name="ID" type="text" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="approvalRuleCreateModal.approvalRule.ID"/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="Name" class="control-label col-sm-3">Name</label>\r\n                <div class="col-sm-9">\r\n                    <input id="Name" name="Name" type="text" class="form-control" ng-model="approvalRuleCreateModal.approvalRule.Name" required/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="Description" class="control-label col-sm-3">Description</label>\r\n                <div class="col-sm-9">\r\n                    <textarea rows="4" id="Description" name="Description" placeholder="(Optional) Describe your approval rule..." type="text" class="form-control" ng-model="approvalRuleCreateModal.approvalRule.Description"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <hr>\r\n        <div class="form-group">\r\n            <label for="RuleExpression">Rule Expression</label>\r\n            <textarea rows="2" id="RuleExpression" name="RuleExpression" type="text" class="form-control" ng-model="approvalRuleCreateModal.approvalRule.RuleExpression" required></textarea>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="ApprovingGroupID">Approving Group</label>\r\n            <script type="text/ng-template" id="ocTypeahead_usergroup.html">\r\n                <a href tabindex="-1" ng-attr-title="{{match.label}}">\r\n                    <span ng-bind-html="\'<b>\' + (match.model.Name | uibTypeaheadHighlight:query) + \'</b>\' + \'<br/><small>\' + (match.model.ID | uibTypeaheadHighlight:query) + \'</small>\'"></span>\r\n                </a>\r\n            </script>\r\n            <div class="c-typeahead">\r\n                <input id="ApprovingGroupID"\r\n                    name="ApprovingGroupID"\r\n                    type="text"\r\n                    placeholder="Approving Group ID..."\r\n                    class="form-control"\r\n                    uib-typeahead="group.ID as group.Name for group in approvalRuleCreateModal.searchGroups($viewValue)"\r\n                    typeahead-min-length="0"\r\n                    typeahead-append-to="\'.c-typeahead__results\'"\r\n                    typeahead-no-results="approvalRuleCreateModal.noCatalogResults"\r\n                    typeahead-loading="approvalRuleCreateModal.catalogsLoading"\r\n                    typeahead-template-url="ocTypeahead_usergroup.html"\r\n                    ng-model-options="{debounce:1000}"\r\n                    ng-model="approvalRuleCreateModal.approvalRule.ApprovingGroupID" required/>\r\n                <div class="c-typeahead__results">\r\n                    <div class="c-typeahead__results--empty" ng-if="approvalRuleCreateModal.noCatalogResults">\r\n                        <span>No matches found</span>\r\n                    </div>\r\n                    <div class="c-typeahead__results--loading" ng-if="approvalRuleCreateModal.catalogsLoading">\r\n                        <div ng-include="\'common/config/angular-busy/angular-busy.html\'"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <small class="help-block">Enter the ID of the buyer user group that will approve these orders.</small>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-block btn-primary" ng-disabled="approvalRuleCreateModal.form.$invalid" cg-busy="approvalRuleCreateModal.loading">Submit</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/approvalRules/templates/approvalRuleEdit.modal.html",'<form name="approvalRuleEditModal.form" ng-submit="approvalRuleEditModal.submit()" novalidate ng-disabled="approvalRuleEditModal.loading" oc-readonly-roles="ApprovalRuleAdmin">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="approvalRuleEditModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span> {{approvalRuleEditModal.approvalRuleName}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-horizontal">\r\n            <div class="form-group">\r\n                <label for="ID" class="control-label col-sm-3">ID</label>\r\n                <div class="col-sm-9">\r\n                    <input id="ID" name="ID" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="approvalRuleEditModal.approvalRule.ID"/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="Name" class="control-label col-sm-3">Name</label>\r\n                <div class="col-sm-9">\r\n                    <input id="Name" name="Name" type="text" class="form-control" ng-model="approvalRuleEditModal.approvalRule.Name" required/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="Description" class="control-label col-sm-3">Description</label>\r\n                <div class="col-sm-9">\r\n                    <textarea rows="4" id="Description" name="Description" placeholder="(Optional) Describe your approval rule..." type="text" class="form-control" ng-model="approvalRuleEditModal.approvalRule.Description"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <hr>\r\n        <div class="form-group">\r\n            <label for="RuleExpression">Rule Expression</label>\r\n            <textarea rows="2" id="RuleExpression" name="RuleExpression" type="text" class="form-control" ng-model="approvalRuleEditModal.approvalRule.RuleExpression" required></textarea>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="ApprovingGroupID">Approving Group</label>\r\n            <script type="text/ng-template" id="ocTypeahead_usergroup.html">\r\n                <a href tabindex="-1" ng-attr-title="{{match.label}}">\r\n                    <span ng-bind-html="\'<b>\' + (match.model.Name | uibTypeaheadHighlight:query) + \'</b>\' + \'<br/><small>\' + (match.model.ID | uibTypeaheadHighlight:query) + \'</small>\'"></span>\r\n                </a>\r\n            </script>\r\n            <div class="c-typeahead">\r\n                <input id="ApprovingGroupID"\r\n                    name="ApprovingGroupID"\r\n                    type="text"\r\n                    placeholder="Approving Group ID..."\r\n                    class="form-control"\r\n                    uib-typeahead="group.ID as group.Name for group in approvalRuleEditModal.searchGroups($viewValue)"\r\n                    typeahead-min-length="0"\r\n                    typeahead-append-to="\'.c-typeahead__results\'"\r\n                    typeahead-no-results="approvalRuleEditModal.noCatalogResults"\r\n                    typeahead-loading="approvalRuleEditModal.catalogsLoading"\r\n                    typeahead-template-url="ocTypeahead_usergroup.html"\r\n                    ng-model-options="{debounce:1000}"\r\n                    ng-model="approvalRuleEditModal.approvalRule.ApprovingGroupID" required/>\r\n                <div class="c-typeahead__results">\r\n                    <div class="c-typeahead__results--empty" ng-if="approvalRuleEditModal.noCatalogResults">\r\n                        <span>No matches found</span>\r\n                    </div>\r\n                    <div class="c-typeahead__results--loading" ng-if="approvalRuleEditModal.catalogsLoading">\r\n                        <div ng-include="\'common/config/angular-busy/angular-busy.html\'"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <small class="help-block">Enter the ID of the buyer user group that will approve these orders.</small>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer" >\r\n        <button type="submit" class="btn btn-block btn-primary" cg-busy="approvalRuleEditModal.loading">Update</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/approvalRules/templates/approvalRules.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Approval Rules\r\n        </h3>\r\n        <!--====== CREATE ======-->\r\n        <div class="l-page-header__btns" oc-if-roles="ApprovalRuleAdmin">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="approvalRules.createApprovalRule()"><i class="fa fa-plus-circle"></i>\r\n                New Approval Rule\r\n            </button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH ======-->\r\n    <div ng-if="approvalRules.list.Items.length || (!approvalRules.list.Items.length && approvalRules.searchResults)">\r\n        <form name="approvalRules.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="approvalRules.search()" ng-model-options="{debounce:1000}" placeholder="Search approval rules..." ng-model="approvalRules.parameters.search" class="form-control">\r\n                    <span ng-if="approvalRules.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="approvalRules.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="approvalRules.searchLoading">\r\n        <div class="no-matches" ng-if="!approvalRules.list.Items.length">\r\n            <b ng-if="approvalRules.searchResults">No matches found.</b>\r\n            <b ng-if="!approvalRules.searchResults">This buyer organization does not have any approval rules.</b>\r\n        </div>\r\n        <div ng-if="approvalRules.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6">\r\n                    <button ng-if="approvalRules.selectedCount" class="btn btn-danger btn-xs" ng-click="approvalRules.deleteSelected()">\r\n                        <i class="fa fa-trash"></i> Delete {{approvalRules.selectedCount == 1 ? "Buyer User" : (approvalRules.selectedCount + " Buyer Users")}}\r\n                    </button>\r\n                </div>\r\n                <div class="col-xs-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? approvalRules.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        approvalRules.list.Meta.ItemRange[1] + \' of \' + approvalRules.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-approvalrule-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col oc-if-roles="ApprovalRuleAdmin">\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th ng-click="approvalRules.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="approvalRules.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="approvalRules.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="approvalRules.updateSort(\'Name\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="approvalRules.parameters.sortBy == \'Name\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="approvalRules.parameters.sortBy == \'!Name\'"></i>\r\n                        </th>\r\n                        <th ng-click="approvalRules.updateSort(\'ApprovingGroupID\')">\r\n                            Approving Group\r\n                            <i class="fa fa-caret-down" ng-show="approvalRules.parameters.sortBy == \'ApprovingGroupID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="approvalRules.parameters.sortBy == \'!ApprovingGroupID\'"></i>\r\n                        </th>\r\n                        <th oc-if-roles="ApprovalRuleAdmin"></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="approvalRule in approvalRules.list.Items">\r\n                        <td>{{approvalRule.ID}}</td>\r\n                        <td><a href="" ng-click="approvalRules.editApprovalRule(this)">{{approvalRule.Name}}</a></td>\r\n                        <td><a href="" ui-sref="userGroup({usergroupid:approvalRule.ApprovingGroupID})">{{approvalRule.ApprovingGroupID}}</a></td>\r\n                        <td oc-if-roles="ApprovalRuleAdmin">\r\n                            <button class="btn btn-danger btn-xs btn-block" ng-click="approvalRules.deleteApprovalRule(this)"><i class="fa fa-trash-o"></i><span class="hidden-xs"> Delete</span></button>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                ng-if="approvalRules.list.Meta.TotalPages > 1"\r\n                total-items="approvalRules.list.Meta.TotalCount"\r\n                items-per-page="approvalRules.list.Meta.PageSize"\r\n                max-size="5"\r\n                boundary-links="approvalRules.list.Meta.TotalPages > 5"\r\n                ng-model="approvalRules.list.Meta.Page"\r\n                ng-change="approvalRules.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="approvalRules.list.Meta.Page < approvalRules.list.Meta.TotalPages"\r\n                    ng-click="approvalRules.loadMore()">Load More</button>\r\n        </div>\r\n    </div>\r\n\r\n</article>'),
$templateCache.put("buyerManagement/buyer/templates/buyer.html",'<div class="c-jumbotron">\r\n    <div class="container container-smooth">\r\n        <ul class="breadcrumb">\r\n            <li><a ui-sref="buyers">Buyers</a></li>\r\n            <li ><a ui-sref="buyer">{{buyer.selectedBuyer.Name}}</a></li>\r\n        </ul>\r\n        <div class="l-page-header l-page-header-xs">\r\n            <div class="l-page-header__img" ng-if="buyer.selectedBuyer.xp && buyer.selectedBuyer.xp.image && buyer.selectedBuyer.xp.image.URL">\r\n                <figure class="c-logo-display">\r\n                    <div role="img" ng-style="{\'background-image\':\'url(\\\'\' + buyer.selectedBuyer.xp.image.URL + \'\\\')\'}"></div>\r\n                </figure>\r\n            </div>\r\n            <h3 class="l-page-header__title">\r\n                <small class="text-muted">Buyer Organization</small> <br>\r\n                {{buyer.selectedBuyer.Name}}\r\n            </h3>\r\n        </div>\r\n        <oc-responsive-tabs nav-items="buyer.navigationItems"></oc-responsive-tabs>\r\n    </div>\r\n</div>\r\n<br>\r\n<article class="container container-smooth">\r\n    <div ui-view cg-busy="application.stateLoading(\'buyer\')">\r\n        <div class="row">\r\n            <div class="col-sm-7 col-md-6" oc-readonly-roles="BuyerAdmin">\r\n                <form ng-submit="buyer.updateBuyer()" class="form-horizontal" name="buyer.settingsForm" novalidate autocomplete="off">\r\n                    <fieldset class="form-group">\r\n                        <label for="buyerIDInput" class="control-label col-sm-3">Buyer ID</label>\r\n                        <div class="col-sm-9">\r\n                            <input id="buyerIDInput" name="buyerIDinput" ng-change="buyer.updateValidity()" type="text" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)"\r\n                                pattern-err-type="ID_Name" class="form-control" ng-model="buyer.settings.ID" required/>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <label for="buyerNameInput" class="control-label col-sm-3">Name</label>\r\n                        <div class="col-sm-9">\r\n                            <input id="buyerNameInput" name="buyerNameinput" type="text" ng-model="buyer.settings.Name" class="form-control" required>\r\n                        </div>\r\n                    </fieldset>\r\n\r\n                    <!-- Typeahead Result Template -->\r\n                    <script type="text/ng-template" id="oc-catalog-result.html">\r\n                        <a href tabindex="-1" ng-attr-title="{{match.label}}">\r\n                            <span ng-bind-html="\'<b>\' + (match.model.Name | uibTypeaheadHighlight:query) + \'</b>\' + \'<br/><small>\' + (match.model.ID | uibTypeaheadHighlight:query) + \'</small>\'"></span>\r\n                        </a>\r\n                    </script>\r\n                    <fieldset class="form-group">\r\n                        <label for="SelectedDefaultCatalog" class="control-label col-sm-3">Default Catalog</label>\r\n                        <div class="col-sm-9">\r\n                            <div class="c-typeahead">\r\n                                <input placeholder="Select a catalog" class="form-control" id="SelectedDefaultCatalog" name="SelectedDefaultCatalog" type="text"\r\n                                    ng-model="buyer.settings.SelectedDefaultCatalog" required ng-model-options="{debounce:300}"\r\n                                    typeahead-min-length="0" typeahead-append-to="\'.c-typeahead__results\'" typeahead-no-results="buyer.noCatalogResults"\r\n                                    typeahead-loading="buyer.catalogsLoading" typeahead-template-url="oc-catalog-result.html"\r\n                                    uib-typeahead="catalog as catalog.Name for catalog in buyer.searchCatalogs($viewValue)">\r\n                                <div class="c-typeahead__results">\r\n                                    <div class="c-typeahead__results--empty" ng-if="buyer.noCatalogResults">\r\n                                        <span>No matches found</span>\r\n                                    </div>\r\n                                    <div class="c-typeahead__results--loading" ng-if="buyer.catalogsLoading">\r\n                                        <div ng-include="\'common/config/angular-busy/angular-busy.html\'"></div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </fieldset>\r\n\r\n                    <fieldset class="form-group">\r\n                        <label for="orderCloudUpload" class="col-sm-3 control-label">Logo</label>\r\n                        <div class="col-sm-9">\r\n                            <oc-file-upload model="buyer.settings" keyname="logo" extensions="jpg, png, gif, jpeg, tiff"></oc-file-upload>\r\n                        </div>\r\n                    </fieldset>\r\n                    <div class="form-group">\r\n                        <div class="col-sm-offset-3 col-sm-9">\r\n                            <div class="checkbox">\r\n                                <label for="buyerActiveCheckbox">\r\n                                    <input id="buyerActiveCheckbox" name="buyerActiveCheckbox" type="checkbox" ng-model="buyer.settings.Active"/>\r\n                                    Active\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="col-sm-offset-3 col-sm-9">\r\n                            <button class="btn btn-block btn-primary" cg-busy="buyer.loading" ng-disabled="buyer.settingsForm.$invalid" type="submit">Save Changes</button>\r\n                        </div>\r\n                        <div class="col-sm-offset-3 col-sm-9" oc-if-roles="BuyerAdmin">\r\n                            <hr>\r\n                            <button class="btn btn-block btn-danger" type="button" ng-click="buyer.deleteBuyer()"><i class="fa fa-trash-o"></i> Delete Buyer Organization</button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</article>'),$templateCache.put("buyerManagement/buyers/templates/buyerCreate.modal.html",'<form name="buyerCreateModal.form" class="form-horizontal" ng-submit="buyerCreateModal.submit()" novalidate autocomplete="off">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="buyerCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Buyer Organization</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label for="buyerID" class="control-label col-sm-3">Buyer ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="buyerID" name="ID" type="text" ng-change="buyerCreateModal.updateValidity(\'BuyerID\')" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)"\r\n                    pattern-err-type="ID_Name" class="form-control" ng-model="buyerCreateModal.buyer.ID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="buyerName" class="control-label col-sm-3">Buyer Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="buyerName" name="Name" type="text" ng-model="buyerCreateModal.buyer.Name" class="form-control" required>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <div class="col-sm-offset-3 col-sm-9">\r\n                <div class="checkbox">\r\n                    <label for="buyerActiveCheckbox">\r\n                        <input id="buyerActiveCheckbox" name="Active" type="checkbox" ng-model="buyerCreateModal.buyer.Active"/>\r\n                        Active\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n        <hr>\r\n        <fieldset class="form-group">\r\n            <label class="control-label col-sm-3">Default Catalog</label>\r\n            <div class="col-sm-9">\r\n                <div class="radio">\r\n                    <label for="CreateNew">\r\n                        <input type="radio" id="CreateNew" ng-model="buyerCreateModal.buyer.UseExistingCatalog" ng-value="false"> Create New Catalog\r\n                    </label>\r\n                </div>\r\n                <div class="radio">\r\n                    <label for="UseExisting">\r\n                        <input type="radio" id="UseExisting" ng-model="buyerCreateModal.buyer.UseExistingCatalog" ng-value="true"> Use Existing Catalog\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n\r\n        <!-- Typeahead Result Template -->\r\n        <script type="text/ng-template" id="oc-catalog-result.html">\r\n            <a href tabindex="-1" ng-attr-title="{{match.label}}">\r\n                <span ng-bind-html="\'<b>\' + (match.model.Name | uibTypeaheadHighlight:query) + \'</b>\' + \'<br/><small>\' + (match.model.ID | uibTypeaheadHighlight:query) + \'</small>\'"></span>\r\n            </a>\r\n        </script>\r\n        <fieldset class="form-group" ng-if="buyerCreateModal.buyer.UseExistingCatalog">\r\n            <label for="SelectedDefaultCatalog" class="sr-only">Select a Default Catalog</label>\r\n            <div class="col-sm-9 col-sm-offset-3">\r\n                <div class="c-typeahead">\r\n                    <input placeholder="Select a catalog" class="form-control" id="SelectedDefaultCatalog" name="SelectedDefaultCatalog" type="text" ng-model="buyerCreateModal.buyer.SelectedDefaultCatalog" required\r\n                        ng-model-options="{debounce:300}"\r\n                        typeahead-min-length="0"\r\n                        typeahead-append-to="\'.c-typeahead__results\'"\r\n                        typeahead-no-results="buyerCreateModal.noCatalogResults"\r\n                        typeahead-loading="buyerCreateModal.catalogsLoading"\r\n                        typeahead-template-url="oc-catalog-result.html"\r\n                        uib-typeahead="catalog as catalog.Name for catalog in buyerCreateModal.searchCatalogs($viewValue)">\r\n                    <div class="c-typeahead__results">\r\n                        <div class="c-typeahead__results--empty" ng-if="buyerCreateModal.noCatalogResults">\r\n                            <span>No matches found</span>\r\n                        </div>\r\n                        <div class="c-typeahead__results--loading" ng-if="buyerCreateModal.catalogsLoading">\r\n                            <div ng-include="\'common/config/angular-busy/angular-busy.html\'"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        </fieldset>\r\n        <div ng-if="!buyerCreateModal.buyer.UseExistingCatalog">\r\n            <fieldset class="form-group">\r\n                <label for="buyerNewCatalogID" class="control-label col-sm-3">Catalog ID</label>\r\n                <div class="col-sm-9">\r\n                    <input placeholder="(Optional)" id="buyerNewCatalogID" ng-change="buyerCreateModal.updateValidity(\'CatalogID\')" pattern="([A-Za-z0-9\\-\\_]+)"\r\n                    pattern-err-type="ID_Name" name="NewCatalogID" type="text" ng-model="buyerCreateModal.defaultCatalog.ID"\r\n                        class="form-control">\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="buyerNewCatalogName" class="control-label col-sm-3">Catalog Name</label>\r\n                <div class="col-sm-9">\r\n                    <input id="buyerNewCatalogName" name="NewCatalogName" type="text" ng-model="buyerCreateModal.defaultCatalog.Name"\r\n                        class="form-control" required>\r\n                </div>\r\n            </fieldset>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-block btn-primary" ng-disabled="buyerCreateModal.form.$invalid" cg-busy="buyerCreateModal.loading">Submit</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/buyers/templates/buyers.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Buyer Organizations\r\n        </h3>\r\n        <!--====== CREATE ======-->\r\n        <div class="l-page-header__btns">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="buyers.createBuyer()"><i class="fa fa-plus-circle"></i>\r\n                New Buyer\r\n            </button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH ======-->\r\n    <div ng-if="buyers.list.Items.length || (!buyers.list.Items.length && buyers.searchResults)">\r\n        <form name="buyers.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="buyers.search()" ng-model-options="{debounce:1000}" placeholder="Search buyers..." ng-model="buyers.parameters.search" class="form-control">\r\n                    <span ng-if="buyers.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="buyers.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear Search</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="buyers.searchLoading">\r\n        <div class="no-matches" ng-if="!buyers.list.Items.length">\r\n            <b ng-if="buyers.searchResults">No matches found.</b>\r\n            <b ng-if="!buyers.searchResults">This seller organization does not have any buyer organizations.</b>\r\n        </div>\r\n        <div ng-if="buyers.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6">\r\n                    <button ng-if="buyers.selectedCount" class="btn btn-danger btn-xs" ng-click="buyers.deleteSelected()">\r\n                        <i class="fa fa-trash"></i> Delete {{buyers.selectedCount == 1 ? "Buyers" : (buyers.selectedCount + " Buyers")}}\r\n                    </button>\r\n                </div>\r\n                <div class="col-xs-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? buyers.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        buyers.list.Meta.ItemRange[1] + \' of \' + buyers.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-buyer-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th ng-click="buyers.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="buyers.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="buyers.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="buyers.updateSort(\'Name\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="buyers.parameters.sortBy == \'Name\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="buyers.parameters.sortBy == \'!Name\'"></i>\r\n                        </th>\r\n                        <th>\r\n                            Active\r\n                        </th>\r\n                        <th></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="buyer in buyers.list.Items">\r\n                        <td>{{buyer.ID}}</td>\r\n                        <td><a href="" ui-sref="buyer({buyerid:buyer.ID})">{{buyer.Name}}</a></td>\r\n                        <td class="text-center">\r\n                            <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':buyer.Active}"></i>\r\n                        </td>\r\n                        <td>\r\n                            <button class="btn btn-danger btn-xs" ng-click="buyers.deleteBuyer(this)"><i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span></button>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                boundary-links="buyers.list.Meta.TotalPages > 5"\r\n                max-size="5"\r\n                total-items="buyers.list.Meta.TotalCount"\r\n                items-per-page="buyers.list.Meta.PageSize"\r\n                ng-model="buyers.list.Meta.Page"\r\n                ng-if="buyers.list.Meta.TotalPages > 1"\r\n                ng-change="buyers.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="buyers.list.Meta.Page < buyers.list.Meta.TotalPages"\r\n                    ng-click="buyers.loadMore()">Load More\r\n            </button>\r\n        </div>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("buyerManagement/costCenters/templates/costCenterCreate.modal.html",'<form name="costCenterCreateModal.form" class="form-horizontal" ng-submit="costCenterCreateModal.submit()" cg-busy="costCenterCreateModal.loading" novalidate>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="costCenterCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Cost Center</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-group">\r\n            <label for="costCenterID" class="col-sm-3 control-label">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="costCenterID" name="ID" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="costCenterCreateModal.costCenter.ID"/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="costCenterName" class="col-sm-3 control-label">Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="costCenterName" name="Name" type="text" class="form-control" ng-model="costCenterCreateModal.costCenter.Name" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="costCenterDescription" class="col-sm-3 control-label">Description</label>\r\n            <div class="col-sm-9">\r\n                <textarea rows="4" id="costCenterDescription" name="Description" placeholder="(Optional)" class="form-control" ng-model="costCenterCreateModal.costCenter.Description"></textarea>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="costCenterCreateModal.form.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/costCenters/templates/costCenterEdit.modal.html",'<form name="costCenterEditModal.form" class="form-horizontal" ng-submit="costCenterEditModal.submit()" cg-busy="costCenterEditModal.loading" novalidate oc-readonly-roles="CostCenterAdmin">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="costCenterEditModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span> {{costCenterEditModal.costCenterName}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-group">\r\n            <label for="costCenterID" class="col-sm-3 control-label">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="costCenterID" name="ID" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="costCenterEditModal.costCenter.ID"/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="costCenterName" class="col-sm-3 control-label">Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="costCenterName" name="Name" type="text" class="form-control" ng-model="costCenterEditModal.costCenter.Name" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="costCenterDescription" class="col-sm-3 control-label">Description</label>\r\n            <div class="col-sm-9">\r\n                <textarea rows="4" id="costCenterDescription" name="Description" placeholder="(Optional)" class="form-control" ng-model="costCenterEditModal.costCenter.Description"></textarea>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/costCenters/templates/costCenters.html",'<header class="l-page-header">\r\n    <h3 class="l-page-header__title">\r\n        Cost Centers\r\n    </h3>\r\n    <!--====== CREATE ======-->\r\n    <div class="l-page-header__btns" oc-if-roles="CostCenterAdmin">\r\n        <button type="button" class="btn btn-primary btn-block" ng-click="costCenters.createCostCenter()"><i class="fa fa-plus-circle"></i>\r\n            New Cost Center\r\n        </button>\r\n    </div>\r\n</header>\r\n<!--====== SEARCH/FILTERS ======-->\r\n<div ng-if="costCenters.list.Items.length || (!costCenters.list.Items.length && costCenters.searchResults)">\r\n    <form name="costCenters.searchForm" pretty-submit>\r\n        <fieldset class="form-group">\r\n            <div class="input-group">\r\n                <span class="input-group-addon">\r\n                    <i class="fa fa-search"></i>\r\n                </span>\r\n                <input type="search" ng-change="costCenters.search()" ng-model-options="{debounce:1000}" placeholder="Search cost centers..." ng-model="costCenters.parameters.search" class="form-control">\r\n                <span ng-if="costCenters.searchResults" class="input-group-btn">\r\n                    <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="costCenters.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear</span></button>\r\n                </span>\r\n            </div>\r\n        </fieldset>\r\n    </form>\r\n</div>\r\n\r\n<div cg-busy="costCenters.searchLoading">\r\n    <div class="no-matches" ng-if="!costCenters.list.Items.length">\r\n        <b ng-if="costCenters.searchResults">No matches found.</b>\r\n        <b ng-if="!costCenters.searchResults">This buyer organization does not have any cost centers.</b>\r\n    </div>\r\n    <div ng-if="costCenters.list.Items.length">\r\n        <div class="row">\r\n            <div class="col-xs-6">\r\n                <div class="btn-group" ng-if="costCenters.changedAssignments.length">\r\n                    <button class="btn btn-primary btn-xs" ng-click="costCenters.updateAssignments()">\r\n                        Update Assignments\r\n                    </button>\r\n                    <button class="btn btn-default btn-xs" ng-click="costCenters.resetAssignments()">\r\n                        <i class="fa fa-times"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div class="col-xs-6">\r\n                <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? costCenters.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                    costCenters.list.Meta.ItemRange[1] + \' of \' + costCenters.list.Meta.TotalCount + \' results\'}}</p>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default table-responsive">\r\n            <table class="table table-striped table-bordered l-costcenter-table" oc-readonly-roles="CostCenterAdmin">\r\n                <colgroup>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col oc-if-roles="CostCenterAdmin">\r\n                </colgroup>\r\n                <thead>\r\n                <tr>\r\n                    <th class="text-center" ng-click="application.userIsAuthorized([\'CostCenterAdmin\']) ? costCenters.selectAllItems() : angular.noop()">\r\n                        Assign\r\n                    </th>\r\n                    <th ng-click="costCenters.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="costCenters.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="costCenters.parameters.sortBy == \'!ID\'"></i>\r\n                    </th>\r\n                    <th ng-click="costCenters.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="costCenters.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="costCenters.parameters.sortBy == \'!Name\'"></i>\r\n                    </th>\r\n                    <th oc-if-roles="CostCenterAdmin"></th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr ng-repeat="costCenter in costCenters.list.Items">\r\n                    <td class="text-center">\r\n                        <input type="checkbox" ng-model="costCenter.Assigned" ng-change="costCenters.selectItem(this)"/>\r\n                    </td>\r\n                    <td>{{costCenter.ID}}</td>\r\n                    <td><a href="" ng-click="costCenters.editCostCenter(this)">{{costCenter.Name}}</a></td>\r\n                    <td oc-if-roles="CostCenterAdmin">\r\n                        <button class="btn btn-danger btn-xs" type="button" ng-click="costCenters.deleteCostCenter(this)"><i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span></button>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <ul uib-pagination\r\n            class="pagination-sm pull-right hidden-xs"\r\n            boundary-links="costCenters.list.Meta.TotalPages > 5"\r\n            max-size="5"\r\n            total-items="costCenters.list.Meta.TotalCount"\r\n            items-per-page="costCenters.list.Meta.PageSize"\r\n            ng-model="costCenters.list.Meta.Page"\r\n            ng-if="costCenters.list.Meta.TotalPages > 1"\r\n            ng-change="costCenters.pageChanged()">\r\n        </ul>\r\n        <button type="button"\r\n                class="btn btn-default btn-block btn-lg visible-xs"\r\n                ng-show="costCenters.list.Meta.Page < costCenters.list.Meta.TotalPages"\r\n                ng-click="costCenters.loadMore()">Load More\r\n        </button>\r\n    </div>\r\n</div>'),$templateCache.put("buyerManagement/creditCards/templates/creditCardCreate.modal.html",'<form name="creditCardCreateModal.form" class="form-horizontal" ng-submit="creditCardCreateModal.submit()" autocomplete="off" novalidate>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="creditCardCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Credit Card</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="creditCardID">Credit Card ID</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="creditCardID" name="ID" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="creditCardCreateModal.creditCard.ID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="creditCardCardholderName">Cardholder Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="creditCardCardholderName" name="CardholderName" ng-model="creditCardCreateModal.creditCard.CardholderName" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="creditCardCardNumber">Card Number</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="creditCardCardNumber"\r\n                       name="CardNumber" ng-model="creditCardCreateModal.creditCard.CardNumber"\r\n                       payments-validate="card" payments-format="card" payments-type-model="creditCardCreateModal.creditCard.CardType" ng-class="creditCardCreateModal.creditCard.CardType"\r\n                       disable-validation-message required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="creditCardCardCode">Security Code</label>\r\n            <div class="col-sm-9">\r\n                <input type="number" class="form-control" id="creditCardCardCode" name="CardCode" ng-model="creditCardCreateModal.creditCard.CardCode" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" form="creditCardExpirationMonth">Expiration Month</label>\r\n            <div class="col-sm-9">\r\n                <select class="form-control" id="creditCardExpirationMonth" name="ExpirationMonth"\r\n                        ng-model="creditCardCreateModal.creditCard.ExpirationMonth" ng-options="month.string as month.string for month in creditCardCreateModal.creditCardInfo.ExpirationMonths" required></select>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" form="creditCardExpirationYear">Expiration Year</label>\r\n            <div class="col-sm-9">\r\n                <select class="form-control" id="creditCardExpirationYear" name="ExpirationYear"\r\n                        ng-model="creditCardCreateModal.creditCard.ExpirationYear" ng-options="year as year for year in creditCardCreateModal.creditCardInfo.ExpirationYears" required></select>\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" cg-busy="addressCreateModal.loading" ng-disabled="creditCardCreateModal.form.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/creditCards/templates/creditCardEdit.modal.html",'<form name="creditCardEditModal.form" class="form-horizontal" ng-submit="creditCardEditModal.submit()" autocomplete="off" novalidate oc-readonly-roles="CreditCardAdmin">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="creditCardEditModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span> Card ending in {{creditCardEditModal.creditCard.PartialAccountNumber}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="creditCardID">Credit Card ID</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="creditCardID" name="ID" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="creditCardEditModal.creditCard.UpdatedCreditCardID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" for="creditCardCardholderName">Cardholder Name</label>\r\n            <div class="col-sm-9">\r\n                <input type="text" class="form-control" id="creditCardCardholderName" name="CardholderName" ng-model="creditCardEditModal.creditCard.CardholderName" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" form="creditCardExpirationMonth">Expiration Month</label>\r\n            <div class="col-sm-9">\r\n                <select class="form-control" id="creditCardExpirationMonth" name="ExpirationMonth"\r\n                        ng-model="creditCardEditModal.creditCard.ExpirationMonth" ng-options="month.string as month.string for month in creditCardEditModal.creditCardInfo.ExpirationMonths" required></select>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label" form="creditCardExpirationYear">Expiration Year</label>\r\n            <div class="col-sm-9">\r\n                <select class="form-control" id="creditCardExpirationYear" name="ExpirationYear"\r\n                        ng-model="creditCardEditModal.creditCard.ExpirationYear" ng-options="year as year for year in creditCardEditModal.creditCardInfo.ExpirationYears" required></select>\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" cg-busy="creditCardEditModal.loading">Save</button>\r\n    </div>\r\n</form>'),
$templateCache.put("buyerManagement/creditCards/templates/creditCards.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Credit Cards\r\n        </h3>\r\n        <!--====== CREATE ======-->\r\n        <div class="l-page-header__btns" oc-if-roles="CreditCardAdmin">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="creditCards.createCreditCard()"><i class="fa fa-plus-circle"></i>\r\n                New Credit Card\r\n            </button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH ======-->\r\n    <div ng-if="costCecreditCardsnters.list.Items.length || (!creditCards.list.Items.length && creditCards.searchResults)">\r\n        <form name="creditCards.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon"><i class="fa fa-search"></i></span>\r\n                    <input type="search" ng-change="creditCards.search()" ng-model-options="{debounce:1000}" placeholder="Search credit cards..." ng-model="creditCards.parameters.search" class="form-control">\r\n                    <span ng-if="creditCards.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="creditCards.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear Search</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="creditCards.searchLoading">\r\n        <div class="no-matches" ng-if="!creditCards.list.Items.length">\r\n            <b ng-if="creditCards.searchResults">No matches found.</b>\r\n            <b ng-if="!creditCards.searchResults">This buyer organization does not have any credit cards.</b>\r\n        </div>\r\n        <div ng-if="creditCards.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6">\r\n                    <button ng-if="creditCards.changedAssignments.length" ng-click="creditCards.updateAssignments()" class="btn btn-primary btn-xs">\r\n                        Update Assignments\r\n                    </button>\r\n                </div>\r\n                <div class="col-xs-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? creditCards.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        creditCards.list.Meta.ItemRange[1] + \' of \' + creditCards.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-address-table" oc-readonly-roles="CreditCardAdmin">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col width="10%">\r\n                        <col oc-if-roles="CreditCardAdmin">\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th class="text-center" ng-click="application.userIsAuthorized([\'CreditCardAdmin\']) ? creditCards.selectAllItems(\'billing\') : angular.noop()">\r\n                            Assigned\r\n                        </th>\r\n                        <th ng-click="creditCards.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="creditCards.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="creditCards.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="creditCards.updateSort(\'CardholderName\')">\r\n                            Cardholder Name\r\n                            <i class="fa fa-caret-down" ng-show="creditCards.parameters.sortBy == \'CardholderName\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="creditCards.parameters.sortBy == \'!CardholderName\'"></i>\r\n                        </th>\r\n                        <th>\r\n                            Details\r\n                        </th>\r\n                        <th>\r\n                            Exp. Date\r\n                        </th>\r\n                        <th oc-if-roles="CreditCardAdmin"></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="creditCard in creditCards.list.Items">\r\n                        <td class="text-center">\r\n                            <input type="checkbox" ng-model="creditCard.Assigned" ng-change="creditCards.selectItem(this, \'assigned\')" />\r\n                        </td>\r\n                        <td>\r\n                            <a href="" ng-click="creditCards.editCreditCard(this)">{{creditCard.ID}}</a>\r\n                        </td>\r\n                        <td>\r\n                            {{creditCard.CardholderName}}\r\n                        </td>\r\n                        <td>\r\n                            <span><i class="fa fa-lg {{creditCard.CardType | faCreditCard}}"></i></span>\r\n                            <span>{{\'XXXX-XXXX-XXXX-\' + creditCard.PartialAccountNumber}}</span>\r\n                        </td>\r\n                        <td>\r\n                            {{creditCard.ExpirationDate | date:\'MM/yyyy\'}}\r\n                        </td>\r\n                        <td oc-if-roles="CreditCardAdmin">\r\n                            <button type="button" class="btn btn-danger btn-block btn-xs" ng-click="creditCards.deleteCreditCard(this)"><i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span></button>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                boundary-links="creditCards.list.Meta.TotalPages > 5"\r\n                max-size="5"\r\n                total-items="creditCards.list.Meta.TotalCount"\r\n                items-per-page="creditCards.list.Meta.PageSize"\r\n                ng-model="creditCards.list.Meta.Page"\r\n                ng-if="creditCards.list.Meta.TotalPages > 1"\r\n                ng-change="creditCards.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="creditCards.list.Meta.Page < creditCards.list.Meta.TotalPages"\r\n                    ng-click="creditCards.loadMore()">Load More\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n</article>'),$templateCache.put("buyerManagement/promotions/templates/promotionCreate.modal.html",'<form name="promotionCreateModal.form" ng-submit="promotionCreateModal.submit()" cg-busy="promotionCreateModal.loading" novalidate>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="promotionCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Promotion</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-horizontal">\r\n            <div class="form-group">\r\n                <label for="promotionID" class="col-sm-3 control-label">ID</label>\r\n                <div class="col-sm-9">\r\n                    <input id="promotionID" name="ID" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="promotionCreateModal.promotion.ID"/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="promotionName" class="col-sm-3 control-label">Name</label>\r\n                <div class="col-sm-9">\r\n                    <input id="promotionName" name="Name" type="text" placeholder="(Optional)" class="form-control" ng-model="promotionCreateModal.promotion.Name"/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="promotionDescription" class="control-label col-sm-3">Description</label>\r\n                <div class="col-sm-9">\r\n                    <textarea rows="2" id="promotionDescription" name="Description" placeholder="(Optional) Describe your promotion..." type="text" class="form-control" ng-model="promotionCreateModal.promotion.Description"></textarea>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="promotionFinePrint" class="control-label col-sm-3">Fine Print</label>\r\n                <div class="col-sm-9">\r\n                    <textarea rows="2" id="promotionFinePrint" name="FinePrint" placeholder="(Optional)" type="text" class="form-control" ng-model="promotionCreateModal.promotion.FinePrint"></textarea>\r\n                </div>\r\n            </div>\r\n            <hr>\r\n            <div class="form-group">\r\n                <label for="promotionCode" class="col-sm-3 control-label">Code</label>\r\n                <div class="col-sm-9">\r\n                    <input id="promotionCode" name="Code" type="text" class="form-control" ng-model="promotionCreateModal.promotion.Code" required/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="col-sm-offset-3 col-sm-9">\r\n                    <div class="checkbox">\r\n                        <label for="promotionCanCombine">\r\n                            <input id="promotionCanCombine" name="CanCombine" type="checkbox" ng-model="promotionCreateModal.promotion.CanCombine"/>\r\n                            Can combine with other promotions\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="promotionRedemptionLimit" class="col-sm-3 control-label">Redemption Limit</label>\r\n                <div class="col-sm-9">\r\n                    <div class="row">\r\n                        <div class="col-xs-6">\r\n                            <input id="promotionRedemptionLimit" name="RedemptionLimit" type="number" placeholder="(Optional)" step="any" min="0" class="form-control" ng-model="promotionCreateModal.promotion.RedemptionLimit"/>\r\n                        </div>\r\n                        <div class="col-xs-6">\r\n                            <div class="input-group">\r\n                                <input id="promotionRedemptionLimitPerUser" name="RedemptionLimitPerUser" type="number" placeholder="(Optional)" step="any" min="0" class="form-control" ng-model="promotionCreateModal.promotion.RedemptionLimitPerUser"/>\r\n                                <div class="input-group-addon">\r\n                                    Per User\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="promotionStartDate" class="col-sm-3 control-label">Start Date</label>\r\n                <div class="col-sm-9">\r\n                    <input id="promotionStartDate" ng-if="application.isTouchDevice" class="form-control"  type="date" ng-model="promotionCreateModal.promotion.StartDate"/>\r\n                    <input id="promotionStartDate" ng-if="!application.isTouchDevice" type="text" ng-click="open1 = !open1" is-open="open1" uib-datepicker-popup="MM/dd/yyyy" class="form-control" ng-model="promotionCreateModal.promotion.StartDate">\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="promotionExpirationDate" class="col-sm-3 control-label">Expiration Date</label>\r\n                <div class="col-sm-9">\r\n                    <input id="promotionExpirationDate" ng-if="application.isTouchDevice" class="form-control"  type="date" ng-model="promotionCreateModal.promotion.ExpirationDate"/>\r\n                    <input id="promotionExpirationDate" ng-if="!application.isTouchDevice" type="text" ng-click="open2 = !open2" is-open="open2" uib-datepicker-popup="MM/dd/yyyy" class="form-control" ng-model="promotionCreateModal.promotion.ExpirationDate">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <hr>\r\n        <div class="form-group">\r\n            <label for="EligibleExpression">Eligible Expression</label>\r\n            <textarea rows="2" id="EligibleExpression" name="EligibleExpression" type="text" class="form-control" ng-model="promotionCreateModal.promotion.EligibleExpression" required></textarea>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="ValueExpression">Value Expression</label>\r\n            <textarea rows="2" id="ValueExpression" name="ValueExpression" type="text" class="form-control" ng-model="promotionCreateModal.promotion.ValueExpression" required></textarea>\r\n        </div>\r\n\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="promotionCreateModal.form.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/promotions/templates/promotionEdit.modal.html",'<form name="promotionEditModal.form" ng-submit="promotionEditModal.submit()" cg-busy="promotionEditModal.loading" novalidate oc-readonly-roles="PromotionAdmin">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="promotionEditModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span>{{promotionEditModal.promotionName}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-horizontal">\r\n            <div class="form-group">\r\n                <label for="promotionID" class="col-sm-3 control-label">ID</label>\r\n                <div class="col-sm-9">\r\n                    <input id="promotionID" name="ID" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="promotionEditModal.promotion.ID"/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="promotionName" class="col-sm-3 control-label">Name</label>\r\n                <div class="col-sm-9">\r\n                    <input id="promotionName" name="Name" type="text" placeholder="(Optional)" class="form-control" ng-model="promotionEditModal.promotion.Name"/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="promotionDescription" class="control-label col-sm-3">Description</label>\r\n                <div class="col-sm-9">\r\n                    <textarea rows="2" id="promotionDescription" name="Description" placeholder="(Optional) Describe your promotion..." type="text" class="form-control" ng-model="promotionEditModal.promotion.Description"></textarea>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="promotionFinePrint" class="control-label col-sm-3">Fine Print</label>\r\n                <div class="col-sm-9">\r\n                    <textarea rows="2" id="promotionFinePrint" name="FinePrint" placeholder="(Optional)" type="text" class="form-control" ng-model="promotionEditModal.promotion.FinePrint"></textarea>\r\n                </div>\r\n            </div>\r\n            <hr>\r\n            <div class="form-group">\r\n                <label for="promotionCode" class="col-sm-3 control-label">Code</label>\r\n                <div class="col-sm-9">\r\n                    <input id="promotionCode" name="Code" type="text" class="form-control" ng-model="promotionEditModal.promotion.Code" required/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="col-sm-offset-3 col-sm-9">\r\n                    <div class="checkbox">\r\n                        <label for="promotionCanCombine">\r\n                            <input id="promotionCanCombine" name="CanCombine" type="checkbox" ng-model="promotionEditModal.promotion.CanCombine"/>\r\n                            Can combine with other promotions\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="promotionRedemptionLimit" class="col-sm-3 control-label">Redemption Limit</label>\r\n                <div class="col-sm-9">\r\n                    <div class="row">\r\n                        <div class="col-xs-6">\r\n                            <input id="promotionRedemptionLimit" name="RedemptionLimit" type="number" placeholder="(Optional)" step="any" min="0" class="form-control" ng-model="promotionEditModal.promotion.RedemptionLimit"/>\r\n                        </div>\r\n                        <div class="col-xs-6">\r\n                            <div class="input-group">\r\n                                <input id="promotionRedemptionLimitPerUser" name="RedemptionLimitPerUser" type="number" placeholder="(Optional)" step="any" min="0" class="form-control" ng-model="promotionEditModal.promotion.RedemptionLimitPerUser"/>\r\n                                <div class="input-group-addon">\r\n                                    Per User\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="promotionStartDate" class="col-sm-3 control-label">Start Date</label>\r\n                <div class="col-sm-9">\r\n                    <input id="promotionStartDate" ng-if="application.isTouchDevice" class="form-control"  type="date" ng-model="promotionEditModal.promotion.StartDate"/>\r\n                    <input id="promotionStartDate" ng-if="!application.isTouchDevice" type="text" ng-click="open1 = !open1" is-open="open1" uib-datepicker-popup="MM/dd/yyyy" class="form-control" ng-model="promotionEditModal.promotion.StartDate">\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="promotionExpirationDate" class="col-sm-3 control-label">Expiration Date</label>\r\n                <div class="col-sm-9">\r\n                    <input id="promotionExpirationDate" ng-if="application.isTouchDevice" class="form-control"  type="date" ng-model="promotionEditModal.promotion.ExpirationDate"/>\r\n                    <input id="promotionExpirationDate" ng-if="!application.isTouchDevice" type="text" ng-click="open2 = !open2" is-open="open2" uib-datepicker-popup="MM/dd/yyyy" class="form-control" ng-model="promotionEditModal.promotion.ExpirationDate">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <hr>\r\n        <div class="form-group">\r\n            <label for="EligibleExpression">Eligible Expression</label>\r\n            <textarea rows="2" id="EligibleExpression" name="EligibleExpression" type="text" class="form-control" ng-model="promotionEditModal.promotion.EligibleExpression" required></textarea>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="ValueExpression">Value Expression</label>\r\n            <textarea rows="2" id="ValueExpression" name="ValueExpression" type="text" class="form-control" ng-model="promotionEditModal.promotion.ValueExpression" required></textarea>\r\n        </div>\r\n\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/promotions/templates/promotions.html",'<header class="l-page-header">\r\n    <h3 class="l-page-header__title">\r\n        Promotions\r\n    </h3>\r\n    <!--====== CREATE ======-->\r\n    <div class="l-page-header__btns" oc-if-roles="PromotionAdmin">\r\n        <button type="button" class="btn btn-primary btn-block" ng-click="promotions.createPromotion()"><i class="fa fa-plus-circle"></i>\r\n            New Promotion\r\n        </button>\r\n    </div>\r\n</header>\r\n<div class="alert alert-info">\r\n    Promotions are unique in that they are shared by all buyer organizations.\r\n    Any changes made to promotions under <em>{{buyer.settings.Name}}</em> will affect the promotion details for <b>all other buyer organizations</b>.\r\n    Assignments are still unique to each buyer.\r\n</div>\r\n<!--====== SEARCH/FILTERS ======-->\r\n<div ng-if="promotions.list.Items.length || (!promotions.list.Items.length && promotions.searchResults)">\r\n    <form name="promotions.searchForm" pretty-submit>\r\n        <fieldset class="form-group">\r\n            <div class="input-group">\r\n                <span class="input-group-addon">\r\n                    <i class="fa fa-search"></i>\r\n                </span>\r\n                <input type="search" ng-change="promotions.search()" ng-model-options="{debounce:1000}" placeholder="Search promotions..." ng-model="promotions.parameters.search" class="form-control">\r\n                <span ng-if="promotions.searchResults" class="input-group-btn">\r\n                    <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="promotions.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear</span></button>\r\n                </span>\r\n            </div>\r\n        </fieldset>\r\n    </form>\r\n</div>\r\n\r\n<div cg-busy="promotions.searchLoading">\r\n    <div class="no-matches" ng-if="!promotions.list.Items.length">\r\n        <b ng-if="promotions.searchResults">No matches found.</b>\r\n        <b ng-if="!promotions.searchResults">This seller organization does not have any available promotions.</b>\r\n    </div>\r\n    <div ng-if="promotions.list.Items.length">\r\n        <div class="row">\r\n            <div class="col-xs-6">\r\n                <div class="btn-group" ng-if="promotions.changedAssignments.length">\r\n                    <button class="btn btn-primary btn-xs" ng-click="promotions.updateAssignments()">\r\n                        Update Assignments\r\n                    </button>\r\n                    <button class="btn btn-default btn-xs" ng-click="promotions.resetAssignments()">\r\n                        <i class="fa fa-times"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div class="col-xs-6">\r\n                <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? promotions.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                    promotions.list.Meta.ItemRange[1] + \' of \' + promotions.list.Meta.TotalCount + \' results\'}}</p>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default table-responsive">\r\n            <table class="table table-striped table-bordered l-promotion-table" oc-readonly-roles="PromotionAdmin">\r\n                <colgroup>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col oc-if-roles="PromotionAdmin">\r\n                </colgroup>\r\n                <thead>\r\n                <tr>\r\n                    <th class="text-center" ng-click="application.userIsAuthorized([\'PromotionAdmin\']) ? promotions.selectAllItems() : angular.noop()">\r\n                        Assign\r\n                    </th>\r\n                    <th ng-click="promotions.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="promotions.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="promotions.parameters.sortBy == \'!ID\'"></i>\r\n                    </th>\r\n                    <th ng-click="promotions.updateSotr(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="promotions.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="promotions.parameters.sortBy == \'!Name\'"></i>\r\n                    </th>\r\n                    <th ng-click="promotions.updateSort(\'Code\')">\r\n                        Code\r\n                        <i class="fa fa-caret-down" ng-show="promotions.parameters.sortBy == \'Code\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="promotions.parameters.sortBy == \'!Code\'"></i>\r\n                    </th>\r\n                    <th>\r\n                        Start Date\r\n                    </th>\r\n                    <th>\r\n                        Expiration Date\r\n                    </th>\r\n                    <th oc-if-roles="PromotionAdmin"></th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr ng-repeat="promotion in promotions.list.Items">\r\n                    <td class="text-center">\r\n                        <input type="checkbox" ng-model="promotion.Assigned" ng-change="promotions.selectItem(this)"/>\r\n                    </td>\r\n                    <td>{{promotion.ID}}</td>\r\n                    <td>\r\n                        <span ng-if="promotion.Name">{{promotion.Name}}</span>\r\n                        <em class="text-muted" ng-if="!promotion.Name">None</em>\r\n                    </td>\r\n                    <td><a href="" ng-click="promotions.editPromotion(this)">{{promotion.Code}}</a></td>\r\n                    <td>{{promotion.StartDate | date}} <em ng-if="!promotion.StartDate" class="text-muted">None</em></td>\r\n                    <td>{{promotion.ExpirationDate | date}} <em ng-if="!promotion.ExpirationDate" class="text-muted">None</em></td>\r\n                    <td oc-if-roles="PromotionAdmin">\r\n                        <button class="btn btn-danger btn-xs" type="button" ng-click="promotions.deletePromotion(this)"><i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span></button>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <ul uib-pagination\r\n            class="pagination-sm pull-right hidden-xs"\r\n            boundary-links="promotions.list.Meta.TotalPages > 5"\r\n            max-size="5"\r\n            total-items="promotions.list.Meta.TotalCount"\r\n            items-per-page="promotions.list.Meta.PageSize"\r\n            ng-model="promotions.list.Meta.Page"\r\n            ng-if="promotions.list.Meta.TotalPages > 1"\r\n            ng-change="promotions.pageChanged()">\r\n        </ul>\r\n        <button type="button"\r\n                class="btn btn-default btn-block btn-lg visible-xs"\r\n                ng-show="promotions.list.Meta.Page < promotions.list.Meta.TotalPages"\r\n                ng-click="promotions.loadMore()">Load More\r\n        </button>\r\n    </div>\r\n</div>'),$templateCache.put("buyerManagement/spendingAccounts/templates/spendingAccountCreate.modal.html",'<form name="spendingAccountCreateModal.form" class="form-horizontal" ng-submit="spendingAccountCreateModal.submit()" cg-busy="spendingAccountCreateModal.loading" novalidate>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="spendingAccountCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Spending Account</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-group">\r\n            <label for="spendingAccountID" class="col-sm-3 control-label">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="spendingAccountID" name="ID" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="spendingAccountCreateModal.spendingAccount.ID"/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="spendingAccountName" class="col-sm-3 control-label">Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="spendingAccountName" name="Name" type="text" class="form-control" ng-model="spendingAccountCreateModal.spendingAccount.Name" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="spendingAccountStartDate" class="col-sm-3 control-label">Start Date</label>\r\n            <div class="col-sm-9">\r\n                <input id="spendingAccountStartDate" ng-if="application.isTouchDevice" class="form-control"  type="date" ng-model="spendingAccountCreateModal.spendingAccount.StartDate"/>\r\n                <input id="spendingAccountStartDate" ng-if="!application.isTouchDevice" type="text" ng-click="open1 = !open1" is-open="open1" uib-datepicker-popup="MM/dd/yyyy" class="form-control" ng-model="spendingAccountCreateModal.spendingAccount.StartDate">\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="spendingAccountEndDate" class="col-sm-3 control-label">End Date</label>\r\n            <div class="col-sm-9">\r\n                <input id="spendingAccountEndDate" ng-if="application.isTouchDevice" class="form-control"  type="date" ng-model="spendingAccountCreateModal.spendingAccount.EndDate"/>\r\n                <input id="spendingAccountEndDate" ng-if="!application.isTouchDevice" type="text" ng-click="open2 = !open2" is-open="open2" uib-datepicker-popup="MM/dd/yyyy" class="form-control" ng-model="spendingAccountCreateModal.spendingAccount.EndDate">\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="spendingAccountBalance" class="col-sm-3 control-label">Balance</label>\r\n            <div class="col-sm-9">\r\n                <input id="spendingAccountBalance" name="Balance" type="number" step="any" min="0" class="form-control" ng-model="spendingAccountCreateModal.spendingAccount.Balance" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <div class="col-sm-offset-3 col-sm-9">\r\n                <div class="checkbox">\r\n                    <label for="spendingAccountAllowAsPaymentMethod">\r\n                        <input id="spendingAccountAllowAsPaymentMethod" name="AllowAsPaymentMethod" type="checkbox" ng-model="spendingAccountCreateModal.spendingAccount.AllowAsPaymentMethod"/>\r\n                        Allow As Payment Method\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="spendingAccountCreateModal.form.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/spendingAccounts/templates/spendingAccountEdit.modal.html",'<form name="spendingAccountEditModal.form" class="form-horizontal" ng-submit="spendingAccountEditModal.submit()" cg-busy="spendingAccountEditModal.loading" novalidate oc-readonly-roles="SpendingAccountAdmin">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="spendingAccountEditModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span> {{spendingAccountEditModal.spendingAccountName}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-group">\r\n            <label for="spendingAccountID" class="col-sm-3 control-label">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="spendingAccountID" name="ID" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="spendingAccountEditModal.spendingAccount.ID"/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="spendingAccountName" class="col-sm-3 control-label">Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="spendingAccountName" name="Name" type="text" class="form-control" ng-model="spendingAccountEditModal.spendingAccount.Name" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="spendingAccountStartDate" class="col-sm-3 control-label">Start Date</label>\r\n            <div class="col-sm-9">\r\n                <input id="spendingAccountStartDate" ng-if="application.isTouchDevice" class="form-control"  type="date" ng-model="spendingAccountEditModal.spendingAccount.StartDate"/>\r\n                <input id="spendingAccountStartDate" ng-if="!application.isTouchDevice" type="text" ng-click="open1 = !open1" is-open="open1" uib-datepicker-popup="MM/dd/yyyy" class="form-control" ng-model="spendingAccountEditModal.spendingAccount.StartDate">\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="spendingAccountEndDate" class="col-sm-3 control-label">End Date</label>\r\n            <div class="col-sm-9">\r\n                <input id="spendingAccountEndDate" ng-if="application.isTouchDevice" class="form-control"  type="date" ng-model="spendingAccountEditModal.spendingAccount.EndDate"/>\r\n                <input id="spendingAccountEndDate" ng-if="!application.isTouchDevice" type="text" ng-click="open2 = !open2" is-open="open2" uib-datepicker-popup="MM/dd/yyyy" class="form-control" ng-model="spendingAccountEditModal.spendingAccount.EndDate">\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="spendingAccountBalance" class="col-sm-3 control-label">Balance</label>\r\n            <div class="col-sm-9">\r\n                <input id="spendingAccountBalance" name="Balance" type="number" step="any" min="0" class="form-control" ng-model="spendingAccountEditModal.spendingAccount.Balance" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <div class="col-sm-offset-3 col-sm-9">\r\n                <div class="checkbox">\r\n                    <label for="spendingAccountAllowAsPaymentMethod">\r\n                        <input id="spendingAccountAllowAsPaymentMethod" name="AllowAsPaymentMethod" type="checkbox" ng-model="spendingAccountEditModal.spendingAccount.AllowAsPaymentMethod"/>\r\n                        Allow As Payment Method\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block">Save</button>\r\n    </div>\r\n</form>'),
$templateCache.put("buyerManagement/spendingAccounts/templates/spendingAccounts.html",'<header class="l-page-header">\r\n    <h3 class="l-page-header__title">\r\n        Spending Accounts\r\n    </h3>\r\n    <!--====== CREATE ======-->\r\n    <div class="l-page-header__btns" oc-if-roles="SpendingAccountAdmin">\r\n        <button type="button" class="btn btn-primary btn-block" ng-click="spendingAccounts.createSpendingAccount()"><i class="fa fa-plus-circle"></i>\r\n            New Spending Account\r\n        </button>\r\n    </div>\r\n</header>\r\n<!--====== SEARCH/FILTERS ======-->\r\n<div ng-if="spendingAccounts.list.Items.length || (!spendingAccounts.list.Items.length && spendingAccounts.searchResults)">\r\n    <form name="spendingAccounts.searchForm" pretty-submit>\r\n        <fieldset class="form-group">\r\n            <div class="input-group">\r\n                <span class="input-group-addon">\r\n                    <i class="fa fa-search"></i>\r\n                </span>\r\n                <input type="search" ng-change="spendingAccounts.search()" ng-model-options="{debounce:1000}" placeholder="Search spendingAccounts..." ng-model="spendingAccounts.parameters.search" class="form-control">\r\n                <span ng-if="spendingAccounts.searchResults" class="input-group-btn">\r\n                    <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="spendingAccounts.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear</span></button>\r\n                </span>\r\n            </div>\r\n        </fieldset>\r\n    </form>\r\n</div>\r\n\r\n<div cg-busy="spendingAccounts.searchLoading">\r\n    <div class="no-matches" ng-if="!spendingAccounts.list.Items.length">\r\n        <b ng-if="spendingAccounts.searchResults">No matches found.</b>\r\n        <b ng-if="!spendingAccounts.searchResults">This buyer organization does not have any spending accounts.</b>\r\n    </div>\r\n    <div ng-if="spendingAccounts.list.Items.length">\r\n        <div class="row">\r\n            <div class="col-xs-6">\r\n                <div class="btn-group" ng-if="spendingAccounts.changedAssignments.length">\r\n                    <button class="btn btn-primary btn-xs" ng-click="spendingAccounts.updateAssignments()">\r\n                        Update Assignments\r\n                    </button>\r\n                    <button class="btn btn-default btn-xs" ng-click="spendingAccounts.resetAssignments()">\r\n                        <i class="fa fa-times"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div class="col-xs-6">\r\n                <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? spendingAccounts.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                    spendingAccounts.list.Meta.ItemRange[1] + \' of \' + spendingAccounts.list.Meta.TotalCount + \' results\'}}</p>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default table-responsive">\r\n            <table class="table table-striped table-bordered" ng-class="{\'l-spendingaccount-table__usergroup\': spendingAccounts.userGroupID, \'l-spendingaccount-table\': !spendingAccounts.userGroupID}" oc-readonly-roles="SpendingAccountAdmin">\r\n                <colgroup>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col oc-if-roles="SpendingAccountAdmin">\r\n                </colgroup>\r\n                <thead>\r\n                <tr>\r\n                    <th class="text-center" ng-click="application.userIsAuthorized([\'SpendingAccountAdmin\']) ? spendingAccounts.selectAllItems() : angular.noop()">\r\n                        Assign\r\n                    </th>\r\n                    <th ng-click="spendingAccounts.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="spendingAccounts.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="spendingAccounts.parameters.sortBy == \'!ID\'"></i>\r\n                    </th>\r\n                    <th ng-click="spendingAccounts.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="spendingAccounts.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="spendingAccounts.parameters.sortBy == \'!Name\'"></i>\r\n                    </th>\r\n                    <th>\r\n                        Balance\r\n                    </th>\r\n                    <th>\r\n                        Start Date\r\n                    </th>\r\n                    <th>\r\n                        End Date\r\n                    </th>\r\n                    <th oc-if-roles="SpendingAccountAdmin"></th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr ng-repeat="spendingAccount in spendingAccounts.list.Items">\r\n                    <td class="text-center">\r\n                        <input type="checkbox" ng-model="spendingAccount.Assigned" ng-change="spendingAccounts.selectItem(this)"/>\r\n                    </td>\r\n                    <td>{{spendingAccount.ID}}</td>\r\n                    <td><a href="" ng-click="spendingAccounts.editSpendingAccount(this)">{{spendingAccount.Name}}</a></td>\r\n                    <td>{{spendingAccount.Balance | currency}}</td>\r\n                    <td>{{spendingAccount.StartDate | date}} <em ng-if="!spendingAccount.StartDate" class="text-muted">None</em></td>\r\n                    <td>{{spendingAccount.EndDate | date}} <em ng-if="!spendingAccount.EndDate" class="text-muted">None</em></td>\r\n                    <td oc-if-roles="SpendingAccountAdmin">\r\n                        <button class="btn btn-danger btn-xs" type="button" ng-click="spendingAccounts.deleteSpendingAccount(this)"><i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span></button>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <ul uib-pagination\r\n            class="pagination-sm pull-right hidden-xs"\r\n            boundary-links="spendingAccounts.list.Meta.TotalPages > 5"\r\n            max-size="5"\r\n            total-items="spendingAccounts.list.Meta.TotalCount"\r\n            items-per-page="spendingAccounts.list.Meta.PageSize"\r\n            ng-model="spendingAccounts.list.Meta.Page"\r\n            ng-if="spendingAccounts.list.Meta.TotalPages > 1"\r\n            ng-change="spendingAccounts.pageChanged()">\r\n        </ul>\r\n        <button type="button"\r\n                class="btn btn-default btn-block btn-lg visible-xs"\r\n                ng-show="spendingAccounts.list.Meta.Page < spendingAccounts.list.Meta.TotalPages"\r\n                ng-click="spendingAccounts.loadMore()">Load More\r\n        </button>\r\n    </div>\r\n</div>'),$templateCache.put("buyerManagement/userGroups/templates/userGroup.html",'<ul class="breadcrumb">\r\n    <li><a ui-sref="userGroups">User Groups</a></li>\r\n    <li class="active">{{userGroup.group.Name}}</li>\r\n</ul>\r\n<div class="row">\r\n    <div class="col-sm-4 col-lg-3">\r\n        <nav class="navmenu navmenu-inverse navmenu-inline" role="navigation">\r\n            <a href="" class="navmenu-brand">\r\n                <i class="fa fa-bars pull-right visible-xs" ng-click="userGroup.showNav = !userGroup.showNav"></i>\r\n                {{userGroup.group.Name}}\r\n            </a>\r\n            <ul class="nav navmenu-nav" uib-collapse="!userGroup.showNav && (application.$ocMedia(\'max-width:767px\'))">\r\n                <li ng-class="{\'active\':application.$state.is(\'userGroup\')}">\r\n                    <a href="" ui-sref="userGroup"><i class="fa fa-cog"></i> Settings</a>\r\n                </li>                \r\n                <li ui-sref-active="active">\r\n                    <a href="" ui-sref=".permissions"><i class="fa fa-lock"></i> Group Permissions</a>\r\n                </li>\r\n                <li ui-sref-active="active">\r\n                    <a href="" ui-sref="userGroupProducts"><i class="fa fa-cube"></i> Products</a>\r\n                </li>\r\n                <li ng-class="{\'active\':application.$state.is(\'userGroupCatalogs\') || application.$state.includes(\'userGroupCatalog\')}">\r\n                    <a href="" ui-sref="userGroupCatalogs"><i class="fa fa-sitemap"></i> Catalogs</a>\r\n                </li>\r\n                <li ui-sref-active="active" oc-if-roles="BuyerUserRoles">\r\n                    <a href="" ui-sref=".users"><i class="fa fa-user"></i> Users</a>\r\n                </li>\r\n                <li ui-sref-active="active" oc-if-roles="AddressRoles">\r\n                    <a href="" ui-sref=".addresses"><i class="fa fa-map-marker"></i> Addresses</a>\r\n                </li>\r\n                <li ui-sref-active="active" oc-if-roles="CreditCardRoles">\r\n                    <a href="" ui-sref=".creditCards"><i class="fa fa-credit-card"></i> Credit Cards</a>\r\n                </li>\r\n                <li ui-sref-active="active" oc-if-roles="SpendingAccountRoles">\r\n                    <a href="" ui-sref=".spendingAccounts"><i class="fa fa-dollar"></i> Spending Accounts</a>\r\n                </li>\r\n                <li ui-sref-active="active" oc-if-roles="CostCenterRoles">\r\n                    <a href="" ui-sref=".costCenters"><i class="fa fa-asterisk"></i> Cost Centers</a>\r\n                </li>\r\n                <li ui-sref-active="active" oc-if-roles="PromotionRoles">\r\n                    <a href="" ui-sref=".promotions"><i class="fa fa-bullhorn"></i> Promotions</a>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    </div>\r\n    <article class="col-sm-8 col-lg-9" ui-view cg-busy="application.stateLoading(\'userGroup\')">\r\n        <header class="l-page-header">\r\n            <h3 class="l-page-header__title">User Group Settings</h3>\r\n        </header>\r\n        <div class="row">\r\n            <div class="col-sm-9 col-lg-8">\r\n                <form name="userGroup.editForm" class="form-horizontal" ng-submit="userGroup.update()" oc-readonly-roles="UserGroupAdmin">\r\n                    <fieldset class="form-group">\r\n                        <label for="userGroupID" class="col-sm-4 control-label">User Group ID</label>\r\n                        <div class="col-sm-8">\r\n                            <input type="text" id="userGroupID" class="form-control" name="ID" ng-model="userGroup.model.ID" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name">\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <label for="userGroupName" class="col-sm-4 control-label">Name</label>\r\n                        <div class="col-sm-8">\r\n                            <input type="text" id="userGroupName" class="form-control" name="Name" ng-model="userGroup.model.Name" required>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <label for="userGroupDescription" class="col-sm-4 control-label">Description</label>\r\n                        <div class="col-sm-8">\r\n                            <textarea rows="4" id="userGroupDescription" class="form-control" name="Description" ng-model="userGroup.model.Description" placeholder="(Optional)"></textarea>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <div class="col-sm-offset-4 col-sm-8">\r\n                            <button type="submit" class="btn btn-primary btn-block">Update User Group</button>\r\n                        </div>\r\n                    </fieldset>\r\n                    <hr>\r\n                    <button type="button" class="btn btn-danger btn-block" ng-click="userGroup.delete()"><i class="fa fa-trash-o"></i> Delete User Group</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </article>\r\n</div>'),$templateCache.put("buyerManagement/userGroups/templates/userGroupCreate.modal.html",'<form name="userGroupCreateModal.form" class="form-horizontal" ng-submit="userGroupCreateModal.submit()" novalidate>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="userGroupCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New User Group</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-group">\r\n            <label for="UserGroupID" class="control-label col-sm-3">User Group ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="UserGroupID" name="ID" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="userGroupCreateModal.userGroup.ID"/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="UserGroupName" class="control-label col-sm-3">Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="UserGroupName" name="Name" type="text" class="form-control" ng-model="userGroupCreateModal.userGroup.Name" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="UserGroupDescription" class="control-label col-sm-3">Description</label>\r\n            <div class="col-sm-9">\r\n                <textarea rows="4" id="UserGroupDescription" placeholder="Describe this group..." name="Description" type="text" class="form-control" ng-model="userGroupCreateModal.userGroup.Description"></textarea>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="userGroupCreateModal.form.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/userGroups/templates/userGroups.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            User Groups\r\n        </h3>\r\n        <!--====== CREATE ======-->\r\n        <div class="l-page-header__btns" oc-if-roles="UserGroupAdmin">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="userGroups.createGroup()"><i class="fa fa-plus-circle"></i>\r\n                New User Group\r\n            </button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <div ng-if="userGroups.list.Items.length || (!userGroups.list.Items.length && userGroups.searchResults)">\r\n        <form name="userGroups.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="userGroups.search()" ng-model-options="{debounce:1000}" placeholder="Search Users..." ng-model="userGroups.parameters.search" class="form-control">\r\n                    <span ng-if="userGroups.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="userGroups.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="userGroups.searchLoading">\r\n        <div class="no-matches" ng-if="!userGroups.list.Items.length">\r\n            <b ng-if="userGroups.searchResults">No matches found.</b>\r\n            <b ng-if="!userGroups.searchResults">This buyer organization does not have any user groups.</b>\r\n        </div>\r\n        <div ng-if="userGroups.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6">\r\n                    <button ng-if="userGroups.selectedCount" class="btn btn-danger btn-xs" ng-click="userGroups.deleteSelected()">\r\n                        <i class="fa fa-trash"></i> Delete {{userGroups.selectedCount == 1 ? "User Group" : (userGroups.selectedCount + " User Groups")}}\r\n                    </button>\r\n                </div>\r\n                <div class="col-xs-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? userGroups.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        userGroups.list.Meta.ItemRange[1] + \' of \' + userGroups.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-usergroup-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col oc-if-roles="UserGroupAdmin">\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th ng-click="userGroups.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="userGroups.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="userGroups.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="userGroups.updateSort(\'Name\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="userGroups.parameters.sortBy == \'Name\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="userGroups.parameters.sortBy == \'!Name\'"></i>\r\n                        </th>\r\n                        <th>Description</th>\r\n                        <th oc-if-roles="UserGroupAdmin"></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="userGroup in userGroups.list.Items">\r\n                        <td>{{userGroup.ID}}</td>\r\n                        <td>\r\n                            <a href="" ui-sref="userGroup({usergroupid:userGroup.ID})">{{userGroup.Name}}</a>\r\n                        </td>\r\n                        <td>{{userGroup.Description}}</td>\r\n                        <td oc-if-roles="UserGroupAdmin">\r\n                            <button ng-click="userGroups.deleteGroup(this)" class="btn btn-danger btn-xs"><i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span></button>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                boundary-links="userGroups.list.Meta.TotalPages > 5"\r\n                max-size="5"\r\n                total-items="userGroups.list.Meta.TotalCount"\r\n                items-per-page="userGroups.list.Meta.PageSize"\r\n                ng-model="userGroups.list.Meta.Page"\r\n                ng-if="userGroups.list.Meta.TotalPages > 1"\r\n                ng-change="userGroups.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="userGroups.list.Meta.Page < userGroups.list.Meta.TotalPages"\r\n                    ng-click="userGroups.loadMore()">Load More\r\n            </button>\r\n        </div>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("buyerManagement/users/templates/userCreate.modal.html",'<form name="userCreateModal.form" class="form-horizontal" ng-submit="userCreateModal.submit()" novalidate>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="userCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New User</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-group">\r\n            <label for="ID" class="control-label col-sm-3">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="ID" name="ID" type="text" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="userCreateModal.user.ID"/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Username" class="control-label col-sm-3">Username</label>\r\n            <div class="col-sm-9">\r\n                <input id="Username" name="Username" type="text" class="form-control" ng-model="userCreateModal.user.Username" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Password" class="control-label col-sm-3">Password</label>\r\n            <div class="col-sm-9">\r\n                <input id="Password" name="Password" type="password" pattern=\'^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$\' pattern-err-type="customPassword" class="form-control" ng-model="userCreateModal.user.Password" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="FirstName" class="control-label col-sm-3">First Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="FirstName" name="FirstName" type="text" class="form-control" ng-model="userCreateModal.user.FirstName" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="LastName" class="control-label col-sm-3">Last Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="LastName" name="LastName" type="text" class="form-control" ng-model="userCreateModal.user.LastName" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Phone" class="control-label col-sm-3">Phone Number</label>\r\n            <div class="col-sm-9">\r\n                <input id="Phone" name="Phone" placeholder="(Optional)" type="tel" class="form-control" ng-model="userCreateModal.user.Phone" />\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Email" class="control-label col-sm-3">Email Address</label>\r\n            <div class="col-sm-9">\r\n                <input id="Email" name="Email" type="email" class="form-control" ng-model="userCreateModal.user.Email" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <div class="col-sm-offset-3 col-sm-9">\r\n                <div class="checkbox">\r\n                    <label for="Active">\r\n                        <input id="Active" name="Active" type="checkbox" ng-model="userCreateModal.user.Active"/>\r\n                        Active\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-block btn-primary" ng-disabled="userCreateModal.form.$invalid" cg-busy="userCreateModal.loading">Submit</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/users/templates/userEdit.modal.html",'<form name="userEditModal.form" class="form-horizontal" ng-submit="userEditModal.submit()" novalidate ng-disabled="userEditModal.loading" oc-readonly-roles="BuyerUserAdmin">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="userEditModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span>{{userEditModal.fullName || userEditModal.username}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-group">\r\n            <label for="ID" class="control-label col-sm-3">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="ID" name="ID" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="userEditModal.user.ID"/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Name" class="control-label col-sm-3">Username</label>\r\n            <div class="col-sm-9">\r\n                <input id="Name" name="Name" type="text" class="form-control" ng-model="userEditModal.user.Username" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="FirstName" class="control-label col-sm-3">First Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="FirstName" name="FirstName" type="text" class="form-control" ng-model="userEditModal.user.FirstName" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="LastName" class="control-label col-sm-3">Last Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="LastName" name="LastName" type="text" class="form-control" ng-model="userEditModal.user.LastName" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Phone" class="control-label col-sm-3">Phone Number</label>\r\n            <div class="col-sm-9">\r\n                <input id="Phone" name="Phone" type="tel" class="form-control" ng-model="userEditModal.user.Phone" />\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="Email" class="control-label col-sm-3">Email Address</label>\r\n            <div class="col-sm-9">\r\n                <input id="Email" name="Email" type="email" class="form-control" ng-model="userEditModal.user.Email" required/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <div class="col-sm-offset-3 col-sm-9">\r\n                <div class="checkbox">\r\n                    <label for="Active">\r\n                        <input id="Active" name="Active" type="checkbox" ng-model="userEditModal.user.Active"/>\r\n                        Active\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer" >\r\n        <button type="submit" class="btn btn-block btn-primary" cg-busy="userEditModal.loading">Update</button>\r\n    </div>\r\n</form>'),$templateCache.put("buyerManagement/users/templates/userGroupUsers.html",'<header class="l-page-header">\r\n    <h3 class="l-page-header__title">\r\n        Users\r\n    </h3>\r\n    <!--====== CREATE ======-->\r\n    <div class="l-page-header__btns" oc-if-roles="UserGroupAdmin">\r\n        <button type="button" class="btn btn-primary btn-block" ng-click="userGroupUsers.createUser()"><i class="fa fa-plus-circle"></i>\r\n            New User\r\n        </button>\r\n    </div>\r\n</header>\r\n<!--====== SEARCH/FILTERS ======-->\r\n<div ng-if="userGroupUsers.list.Items.length || (!userGroupUsers.list.Items.length && userGroupUsers.searchResults)">\r\n    <form name="userGroupUsers.searchForm" pretty-submit>\r\n        <fieldset class="form-group">\r\n            <div class="input-group">\r\n                <span class="input-group-addon">\r\n                    <i class="fa fa-search"></i>\r\n                </span>\r\n                <input type="search" ng-change="userGroupUsers.search()" ng-model-options="{debounce:1000}" placeholder="Search users..." ng-model="userGroupUsers.parameters.search" class="form-control">\r\n                <span ng-if="userGroupUsers.searchResults" class="input-group-btn">\r\n                    <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="userGroupUsers.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear</span></button>\r\n                </span>\r\n            </div>\r\n        </fieldset>\r\n    </form>\r\n</div>\r\n\r\n<div cg-busy="userGroupUsers.searchLoading">\r\n    <div class="no-matches" ng-if="!userGroupUsers.list.Items.length">\r\n        <b ng-if="users.searchResults">No matches found.</b>\r\n        <b ng-if="!users.searchResults">This buyer organization does not have any users.</b>\r\n    </div>\r\n    <div ng-if="userGroupUsers.list.Items.length">\r\n        <div class="row">\r\n            <div class="col-xs-6">\r\n                <div class="btn-group" ng-if="userGroupUsers.changedAssignments.length">\r\n                    <button class="btn btn-primary btn-xs" ng-click="userGroupUsers.updateAssignments()">\r\n                        Update Assignments\r\n                    </button>\r\n                    <button class="btn btn-default btn-xs" ng-click="userGroupUsers.resetAssignments()">\r\n                        <i class="fa fa-times"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div class="col-xs-6">\r\n                <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? userGroupUsers.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                    userGroupUsers.list.Meta.ItemRange[1] + \' of \' + userGroupUsers.list.Meta.TotalCount + \' results\'}}</p>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default table-responsive">\r\n            <table class="table table-striped table-bordered l-user-table__usergroup" oc-readonly-roles="UserGroupAdmin">\r\n                <colgroup>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col oc-if-roles="UserGroupAdmin">\r\n                </colgroup>\r\n                <thead>\r\n                <tr>\r\n                    <th class="text-center" ng-click="application.userIsAuthorized([\'UserGroupAdmin\']) ? userGroupUsers.selectAllItems() : angular.noop()">\r\n                        Assign\r\n                        <!--<input type="checkbox" ng-model="userGroupUsers.allItemsSelected" ng-change="userGroupUsers.selectAllItems()" />-->\r\n                    </th>\r\n                    <!--<th ng-click="userGroupUsers.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="userGroupUsers.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="userGroupUsers.parameters.sortBy == \'!ID\'"></i>\r\n                    </th>-->\r\n                    <th ng-click="userGroupUsers.updateSort(\'Username\')">\r\n                        Username\r\n                        <i class="fa fa-caret-down" ng-show="userGroupUsers.parameters.sortBy == \'Username\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="userGroupUsers.parameters.sortBy == \'!Username\'"></i>\r\n                    </th>\r\n                    <!--<th ng-click="userGroupUsers.updateSort(\'FirstName\')">\r\n                        First Name\r\n                        <i class="fa fa-caret-down" ng-show="userGroupUsers.parameters.sortBy == \'FirstName\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="userGroupUsers.parameters.sortBy == \'!FirstName\'"></i>\r\n                    </th>\r\n                    <th ng-click="userGroupUsers.updateSort(\'LastName\')">\r\n                        Last Name\r\n                        <i class="fa fa-caret-down" ng-show="userGroupUsers.parameters.sortBy == \'LastName\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="userGroupUsers.parameters.sortBy == \'!LastName\'"></i>\r\n                    </th>-->\r\n                    <th ng-click="userGroupUsers.updateSort(\'Email\')">\r\n                        Email\r\n                        <i class="fa fa-caret-down" ng-show="userGroupUsers.parameters.sortBy == \'Email\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="userGroupUsers.parameters.sortBy == \'!Email\'"></i>\r\n                    </th>\r\n                    <th oc-if-roles="UserGroupAdmin"></th>\r\n                    <!--<th>\r\n                        Active\r\n                    </th>-->\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr ng-repeat="user in userGroupUsers.list.Items">\r\n                    <td class="text-center">\r\n                        <input type="checkbox" ng-model="user.Assigned" ng-change="userGroupUsers.selectItem(this)"/>\r\n                    </td>\r\n                    <!--<td>\r\n                        <a href="">{{user.ID}}</a>\r\n                    </td>-->\r\n                    <td><a href="" ng-click="userGroupUsers.editUser(this)">{{user.Username}}</a></td>\r\n                    <!--<td>{{user.FirstName}}</td>\r\n                    <td>{{user.LastName}}</td>-->\r\n                    <td>{{user.Email}}</td>\r\n                    <td oc-if-roles="UserGroupAdmin">\r\n                        <button class="btn btn-danger btn-xs" type="button" ng-click="userGroupUsers.deleteUser(this)"><i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span></button>\r\n                    </td>\r\n                    <!--<td class="text-center"><i class="fa fa-circle" ng-class="{active:user.Active}"></i></td>-->\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <ul uib-pagination\r\n            class="pagination-sm pull-right hidden-xs"\r\n            boundary-links="userGroupUsers.list.Meta.TotalPages > 5"\r\n            max-size="5"\r\n            total-items="userGroupUsers.list.Meta.TotalCount"\r\n            items-per-page="userGroupUsers.list.Meta.PageSize"\r\n            ng-model="userGroupUsers.list.Meta.Page"\r\n            ng-if="userGroupUsers.list.Meta.TotalPages > 1"\r\n            ng-change="userGroupUsers.pageChanged()">\r\n        </ul>\r\n        <button type="button"\r\n                class="btn btn-default btn-block btn-lg visible-xs"\r\n                ng-show="userGroupUsers.list.Meta.Page < userGroupUsers.list.Meta.TotalPages"\r\n                ng-click="userGroupUsers.loadMore()">Load More\r\n        </button>\r\n    </div>\r\n</div>'),
$templateCache.put("buyerManagement/users/templates/users.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Users\r\n        </h3>\r\n        <!--====== CREATE ======-->\r\n        <div class="l-page-header__btns" oc-if-roles="BuyerUserAdmin">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="users.createUser()"><i class="fa fa-plus-circle"></i>\r\n                New User\r\n            </button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH ======-->\r\n    <div ng-if="users.list.Items.length || (!users.list.Items.length && users.searchResults)">\r\n        <form name="users.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="users.search()" ng-model-options="{debounce:1000}" placeholder="Search users..." ng-model="users.parameters.search" class="form-control">\r\n                    <span ng-if="users.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="users.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="users.searchLoading">\r\n        <div class="no-matches" ng-if="!users.list.Items.length">\r\n            <b ng-if="users.searchResults">No matches found.</b>\r\n            <b ng-if="!users.searchResults">This buyer organization does not have any users.</b>\r\n        </div>\r\n        <div ng-if="users.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6">\r\n                    <button ng-if="users.selectedCount" class="btn btn-danger btn-xs" ng-click="users.deleteSelected()">\r\n                        <i class="fa fa-trash"></i> Delete {{users.selectedCount == 1 ? "Buyer User" : (users.selectedCount + " Buyer Users")}}\r\n                    </button>\r\n                </div>\r\n                <div class="col-xs-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? users.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        users.list.Meta.ItemRange[1] + \' of \' + users.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-user-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col oc-if-roles="BuyerUserAdmin">\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th ng-click="users.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="users.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="users.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="users.updateSort(\'Username\')">\r\n                            Username\r\n                            <i class="fa fa-caret-down" ng-show="users.parameters.sortBy == \'Username\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="users.parameters.sortBy == \'!Username\'"></i>\r\n                        </th>\r\n                        <th ng-click="users.updateSort(\'FirstName\')">\r\n                            First Name\r\n                            <i class="fa fa-caret-down" ng-show="users.parameters.sortBy == \'FirstName\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="users.parameters.sortBy == \'!FirstName\'"></i>\r\n                        </th>\r\n                        <th ng-click="users.updateSort(\'LastName\')">\r\n                            Last Name\r\n                            <i class="fa fa-caret-down" ng-show="users.parameters.sortBy == \'LastName\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="users.parameters.sortBy == \'!LastName\'"></i>\r\n                        </th>\r\n                        <th ng-click="users.updateSort(\'Email\')">\r\n                            Email\r\n                            <i class="fa fa-caret-down" ng-show="users.parameters.sortBy == \'Email\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="users.parameters.sortBy == \'!Email\'"></i>\r\n                        </th>\r\n                        <th>\r\n                            Active\r\n                        </th>\r\n                        <th oc-if-roles="BuyerUserAdmin"></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="user in users.list.Items">\r\n                        <td>{{user.ID}}</td>\r\n                        <td><a href="" ng-click="users.editUser(this)">{{user.Username}}</a></td>\r\n                        <td>{{user.FirstName}}</td>\r\n                        <td>{{user.LastName}}</td>\r\n                        <td>{{user.Email}}</td>\r\n                        <td class="text-center"><i class="fa fa-circle" ng-class="{active:user.Active}"></i></td>\r\n                        <td oc-if-roles="BuyerUserAdmin">\r\n                            <button class="btn btn-danger btn-xs btn-block" ng-click="users.deleteUser(this)"><i class="fa fa-trash-o"></i><span class="hidden-xs"> Delete</span></button>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                ng-if="users.list.Meta.TotalPages > 1"\r\n                total-items="users.list.Meta.TotalCount"\r\n                items-per-page="users.list.Meta.PageSize"\r\n                max-size="5"\r\n                boundary-links="users.list.Meta.TotalPages > 5"\r\n                ng-model="users.list.Meta.Page"\r\n                ng-change="users.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="users.list.Meta.Page < users.list.Meta.TotalPages"\r\n                    ng-click="users.loadMore()">Load More</button>\r\n        </div>\r\n    </div>\r\n\r\n</article>'),$templateCache.put("catalogManagement/buyerCatalog/templates/buyerCatalog.html",'<ol class="breadcrumb">\r\n    <li><a href="" ui-sref="buyerCatalogs">Available Catalogs</a></li>\r\n    <li class="active">{{buyerCatalog.selectedCatalog.Name}}</li>\r\n</ol>\r\n<div class="l-page-header l-page-header-xs">\r\n    <h3 class="l-page-header__title">\r\n        Category Assignment\r\n    </h3>\r\n    <div class="l-page-header__btns">\r\n        <button type="button" class="btn btn-primary" ui-sref="categories({catalogid:buyerCatalog.selectedCatalog.ID})">Edit Categories</button>\r\n    </div>\r\n</div>\r\n<div class="row" cg-busy="buyerCatalog.loading">\r\n    <div class="col-sm-7 col-sm-push-5">\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">\r\n                <h3 class="panel-title">Catalog Settings</h3>\r\n            </div>\r\n            <div class="panel-body">\r\n                <fieldset class="form-group">\r\n                    <div class="checkbox">\r\n                        <label for="ViewAllProducts" class="control-label">\r\n                            <input id="ViewAllProducts" type="checkbox" ng-model="buyerCatalog.viewAllProducts" ng-change="buyerCatalog.updateCatalogAssignment(\'products\')"> View All Products\r\n                        </label>\r\n                    </div>\r\n                    <div class="checkbox">\r\n                        <label for="ViewAllCategories" class="control-label">\r\n                            <input id="ViewAllCategories" type="checkbox" ng-model="buyerCatalog.viewAllCategories" ng-change="buyerCatalog.updateCatalogAssignment(\'categories\')"> View All Categories\r\n                        </label>\r\n                    </div>\r\n                </fieldset>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="col-sm-5 col-sm-pull-7">\r\n        <div ng-if="!buyerCatalog.tree.length" class="no-matches">\r\n            <b>There are no categories in this catalog. \r\n                <span oc-if-roles="CategoryAdmin"> \r\n                    <br>\r\n                    Categories can be added in <a ui-sref="categories({catalogid: buyerCatalog.selectedCatalog.ID})">catalog management</a>.\r\n                </span>\r\n            </b>\r\n        </div>\r\n        <script type="text/ng-template" id="nodes_renderer.html">\r\n            <div class="tree-node tree-node-content" cg-busy="node.loading" ng-class="{\'inactive-node\': !node.Active, \'selected-node\': node.ID == buyerCatalog.selectedCategoryID}">\r\n                <i ng-if="node.children && node.children.length > 0" class="fa" ng-click="toggle(this)" ng-class="{\r\n                        \'fa-folder\': !collapsed,\r\n                        \'fa-folder-open\': collapsed\r\n                    }">\r\n                </i>\r\n                <p ng-click="buyerCatalog.categorySelected(node.ID)">{{node.Name}}</p>\r\n                <fieldset class="checkbox">\r\n                    <label class="control-label">\r\n                        <input type="checkbox" ng-disabled="buyerCatalog.viewAllCategories" name="{{\'AssignCategory\' + node.ID}}" ng-model="node.Assigned" ng-change="buyerCatalog.updateCategoryAssignment(node)">\r\n                    </label>\r\n                </fieldset>\r\n            </div>\r\n            <ol ui-tree-nodes ng-model="node.children" uib-collapse="!collapsed">\r\n                <li ng-repeat="node in node.children" ui-tree-node ng-include="\'nodes_renderer.html\'"></li>\r\n            </ol>\r\n        </script>\r\n        <section ng-if="buyerCatalog.tree.length">\r\n            <div ui-tree id="tree-root" data-drag-enabled="false">\r\n                <ol ui-tree-nodes ng-model="buyerCatalog.tree">\r\n                    <li ng-repeat="node in buyerCatalog.tree" ui-tree-node ng-include="\'nodes_renderer.html\'"></li>\r\n                </ol>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</div>'),$templateCache.put("catalogManagement/buyerCatalogs/templates/buyerCatalogs.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Available Catalogs\r\n        </h3>\r\n        <!--====== CREATE ======\r\n        <div class="l-page-header__btns">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="buyerCatalogs.createCatalog()"><i class="fa fa-plus-circle"></i>\r\n                New Catalog\r\n            </button>\r\n        </div>-->\r\n    </header>\r\n\r\n    <!--====== SEARCH ======-->\r\n    <div ng-if="buyerCatalogs.list.Items.length || (!buyerCatalogs.list.Items.length && buyerCatalogs.searchResults)">\r\n        <form name="buyerCatalogs.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="buyerCatalogs.search()" ng-model-options="{debounce:1000}" placeholder="Search available catalogs..." ng-model="buyerCatalogs.parameters.search" class="form-control">\r\n                    <span ng-if="buyerCatalogs.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="buyerCatalogs.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear Search</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="buyerCatalogs.searchLoading">\r\n        <div class="no-matches" ng-if="!buyerCatalogs.list.Items.length">\r\n            <b ng-if="buyerCatalogs.searchResults">No matches found.</b>\r\n            <b ng-if="!buyerCatalogs.searchResults">This seller organization does not have any catalog organizations.</b>\r\n        </div>\r\n        <div ng-if="buyerCatalogs.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6">\r\n                    <button ng-if="buyerCatalogs.selectedCount" class="btn btn-danger btn-xs" ng-click="buyerCatalogs.deleteSelected()">\r\n                        <i class="fa fa-trash"></i> Delete {{buyerCatalogs.selectedCount == 1 ? "Catalogs" : (buyerCatalogs.selectedCount + " Catalogs")}}\r\n                    </button>\r\n                </div>\r\n                <div class="col-xs-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? buyerCatalogs.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        buyerCatalogs.list.Meta.ItemRange[1] + \' of \' + buyerCatalogs.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-catalog-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th rowspan="2" ng-click="buyerCatalogs.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="buyerCatalogs.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="buyerCatalogs.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th rowspan="2" ng-click="buyerCatalogs.updateSort(\'Name\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="buyerCatalogs.parameters.sortBy == \'Name\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="buyerCatalogs.parameters.sortBy == \'!Name\'"></i>\r\n                        </th>\r\n                        <th rowspan="2">\r\n                            Active\r\n                        </th>\r\n                        <th colspan="2" class="text-center">View All</th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Products</th>\r\n                        <th>Categories</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="catalog in buyerCatalogs.list.Items">\r\n                        <td>{{catalog.ID}}</td>\r\n                        <td><a href="" ui-sref="buyerCatalog({catalogid:catalog.ID})">{{catalog.Name}}</a></td>\r\n                        <td class="text-center">\r\n                            <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':catalog.Active}"></i>\r\n                        </td>\r\n                        <td class="text-center">\r\n                            <input type="checkbox" ng-model="catalog.ViewAllProducts" ng-change="buyerCatalogs.updateAssignment(catalog, \'products\')" />                    \r\n                        </td>\r\n                        <td class="text-center">\r\n                            <input type="checkbox" ng-model="catalog.ViewAllCategories" ng-change="buyerCatalogs.updateAssignment(catalog, \'categories\')" />  \r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                boundary-links="buyerCatalogs.list.Meta.TotalPages > 5"\r\n                max-size="5"\r\n                total-items="buyerCatalogs.list.Meta.TotalCount"\r\n                items-per-page="buyerCatalogs.list.Meta.PageSize"\r\n                ng-model="buyerCatalogs.list.Meta.Page"\r\n                ng-if="buyerCatalogs.list.Meta.TotalPages > 1"\r\n                ng-change="buyerCatalogs.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="buyerCatalogs.list.Meta.Page < buyerCatalogs.list.Meta.TotalPages"\r\n                    ng-click="buyerCatalogs.loadMore()">Load More\r\n            </button>\r\n        </div>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("catalogManagement/catalog/templates/catalog.html",'<header class="c-jumbotron">\r\n    <div class="container container-smooth">\r\n        <ul class="breadcrumb">\r\n            <li><a href="" ui-sref="catalogs" ui-sref-opts="{reload:true}">Catalogs</a></li>\r\n            <li class="active" ui-sref="catalog">{{catalog.selectedCatalog.Name}}</li>\r\n        </ul>\r\n        <div class="l-page-header l-page-header-xs">\r\n            <h3 class="l-page-header__title">\r\n                <small class="text-muted">Catalog</small> <br>\r\n                {{catalog.selectedCatalog.Name}}\r\n            </h3>\r\n        </div>\r\n        <oc-responsive-tabs nav-items="catalog.navigationItems"></oc-responsive-tabs>\r\n    </div>\r\n</header>\r\n<br>\r\n<article class="container container-smooth">\r\n    <div ui-view cg-busy="application.stateLoading(\'catalog\')">\r\n        <div class="row">\r\n            <div class="col-sm-7">\r\n                <form class="form-horizontal" name="catalog.editForm" novalidate autocomplete="off" oc-readonly-roles="CatalogAdmin" ng-submit="catalog.updateCatalog()">\r\n                    <fieldset class="form-group">\r\n                        <label for="catalogID" class="control-label col-sm-3">Catalog ID</label>\r\n                        <div class="col-sm-9">\r\n                            <input id="catalogID" name="ID" ng-change="catalog.updateValidity()" type="text" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)"\r\n                                pattern-err-type="ID_Name" class="form-control" ng-model="catalog.model.ID" required/>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <label for="catalogName" class="control-label col-sm-3">Name</label>\r\n                        <div class="col-sm-9">\r\n                            <input id="catalogName" name="Name" type="text" ng-model="catalog.model.Name" class="form-control" required>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <label for="catalogDescription" class="control-label col-sm-3">Description</label>\r\n                        <div class="col-sm-9">\r\n                            <textarea id="catalogDescription" placeholder="(Optional)" name="Description" ng-model="catalog.model.Description" class="form-control"></textarea>\r\n                        </div>\r\n                    </fieldset>\r\n                    <div class="form-group">\r\n                        <div class="col-sm-offset-3 col-sm-9">\r\n                            <div class="checkbox">\r\n                                <label for="catalogActive">\r\n                                <input id="catalogActive" name="Active" type="checkbox" ng-model="catalog.model.Active"/>\r\n                                Active\r\n                            </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="col-sm-9 col-sm-offset-3">\r\n                            <button type="submit" class="btn btn-primary btn-block" cg-busy="catalog.loading" ng-disabled="catalog.editForm.$invalid">Save Changes</button>\r\n                        </div>\r\n                        <div class="col-sm-9 col-sm-offset-3" oc-if-roles="CatalogAdmin">\r\n                            <hr>\r\n                            <button type="button" class="btn btn-danger btn-block" ng-click="catalog.deleteCatalog()"><i class="fa fa-trash-o"></i> Delete Catalog</button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</article>'),$templateCache.put("catalogManagement/catalog/templates/catalogBuyers.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Buyer Assignments\r\n        </h3>\r\n    </header>\r\n\r\n    <!--====== SEARCH ======-->\r\n    <div ng-if="catalogBuyers.list.Items.length || (!catalogBuyers.list.Items.length && catalogBuyers.searchResults)">\r\n        <form name="catalogBuyers.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="catalogBuyers.search()" ng-model-options="{debounce:1000}" placeholder="Search buyers..." ng-model="catalogBuyers.parameters.search" class="form-control">\r\n                    <span ng-if="catalogBuyers.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="catalogBuyers.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear Search</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="catalogBuyers.searchLoading">\r\n        <div class="no-matches" ng-if="!catalogBuyers.list.Items.length">\r\n            <b ng-if="catalogBuyers.searchResults">No matches found.</b>\r\n            <b ng-if="!catalogBuyers.searchResults">This seller organization does not have any buyer organizations.</b>\r\n        </div>\r\n        <div ng-if="catalogBuyers.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6">\r\n                    <div class="btn-group" ng-if="catalogBuyers.changedAssignments.length">\r\n                        <button class="btn btn-primary btn-xs" ng-click="catalogBuyers.updateAssignments()">\r\n                            Update Assignments\r\n                        </button>\r\n                        <button class="btn btn-default btn-xs" ng-click="catalogBuyers.resetAssignments()">\r\n                            <i class="fa fa-times"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div class="col-xs-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? catalogBuyers.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        catalogBuyers.list.Meta.ItemRange[1] + \' of \' + catalogBuyers.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-buyer-table l-buyer-table__catalog">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th rowspan="2" class="text-center" ng-click="application.userIsAuthorized([\'CatalogAdmin\']) ? catalogBuyers.selectAllItems() : angular.noop()">\r\n                            Assign\r\n                        </th>\r\n                        <th rowspan="2" ng-click="catalogBuyers.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="catalogBuyers.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="catalogBuyers.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th rowspan="2" ng-click="catalogBuyers.updateSort(\'Name\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="catalogBuyers.parameters.sortBy == \'Name\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="catalogBuyers.parameters.sortBy == \'!Name\'"></i>\r\n                        </th>\r\n                        <th rowspan="2">\r\n                            Active\r\n                        </th>\r\n                        <th colspan="2" class="text-center">View All</th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Products</th>\r\n                        <th>Categories</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="buyer in catalogBuyers.list.Items">\r\n                        <td class="text-center">\r\n                            <b style="display:inline-block; border:2px solid #909090; line-height:1; padding:1px 3px; margin-left:-5px; border-radius:2px;" ng-if="buyer.DefaultCatalogID && (buyer.DefaultCatalogID == catalog.selectedCatalog.ID)">D</b>\r\n                            <input type="checkbox" ng-model="buyer.Assigned" ng-change="catalogBuyers.selectItem(this)" ng-if="!buyer.DefaultCatalogID || (buyer.DefaultCatalogID != catalog.selectedCatalog.ID)"/>\r\n                        </td>\r\n                        <td>{{buyer.ID}}</td>\r\n                        <td><a href="" ui-sref="buyer({buyerid:buyer.ID})">{{buyer.Name}}</a></td>\r\n                        <td class="text-center">\r\n                            <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':buyer.Active}"></i>\r\n                        </td>\r\n                        <td class="text-center">\r\n                            <input type="checkbox" ng-model="buyer.ViewAllProducts" ng-change="catalogBuyers.updateAssignment(buyer, \'products\')" ng-disabled="!buyer.Assigned" />                    \r\n                        </td>\r\n                        <td class="text-center">\r\n                            <input type="checkbox" ng-model="buyer.ViewAllCategories" ng-change="catalogBuyers.updateAssignment(buyer, \'categories\')" ng-disabled="!buyer.Assigned" />  \r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                boundary-links="catalogBuyers.list.Meta.TotalPages > 5"\r\n                max-size="5"\r\n                total-items="catalogBuyers.list.Meta.TotalCount"\r\n                items-per-page="catalogBuyers.list.Meta.PageSize"\r\n                ng-model="catalogBuyers.list.Meta.Page"\r\n                ng-if="catalogBuyers.list.Meta.TotalPages > 1"\r\n                ng-change="catalogBuyers.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="catalogBuyers.list.Meta.Page < catalogBuyers.list.Meta.TotalPages"\r\n                    ng-click="catalogBuyers.loadMore()">Load More\r\n            </button>\r\n        </div>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("catalogManagement/catalog/templates/catalogCategories.html",'<div ng-if="!catalogCategories.tree.length" class="no-matches">\r\n    <b>There are no categories in this catalog. <span oc-if-roles="CategoryAdmin"><a ng-click="catalogCategories.createCategory()">Create one now.</a></span></b>\r\n</div>\r\n<div class="row" ng-if="catalogCategories.tree.length">\r\n    <div class="col-sm-5">\r\n        <div class="l-page-header l-page-header-xs">\r\n            <h3 class="l-page-header__title">\r\n                Categories\r\n            </h3>\r\n            <div class="l-page-header__btns" oc-if-roles="CategoryAdmin">\r\n                <button type="button" class="btn btn-primary" ng-click="catalogCategories.createCategory()">\r\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i>\r\n                    New Category\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <script type="text/ng-template" id="nodes_renderer.html">\r\n            <div class="tree-node tree-node-content" ng-class="{\'inactive-node\': !node.Active, \'selected-node\': node.ID == catalogCategories.selectedCategoryID}">\r\n                <i ng-if="node.children && node.children.length > 0" class="fa" ng-click="toggle(this)" ng-class="{\r\n                        \'fa-folder\': !collapsed,\r\n                        \'fa-folder-open\': collapsed\r\n                    }">\r\n                </i>\r\n                <p ng-click="catalogCategories.categorySelected(node.ID)">{{node.Name}}</p>\r\n                <i ui-tree-handle class="fa fa-reorder text-muted"></i>\r\n            </div>\r\n            <ol ui-tree-nodes ng-model="node.children" uib-collapse="!collapsed">\r\n                <li ng-repeat="node in node.children" ui-tree-node ng-include="\'nodes_renderer.html\'"></li>\r\n            </ol>\r\n        </script>\r\n        <section>\r\n            <div ui-tree="catalogCategories.treeOptions" id="tree-root" data-drag-delay="200">\r\n                <ol ui-tree-nodes ng-model="catalogCategories.tree">\r\n                    <li ng-repeat="node in catalogCategories.tree" ui-tree-node ng-include="\'nodes_renderer.html\'"></li>\r\n                </ol>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="col-sm-7" cg-busy="application.stateLoading(\'categories\')" ui-view>\r\n        <div ng-if="application.$state.is(\'categories\') && catalogCategories.tree.length" class="well text-center">\r\n            Select a category to view details\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("catalogManagement/catalog/templates/catalogCategory.html",'<div>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            {{catalogCategory.category.Name}}\r\n        </h3>\r\n        <div class="l-page-header__btns" oc-if-roles="CategoryAdmin">\r\n            <button type="button" class="btn btn-default" ng-click="catalogCategory.editCategory(catalogCategory.category.ID)"><i class="fa fa-edit"></i> Edit</button>\r\n            <button type="button" class="btn btn-danger" ng-click="catalogCategory.deleteCategory(catalogCategory.category.ID)"><i class="fa fa-trash"></i> Delete</button>\r\n        </div>\r\n    </header>\r\n    <p ng-bind-html="catalogCategory.category.Description || \'<em class=\\\'text-muted\\\'>No description</em>\'"></p>\r\n    <hr>\r\n    <h4>Product Assignments</h4>\r\n    <div ui-view cg-busy="application.stateLoading(\'categories.category\')"></div>\r\n</div>'),
$templateCache.put("catalogManagement/catalog/templates/catalogCategoryCreate.modal.html",'<form name="CategoryCreateModalForm" ng-submit="createCategory.submit()" class="form-horizontal" autocomplete="off" novalidate cg-busy="createCategory.loading">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="createCategory.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Category</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label for="categoryIDInput" class="col-sm-3 control-label">Category ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="categoryIDInput" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="createCategory.category.ID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="categoryNameInput" class="col-sm-3 control-label">Category Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="categoryNameInput" type="text" class="form-control" ng-model="createCategory.category.Name" required/>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="categoryDescriptionInput" class="col-sm-3 control-label">Description</label>\r\n            <div class="col-sm-9">\r\n                <textarea rows="4" id="categoryDescriptionInput" type="text" class="form-control" placeholder="(Optional)" ng-model="createCategory.category.Description"></textarea>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <div class="col-sm-9 col-md-offset-3">\r\n                <div class="checkbox">\r\n                    <label for="categoryActiveInput">\r\n                        <input id="categoryActiveInput" type="checkbox" ng-model="createCategory.category.Active"/>\r\n                        Active\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label">Image</label>\r\n            <div class="col-sm-9">\r\n                <oc-file-upload  model="createCategory.category" label="Image:" patch="createCategory.patchImage(xp)" keyname="image" extensions="jpg, png, gif, jpeg, tiff"></oc-file-upload>\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="CategoryCreateForm.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("catalogManagement/catalog/templates/catalogCategoryEdit.modal.html",'<form name="CategoryCreateModalForm" ng-submit="editCategory.submit()" class="form-horizontal" novalidate cg-busy="editCategory.loading">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="editCategory.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span> {{editCategory.categoryName}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label for="categoryIDInput" class="col-sm-3 control-label">Category ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="categoryIDInput" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="editCategory.category.ID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="categoryNameInput" class="col-sm-3 control-label">Category Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="categoryNameInput" type="text" class="form-control" ng-model="editCategory.category.Name" required/>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="categoryDescriptionInput" class="col-sm-3 control-label">Description</label>\r\n            <div class="col-sm-9">\r\n                <textarea rows="4" id="categoryDescriptionInput" type="text" class="form-control" placeholder="(Optional)" ng-model="editCategory.category.Description"></textarea>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <div class="col-sm-9 col-md-offset-3">\r\n                <div class="checkbox">\r\n                    <label for="categoryActiveInput">\r\n                        <input id="categoryActiveInput" type="checkbox" ng-model="editCategory.category.Active"/>\r\n                        Active\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label class="col-sm-3 control-label">Image</label>\r\n            <div class="col-sm-9">\r\n                <oc-file-upload  model="editCategory.category" label="Image:" patch="editCategory.patchImage(xp)" keyname="image" extensions="jpg, png, gif, jpeg, tiff"></oc-file-upload>\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="CategoryCreateForm.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("catalogManagement/catalog/templates/catalogCategoryProducts.html",'<article>\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <div ng-if="catalogProducts.list.Items.length || (!catalogProducts.list.Items.length && catalogProducts.searchResults)">\r\n        <form name="catalogProducts.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                        <span class="input-group-addon">\r\n                            <i class="fa fa-search"></i>\r\n                        </span>\r\n                    <input type="search" ng-change="catalogProducts.search()" ng-model-options="{debounce:1000}" placeholder="Search Products..." ng-model="catalogProducts.parameters.search" class="form-control">\r\n                        <span ng-if="catalogProducts.searchResults" class="input-group-btn">\r\n                            <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="catalogProducts.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear</span></button>\r\n                        </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="catalogProducts.searchLoading">\r\n        <div class="no-matches" ng-if="!catalogProducts.list.Items.length">\r\n            <b ng-if="catalogProducts.searchResults">No matches found.</b>\r\n            <b ng-if="!catalogProducts.searchResults">This seller organization does not have any Products.</b>\r\n        </div>\r\n        <div ng-if="catalogProducts.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6">\r\n                    <div class="btn-group" ng-if="catalogProducts.changedAssignments.length">\r\n                        <button class="btn btn-primary btn-xs" ng-click="catalogProducts.updateAssignments()">\r\n                            Update Assignments\r\n                        </button>\r\n                        <button class="btn btn-default btn-xs" ng-click="catalogProducts.resetAssignments()">\r\n                            <i class="fa fa-times"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div class="col-xs-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? catalogProducts.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        catalogProducts.list.Meta.ItemRange[1] + \' of \' + catalogProducts.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-catalog-products-table" oc-readonly-roles="CategoryAdmin">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th class="text-center" ng-click="application.userIsAuthorized([\'CategoryAdmin\']) ? catalogProducts.selectAllItems() : angular.noop()">\r\n                            Assign\r\n                        </th>\r\n                        <th ng-click="catalogProducts.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="catalogProducts.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="catalogProducts.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="catalogProducts.updateSort(\'Name\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="catalogProducts.parameters.sortBy == \'Name\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="catalogProducts.parameters.sortBy == \'!Name\'"></i>\r\n                        </th>\r\n                        <th>Active</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="product in catalogProducts.list.Items">\r\n                        <td class="text-center">\r\n                            <input type="checkbox" ng-model="product.Assigned" ng-change="catalogProducts.selectItem(this)" />\r\n                        </td>\r\n                        <td>{{product.ID}}</td>\r\n                        <td><a href="" ui-sref="product({productid:product.ID})">{{product.Name}}</a></td>\r\n                        <td class="text-center">\r\n                            <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':product.Active}"></i>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                ng-if="catalogProducts.list.Meta.TotalPages > 1"\r\n                total-items="catalogProducts.list.Meta.TotalCount"\r\n                items-per-page="catalogProducts.list.Meta.PageSize"\r\n                max-size="5"\r\n                boundary-links="catalogProducts.list.Meta.TotalPages > 5"\r\n                ng-model="catalogProducts.list.Meta.Page"\r\n                ng-change="catalogProducts.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="catalogProducts.list.Meta.Page < catalogProducts.list.Meta.TotalPages"\r\n                    ng-click="catalogProducts.loadMore()">Load More</button>\r\n        </div>\r\n    </div>\r\n\r\n</article>'),$templateCache.put("catalogManagement/catalogs/templates/catalogCreate.modal.html",'<form name="catalogCreateModal.form" class="form-horizontal" ng-submit="catalogCreateModal.submit()" novalidate autocomplete="off"\r\n    pretty-submit>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="catalogCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Catalog</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label for="catalogID" class="control-label col-sm-3">Catalog ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="catalogID" name="ID" type="text" ng-change="catalogCreateModal.updateValidity()" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)"\r\n                    pattern-err-type="ID_Name" class="form-control" ng-model="catalogCreateModal.catalog.ID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="catalogName" class="control-label col-sm-3">Catalog Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="catalogName" name="Name" type="text" ng-model="catalogCreateModal.catalog.Name" class="form-control" required>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="catalogDescription" class="control-label col-sm-3">Description</label>\r\n            <div class="col-sm-9">\r\n                <textarea id="catalogDescription" placeholder="(Optional)" name="Description" ng-model="catalogCreateModal.catalog.Description" class="form-control"></textarea>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <div class="col-sm-offset-3 col-sm-9">\r\n                <div class="checkbox">\r\n                    <label for="catalogActiveCheckbox">\r\n                        <input id="catalogActiveCheckbox" name="Active" type="checkbox" ng-model="catalogCreateModal.catalog.Active"/>\r\n                        Active\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-block btn-primary" ng-disabled="catalogCreateModal.form.$invalid" cg-busy="catalogCreateModal.loading">Submit</button>\r\n    </div>\r\n</form>'),$templateCache.put("catalogManagement/catalogs/templates/catalogs.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Catalog Management\r\n        </h3>\r\n        <!--====== CREATE ======-->\r\n        <div class="l-page-header__btns">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="catalogs.createCatalog()"><i class="fa fa-plus-circle"></i>\r\n                New Catalog\r\n            </button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH ======-->\r\n    <div ng-if="catalogs.list.Items.length || (!catalogs.list.Items.length && catalogs.searchResults)">\r\n        <form name="catalogs.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="catalogs.search()" ng-model-options="{debounce:1000}" placeholder="Search catalogs..." ng-model="catalogs.parameters.search" class="form-control">\r\n                    <span ng-if="catalogs.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="catalogs.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear Search</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="catalogs.searchLoading">\r\n        <div class="no-matches" ng-if="!catalogs.list.Items.length">\r\n            <b ng-if="catalogs.searchResults">No matches found.</b>\r\n            <b ng-if="!catalogs.searchResults">This seller organization does not have any catalog organizations.</b>\r\n        </div>\r\n        <div ng-if="catalogs.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6 col-xs-offset-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? catalogs.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        catalogs.list.Meta.ItemRange[1] + \' of \' + catalogs.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-catalog-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th ng-click="catalogs.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="catalogs.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="catalogs.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="catalogs.updateSort(\'Name\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="catalogs.parameters.sortBy == \'Name\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="catalogs.parameters.sortBy == \'!Name\'"></i>\r\n                        </th>\r\n                        <th>\r\n                            Active\r\n                        </th>\r\n                        <th></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="catalog in catalogs.list.Items">\r\n                        <td>{{catalog.ID}}</td>\r\n                        <td><a href="" ui-sref="catalog({catalogid:catalog.ID})">{{catalog.Name}}</a></td>\r\n                        <td class="text-center">\r\n                            <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':catalog.Active}"></i>\r\n                        </td>\r\n                        <td>\r\n                            <button class="btn btn-danger btn-xs" ng-click="catalogs.deleteCatalog(this)"><i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span></button>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                boundary-links="catalogs.list.Meta.TotalPages > 5"\r\n                max-size="5"\r\n                total-items="catalogs.list.Meta.TotalCount"\r\n                items-per-page="catalogs.list.Meta.PageSize"\r\n                ng-model="catalogs.list.Meta.Page"\r\n                ng-if="catalogs.list.Meta.TotalPages > 1"\r\n                ng-change="catalogs.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="catalogs.list.Meta.Page < catalogs.list.Meta.TotalPages"\r\n                    ng-click="catalogs.loadMore()">Load More\r\n            </button>\r\n        </div>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("catalogManagement/catalogs/templates/catalogSelect.modal.html",'<form name="catalogSelectModal.form" ng-submit="catalogSelectModal.submit()" novalidate autocomplete="off">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="catalogSelectModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">Select a replacement catalog</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="alert alert-info">\r\n            <span ng-if="catalogSelectModal.buyers.Items.length === 1">\r\n                <b>{{catalogSelectModal.buyers.Items[0].Name}}</b> is using this as a default catalog.\r\n            </span>\r\n            <span ng-if="catalogSelectModal.buyers.Items.length === 2">\r\n                <b>{{catalogSelectModal.buyers.Items[0].Name}}</b> and <b>{{catalogSelectModal.buyers.Items[1].Name}}</b> are using this as a default catalog.\r\n            </span>\r\n            <span ng-if="catalogSelectModal.buyers.Items.length === 3">\r\n                <b>{{catalogSelectModal.buyers.Items[0].Name}}</b>, <b>{{catalogSelectModal.buyers.Items[1].Name}}</b> and <b>{{catalogSelectModal.buyers.Items[2].Name}}</b> are using this as a default catalog.\r\n            </span>\r\n            <span ng-if="catalogSelectModal.buyers.Items.length > 3">\r\n                <b>{{catalogSelectModal.buyers.Items[0].Name}}</b>, <b>{{catalogSelectModal.buyers.Items[1].Name}}</b> and {{catalogSelectModal.buyers.Items.length - 2}} other buyer organizations are using this as a default catalog.\r\n            </span>\r\n            Please select a replacement before deleting the catalog.\r\n        </div>\r\n        <!-- Typeahead Result Template -->\r\n        <script type="text/ng-template" id="oc-catalog-result.html">\r\n            <a href tabindex="-1" ng-attr-title="{{match.label}}">\r\n                <span ng-bind-html="\'<b>\' + (match.model.Name | uibTypeaheadHighlight:query) + \'</b>\' + \'<br/><small>\' + (match.model.ID | uibTypeaheadHighlight:query) + \'</small>\'"></span>\r\n            </a>\r\n        </script>\r\n        <fieldset class="form-group">\r\n            <label for="SelectedDefaultCatalog">Select a New Default Catalog</label>\r\n            <div class="c-typeahead">\r\n                <input placeholder="Select a catalog" class="form-control" id="SelectedDefaultCatalog" name="SelectedDefaultCatalog" type="text" ng-model="catalogSelectModal.replacementDefaultCatalog" required\r\n                    ng-model-options="{debounce:300}"\r\n                    typeahead-min-length="0"\r\n                    typeahead-append-to="\'.c-typeahead__results\'"\r\n                    typeahead-no-results="catalogSelectModal.noCatalogResults"\r\n                    typeahead-loading="catalogSelectModal.catalogsLoading"\r\n                    typeahead-template-url="oc-catalog-result.html"\r\n                    uib-typeahead="catalog as catalog.Name for catalog in catalogSelectModal.searchCatalogs($viewValue)">\r\n                <div class="c-typeahead__results">\r\n                    <div class="c-typeahead__results--empty" ng-if="catalogSelectModal.noCatalogResults">\r\n                        <span>No matches found</span>\r\n                    </div>\r\n                    <div class="c-typeahead__results--loading" ng-if="catalogSelectModal.catalogsLoading">\r\n                        <div ng-include="\'common/config/angular-busy/angular-busy.html\'"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-block btn-primary" ng-disabled="catalogSelectModal.form.$invalid" cg-busy="catalogSelectModal.loading">Confirm Replacement</button>\r\n    </div>\r\n</form>'),$templateCache.put("catalogManagement/userGroupCatalog/templates/userGroupCatalog.html",'<ol class="breadcrumb">\r\n    <li><a href="" ui-sref="userGroupCatalogs">Available Catalogs</a></li>\r\n    <li class="active">{{userGroupCatalog.selectedCatalog.Name}}</li>\r\n</ol>\r\n<div class="l-page-header l-page-header-xs">\r\n    <h3 class="l-page-header__title">\r\n        Category Assignment\r\n    </h3>\r\n</div>\r\n\r\n<div ng-if="!userGroupCatalog.tree.length" class="no-matches">\r\n    <b>There are no categories in this catalog. <span oc-if-roles="CategoryAdmin"><a ng-click="userGroupCatalog.createCategory()">Create one now.</a></span></b>\r\n</div>\r\n<div class="row" cg-busy="userGroupCatalog.loading">\r\n    <div class="col-sm-6 col-sm-push-6">\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading">\r\n                <h3 class="panel-title">Catalog Settings</h3>\r\n            </div>\r\n            <div class="panel-body">\r\n                <div class="alert alert-info">\r\n                    Catalog settings can only be changed at the <a ui-sref="buyerCatalog({catalogid:userGroupCatalog.selectedCatalog.ID})">buyer level</a>\r\n                </div>\r\n                <fieldset class="form-group">\r\n                    <label for="ViewAllProducts" class="control-label">\r\n                        <input id="ViewAllProducts" type="checkbox" disabled ng-model="userGroupCatalog.viewAllProducts"> View All Products\r\n                    </label>\r\n                </fieldset>\r\n                <fieldset class="form-group">\r\n                    <label for="ViewAllCategories" class="control-label">\r\n                        <input id="ViewAllCategories" type="checkbox" disabled ng-model="userGroupCatalog.viewAllCategories"> View All Categories\r\n                    </label>\r\n                </fieldset>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="col-sm-6 col-sm-pull-6">\r\n        <script type="text/ng-template" id="nodes_renderer.html">\r\n            <div class="tree-node tree-node-content"  uib-tooltip="Inherited from a buyer level assignment." tooltip-append-to-body="true" tooltip-enable="node.Inherited" cg-busy="node.loading" ng-class="{\'inactive-node\': !node.Active, \'selected-node\': node.ID == userGroupCatalog.selectedCategoryID}">\r\n                <i ng-if="node.children && node.children.length > 0" class="fa" ng-click="toggle(this)" ng-class="{\r\n                        \'fa-folder\': !collapsed,\r\n                        \'fa-folder-open\': collapsed\r\n                    }">\r\n                </i>\r\n                <p ng-click="userGroupCatalog.categorySelected(node.ID)">{{node.Name}}</p>\r\n                <fieldset class="checkbox">\r\n                    <label class="control-label">\r\n                        <input type="checkbox" ng-disabled="userGroupCatalog.viewAllCategories || node.Inherited" name="{{\'AssignCategory\' + node.ID}}" ng-model="node.Assigned" ng-change="userGroupCatalog.updateAssignment(node)">\r\n                    </label>\r\n                </fieldset>\r\n            </div>\r\n            <ol ui-tree-nodes ng-model="node.children" uib-collapse="!collapsed">\r\n                <li ng-repeat="node in node.children" ui-tree-node ng-include="\'nodes_renderer.html\'"></li>\r\n            </ol>\r\n        </script>\r\n        <section ng-if="userGroupCatalog.tree.length">\r\n            <div ui-tree id="tree-root" data-drag-enabled="false">\r\n                <ol ui-tree-nodes ng-model="userGroupCatalog.tree">\r\n                    <li ng-repeat="node in userGroupCatalog.tree" ui-tree-node ng-include="\'nodes_renderer.html\'"></li>\r\n                </ol>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</div>'),$templateCache.put("catalogManagement/userGroupCatalogs/templates/userGroupCatalogs.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Available Catalogs\r\n        </h3>\r\n    </header>\r\n\r\n    <!--====== SEARCH ======-->\r\n    <div ng-if="userGroupCatalogs.list.Items.length || (!userGroupCatalogs.list.Items.length && userGroupCatalogs.searchResults)">\r\n        <form name="userGroupCatalogs.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="userGroupCatalogs.search()" ng-model-options="{debounce:1000}" placeholder="Search available catalogs..." ng-model="userGroupCatalogs.parameters.search" class="form-control">\r\n                    <span ng-if="userGroupCatalogs.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="userGroupCatalogs.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear Search</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="userGroupCatalogs.searchLoading">\r\n        <div class="no-matches" ng-if="!userGroupCatalogs.list.Items.length">\r\n            <b ng-if="userGroupCatalogs.searchResults">No matches found.</b>\r\n            <b ng-if="!userGroupCatalogs.searchResults">This seller organization does not have any catalog organizations.</b>\r\n        </div>\r\n        <div ng-if="userGroupCatalogs.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6 col-xs-offset-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? userGroupCatalogs.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        userGroupCatalogs.list.Meta.ItemRange[1] + \' of \' + userGroupCatalogs.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-catalog-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th rowspan="2" ng-click="userGroupCatalogs.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="userGroupCatalogs.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="userGroupCatalogs.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th rowspan="2" ng-click="userGroupCatalogs.updateSort(\'Name\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="userGroupCatalogs.parameters.sortBy == \'Name\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="userGroupCatalogs.parameters.sortBy == \'!Name\'"></i>\r\n                        </th>\r\n                        <th rowspan="2">\r\n                            Active\r\n                        </th>\r\n                        <th colspan="2" class="text-center">View All</th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Products</th>\r\n                        <th>Categories</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="catalog in userGroupCatalogs.list.Items">\r\n                        <td>{{catalog.ID}}</td>\r\n                        <td><a href="" ui-sref="userGroupCatalog({catalogid:catalog.ID})">{{catalog.Name}}</a></td>\r\n                        <td class="text-center">\r\n                            <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':catalog.Active}"></i>\r\n                        </td>\r\n                        <td class="text-center">\r\n                            <input type="checkbox" disabled ng-model="catalog.ViewAllProducts"/>                    \r\n                        </td>\r\n                        <td class="text-center">\r\n                            <input type="checkbox" disabled ng-model="catalog.ViewAllCategories"/>  \r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                boundary-links="userGroupCatalogs.list.Meta.TotalPages > 5"\r\n                max-size="5"\r\n                total-items="userGroupCatalogs.list.Meta.TotalCount"\r\n                items-per-page="userGroupCatalogs.list.Meta.PageSize"\r\n                ng-model="userGroupCatalogs.list.Meta.Page"\r\n                ng-if="userGroupCatalogs.list.Meta.TotalPages > 1"\r\n                ng-change="userGroupCatalogs.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="userGroupCatalogs.list.Meta.Page < userGroupCatalogs.list.Meta.TotalPages"\r\n                    ng-click="userGroupCatalogs.loadMore()">Load More\r\n            </button>\r\n        </div>\r\n    </div>\r\n</article>\r\n'),
$templateCache.put("common/config/angular-busy/angular-busy.html",'<div class="indicator">\r\n	<div class="animation">\r\n		<div class="dot"></div>\r\n		<div class="dot"></div>\r\n		<div class="dot"></div>\r\n	</div>\r\n</div>\r\n\r\n'),$templateCache.put("common/directives/oc-file-upload/oc-file-upload.html",'<div ng-class="{\'has-error\': invalidExtension}">\r\n    <figure class="thumbnail" ng-show="model.xp.image.URL">\r\n        <img class="img-responsive" style="max-height:500px;" ng-src="{{model.xp.image.URL}}" alt="Product Image">\r\n    </figure>\r\n    <div>\r\n        <button type="button" class="btn btn-default" ng-class="{\'btn-block\':!model.xp.image.URL}" ng-click="upload()">{{model.xp.image.URL  ? \'Replace file\' : (uploadText || \'Upload an image\')}}</button>\r\n        <button type="button" class="btn btn-danger" ng-click="remove()" ng-if="model.xp.image.URL">\r\n            <i class="fa fa-trash"></i>\r\n        </button>\r\n    </div>\r\n    <input class="ng-hide" name="upload" type="file" id="orderCloudUpload" />\r\n    <span class="help-block error-msg" ng-show="invalidExtension">Invalid file type, please select another file.</span>\r\n</div>'),$templateCache.put("common/directives/oc-responsive-tabs/oc-responsive-tabs.html",'<ul class="nav nav-tabs oc-responsive-tabs">\r\n    <li role="presentation" ng-class="{active:isActive(item)}" ng-repeat="item in navItems | filter:{dropdown:false}">\r\n        <a ui-sref="{{item.state}}({search: \'\', sortBy: \'\', filters: \'\', page: \'\', pageSize:\'\', searchOn:\'\'})"><i class="fa {{item.icon}}"></i> {{item.name}}</a>\r\n    </li>\r\n    <li uib-dropdown ng-show="!isRendered || (navItems | filter:{dropdown:true}).length" ng-class="{active:isActive(\'more\')}">\r\n        <a uib-dropdown-toggle role="button">\r\n            More <span class="caret"></span></a>\r\n        <ul uib-dropdown-menu class="dropdown-menu-right">\r\n            <li role="presentation" ng-class="{active:isActive(item)}" ng-repeat="item in navItems | filter:{dropdown:true}">\r\n                <a ui-sref="{{item.state}}({search: \'\', sortBy: \'\', filters: \'\', page: \'\', pageSize:\'\', searchOn:\'\'})"><i class="fa {{item.icon}}"></i> {{item.name}}</a>\r\n            </li>\r\n        </ul>\r\n    </li>\r\n</ul>'),$templateCache.put("common/services/oc-confirm/oc-confirm.modal.html",'<div class="modal-body">\r\n	<div ng-class="{\'text-center\':confirmModal.type == \'delete\'}" ng-bind-html="confirmModal.message"></div>\r\n	<div class="text-center" ng-if="confirmModal.type == \'delete\'">\r\n		<br>\r\n		<span class="text-danger">This action cannot be undone.</span>\r\n	</div>\r\n</div>\r\n<div class="modal-footer">\r\n	<div class="text-center">\r\n		<button type="button" class="btn btn-default" ng-click="confirmModal.cancel()">{{confirmModal.cancelText || \'Cancel\'}}</button>\r\n		<button type="button" class="btn btn-primary" ng-class="{\'btn-danger\': confirmModal.type == \'delete\'}" ng-click="confirmModal.confirm()">{{confirmModal.confirmText || \'Okay\'}}</button>\r\n	</div>\r\n</div>'),$templateCache.put("orderManagement/approvals/templates/orderApprovals.html",'<div cg-busy="application.stateLoading(\'approvals\')">\r\n    <!--====== PAYMENT LIST ======-->\r\n    <div ng-if="orderApprovals.list.Items.length">\r\n        <div class="panel panel-default table-responsive" ng-if="(orderApprovals.list.Items | filter:{Status:\'Pending\'}).length">\r\n            <div class="panel-heading">Pending Approvals</div>\r\n            <table class="table table-bordered l-approval-pending-table">\r\n                <colgroup>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                </colgroup>\r\n                <thead>\r\n                <tr>\r\n                    <th>Approving User Group</th>\r\n                    <th>Date Created</th>\r\n                    <th>Approval Rule Name</th>\r\n                    <th>Approval Rule Description</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr ng-repeat="approval in orderApprovals.list.Items| filter:{Status:\'Pending\'}">\r\n                    <td>{{approval.ApprovingUserGroup ? approval.ApprovingUserGroup.Name : approval.ApprovingGroupID}}</td>\r\n                    <td>{{approval.DateCreated | date:\'short\'}}</td>\r\n                    <td>{{approval.ApprovalRule.Name}}</td>\r\n                    <td>{{approval.ApprovalRule.Description}}</td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class="panel panel-default table-responsive" ng-if="(orderApprovals.list.Items | filter:{Status:\'Approved\'}).length">\r\n            <div class="panel-heading">Approved</div>\r\n            <table class="table table-bordered l-approval-approved-table">\r\n                <colgroup>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                </colgroup>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Approving User</th>\r\n                        <th>Date Approved</th>\r\n                        <th>Comments</th>\r\n                        <th>Approval Rule Name</th>\r\n                        <th>Approval Rule Description</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr ng-repeat="approval in orderApprovals.list.Items| filter:{Status:\'Approved\'}">\r\n                        <td>{{approval.ApproverUserName}}</td>\r\n                        <td>{{approval.DateCompleted | date:\'short\'}}</td>\r\n                        <td>{{approval.Comments}}</td>\r\n                        <td>{{approval.ApprovalRule.Name}}</td>\r\n                        <td>{{approval.ApprovalRule.Description}}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class="panel panel-default table-responsive" ng-if="(orderApprovals.list.Items | filter:{Status:\'Declined\'}).length">\r\n            <div class="panel-heading">Declined</div>\r\n            <table class="table table-bordered l-approval-declined-table">\r\n                <colgroup>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                </colgroup>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Approving User</th>\r\n                        <th>Date Declined</th>\r\n                        <th>Comments</th>\r\n                        <th>Approval Rule Name</th>\r\n                        <th>Approval Rule Description</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr ng-repeat="approval in orderApprovals.list.Items| filter:{Status:\'Declined\'}">\r\n                        <td>{{approval.ApproverUserName}}</td>\r\n                        <td>{{approval.DateCompleted | date:\'short\'}}</td>\r\n                        <td>{{approval.Comments}}</td>\r\n                        <td>{{approval.ApprovalRule.Name}}</td>\r\n                        <td>{{approval.ApprovalRule.Description}}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n    <div ng-if="!orderApprovals.list.Items.length" class="no-matches">\r\n        This order does not have any approvals. <br>\r\n    </div>\r\n\r\n    <!--====== Approvals PAGINATION ======-->\r\n    <ul uib-pagination\r\n        class="pagination-sm pull-right hidden-xs"\r\n        ng-if="orderApprovals.list.Meta.TotalPages > 1"\r\n        total-items="orderApprovals.list.Meta.TotalCount"\r\n        items-per-page="orderApprovals.list.Meta.PageSize"\r\n        max-size="5"\r\n        boundary-links="orderApprovals.list.Meta.TotalPages > 5"\r\n        ng-model="orderApprovals.list.Meta.Page"\r\n        ng-change="orderApprovals.pageChanged()">\r\n    </ul>\r\n    <button type="button"\r\n            class="btn btn-default btn-block btn-lg visible-xs"\r\n            ng-show="orderApprovals.list.Meta.Page < orderApprovals.list.Meta.TotalPages"\r\n            ng-click="orderApprovals.loadMore()">Load More</button>\r\n</div>'),$templateCache.put("orderManagement/order/templates/orderDetail.html",'<header class="c-jumbotron">\r\n    <div class="container container-smooth">\r\n        <ul class="breadcrumb">\r\n            <li><a href="" ui-sref="orders">All Orders</a></li>\r\n            <li class="active">{{orderDetail.order.ID}}</li>\r\n        </ul>\r\n        <div class="l-page-header">\r\n            <h3 class="l-page-header__title">\r\n                <small class="text-muted">Order ID</small> <br> {{orderDetail.order.ID}}\r\n            </h3>\r\n            <div class="l-page-header__btns text-muted">\r\n                <i class="fa fa-calendar"></i> Submitted on {{orderDetail.order.DateSubmitted | date}}\r\n            </div>\r\n        </div>\r\n        <oc-responsive-tabs nav-items="orderDetail.navigationItems"></oc-responsive-tabs>\r\n    </div>\r\n</header>\r\n<br>\r\n<article class="container container-smooth">\r\n    <div ui-view cg-busy="application.stateLoading(\'orderDetail\')">\r\n        <!--====== ORDER DETAILS ======-->\r\n\r\n        <div class="panel panel-default">\r\n            <div class="panel-body">\r\n                <div class="row">\r\n                    <div class="col-sm-8">\r\n                        <b>Date {{orderDetail.order.DateSubmitted ? \'Submitted\' : \'Created\'}}: </b> {{(orderDetail.order.DateSubmitted\r\n                        || orderDetail.order.DateCreated) | date:\'medium\'}} <br>\r\n                        <b>Status: </b> {{orderDetail.order.Status | humanize}} <br>\r\n                        <b>Buyer Company: </b> {{orderDetail.order.FromCompany.Name}} <br>\r\n                        <b>Created By: </b> {{orderDetail.order.FromUserFirstName + \' \' + orderDetail.order.FromUserLastName}}\r\n                        <br>\r\n                        <div ng-if="orderDetail.order.Comments">\r\n                            <b>Comments: </b> {{orderDetail.order.Comments}}\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-sm-4">\r\n                        <span>Subtotal</span> <span class="pull-right">{{orderDetail.order.Subtotal | currency}}</span><br>\r\n                        <span>Shipping</span> <span class="pull-right">{{orderDetail.order.ShippingCost | currency}}</span><br>\r\n                        <span>Tax</span> <span class="pull-right">{{orderDetail.order.TaxCost | currency}}</span>\r\n                        <hr>\r\n                        <b>Total <span class="pull-right">{{orderDetail.order.Total | currency}}</span></b>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-sm-6" ng-if="orderDetail.order.ShippingAddressID">\r\n                <div class="panel panel-default">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Shipping Address</h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <div ng-bind-html="orderDetail.lineItems.Items[0].ShippingAddress | address:\'full\'"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-sm-6" ng-if="orderDetail.order.BillingAddressID">\r\n                <div class="panel panel-default">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Billing Address</h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <div ng-bind-html="orderDetail.order.BillingAddress | address:\'full\'"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!--====== LINE ITEM LIST ======-->\r\n        <div class="panel panel-default table-responsive">\r\n            <table class="table table-striped table-bordered l-lineitem-table">\r\n                <colgroup>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                    <col>\r\n                </colgroup>\r\n                <thead>\r\n                    <tr>\r\n                        <th>ID</th>\r\n                        <th>Product</th>\r\n                        <th ng-if="!orderDetail.order.ShippingAddressID">Shipping Address</th>\r\n                        <th>Quantity</th>\r\n                        <th>Unit Price</th>\r\n                        <th>Line Total</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr ng-repeat="lineItem in orderDetail.lineItems.Items">\r\n                        <td>{{lineItem.ID}}</td>\r\n                        <td>\r\n                            <a ng-click="orderDetail.editLineItem(lineItem)"><i class="fa fa-edit"></i> {{lineItem.Product.Name}}</a>\r\n                            <small class="text-muted">({{lineItem.Product.ID}})</small>\r\n                            <ul ng-if="lineItem.Specs.length > 0">\r\n                                <li ng-repeat="spec in lineItem.Specs">\r\n                                    <small>{{spec.Name}}:</small>\r\n                                    <small>{{spec.Value}}</small>\r\n                                </li>\r\n                            </ul>\r\n                        </td>\r\n                        <td ng-if="!orderDetail.order.ShippingAddressID">{{lineItem.ShippingAddress | address}}</td>\r\n                        <td>{{lineItem.Quantity}}</td>\r\n                        <td>{{lineItem.UnitPrice | currency}}</td>\r\n                        <td>{{lineItem.LineTotal | currency}}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        <!--====== LINE ITEM PAGINATION ======-->\r\n        <ul uib-pagination class="pagination-sm pull-right hidden-xs" ng-if="orderDetail.lineItems.Meta.TotalPages > 1" total-items="orderDetail.lineItems.Meta.TotalCount"\r\n            items-per-page="orderDetail.lineItems.Meta.PageSize" max-size="5" boundary-links="orderDetail.lineItems.Meta.TotalPages > 5"\r\n            ng-model="orderDetail.lineItems.Meta.Page" ng-change="orderDetail.pageChanged()">\r\n        </ul>\r\n        <button type="button" class="btn btn-default btn-block btn-lg visible-xs" ng-show="orderDetail.lineItems.Meta.Page < orderDetail.lineItems.Meta.TotalPages"\r\n            ng-click="orderDetail.loadMore()">Load More</button>\r\n    </div>\r\n</article>'),$templateCache.put("orderManagement/order/templates/orderDetail.lineItemEdit.modal.html",'<form name="orderLineItemEditModal.form" class="form-horizontal" ng-submit="orderLineItemEditModal.submit()" novalidate autocomplete="off" oc-readonly-roles="OrderAdmin" cg-busy="orderLineItemEditModal.loading">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="orderLineItemEditModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span> Line Item {{orderLineItemEditModal.lineItemID}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label for="lineItemID" class="control-label col-sm-3">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="lineItemID" name="ID" type="text" class="form-control" ng-change="orderLineItemEditModal.updateValidity()" placeholder="(Optional)" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="orderLineItemEditModal.lineItem.ID" ng-disabled="!orderLineItemEditModal.product" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="lineItemQuantity" class="control-label col-sm-3">Quantity</label>\r\n            <div class="col-sm-9">\r\n                <input id="lineItemQuantity" name="Quantity" type="number" min="1" class="form-control" ng-model="orderLineItemEditModal.lineItem.Quantity" required ng-disabled="!orderLineItemEditModal.product"/>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="lineItemUnitPrice" class="control-label col-sm-3">Unit Price</label>\r\n            <div class="col-sm-9">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-dollar"></i>\r\n                    </span>\r\n                    <input id="lineItemUnitPrice" name="UnitPrice" type="number" min="0" step="0.01" placeholder="0.00" class="form-control" ng-model="orderLineItemEditModal.lineItem.UnitPrice" required ng-disabled="!orderLineItemEditModal.product"/>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="lineItemDateNeeded" class="control-label col-sm-3">Date Needed</label>\r\n            <div class="col-sm-9">\r\n                <input ng-if="application.isTouchDevice" type="date" class="form-control" ng-model="orderLineItemEditModal.lineItem.DateNeeded" ng-disabled="!orderLineItemEditModal.product">\r\n                <input id="lineItemDateNeeded" name="DateNeeded" ng-if="!application.isTouchDevice" type="text" class="form-control" ng-model="orderLineItemEditModal.lineItem.DateNeeded" uib-datepicker-popup="MM/dd/yyyy" is-open="dateNeeded.open" ng-click="dateNeeded.open = !dateNeeded.open" ng-disabled="!orderLineItemEditModal.product">\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-if="orderLineItemEditModal.product">Save</button>\r\n        <div class="alert alert-danger text-center" ng-if="!orderLineItemEditModal.product">\r\n            <span>This line item cannot be edited as the product has been deleted</span>\r\n        </div>\r\n    </div>\r\n</form>\r\n'),$templateCache.put("orderManagement/orders/templates/orders.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Orders\r\n        </h3>\r\n    </header>\r\n\r\n    <!--====== SEARCH ======-->\r\n    <form name="OrdersSearchForm" pretty-submit>\r\n        <fieldset class="form-group">\r\n            <div class="input-group">\r\n                <span class="input-group-addon">\r\n                    <i class="fa fa-search"></i>\r\n                </span>\r\n                <input type="search" ng-change="orders.search()" ng-model-options="{debounce:1000}" placeholder="Search orders..." ng-model="orders.parameters.search" class="form-control">\r\n                <span ng-if="orders.searchResults" class="input-group-btn">\r\n                    <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="orders.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear Search</span></button>\r\n                </span>\r\n            </div>\r\n        </fieldset>\r\n    </form>\r\n\r\n    <!--====== FILTERS ======-->\r\n    <form name="OrdersFiltersForm">\r\n        <div class="row">\r\n            <div class="col-sm-3 form-group">\r\n                <label for="Status">Status</label>\r\n                <select id="Status" class="form-control" ng-model="orders.parameters.filters.status" ng-options="status.Value as status.Name for status in orders.orderStatuses" ng-change="orders.filter(true)">\r\n                    <option value="">All</option>\r\n                </select>\r\n            </div>\r\n            <div class="col-sm-3 form-group">\r\n                <label for="BuyerCompany">Buyer Company</label>\r\n                <ui-select id="BuyerCompany" ng-model="orders.parameters.filters.FromCompanyID" close-on-select="true" ng-change="orders.filter(true)">\r\n                    <ui-select-match placeholder="Search buyer companies..." allow-clear="true">\r\n                        <span ng-bind-html="$select.selected.Name"></span>\r\n                    </ui-select-match>\r\n                    <ui-select-choices repeat="buyer.ID as buyer in (orders.buyerCompanies.Items | filter: $select.search) track by $index" refresh="orders.searchBuyerCompanies($select.search)" refresh-delay="300">\r\n                        <span ng-bind-html="buyer.Name"></span>\r\n                    </ui-select-choices>\r\n                </ui-select>\r\n            </div>\r\n            <div class="col-sm-3 form-group">\r\n                <label for="FromDate">From Date</label>\r\n                <input ng-if="application.isTouchDevice" type="date" class="form-control" ng-model="orders.parameters.fromDate" ng-blur="orders.filter(true)">\r\n                <input id="FromDate" ng-if="!application.isTouchDevice" type="text" class="form-control" ng-model="orders.parameters.fromDate" uib-datepicker-popup datepicker-options="{maxDate:orders.parameters.toDate}" is-open="fromDate.open" ng-change="orders.filter(true)" ng-click="fromDate.open = !fromDate.open">\r\n            </div>\r\n            <div class="col-sm-3 form-group">\r\n                <label for="ToDate">To Date</label>\r\n                <input ng-if="application.isTouchDevice" type="date" class="form-control" ng-model="orders.parameters.toDate" ng-blur="orders.filter(true)">\r\n                <input id="ToDate" ng-if="!application.isTouchDevice" type="text" class="form-control" ng-model="orders.parameters.toDate" uib-datepicker-popup datepicker-options="{minDate:orders.parameters.fromDate}" is-open="toDate.open" ng-change="orders.filter(true)" ng-click="toDate.open = !toDate.open">\r\n            </div>\r\n        </div>\r\n    </form>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="orders.searchLoading">\r\n        <div class="no-matches" ng-if="!orders.list.Items.length">\r\n            <b>No matches found.</b>\r\n        </div>\r\n        <div ng-if="orders.list.Items.length">\r\n            <div class="text-right">\r\n                <p>{{(application.$ocMedia(\'min-width:768px\') ? orders.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                    orders.list.Meta.ItemRange[1] + \' of \' + orders.list.Meta.TotalCount + \' results\'}}</p>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-order-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                    </colgroup>\r\n                    <thead>\r\n                        <tr>\r\n                            <th ng-click="orders.updateSort(\'ID\')">\r\n                                ID\r\n                                <i class="fa fa-caret-down" ng-show="orders.parameters.sortBy == \'ID\'"></i>\r\n                                <i class="fa fa-caret-up" ng-show="orders.parameters.sortBy == \'!ID\'"></i>\r\n                            </th>\r\n                            <th ng-click="orders.updateSort(\'Status\')">\r\n                                Status\r\n                                <i class="fa fa-caret-down" ng-show="orders.parameters.sortBy == \'Status\'"></i>\r\n                                <i class="fa fa-caret-up" ng-show="orders.parameters.sortBy == \'!Status\'"></i>\r\n                            </th>\r\n                            <th ng-click="orders.updateSort(\'DateSubmitted\')">\r\n                                Received\r\n                                <i class="fa fa-caret-down" ng-show="orders.parameters.sortBy == \'DateSubmitted\'"></i>\r\n                                <i class="fa fa-caret-up" ng-show="orders.parameters.sortBy == \'!DateSubmitted\'"></i>\r\n                            </th>\r\n                            <th ng-click="orders.updateSort(\'FromCompanyID\')">\r\n                                Buyer Company\r\n                                <i class="fa fa-caret-down" ng-show="orders.parameters.sortBy == \'FromCompanyID\'"></i>\r\n                                <i class="fa fa-caret-up" ng-show="orders.parameters.sortBy == \'!FromCompanyID\'"></i>\r\n                            </th>\r\n                            <th ng-click="orders.updateSort(\'FromUserFirstName\')">\r\n                                Submitted By\r\n                                <i class="fa fa-caret-down" ng-show="orders.parameters.sortBy == \'FromUserFirstName\'"></i>\r\n                                <i class="fa fa-caret-up" ng-show="orders.parameters.sortBy == \'!FromUserFirstName\'"></i>\r\n                            </th>\r\n                            <th ng-click="orders.updateSort(\'Subtotal\')">\r\n                                Subtotal\r\n                                <i class="fa fa-caret-down" ng-show="orders.parameters.sortBy == \'Subtotal\'"></i>\r\n                                <i class="fa fa-caret-up" ng-show="orders.parameters.sortBy == \'!Subtotal\'"></i>\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr ng-repeat="order in orders.list.Items">\r\n                            <td><a href="" ui-sref="orderDetail({buyerid: order.FromCompanyID, orderid: order.ID})">{{order.ID}}</a></td>\r\n                            <td>{{order.Status | humanize}}</td>\r\n                            <td>{{(order.DateSubmitted || order.DateCreated) | date:\'short\'}}</td>\r\n                            <td>{{order.FromCompany.Name}}</td>\r\n                            <td>{{order.FromUser.FirstName + \' \' + order.FromUser.LastName}}</td>\r\n                            <td>{{order.Subtotal | currency}}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                ng-if="orders.list.Meta.TotalPages > 1"\r\n                total-items="orders.list.Meta.TotalCount"\r\n                items-per-page="orders.list.Meta.PageSize"\r\n                max-size="5"\r\n                boundary-links="orders.list.Meta.TotalPages > 5"\r\n                ng-model="orders.list.Meta.Page"\r\n                ng-change="orders.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="orders.list.Meta.Page < orders.list.Meta.TotalPages"\r\n                    ng-click="orders.loadMore()">Load More</button>\r\n        </div>\r\n    </div>\r\n\r\n</article>'),$templateCache.put("orderManagement/payments/templates/orderPayments.html",'<div cg-busy="application.stateLoading(\'payments\')">\r\n    <!--====== PAYMENT LIST ======-->\r\n    <div class="panel panel-default table-responsive" ng-if="orderPayments.list.Items.length">\r\n        <table class="table table-striped table-bordered l-payment-table">\r\n            <colgroup>\r\n                <col>\r\n                <col>\r\n                <col>\r\n                <col>\r\n                <col>\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th>ID</th>\r\n                <th>Type</th>\r\n                <th>Details</th>\r\n                <th>Date Created</th>\r\n                <th>Amount</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="payment in orderPayments.list.Items">\r\n                <td>{{payment.ID}}</td>\r\n                <td>{{payment.Type | humanize}} </td>\r\n                <td>\r\n                    <div ng-if="!payment.Details">No details available</div>\r\n                    <div ng-if="payment.Details">\r\n                        <div ng-if="payment.Type == \'CreditCard\'">\r\n                            <b>{{payment.Details.CardholderName}}</b>\r\n                            <div>\r\n                                <span><i class="fa fa-lg {{payment.Details.CardType | faCreditCard}}"></i></span>\r\n                                <small>{{\'XXXX-XXXX-XXXX-\' + payment.Details.PartialAccountNumber}}</small><br>\r\n                                <small class="text-muted">Expires On: {{payment.Details.ExpirationDate | date:\'MM/yy\'}}</small><br>\r\n                                <small class="text-muted">({{payment.CreditCardID}})</small>\r\n                            </div>\r\n                        </div>\r\n                        <div ng-if="payment.Type == \'SpendingAccount\'">\r\n                            <b>{{payment.Details.Name}}</b>\r\n                            <div class="text-muted">\r\n                                <small>({{payment.SpendingAccountID}})</small><br>\r\n                                <small ng-if="payment.Details.StartDate && payment.Details.EndDate">\r\n                                    Lifetime: {{payment.Details.StartDate | date:\'shortDate\'}} - {{payment.Details.EndDate | date :\'shortDate\'}}\r\n                                </small>\r\n                                <small ng-if="payment.Details.StartDate && !payment.Details.EndDate">\r\n                                    Made Available On: {{payment.Details.StartDate | date:\'shortDate\'}}\r\n                                </small>\r\n                                <small ng-if="!payment.Details.StartDate && payment.Details.EndDate">\r\n                                    Expires On: {{payment.Details.EndDate | date :\'shortDate\'}}\r\n                                </small>\r\n                            </div>\r\n                        </div>\r\n                        <div ng-if="payment.Type == \'PurchaseOrder\'">\r\n                            <b>PO Number:</b> {{payment.Details.PONumber}}\r\n                        </div>\r\n                    </div>\r\n                </td>\r\n                <td>{{payment.DateCreated | date:\'short\'}}</td>\r\n                <td>{{payment.Amount | currency}}</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div ng-if="!orderPayments.list.Items.length" class="no-matches">\r\n        This order does not have any payments. <br>\r\n    </div>\r\n\r\n    <!--====== PAYMENTS PAGINATION ======-->\r\n    <ul uib-pagination\r\n        class="pagination-sm pull-right hidden-xs"\r\n        ng-if="orderPayments.list.Meta.TotalPages > 1"\r\n        total-items="orderPayments.list.Meta.TotalCount"\r\n        items-per-page="orderPayments.list.Meta.PageSize"\r\n        max-size="5"\r\n        boundary-links="orderPayments.list.Meta.TotalPages > 5"\r\n        ng-model="orderPayments.list.Meta.Page"\r\n        ng-change="orderPayments.pageChanged()">\r\n    </ul>\r\n    <button type="button"\r\n            class="btn btn-default btn-block btn-lg visible-xs"\r\n            ng-show="orderPayments.list.Meta.Page < orderPayments.list.Meta.TotalPages"\r\n            ng-click="orderPayments.loadMore()">Load More</button>\r\n</div>'),$templateCache.put("orderManagement/shipments/templates/orderShipments.html",'<div ui-view cg-busy="application.stateLoading(\'shipments\')">\r\n    <div ng-if="!orderShipments.list.Items.length" class="no-matches">\r\n        This order does not have any shipments. <br>\r\n        <a ui-sref=".create" oc-if-roles="ShipmentAdmin">Create one now</a>\r\n    </div>\r\n    <div class="row" ng-if="orderShipments.list.Items.length">\r\n        <div class="col-sm-5">\r\n            <div oc-if-roles="ShipmentAdmin">\r\n                <button type="button" class="btn btn-primary" ui-sref=".create">\r\n                    <i class="fa fa-plus-circle" aria-hidden="true"></i>\r\n                    New Shipment\r\n                </button>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <ul class="list-group">\r\n                <li class="list-group-item" ng-class="{\'active\': shipment.ID == orderShipments.selectedShipment.ID}" ng-repeat="shipment in orderShipments.list.Items" ng-click="orderShipments.selectShipment(shipment)">\r\n                    <b>{{shipment.ID}}</b>\r\n                </li>\r\n            </ul>\r\n            <!--====== SHIPMENT PAGINATION ======-->\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                ng-if="orderShipments.list.Meta.TotalPages > 1"\r\n                total-items="orderShipments.list.Meta.TotalCount"\r\n                items-per-page="orderShipments.list.Meta.PageSize"\r\n                max-size="5"\r\n                boundary-links="orderShipments.list.Meta.TotalPages > 5"\r\n                ng-model="orderShipments.list.Meta.Page"\r\n                ng-change="orderShipments.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="orderShipments.list.Meta.Page < orderShipments.list.Meta.TotalPages"\r\n                    ng-click="orderShipments.loadMore()">Load More</button>\r\n        </div>\r\n        <div class="col-sm-7">\r\n            <div ng-if="!orderShipments.selectedShipment" class="well text-center">\r\n                Select a shipment to view details\r\n            </div>\r\n            <div ng-if="orderShipments.selectedShipment">\r\n                <header class="l-page-header">\r\n                    <h3 class="l-page-header__title">\r\n                        {{orderShipments.selectedShipment.ID}}\r\n                    </h3>\r\n                    <div class="l-page-header__btns" oc-if-roles="ShipmentAdmin">\r\n                        <button type="button" class="btn btn-default" ng-click="orderShipments.editShipment()"><i class="fa fa-edit"></i> Edit</button>\r\n                        <button type="button" class="btn btn-danger" ng-click="orderShipments.deleteShipment()"><i class="fa fa-trash"></i> Delete</button>\r\n                    </div>\r\n                </header>\r\n                <div class="panel panel-default">\r\n                    <div class="panel-body">\r\n                        <b>Shipper: </b> {{orderShipments.selectedShipment.Shipper}} <br>\r\n                        <b>Tracking Number: </b> {{orderShipments.selectedShipment.TrackingNumber}} <br>\r\n                        <b>Date Shipped: </b> {{orderShipments.selectedShipment.DateShipped | date:\'shortDate\'}} <br>\r\n                        <b>Date Delivered: </b> {{orderShipments.selectedShipment.DateDelivered | date:\'shortDate\'}} <br>\r\n                        <b>Cost: </b> {{orderShipments.selectedShipment.Cost | currency}}\r\n                    </div>\r\n                </div>\r\n                <div class="panel panel-default" ng-if="orderShipments.selectedShipment.ShippingAddress">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Shipping Address</h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <div ng-bind-html="orderShipments.selectedShipment.ShippingAddress | address:\'full\'"></div>\r\n                    </div>\r\n                </div>\r\n                <div ng-if="orderShipments.selectedShipment.Items.length">\r\n                    <div class="clearfix" oc-if-roles="ShipmentAdmin">\r\n                        <button type="button" class="btn btn-primary pull-right" ng-click="orderShipments.createShipmentItems()">\r\n                            <i class="fa fa-plus-circle"></i>\r\n                            Add Items\r\n                        </button>\r\n                        <br>\r\n                        <br>\r\n                    </div>\r\n                    <div class="panel panel-default table-responsive">\r\n                        <table class="table table-bordered l-shipmentitem-table">\r\n                            <colgroup>\r\n                                <col>\r\n                                <col>\r\n                                <col>\r\n                                <col>\r\n                            </colgroup>\r\n                            <thead>\r\n                            <tr>\r\n                                <th><span class="hidden-xs">Quantity </span>Shipped</th>\r\n                                <th>Product</th>\r\n                                <th>Line Item ID</th>\r\n                                <th oc-if-roles="ShipmentAdmin"></th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            <tr ng-repeat-start="item in orderShipments.selectedShipment.Items" ng-if="item.OrderID == orderShipments.orderID">\r\n                                <td>\r\n                                    <a href="" ng-click="orderShipments.editShipmentItem(item)">{{item.QuantityShipped + \' of \' + item.LineItem.Quantity}}</a>\r\n                                </td>\r\n                                <td rowspan="{{orderShipments.selectedShipment.ShippingAddress ? 1 : 2}}">\r\n                                    {{item.LineItem.Product.Name}} <small class="text-muted">({{item.LineItem.Product.ID}})</small>\r\n                                </td>\r\n                                <td>{{item.LineItem.ID}}</td>\r\n                                <td rowspan="{{orderShipments.selectedShipment.ShippingAddress ? 1 : 2}}" oc-if-roles="ShipmentAdmin">\r\n                                    <button class="btn btn-danger btn-xs btn-block" ng-click="orderShipments.deleteShipmentItem(item)"><i class="fa fa-trash"></i> <span class="hidden-xs">Delete</span></button>\r\n                                </td>\r\n                            </tr>\r\n                            <tr ng-repeat-end ng-if="!orderShipments.selectedShipment.ShippingAddress">\r\n                                <td colspan="2">{{item.LineItem.ShippingAddress | address:\'fullOneLine\'}}</td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n                <div ng-if="!orderShipments.selectedShipment.Items.length" class="no-matches">\r\n                    This shipment does not have any items. <br>\r\n                    <a ng-click="orderShipments.createShipmentItems()">Create one now</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),
$templateCache.put("orderManagement/shipments/templates/orderShipmentsCreate.html",'<form name="orderShipmentsCreate.form" ng-submit="orderShipmentsCreate.submit()" autocomplete="off" novalidate>\r\n    <div class="row">\r\n        <div class="col-sm-3">\r\n            <fieldset class="form-group">\r\n                <label for="shipmentShipper">Shipper</label>\r\n                <input id="shipmentShipper" type="text" name="Shipper" class="form-control" ng-model="orderShipmentsCreate.shipment.Shipper" />\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="shipmentTrackingNumber">Tracking Number</label>\r\n                <input id="shipmentTrackingNumber" type="text" name="TrackingNumber" class="form-control" ng-model="orderShipmentsCreate.shipment.TrackingNumber" />\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="shipmentCost">Cost</label>\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-dollar"></i>\r\n                    </span>\r\n                    <input id="shipmentCost" type="number" name="Cost" min="0" placeholder="0.00" step="0.01" class="form-control" ng-model="orderShipmentsCreate.shipment.Cost" />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="shipmentDateShipped">Date Shipped</label>\r\n                <input ng-if="application.isTouchDevice" type="date" class="form-control" ng-model="orderShipmentsCreate.shipment.DateShipped">\r\n                <input id="shipmentDateShipped" name="DateShipped" ng-if="!application.isTouchDevice" type="text" class="form-control" ng-model="orderShipmentsCreate.shipment.DateShipped" uib-datepicker-popup="MM/dd/yyyy" is-open="dateShipped.open" ng-click="dateShipped.open = !dateShipped.open">\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="shipmentDateDelivered">Date Delivered</label>\r\n                <input ng-if="application.isTouchDevice" type="date" class="form-control" ng-model="orderShipmentsCreate.shipment.DateDelivered">\r\n                <input id="shipmentDateDelivered" name="DateDelivered" ng-if="!application.isTouchDevice" type="text" class="form-control" ng-model="orderShipmentsCreate.shipment.DateDelivered" uib-datepicker-popup="MM/dd/yyyy" is-open="dateDelivered.open" ng-click="dateDelivered.open = !dateDelivered.open">\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <button type="submit" class="btn btn-primary btn-block" ng-disabled="orderShipmentsCreate.form.$invalid">Save Shipment</button>\r\n            </fieldset>\r\n        </div>\r\n        <div class="col-sm-9">\r\n            <!--====== LINE ITEM LIST ======-->\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-bordered">\r\n                    <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>ID</th>\r\n                        <th>Product</th>\r\n                        <th>Ship To</th>\r\n                        <th>Quantity in Shipment</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-class="{\'active\': lineItem.QuantityShipped == lineItem.Quantity}" ng-repeat="lineItem in orderShipmentsCreate.lineItems.Items | ocCachedList:orderShipmentsCreate.selectedLineItemPage">\r\n                        <th class="text-center">\r\n                            <input type="checkbox" ng-model="lineItem.Selected" ng-disabled="lineItem.Quantity == lineItem.QuantityShipped" ng-change="orderShipmentsCreate.itemChange(lineItem)" />\r\n                        </th>\r\n                        <td>{{lineItem.ID}}</td>\r\n                        <td>\r\n                            <span>{{lineItem.Product.Name}}</span>\r\n                            <small class="text-muted">({{lineItem.Product.ID}})</small>\r\n                        </td>\r\n                        <td>\r\n                            <div ng-bind-html="lineItem.ShippingAddress | address:\'full\'"></div>\r\n                        </td>\r\n                        <td>\r\n                            <span ng-if="lineItem.QuantityShipped == lineItem.Quantity">Shipped</span>\r\n                            <div class="input-group input-group-sm" ng-if="lineItem.QuantityShipped < lineItem.Quantity">\r\n                                <input type="number" class="form-control" ng-model="lineItem.ShipQuantity" ng-change="orderShipmentsCreate.itemChange(lineItem)">\r\n                                <span class="input-group-addon">of {{lineItem.Quantity}}</span>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <!--====== LINE ITEM PAGINATION ======-->\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                ng-if="orderShipmentsCreate.lineItems.Meta.TotalPages > 1"\r\n                total-items="orderShipmentsCreate.lineItems.Meta.TotalCount"\r\n                items-per-page="orderShipmentsCreate.lineItems.Meta.PageSize"\r\n                max-size="5"\r\n                boundary-links="orderShipmentsCreate.lineItems.Meta.TotalPages > 5"\r\n                ng-model="orderShipmentsCreate.lineItems.Meta.Page"\r\n                ng-change="orderShipmentsCreate.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="orderShipmentsCreate.lineItems.Meta.Page < orderShipmentsCreate.lineItems.Meta.TotalPages"\r\n                    ng-click="orderShipmentsCreate.loadMore()">Load More</button>\r\n        </div>\r\n    </div>\r\n</form>'),$templateCache.put("orderManagement/shipments/templates/orderShipmentsCreateItem.modal.html",'<form class="form-horizontal" ng-submit="orderShipmentsCreateItems.submit()" name="orderShipmentsCreateItems.form">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" ng-click="orderShipmentsCreateItems.cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">Add Shipment Items</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <!--====== LINE ITEM LIST ======-->\r\n        <div class="panel panel-default table-responsive">\r\n            <table class="table table-bordered">\r\n                <thead>\r\n                <tr>\r\n                    <th></th>\r\n                    <th>ID</th>\r\n                    <th>Product</th>\r\n                    <th>Ship To</th>\r\n                    <th>Quantity in Shipment</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr ng-class="{\'active\': (lineItem.QuantityShipped == lineItem.Quantity || lineItem.ExistingShipmentItem)}" ng-repeat="lineItem in orderShipmentsCreateItems.lineItems.Items | ocCachedList:orderShipmentsCreateItems.selectedLineItemPage">\r\n                    <th class="text-center">\r\n                        <input type="checkbox" ng-model="lineItem.Selected" ng-disabled="lineItem.Quantity == lineItem.QuantityShipped || lineItem.ExistingShipmentItem" ng-change="orderShipmentsCreateItems.itemChange(lineItem)" />\r\n                    </th>\r\n                    <td>{{lineItem.ID}}</td>\r\n                    <td>\r\n                        <span>{{lineItem.Product.Name}}</span>\r\n                        <small class="text-muted">({{lineItem.Product.ID}})</small>\r\n                    </td>\r\n                    <td>\r\n                        <div ng-bind-html="lineItem.ShippingAddress | address:\'full\'"></div>\r\n                    </td>\r\n                    <td>\r\n                        <span ng-if="lineItem.QuantityShipped == lineItem.Quantity">Shipped</span>\r\n                        <span ng-if="lineItem.ExistingShipmentItem">Existing Item</span>\r\n                        <div class="input-group input-group-sm" ng-if="lineItem.QuantityShipped < lineItem.Quantity && !lineItem.ExistingShipmentItem">\r\n                            <input type="number" class="form-control" ng-model="lineItem.ShipQuantity" ng-change="orderShipmentsCreateItems.itemChange(lineItem)">\r\n                            <span class="input-group-addon">of {{lineItem.Quantity}}</span>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <!--====== LINE ITEM PAGINATION ======-->\r\n        <ul uib-pagination\r\n            class="pagination-sm pull-right hidden-xs"\r\n            ng-if="orderShipmentsCreateItems.lineItems.Meta.TotalPages > 1"\r\n            total-items="orderShipmentsCreateItems.lineItems.Meta.TotalCount"\r\n            items-per-page="orderShipmentsCreateItems.lineItems.Meta.PageSize"\r\n            max-size="5"\r\n            boundary-links="orderShipmentsCreateItems.lineItems.Meta.TotalPages > 5"\r\n            ng-model="orderShipmentsCreateItems.lineItems.Meta.Page"\r\n            ng-change="orderShipmentsCreateItems.pageChanged()">\r\n        </ul>\r\n        <button type="button"\r\n                class="btn btn-default btn-block btn-lg visible-xs"\r\n                ng-show="orderShipmentsCreateItems.lineItems.Meta.Page < orderShipmentsCreateItems.lineItems.Meta.TotalPages"\r\n                ng-click="orderShipmentsCreateItems.loadMore()">Load More</button>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="orderShipmentsCreateItems.form.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("orderManagement/shipments/templates/orderShipmentsEdit.modal.html",'<form class="form-horizontal" ng-submit="orderShipmentsEdit.submit()" name="orderShipmentsEdit.form" cg-busy="orderShipmentsEdit.loading">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" ng-click="orderShipmentsEdit.cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span> Shipment {{orderShipmentsEdit.shipmentID}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label for="shipmentID" class="col-sm-3 control-label">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="shipmentID" name="ID" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="orderShipmentsEdit.shipment.ID"/>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="shipmentTrackingNumber" class="col-sm-3 control-label">Tracking Number</label>\r\n            <div class="col-sm-9">\r\n                <input id="shipmentTrackingNumber" name="TrackingNumber" type="text" class="form-control" ng-model="orderShipmentsEdit.shipment.TrackingNumber" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="shipmentCost" class="col-sm-3 control-label">Cost</label>\r\n            <div class="col-sm-9">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-dollar"></i>\r\n                    </span>\r\n                    <input id="shipmentCost" name="Cost" type="number" min="0" placeholder="0.00" step="0.01" class="form-control" ng-model="orderShipmentsEdit.shipment.Cost" />\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="shipmentDateShipped" class="control-label col-sm-3">Date Shipped</label>\r\n            <div class="col-sm-9">\r\n                <input ng-if="application.isTouchDevice" type="date" class="form-control" ng-model="orderShipmentsEdit.shipment.DateShipped">\r\n                <input id="shipmentDateShipped" name="DateShipped" ng-if="!application.isTouchDevice" type="text" class="form-control" ng-model="orderShipmentsEdit.shipment.DateShipped" uib-datepicker-popup="MM/dd/yyyy" datepicker-options="{maxDate:orderShipmentsEdit.shipment.DateDelivered}" is-open="dateShipped.open" ng-click="dateShipped.open = !dateShipped.open">\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="shipmentDateDelivered" class="control-label col-sm-3">Date Delivered</label>\r\n            <div class="col-sm-9">\r\n                <input ng-if="application.isTouchDevice" type="date" class="form-control" ng-model="orderShipmentsEdit.shipment.DateDelivered">\r\n                <input id="shipmentDateDelivered" name="DateDelivered" ng-if="!application.isTouchDevice" type="text" class="form-control" ng-model="orderShipmentsEdit.shipment.DateDelivered" uib-datepicker-popup="MM/dd/yyyy" datepicker-options="{minDate:orderShipmentsEdit.shipment.DateShipped}" is-open="dateDelivered.open" ng-click="dateDelivered.open = !dateDelivered.open">\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("orderManagement/shipments/templates/orderShipmentsEditItem.modal.html",'<form class="form-horizontal" ng-submit="orderShipmentsEditItem.submit()" name="orderShipmentsEditItem.form" cg-busy="orderShipmentsEditItem.loading" oc-readonly-roles="ShipmentAdmin">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" ng-click="orderShipmentsEditItem.cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span> Shipment Item {{orderShipmentsEditItem.itemID}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label for="shipmentItemQuantityShipped" class="col-sm-4 control-label">Quantity Shipped</label>\r\n            <div class="col-sm-8">\r\n                <input id="shipmentItemQuantityShipped" name="QuantityShipped" type="number" class="form-control" ng-model="orderShipmentsEditItem.shipmentItem.QuantityShipped" min="1" ng-max="orderShipmentsEditItem.shipmentItem.LineItem.Quantity" required />\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("productManagement/buyerProducts/templates/buyerProducts.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Available Products\r\n        </h3>\r\n        <!--====== CREATE ======-->\r\n        <div class="l-page-header__btns" oc-if-roles="ProductAdmin">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="buyerProducts.createProduct()"><i class="fa fa-plus-circle"></i>\r\n                New Product\r\n            </button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <div ng-if="buyerProducts.list.Items.length || (!buyerProducts.list.Items.length && buyerProducts.searchResults)">\r\n        <form name="buyerProducts.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="buyerProducts.search()" ng-model-options="{debounce:1000}" placeholder="Search Products..."\r\n                        ng-model="buyerProducts.parameters.search" class="form-control">\r\n                    <span ng-if="buyerProducts.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="buyerProducts.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="buyerProducts.searchLoading">\r\n        <div class="no-matches" ng-if="!buyerProducts.list.Items.length">\r\n            <b ng-if="buyerProducts.searchResults">No matches found.</b>\r\n            <b ng-if="!buyerProducts.searchResults">This seller organization does not have any Products.</b>\r\n        </div>\r\n        <div ng-if="buyerProducts.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6 col-xs-offset-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? buyerProducts.list.Meta.ItemRange[0] : \'1\') + \' - \' + buyerProducts.list.Meta.ItemRange[1]\r\n                        + \' of \' + buyerProducts.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n\r\n            <form name="buyerProducts.form" class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-product-table__buyer">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                    </colgroup>\r\n                    <thead>\r\n                        <tr>\r\n                            <th rowspan="2" ng-click="buyerProducts.updateSort(\'ID\')">\r\n                                ID\r\n                                <i class="fa fa-caret-down" ng-show="buyerProducts.parameters.sortBy == \'ID\'"></i>\r\n                                <i class="fa fa-caret-up" ng-show="buyerProducts.parameters.sortBy == \'!ID\'"></i>\r\n                            </th>\r\n                            <th rowspan="2" ng-click="buyerProducts.updateSort(\'Name\')">\r\n                                Name\r\n                                <i class="fa fa-caret-down" ng-show="buyerProducts.parameters.sortBy == \'Name\'"></i>\r\n                                <i class="fa fa-caret-up" ng-show="buyerProducts.parameters.sortBy == \'!Name\'"></i>\r\n                            </th>\r\n                            <th colspan="2" class="text-center">Quantity Options</th>\r\n                            <th rowspan="2" class="text-right">Base Price</th>\r\n                        </tr>\r\n                        <tr>\r\n                            <th class="text-center">Min</th>\r\n                            <th class="text-center">Max</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr ng-repeat="product in buyerProducts.list.Items">\r\n                            <td>{{product.ID}}</td>\r\n                            <td><a href="" ui-sref="product({productid:product.ID})">{{product.Name}}</a></td>\r\n                            <td ng-if="product.SelectedPrice" class="text-center">{{product.SelectedPrice.MinQuantity}}</td>\r\n                            <td ng-if="product.SelectedPrice" class="text-center" ng-class="{\'text-muted\':!product.SelectedPrice.MaxQuantity}">{{product.SelectedPrice.MaxQuantity || \'N/A\'}}</td>\r\n                            <td ng-if="product.SelectedPrice" class="text-right text-primary">\r\n                                <a ui-sref="product.pricing({productid:product.ID, pricescheduleid:product.SelectedPrice.ID})">\r\n                                    <small class="text-info" ng-if="product.DefaultPriceScheduleID == product.SelectedPrice.ID">(Default) </small>\r\n                                    <b>\r\n                                        {{product.SelectedPrice.PriceBreaks[0].Price | currency}} \r\n                                    </b>\r\n                                </a>\r\n                                <button style="margin-left:5px;" class="btn btn-default btn-xs" ng-click="buyerProducts.updateProductPrice(this)">\r\n                                    {{product.DefaultPriceScheduleID == product.SelectedPrice.ID ? \'Override\' : \'Change\'}}</button>\r\n                            </td>\r\n                            <td colspan="3" class="text-center" ng-if="!product.SelectedPrice">\r\n                                <button class="btn btn-primary btn-xs" ng-click="buyerProducts.updateProductPrice(this)"><i class="fa fa-plus-circle"></i> Select or Create a Price</button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination class="pagination-sm pull-right hidden-xs" ng-if="buyerProducts.list.Meta.TotalPages > 1" total-items="buyerProducts.list.Meta.TotalCount"\r\n                items-per-page="buyerProducts.list.Meta.PageSize" max-size="5" boundary-links="buyerProducts.list.Meta.TotalPages > 5"\r\n                ng-model="buyerProducts.list.Meta.Page" ng-change="buyerProducts.pageChanged()">\r\n            </ul>\r\n            <button type="button" class="btn btn-default btn-block btn-lg visible-xs" ng-show="buyerProducts.list.Meta.Page < buyerProducts.list.Meta.TotalPages"\r\n                ng-click="buyerProducts.loadMore()">Load More</button>\r\n        </div>\r\n    </div>\r\n</article>'),$templateCache.put("productManagement/categories/templates/productCatalogs.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Available Catalogs\r\n        </h3>\r\n    </header>\r\n\r\n    <!--====== SEARCH ======-->\r\n    <div ng-if="productCatalogs.list.Items.length || (!productCatalogs.list.Items.length && productCatalogs.searchResults)">\r\n        <form name="productCatalogs.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="productCatalogs.search()" ng-model-options="{debounce:1000}" placeholder="Search catalogs..." ng-model="productCatalogs.parameters.search" class="form-control">\r\n                    <span ng-if="productCatalogs.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="productCatalogs.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear Search</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="productCatalogs.searchLoading">\r\n        <div class="no-matches" ng-if="!productCatalogs.list.Items.length">\r\n            <b ng-if="productCatalogs.searchResults">No matches found.</b>\r\n            <b ng-if="!productCatalogs.searchResults">This seller organization does not have any catalog organizations.</b>\r\n        </div>\r\n        <div ng-if="productCatalogs.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6 col-xs-offset-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? productCatalogs.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        productCatalogs.list.Meta.ItemRange[1] + \' of \' + productCatalogs.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-catalog-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th ng-click="productCatalogs.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="productCatalogs.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="productCatalogs.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="productCatalogs.updateSort(\'Name\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="productCatalogs.parameters.sortBy == \'Name\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="productCatalogs.parameters.sortBy == \'!Name\'"></i>\r\n                        </th>\r\n                        <th>\r\n                            Active\r\n                        </th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="catalog in productCatalogs.list.Items">\r\n                        <td>{{catalog.ID}}</td>\r\n                        <td><a href="" ui-sref="product.categories({catalogid:catalog.ID})">{{catalog.Name}}</a></td>\r\n                        <td class="text-center">\r\n                            <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':catalog.Active}"></i>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                boundary-links="productCatalogs.list.Meta.TotalPages > 5"\r\n                max-size="5"\r\n                total-items="productCatalogs.list.Meta.TotalCount"\r\n                items-per-page="productCatalogs.list.Meta.PageSize"\r\n                ng-model="productCatalogs.list.Meta.Page"\r\n                ng-if="productCatalogs.list.Meta.TotalPages > 1"\r\n                ng-change="productCatalogs.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="productCatalogs.list.Meta.Page < productCatalogs.list.Meta.TotalPages"\r\n                    ng-click="productCatalogs.loadMore()">Load More\r\n            </button>\r\n        </div>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("productManagement/categories/templates/productCategories.html",'<ol class="breadcrumb">\r\n    <li><a href="" ui-sref="product.catalogs">Available Catalogs</a></li>\r\n    <li class="active">{{productCategories.selectedCatalog.Name}}</li>\r\n</ol>\r\n<div class="l-page-header l-page-header-xs">\r\n    <h3 class="l-page-header__title">\r\n        Categories\r\n    </h3>\r\n    <div class="l-page-header__btns" oc-if-roles="CategoryAdmin">\r\n        <button type="button" class="btn btn-primary" ng-click="productCategories.createCategory()">\r\n            <i class="fa fa-plus-circle" aria-hidden="true"></i>\r\n            New Category\r\n        </button>\r\n    </div>\r\n</div>\r\n<div ng-if="!productCategories.tree.length" class="no-matches">\r\n    <b>There are no categories in this catalog. <span oc-if-roles="CategoryAdmin"><a ng-click="productCategories.createCategory()">Create one now.</a></span></b>\r\n</div>\r\n<div class="row" cg-busy="productCategories.loading">\r\n    <div class="col-sm-6">\r\n        <script type="text/ng-template" id="nodes_renderer.html">\r\n            <div class="tree-node tree-node-content" cg-busy="node.loading" ng-class="{\'inactive-node\': !node.Active, \'selected-node\': node.ID == productCategories.selectedCategoryID}">\r\n                <i ng-if="node.children && node.children.length > 0" class="fa" ng-click="toggle(this)" ng-class="{\r\n                        \'fa-folder\': !collapsed,\r\n                        \'fa-folder-open\': collapsed\r\n                    }">\r\n                </i>\r\n                <p ng-click="productCategories.categorySelected(node.ID)">{{node.Name}}</p>\r\n                <fieldset class="checkbox">\r\n                    <label class="control-label">\r\n                        <input type="checkbox" ng-disabled="productCategories.viewAllCategories || node.Inherited" name="{{\'AssignCategory\' + node.ID}}" ng-model="node.Assigned" ng-change="productCategories.updateAssignment(node)">\r\n                    </label>\r\n                </fieldset>\r\n            </div>\r\n            <ol ui-tree-nodes ng-model="node.children" uib-collapse="!collapsed">\r\n                <li ng-repeat="node in node.children" ui-tree-node ng-include="\'nodes_renderer.html\'"></li>\r\n            </ol>\r\n        </script>\r\n        <section ng-if="productCategories.tree.length">\r\n            <div ui-tree id="tree-root" data-drag-enabled="false">\r\n                <ol ui-tree-nodes ng-model="productCategories.tree">\r\n                    <li ng-repeat="node in productCategories.tree" ui-tree-node ng-include="\'nodes_renderer.html\'"></li>\r\n                </ol>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</div>'),$templateCache.put("productManagement/inventory/templates/productInventory.html",'<div class="row">\r\n    <div class="col-sm-8">\r\n        <div class="alert alert-info" ng-if="productInventory.product.Inventory.LastUpdated">\r\n            Inventory was last updated on {{productInventory.product.Inventory.LastUpdated | date:\'short\'}}\r\n        </div>\r\n        <form name="productInventory.ProductInventoryForm" \r\n              ng-submit="productInventory.updateProductInventory(productInventory.product)" \r\n              autocomplete="off" novalidate class="form-horizontal" oc-readonly-roles="InventoryAdmin">\r\n            <fieldset class="form-group">\r\n                <label for="InventoryNotificationPoint" class="col-sm-3 control-label">Notification Point</label>\r\n                <div class="col-sm-9">\r\n                    <input id="InventoryNotificationPoint" type="number" class="form-control" min="1" ng-model="productInventory.product.Inventory.NotificationPoint" />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="AvailableInventory" class="col-sm-3 control-label">Inventory</label>\r\n                <div class="col-sm-9">\r\n                    <input id="AvailableInventory" type="number" class="form-control" ng-model="productInventory.product.Inventory.QuantityAvailable" required />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <div class="col-sm-offset-3 col-sm-9">\r\n                    <div class="checkbox">\r\n                        <label for="AllowOrderExceedInventory">\r\n                            <input id="AllowOrderExceedInventory" name="ApplyTax" type="checkbox" ng-model="productInventory.product.Inventory.OrderCanExceed">\r\n                            Allow Order to Exceed Inventory\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <div class="col-sm-offset-3 col-sm-9">\r\n                    <button type="submit" cg-busy="productInventory.loading" class="btn btn-primary btn-block">Update</button>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n</div>\r\n'),
$templateCache.put("productManagement/pricing/templates/createProductPrice.modal.html",'<form name="createProductPriceModal.form" autocomplete="off" novalidate pretty-submit>\r\n    <div class="modal-header">\r\n        <button type="button" class="close" ng-click="createProductPriceModal.cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n        <span class="text-muted">{{(createProductPriceModal.buyerName ? \'Pricing for \' : \'Default pricing for \') + (createProductPriceModal.userGroupName || createProductPriceModal.buyerName)}}</span>\r\n        <h4 class="modal-title">Product: <b>{{createProductPriceModal.product.Name}}</b></h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-horizontal">\r\n            <fieldset class="form-group" ng-if="createProductPriceModal.buyerName">\r\n                <label for="ID" class="col-sm-3 control-label">Price ID</label>\r\n                <div class="col-sm-9">\r\n                    <input id="ID" name="ID" type="text" placeholder="(Optional)" class="form-control" ng-model="createProductPriceModal.priceSchedule.ID"/>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group" ng-if="createProductPriceModal.buyerName">\r\n                <label for="Name" class="col-sm-3 control-label">Name</label>\r\n                <div class="col-sm-9">\r\n                    <input id="Name" name="Name" type="text" class="form-control" ng-model="createProductPriceModal.priceSchedule.Name" required/>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <div class="col-sm-offset-3 col-sm-9">\r\n                    <div class="checkbox">\r\n                        <label for="ApplyTax">\r\n                            <input id="ApplyTax" name="ApplyTax" type="checkbox" ng-model="createProductPriceModal.priceSchedule.ApplyTax"> Apply Tax\r\n                        </label>\r\n                    </div>\r\n                    <div class="checkbox">\r\n                        <label for="ApplyShipping">\r\n                            <input id="ApplyShipping" name="ApplyShipping" type="checkbox" ng-model="createProductPriceModal.priceSchedule.ApplyShipping"> Apply Shipping\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <div class="col-sm-offset-3 col-sm-9">\r\n                    <div class="radio">\r\n                        <label for="OpenQuantity">\r\n                            <input id="OpenQuantity" name="OpenQuantity" type="radio" ng-model="createProductPriceModal.priceSchedule.RestrictedQuantity" ng-value="false"> Open Quantity\r\n                        </label>\r\n                    </div>\r\n                    <div class="radio">\r\n                        <label for="RestrictedQuantity">\r\n                            <input id="RestrictedQuantity" name="RestrictedQuantity" type="radio" ng-model="createProductPriceModal.priceSchedule.RestrictedQuantity" ng-value="true"> Restricted Quantity\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="MinQuantity" class="col-sm-3 control-label">Min Quantity</label>\r\n                <div class="col-sm-9">\r\n                    <input id="MinQuantity" name="MinQuantity" type="number" class="form-control"\r\n                        min="1"\r\n                        ng-max="createProductPriceModal.priceSchedule.MaxQuantity"\r\n                        ng-disabled="createProductPriceModal.priceSchedule.RestrictedQuantity"\r\n                        ng-model="createProductPriceModal.priceSchedule.MinQuantity"/>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="MaxQuantity" class="col-sm-3 control-label">Max Quantity</label>\r\n                <div class="col-sm-9">\r\n                    <input id="MaxQuantity" name="MaxQuantity" placeholder="(Optional)"  type="number" class="form-control"\r\n                        ng-min="createProductPriceModal.priceSchedule.MinQuantity"\r\n                        ng-disabled="createProductPriceModal.priceSchedule.RestrictedQuantity"\r\n                        ng-model="createProductPriceModal.priceSchedule.MaxQuantity"/>\r\n                </div>\r\n            </fieldset>\r\n        </div>\r\n\r\n\r\n        <hr />\r\n        <h4>Price Breaks</h4>\r\n        <oc-price-breaks priceschedule="createProductPriceModal.priceSchedule"></oc-price-breaks>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button class="btn btn-primary btn-block" ng-disabled="createProductPriceModal.form.$invalid || !createProductPriceModal.priceSchedule.PriceBreaks.length" ng-click="createProductPriceModal.submit()" cg-busy="createProductPriceModal.loading">Save Selection</button>\r\n    </div>\r\n</form>'),$templateCache.put("productManagement/pricing/templates/editProductPrice.modal.html",'<form ng-submit="editProductPriceModal.submit()" name="editProductPriceModal.form" novalidate autocomplete="off" cg-busy="editProductPriceModal.loading">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" ng-click="editProductPriceModal.cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span> {{editProductPriceModal.priceScheduleName}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-horizontal">\r\n            <fieldset class="form-group" ng-if="!editProductPriceModal.isDefault">\r\n                <label for="ID" class="col-sm-3 control-label">Price ID</label>\r\n                <div class="col-sm-9">\r\n                    <input id="ID" name="ID" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="editProductPriceModal.data.ID"\r\n                    />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group" ng-if="!editProductPriceModal.isDefault">\r\n                <label for="Name" class="col-sm-3 control-label">Name</label>\r\n                <div class="col-sm-9">\r\n                    <input id="Name" name="Name" type="text" class="form-control" ng-model="editProductPriceModal.data.Name" />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <div class="col-sm-offset-3 col-sm-9">\r\n                    <div class="radio">\r\n                        <label for="OpenQuantity">\r\n                        <input id="OpenQuantity" name="OpenQuantity" type="radio" ng-model="editProductPriceModal.data.RestrictedQuantity" ng-value="false"> Open Quantity\r\n                    </label>\r\n                    </div>\r\n                    <div class="radio">\r\n                        <label for="RestrictedQuantity">\r\n                        <input id="RestrictedQuantity" name="RestrictedQuantity" type="radio" ng-model="editProductPriceModal.data.RestrictedQuantity" ng-value="true"> Restricted Quantity\r\n                    </label>\r\n                    </div>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="MinQuantity" class="col-sm-3 control-label">Min Quantity</label>\r\n                <div class="col-sm-9">\r\n                    <input id="MinQuantity" name="MinQuantity" type="number" class="form-control" ng-disabled="editProductPriceModal.data.RestrictedQuantity"\r\n                        pattern="^[0-9]*[1-9][0-9]*$" pattern-err-type="positiveInteger" ng-max="editProductPriceModal.data.MaxQuantity"\r\n                        ng-model="editProductPriceModal.data.MinQuantity" />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="MaxQuantity" class="col-sm-3 control-label">Max Quantity</label>\r\n                <div class="col-sm-9">\r\n                    <input id="MaxQuantity" name="MaxQuantity" type="number" class="form-control" ng-disabled="editProductPriceModal.data.RestrictedQuantity"\r\n                        pattern="^[0-9]*[1-9][0-9]*$" pattern-err-type="positiveInteger" ng-min="editProductPriceModal.data.MinQuantity"\r\n                        ng-model="editProductPriceModal.data.MaxQuantity" />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <div class="col-sm-offset-3 col-sm-9">\r\n                    <div class="checkbox">\r\n                        <label for="ApplyTax">\r\n                        <input id="ApplyTax" name="ApplyTax" type="checkbox" ng-model="editProductPriceModal.data.ApplyTax"> Apply Tax\r\n                    </label>\r\n                    </div>\r\n                    <div class="checkbox">\r\n                        <label for="ApplyShipping">\r\n                        <input id="ApplyShipping" name="ApplyShipping" type="checkbox" ng-model="editProductPriceModal.data.ApplyShipping"> Apply Shipping\r\n                    </label>\r\n                    </div>\r\n                </div>\r\n            </fieldset>\r\n        </div>\r\n        <hr />\r\n        <h4>Price Breaks</h4>\r\n        <oc-price-breaks priceschedule="editProductPriceModal.data"></oc-price-breaks>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="editProductPriceModal.form.$invalid || !editProductPriceModal.data.PriceBreaks.length">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("productManagement/pricing/templates/ocPriceBreaks.directive.html",'<div>\r\n    <div class="panel panel-default table-responsive" ng-if="priceschedule.PriceBreaks.length">\r\n        <table class="table table-striped table-bordered l-pricebreak-table">\r\n            <colgroup>\r\n                <col>\r\n                <col>\r\n                <col>\r\n            </colgroup>\r\n            <thead>\r\n                <tr>\r\n                    <th>Quantity</th>\r\n                    <th>Price</th>\r\n                    <th></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr ng-repeat="pricebreak in priceschedule.PriceBreaks | orderBy: \'Quantity\' track by $index">\r\n                    <td>{{priceschedule.RestrictedQuantity ? pricebreak.Quantity : pricebreak.displayQuantity}}</td>\r\n                    <td>{{priceschedule.RestrictedQuantity ? (pricebreak.Price * pricebreak.Quantity | currency) : (pricebreak.Price\r\n                        | currency)}}</td>\r\n                    <td>\r\n                        <button type="button" class="btn btn-danger btn-xs" ng-click="deletePriceBreak($index)"><i class="fa fa-trash"></i> Delete</button>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div class="row" ng-form="newBreakForm" autocomplete="off" novalidate>\r\n        <div class="form-group col-xs-5">\r\n            <label for="Quantity">Quantity</label>\r\n            <input id="Quantity" name="Quantity" ng-keypress="onEnterKeypress($event)" type="number" min="1" ng-max="!priceschedule.RestrictedQuantity ? priceschedule.MaxQuantity : angular.noop()"\r\n                ng-max-err-type="priceBreakExceedsMaxQuantity" required-err-type="priceBreakRequired" ng-required="!priceschedule.PriceBreaks.length"\r\n                class="form-control" ng-model="newBreak.Quantity" />\r\n        </div>\r\n        <div class="form-group col-xs-7">\r\n            <label for="Price">Price (each)</label>\r\n            <div class="input-group">\r\n                <span class="input-group-addon">\r\n                    <i class="fa fa-dollar"></i>\r\n                </span>\r\n                <input id="Price" name="Price" ng-keypress="onEnterKeypress($event)" type="number" placeholder="0.00" step="0.01" min="0" class="form-control" ng-model="newBreak.Price" ng-required="!priceschedule.PriceBreaks.length" />\r\n                <span class="input-group-btn">\r\n                    <button type="button" class="btn btn-default form-control" ng-click="addPriceBreak()" ng-disabled="newBreakForm.$invalid">\r\n                        <i class="fa fa-plus-circle"></i> <span class="hidden-xs">Add</span>\r\n                </button>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("productManagement/pricing/templates/productPricing.html",'<!--==== No Prices Defined ====-->\r\n<div class="no-matches" ng-if="productPricing.noPricesSet">\r\n    This product does not have any pricing. <br>\r\n    Create a <a ng-click="product.createDefaultPrice()">default price</a> or create individual prices <a ui-sref="buyers">for your buyer organizations</a> and/or user groups.\r\n</div>\r\n<div class="row" ng-if="!productPricing.noPricesSet">\r\n    <div class="col-sm-5">\r\n        <b class="text-muted">Default Price</b>\r\n        <div class="no-matches" ng-if="!product.model.DefaultPriceScheduleID">\r\n            This product does not have a default price. <a ng-click="product.createDefaultPrice()">Create one now</a>\r\n        </div>\r\n        <div class="c-price-list" ng-if="product.model.DefaultPriceScheduleID">\r\n            <div ng-repeat="assignment in productPricing.listAssignments | ocDefaultPrice:product.model.DefaultPriceScheduleID:true"\r\n                ng-class="{\'active\':productPricing.selectedPrice.PriceSchedule.ID == assignment.PriceSchedule.ID}" class="c-price-list__item"\r\n                ng-click="productPricing.selectPrice(this)">\r\n                <!--==== Product Price Selection ====-->\r\n                <h5 class="c-price-list__item__info">\r\n                    {{assignment.PriceSchedule.Name}}<br>\r\n                    <small>{{\'ID: \' + assignment.PriceSchedule.ID}}</small>\r\n                </h5>\r\n                <div class="c-price-list__item__price">\r\n                    {{assignment.PriceSchedule.PriceBreaks[0].Price | currency}}\r\n                </div>\r\n                <div class="c-price-list__item__buyers">\r\n                    <small>Buyers</small>\r\n                    <br> {{assignment.Buyers.length}}\r\n                </div>\r\n                <div class="c-price-list__item__groups">\r\n                    <small>Groups</small>\r\n                    <br> {{assignment.UserGroups.length}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--==== Product Price Schedule List ====-->\r\n        <div ng-if="!productPricing.noOverridesSet">\r\n            <b class="text-muted">Pricing Overrides</b>\r\n            <div class="c-price-list">\r\n                <div ng-repeat="assignment in productPricing.listAssignments | ocDefaultPrice:product.model.DefaultPriceScheduleID:false"\r\n                    ng-class="{\'active\':productPricing.selectedPrice.PriceSchedule.ID == assignment.PriceSchedule.ID}" class="c-price-list__item"\r\n                    ng-click="productPricing.selectPrice(this)">\r\n                    <!--==== Product Price Selection ====-->\r\n                    <h5 class="c-price-list__item__info">\r\n                        {{assignment.PriceSchedule.Name}}<br>\r\n                        <small>{{\'ID: \' + assignment.PriceSchedule.ID}}</small>\r\n                    </h5>\r\n                    <div class="c-price-list__item__price">\r\n                        {{assignment.PriceSchedule.PriceBreaks[0].Price | currency}}\r\n                    </div>\r\n                    <div class="c-price-list__item__buyers">\r\n                        <small>Buyers</small>\r\n                        <br> {{assignment.Buyers.length}}\r\n                    </div>\r\n                    <div class="c-price-list__item__groups">\r\n                        <small>Groups</small>\r\n                        <br> {{assignment.UserGroups.length}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n    <div class="col-sm-7" cg-busy="productPricing.loadingPrice">\r\n\r\n        <!--==== No Price Selected Message ====-->\r\n        <div class="well text-center" ng-if="!productPricing.selectedPrice">\r\n            Select a price to view it\'s details and assignments.\r\n        </div>\r\n\r\n        <!--==== Selected Price ====-->\r\n        <div ng-if="productPricing.selectedPrice">\r\n\r\n            <!--==== Basic Price Schedule Information ====-->\r\n            <div class="pull-right">\r\n                <button type="button" class="btn btn-default" ng-click="productPricing.editPrice()"><i class="fa fa-edit"></i> Edit</button>\r\n                <button type="button" class="btn btn-danger" ng-click="productPricing.deletePrice()"><i class="fa fa-trash"></i> Delete</button>\r\n            </div>\r\n            <h3>\r\n                {{productPricing.selectedPrice.PriceSchedule.Name}} <br>\r\n                <small>(ID: {{productPricing.selectedPrice.PriceSchedule.ID}})</small>\r\n            </h3>\r\n            <div class="row">\r\n                <div class="col-xs-5">\r\n                    <b class="text-primary" ng-if="productPricing.selectedPrice.PriceSchedule.RestrictedQuantity">\r\n                        <i class="fa fa-lock"></i> Restricted Quantity <br>\r\n                    </b>\r\n                    <b class="text-primary" ng-if="!productPricing.selectedPrice.PriceSchedule.RestrictedQuantity">\r\n                        <i class="fa fa-unlock-alt"></i> Open Quantity <br>\r\n                    </b>\r\n                    <span>\r\n                        <b class="text-muted">Min Quantity: </b> {{productPricing.selectedPrice.PriceSchedule.MinQuantity}}\r\n                        <br>\r\n                    </span>\r\n                    <span ng-if="productPricing.selectedPrice.PriceSchedule.MaxQuantity">\r\n                        <b class="text-muted">Max Quantity: </b> {{productPricing.selectedPrice.PriceSchedule.MaxQuantity}}\r\n                        <br>\r\n                    </span>\r\n                    <br>\r\n                </div>\r\n                <div class="col-xs-7">\r\n                    <b class="text-success" ng-if="productPricing.selectedPrice.PriceSchedule.ApplyShipping">\r\n                        <i class="fa fa-check"></i> Apply Shipping <br>\r\n                    </b>\r\n                    <b class="text-warning" ng-if="!productPricing.selectedPrice.PriceSchedule.ApplyShipping">\r\n                        <i class="fa fa-times"></i> Apply Shipping <br>\r\n                    </b>\r\n                    <b class="text-success" ng-if="productPricing.selectedPrice.PriceSchedule.ApplyTax">\r\n                        <i class="fa fa-check"></i> Apply Tax\r\n                        <br>\r\n                    </b>\r\n                    <b class="text-warning" ng-if="!productPricing.selectedPrice.PriceSchedule.ApplyTax">\r\n                        <i class="fa fa-times"></i> Apply Tax\r\n                        <br>\r\n                    </b>\r\n                </div>\r\n            </div>\r\n\r\n            <!--==== Price Schedule Tabs ====-->\r\n            <ul class="nav nav-tabs" ng-init="productPricing.activeTab = \'priceBreaks\'">\r\n                <li ng-class="{active:productPricing.activeTab == \'priceBreaks\'}"><a href="" ng-click="productPricing.activeTab = \'priceBreaks\'">Price breaks</a></li>\r\n                <li ng-class="{active:productPricing.activeTab == \'availability\'}"><a href="" ng-click="productPricing.activeTab = \'availability\'">Availability</a></li>\r\n            </ul>\r\n            <br>\r\n\r\n            <!--==== Price Breaks ====-->\r\n            <div class="panel panel-default table-responsive" ng-show="productPricing.activeTab == \'priceBreaks\'" cg-busy="productPricing.removePriceBreaksLoading">\r\n                <table class="table table-condensed table-striped table-bordered l-pricebreak-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                    </colgroup>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Quantity</th>\r\n                            <th>Price</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr ng-repeat="pricebreak in productPricing.selectedPrice.PriceSchedule.PriceBreaks | orderBy: \'Quantity\' track by $index">\r\n                            <td>\r\n                                {{pricebreak.displayQuantity}}\r\n                            </td>\r\n                            <td>\r\n                                {{pricebreak.Price | currency}}\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            <!--==== Assignments ====-->\r\n            <div ng-show="productPricing.activeTab == \'availability\'">\r\n                <div class="alert alert-info" ng-if="product.model.DefaultPriceScheduleID == productPricing.selectedPrice.PriceSchedule.ID">\r\n                    This is the default price schedule. All buyer users can order this product if available in one of their catalogs.\r\n                </div>\r\n                <div class="panel panel-default" ng-repeat="buyer in productPricing.selectedPrice.Availability" cg-busy="productPricing.availabilityLoading[$index]">\r\n                    <div class="panel-body">\r\n                        <h5 style="margin:0;">\r\n                            <a ng-if="buyer.Assigned" ui-sref="buyerProducts({buyerid:buyer.ID, search:product.model.ID})"><b>{{buyer.Name}}</b></a>\r\n                            <b ng-if="!buyer.Assigned">{{buyer.Name}}</b> <br>\r\n                            <small>(ID: {{buyer.ID}})</small>\r\n                        </h5>\r\n                        <p class="small text-center text-muted" style="margin-top:15px; margin-bottom:0;" ng-if="buyer.Assigned">This price is assigned to the entire buyer organization.</p>\r\n                    </div>\r\n                    <div class="table-responsive" ng-if="buyer.UserGroups.length">\r\n                        <table class="table table-striped table-bordered">\r\n                            <colgroup>\r\n                                <col style="width:45px;">\r\n                            </colgroup>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th colspan="2" class="text-muted">User Group Assignments</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr ng-repeat="userGroup in buyer.UserGroups">\r\n                                    <td>\r\n                                        <a ui-sref="userGroupProducts({buyerid:buyer.ID, usergroupid:userGroup.ID, search:product.model.ID})">\r\n                                        {{userGroup.Name}}\r\n                                    </a>\r\n                                        <small class="text-muted">(ID: {{userGroup.ID}})</small>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("productManagement/pricing/templates/updateProductPrice.modal.html",'<form name="updateProductPriceModal.form">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" ng-click="updateProductPriceModal.cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n        <span class="text-muted">{{\'Pricing for \' + (updateProductPriceModal.userGroupName || updateProductPriceModal.buyerName)}}</span>\r\n        <h4 class="modal-title">Product: <b>{{updateProductPriceModal.product.Name}}</b></h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="panel panel-default" style="border-width:2px;" ng-if="updateProductPriceModal.showRemovePriceOption" ng-click="updateProductPriceModal.removeCurrentPrice()"\r\n            ng-class="{\'panel-primary\': updateProductPriceModal.removePrice}">\r\n            <div class="panel-body text-center">\r\n                <b>Remove Pricing for {{(updateProductPriceModal.userGroupName || updateProductPriceModal.buyerName)}}</b>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default" style="border-width:2px;" ng-click="updateProductPriceModal.selectNewPrice(this)" ng-repeat="price in updateProductPriceModal.availablePriceSchedules"\r\n            ng-class="{\'panel-primary\': price.ID == updateProductPriceModal.selectedPriceSchedule.ID}">\r\n            <div class="panel-body">\r\n                <span class="text-info" ng-if="price.ID == updateProductPriceModal.product.DefaultPriceScheduleID">(DEFAULT)</span>\r\n                <span class="text-info" ng-if="(price.ID == updateProductPriceModal.product.SelectedPrice.ID && updateProductPriceModal.product.SelectedPrice.Inherited) || price.Inherited">(INHERITED)</span>\r\n                <b>{{price.Name}}</b>\r\n                <div class="row">\r\n                    <div class="col-xs-5">\r\n                        <span class="text-info">{{price.RestrictedQuantity ? \'Restricted\' : \'Open\'}} Quantity</span> <br>                        Min: {{price.MinQuantity}} <span ng-if="price.MaxQuantity">| Max: {{price.MaxQuantity}}</span>\r\n                        <br>\r\n                        <span ng-if="price.ApplyTax || price.ApplyShipping"><i class="fa fa-info"></i> Applies </span>\r\n                        <span ng-if="price.ApplyTax"> Tax</span><span ng-if="price.ApplyShipping && price.ApplyTax"> & </span>\r\n                        <span ng-if="price.ApplyShipping">Shipping</span>\r\n                    </div>\r\n                    <div class="col-xs-7 text-right">\r\n                        <small><b>Price Breaks</b></small><br>\r\n                        <div class="btn btn-sm btn-labeled btn-default" style="cursor:default; margin-left:2px; margin-bottom:2px;" disabled ng-repeat="pb in price.PriceBreaks">\r\n                            <span class="btn-label">{{pb.Quantity}}</span>{{pb.Price | currency}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <button class="btn btn-default btn-block" ng-click="updateProductPriceModal.createNewPrice()"><i class="fa fa-plus-circle"></i> New Price</button>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button class="btn btn-primary btn-block" ng-click="updateProductPriceModal.submit()" ng-disabled="(!updateProductPriceModal.selectedPriceSchedule && !updateProductPriceModal.removePrice) || updateProductPriceModal.selectedPriceSchedule.ID === updateProductPriceModal.product.SelectedPrice.ID"\r\n            cg-busy="updateProductPriceModal.loading">Save Selection</button>\r\n    </div>\r\n</form>'),$templateCache.put("productManagement/product/templates/product.html",'<header class="c-jumbotron">\r\n    <div class="container container-smooth">\r\n        <ul class="breadcrumb">\r\n            <li><a href="" ui-sref="products">All Products</a></li>\r\n            <li class="active">{{product.productName}}</li>\r\n        </ul>\r\n        <header class="l-page-header">\r\n            <h3 class="l-page-header__title">\r\n                <small class="text-muted">Product</small> <br> {{product.productName}}\r\n            </h3>\r\n        </header>\r\n        <oc-responsive-tabs nav-items="product.navigationItems"></oc-responsive-tabs>\r\n    </div>\r\n</header>\r\n<br>\r\n<article class="container container-smooth">\r\n    <div ui-view cg-busy="application.stateLoading(\'product\')">\r\n        <div class="row">\r\n            <div class="col-sm-8">\r\n                <form name="product.form" autocomplete="off" ng-submit="product.updateProduct()" novalidate class="form-horizontal" oc-readonly-roles="ProductAdmin">\r\n                    <fieldset class="form-group">\r\n                        <label for="ProductID" class="col-sm-3 control-label">Product ID</label>\r\n                        <div class="col-sm-9">\r\n                            <input id="ProductID" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" type="text" class="form-control" ng-model="product.model.ID"\r\n                                required>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <label for="ProductName" class="col-sm-3 control-label">Name</label>\r\n                        <div class="col-sm-9">\r\n                            <input id="ProductName" type="text" class="form-control" ng-model="product.model.Name" required>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <label for="ProductDescription" class="col-sm-3 control-label">Description</label>\r\n                        <div class="col-sm-9">\r\n                            <textarea rows="4" id="ProductDescription" placeholder="(Optional)" class="form-control" ng-model="product.model.Description"></textarea>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <label for="QuantityMultiplier" class="col-sm-3 control-label">Qty Multiplier</label>\r\n                        <div class="col-sm-9">\r\n                            <input id="QuantityMultiplier" type="number" class="form-control" min="1" ng-model="product.model.QuantityMultiplier" required>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <label for="DefaultPrice" class="col-sm-3 control-label">Default Price</label>\r\n                        <div class="col-sm-9">\r\n                            <p class="form-control-static">\r\n                                <a ng-if="!product.model.DefaultPriceScheduleID" ng-click="product.createDefaultPrice()">Add a default price</a>\r\n                                <a ng-if="product.model.DefaultPriceScheduleID" ui-sref=".pricing({pricescheduleid: product.model.DefaultPriceScheduleID})">{{product.model.DefaultPriceSchedule.PriceBreaks[0].Price | currency}}</a>\r\n                            </p>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <div class="col-sm-offset-3 col-sm-9">\r\n                            <div class="checkbox" oc-readonly-roles="InventoryAdmin">\r\n                                <label for="InventoryEnabled">\r\n                                    <input id="InventoryEnabled" name="InventoryEnabled" type="checkbox" ng-model="product.model.Inventory.Enabled"> Inventory Enabled\r\n                                </label>\r\n                            </div>\r\n                            <div class="checkbox">\r\n                                <label for="ProductActive">\r\n                                    <input id="ProductActive" name="ProductActive" type="checkbox" ng-model="product.model.Active"> Active\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <div class="col-sm-offset-3 col-sm-9">\r\n                            <button type="submit" cg-busy="product.productUpdateLoading" ng-disabled="product.form.$invalid" class="btn btn-primary btn-block">Update Product Info</button>\r\n                        </div>\r\n                        <div class="col-sm-offset-3 col-sm-9 hidden-xs" oc-if-roles="ProductAdmin">\r\n                        <hr>\r\n                            <button type="submit" class="btn btn-danger btn-block" ng-click="product.deleteProduct()">Delete Product</button>\r\n                        </div>\r\n                    </fieldset>\r\n                </form>\r\n            </div>\r\n            <div class="col-sm-4">\r\n                <fieldset class="form-group">\r\n                    <label>Product Image</label>\r\n                    <oc-file-upload model="product.model" label="Image:" patch="product.patchImage(xp)" keyname="image" extensions="jpg, png, gif, jpeg, tiff"></oc-file-upload>\r\n                </fieldset>\r\n            </div>\r\n        </div>\r\n        <div class="visible-xs" oc-if-roles="ProductAdmin">\r\n            <hr>\r\n            <button type="submit" class="btn btn-danger btn-block" ng-click="product.deleteProduct()"><i class="fa fa-trash-o"></i> Delete Product</button>\r\n        </div>\r\n    </div>\r\n</article>'),
$templateCache.put("productManagement/products/templates/productCreate.modal.html",'<form name="productCreateModal.form" autocomplete="off" ng-submit="productCreateModal.submit()" novalidate cg-busy="productCreateModal.loading">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="productCreateModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">{{productCreateModal.currentStep ? productCreateModal.product.Name : \'Create New Product\'}} <span class="text-muted">- {{productCreateModal.steps[productCreateModal.currentStep].name}}</span></h4>\r\n    </div>\r\n    <div class="modal-body" ng-if="productCreateModal.initialized">\r\n        <div class="form-horizontal" ng-show="productCreateModal.steps[productCreateModal.currentStep].form == \'info\'" ng-form="info">\r\n            <fieldset class="form-group">\r\n                <label for="ProductID" class="col-sm-3 control-label">Product ID</label>\r\n                <div class="col-sm-9">\r\n                    <input id="ProductID" pattern="([A-Za-z0-9\\-\\_]+)" placeholder="(Optional)" pattern-err-type="ID_Name" type="text" class="form-control"\r\n                        autofocus ng-model="productCreateModal.product.ID">\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="ProductName" class="col-sm-3 control-label">Name</label>\r\n                <div class="col-sm-9">\r\n                    <input id="ProductName" type="text" class="form-control" ng-model="productCreateModal.product.Name" required>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="ProductDescription" class="col-sm-3 control-label">Description</label>\r\n                <div class="col-sm-9">\r\n                    <textarea rows="4" id="ProductDescription" placeholder="(Optional)" class="form-control" ng-model="productCreateModal.product.Description"></textarea>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="QuantityMultiplier" class="col-sm-3 control-label">Qty Multiplier</label>\r\n                <div class="col-sm-9">\r\n                    <input id="QuantityMultiplier" type="number" class="form-control" min="1" ng-model="productCreateModal.product.QuantityMultiplier"\r\n                        required>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <div class="col-sm-offset-3 col-sm-9">\r\n                    <div class="checkbox">\r\n                        <label for="ProductActive">\r\n                            <input id="ProductActive" name="ProductActive" type="checkbox" ng-model="productCreateModal.product.Active"> Active\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </fieldset>\r\n        </div>\r\n        <div ng-show="productCreateModal.steps[productCreateModal.currentStep].form == \'image\'" ng-form="image">\r\n            <fieldset>\r\n                <label class="sr-only" for="image">Upload a product image</label>\r\n                <oc-file-upload model="productCreateModal.product" upload-text="\'Choose a product image\'" label="Image:" keyname="image"\r\n                    extensions="jpg, png, gif, jpeg, tiff"></oc-file-upload>\r\n            </fieldset>\r\n        </div>\r\n        <div ng-show="productCreateModal.steps[productCreateModal.currentStep].form == \'pricing\'" ng-form="pricing">\r\n            <fieldset class="text-center">\r\n                <div class="checkbox">\r\n                    <label for="DefaultPriceEnabled">\r\n                        <input id="DefaultPriceEnabled" disable-validation-message name="DefaultPriceEnabled" type="checkbox" ng-change="productCreateModal.validatePricingForm()" ng-model="productCreateModal.enableDefaultPricing"> Set a Default Price\r\n                    </label>\r\n                </div>\r\n            </fieldset>\r\n            <div ng-if="productCreateModal.enableDefaultPricing">\r\n                <div class="form-horizontal">\r\n                    <fieldset class="form-group">\r\n                        <label for="MinQuantity" class="col-sm-3 control-label">Min Quantity</label>\r\n                        <div class="col-sm-9">\r\n                            <input id="MinQuantity" name="MinQuantity" type="number" class="form-control" min="1" ng-max="productCreateModal.product.DefaultPriceSchedule.MaxQuantity"\r\n                                ng-disabled="productCreateModal.product.DefaultPriceSchedule.RestrictedQuantity" ng-model="productCreateModal.product.DefaultPriceSchedule.MinQuantity"\r\n                            />\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <label for="MaxQuantity" class="col-sm-3 control-label">Max Quantity</label>\r\n                        <div class="col-sm-9">\r\n                            <input id="MaxQuantity" name="MaxQuantity" placeholder="(Optional)" type="number" class="form-control" ng-min="productCreateModal.product.DefaultPriceSchedule.MinQuantity"\r\n                                ng-disabled="productCreateModal.product.DefaultPriceSchedule.RestrictedQuantity" ng-model="productCreateModal.product.DefaultPriceSchedule.MaxQuantity"\r\n                            />\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <div class="col-sm-offset-3 col-sm-9">\r\n                            <div class="checkbox">\r\n                                <label for="ApplyTax">\r\n                            <input id="ApplyTax" name="ApplyTax" type="checkbox" ng-model="productCreateModal.product.DefaultPriceSchedule.ApplyTax"> Apply Tax\r\n                        </label>\r\n                            </div>\r\n                            <div class="checkbox">\r\n                                <label for="ApplyShipping">\r\n                            <input id="ApplyShipping" name="ApplyShipping" type="checkbox" ng-model="productCreateModal.product.DefaultPriceSchedule.ApplyShipping"> Apply Shipping\r\n                        </label>\r\n                            </div>\r\n                        </div>\r\n                    </fieldset>\r\n                    <fieldset class="form-group">\r\n                        <div class="col-sm-offset-3 col-sm-9">\r\n                            <div class="radio">\r\n                                <label for="OpenQuantity">\r\n                            <input id="OpenQuantity" name="OpenQuantity" type="radio" ng-model="productCreateModal.product.DefaultPriceSchedule.RestrictedQuantity" ng-value="false"> Open Quantity\r\n                        </label>\r\n                            </div>\r\n                            <div class="radio">\r\n                                <label for="RestrictedQuantity">\r\n                            <input id="RestrictedQuantity" name="RestrictedQuantity" type="radio" ng-model="productCreateModal.product.DefaultPriceSchedule.RestrictedQuantity" ng-value="true"> Restricted Quantity\r\n                        </label>\r\n                            </div>\r\n                        </div>\r\n                    </fieldset>\r\n                </div>\r\n\r\n                <hr />\r\n                <h4>Price Breaks</h4>\r\n                <oc-price-breaks priceschedule="productCreateModal.product.DefaultPriceSchedule"></oc-price-breaks>\r\n            </div>\r\n        </div>\r\n        <div class="form-horizontal" ng-show="productCreateModal.steps[productCreateModal.currentStep].form == \'shipping\'" ng-form="shipping">\r\n            <fieldset class="form-group">\r\n                <label for="ShipWeight" class="col-sm-3 control-label">Ship Weight</label>\r\n                <div class="col-sm-9">\r\n                    <div class="input-group">\r\n                        <input id="ShipWeight" type="number" min="0" step="any" class="form-control" ng-model="productCreateModal.product.ShipWeight"\r\n                        />\r\n                        <span class="input-group-addon">lb(s)</span>\r\n                    </div>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="ShipHeight" class="col-sm-3 control-label">Ship Height</label>\r\n                <div class="col-sm-9">\r\n                    <input id="ShipHeight" type="number" min="0" step="any" class="form-control" ng-model="productCreateModal.product.ShipHeight"\r\n                    />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="ShipWidth" class="col-sm-3 control-label">Ship Width</label>\r\n                <div class="col-sm-9">\r\n                    <input id="ShipWidth" type="number" min="0" step="any" class="form-control" ng-model="productCreateModal.product.ShipWidth"\r\n                    />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="ShipLength" class="col-sm-3 control-label">Ship Length</label>\r\n                <div class="col-sm-9">\r\n                    <input id="ShipLength" type="number" min="0" step="any" class="form-control" ng-model="productCreateModal.product.ShipLength"\r\n                    />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="ShipFrom" class="col-sm-3 control-label">Ship From</label>\r\n                <div class="col-sm-9">\r\n                    <ui-select ng-model="productCreateModal.product.ShipFromAddressID" close-on-select="true" id="ShipFrom">\r\n                        <ui-select-match placeholder="Search and select seller addresses...">\r\n                            <span ng-bind-html="$select.selected | address"></span>\r\n                        </ui-select-match>\r\n                        <ui-select-choices repeat="address.ID as address in (productCreateModal.sellerAddresses.Items | filter: $select.search) track by $index"\r\n                            refresh="productCreateModal.listAllAdminAddresses($select.search)" refresh-delay="300">\r\n                            <span ng-bind-html="address | address:\'full\'"></span>\r\n                        </ui-select-choices>\r\n                    </ui-select>\r\n                </div>\r\n            </fieldset>\r\n        </div>\r\n        <div ng-show="productCreateModal.steps[productCreateModal.currentStep].form == \'inventory\'" ng-form="inventory">\r\n            <fieldset class="text-center">\r\n                <div class="checkbox">\r\n                    <label for="InventoryEnabled">\r\n                        <input id="InventoryEnabled" name="InventoryEnabled" type="checkbox" ng-model="productCreateModal.product.Inventory.Enabled"> Inventory Enabled\r\n                    </label>\r\n                </div>\r\n            </fieldset>\r\n            <div class="form-horizontal" ng-if="productCreateModal.product.Inventory.Enabled">\r\n                <hr>\r\n                <fieldset class="form-group">\r\n                    <label for="InventoryNotificationPoint" class="col-sm-3 control-label">Notification Point</label>\r\n                    <div class="col-sm-9">\r\n                        <input id="InventoryNotificationPoint" type="number" class="form-control" min="1" ng-model="productCreateModal.product.Inventory.NotificationPoint"\r\n                        />\r\n                    </div>\r\n                </fieldset>\r\n                <fieldset class="form-group">\r\n                    <label for="AvailableInventory" class="col-sm-3 control-label">Inventory</label>\r\n                    <div class="col-sm-9">\r\n                        <input id="AvailableInventory" type="number" class="form-control" ng-model="productCreateModal.product.Inventory.QuantityAvailable"\r\n                        />\r\n                    </div>\r\n                </fieldset>\r\n                <fieldset class="form-group">\r\n                    <div class="col-sm-offset-3 col-sm-9">\r\n                        <div class="checkbox">\r\n                            <label for="AllowOrderExceedInventory">\r\n                            <input id="AllowOrderExceedInventory" name="ApplyTax" type="checkbox" ng-model="productCreateModal.product.Inventory.OrderCanExceed">\r\n                            Allow Order to Exceed Inventory\r\n                        </label>\r\n                        </div>\r\n                    </div>\r\n                </fieldset>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <div ng-class="{row:productCreateModal.showPrev}">\r\n            <div class="col-xs-6" ng-if="productCreateModal.showPrev">\r\n                <button type="button" class="btn btn-default btn-block" ng-click="productCreateModal.prevStep()">Back ({{productCreateModal.steps[productCreateModal.currentStep - 1].name}})</button>\r\n            </div>\r\n            <div ng-class="{\'col-xs-6\':productCreateModal.showPrev}">\r\n                <button type="button" ng-if="productCreateModal.showNext" class="btn btn-primary btn-block" \r\n                ng-disabled="productCreateModal.form[productCreateModal.steps[productCreateModal.currentStep].form].$invalid || (productCreateModal.enableDefaultPricing && !productCreateModal.product.DefaultPriceSchedule.PriceBreaks.length)"\r\n                    ng-click="productCreateModal.nextStep()">Next ({{productCreateModal.steps[productCreateModal.currentStep + 1].name}})</button>\r\n                <button ng-if="!productCreateModal.showNext" type="submit" cg-busy="productCreateModal.productUpdateLoading" ng-disabled="productCreateModal.form.$invalid || (productCreateModal.enableDefaultPricing && !productCreateModal.product.DefaultPriceSchedule.PriceBreaks.length)"\r\n                    class="btn btn-primary btn-block">Save Product</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>'),$templateCache.put("productManagement/products/templates/products.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Products\r\n        </h3>\r\n        <!--====== CREATE ======-->\r\n        <div class="l-page-header__btns" oc-if-roles="ProductAdmin">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="products.createProduct()"><i class="fa fa-plus-circle"></i>\r\n                New Product\r\n            </button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <div ng-if="products.list.Items.length || (!products.list.Items.length && products.searchResults)">\r\n        <form name="products.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="products.search()" ng-model-options="{debounce:1000}" placeholder="Search Products..." ng-model="products.parameters.search" class="form-control">\r\n                    <span ng-if="products.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="products.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="products.searchLoading">\r\n        <div class="no-matches" ng-if="!products.list.Items.length">\r\n            <b ng-if="products.searchResults">No matches found.</b>\r\n            <b ng-if="!products.searchResults">This seller organization does not have any products.</b>\r\n        </div>\r\n        <div ng-if="products.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6 col-xs-offset-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? products.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n                        products.list.Meta.ItemRange[1] + \' of \' + products.list.Meta.TotalCount + \' results\'}}</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-product-table">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                        <col oc-if-roles="ProductAdmin">\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th ng-click="products.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="products.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="products.parameters.sortBy == \'!ID\'"></i>\r\n                        </th>\r\n                        <th ng-click="products.updateSort(\'Name\')">\r\n                            Name\r\n                            <i class="fa fa-caret-down" ng-show="products.parameters.sortBy == \'Name\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="products.parameters.sortBy == \'!Name\'"></i>\r\n                        </th>\r\n                        <th>Active</th>\r\n                        <th oc-if-roles="ProductAdmin"></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="product in products.list.Items">\r\n                        <td>{{product.ID}}</td>\r\n                        <td><a href="" ui-sref="product({productid:product.ID})">{{product.Name}}</a></td>\r\n                        <td class="text-center">\r\n                            <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':product.Active}"></i>\r\n                        </td>\r\n                        <td oc-if-roles="ProductAdmin">\r\n                            <button ng-click="products.deleteProduct(this)" class="btn btn-danger btn-xs"><i class="fa fa-trash-o"></i> <span class="hidden-xs">Delete</span></button>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <ul uib-pagination\r\n                class="pagination-sm pull-right hidden-xs"\r\n                ng-if="products.list.Meta.TotalPages > 1"\r\n                total-items="products.list.Meta.TotalCount"\r\n                items-per-page="products.list.Meta.PageSize"\r\n                max-size="5"\r\n                boundary-links="products.list.Meta.TotalPages > 5"\r\n                ng-model="products.list.Meta.Page"\r\n                ng-change="products.pageChanged()">\r\n            </ul>\r\n            <button type="button"\r\n                    class="btn btn-default btn-block btn-lg visible-xs"\r\n                    ng-show="products.list.Meta.Page < products.list.Meta.TotalPages"\r\n                    ng-click="products.loadMore()">Load More</button>\r\n        </div>\r\n    </div>\r\n</article>'),$templateCache.put("productManagement/shipping/templates/productShipping.html",'<div class="row">\r\n    <div class="col-sm-8">\r\n        <form name="productShipping.ProductShippingForm" ng-submit="productShipping.updateProductShipping(product.model)" autocomplete="off" novalidate class="form-horizontal" oc-readonly-roles="ProductAdmin">\r\n            <fieldset class="form-group">\r\n                <label for="ShipWeight" class="col-sm-3 control-label">Ship Weight</label>\r\n                <div class="col-sm-9">\r\n                    <div class="input-group">\r\n                        <input id="ShipWeight" type="number" min="0" step="any" class="form-control" ng-model="product.model.ShipWeight" />\r\n                        <span class="input-group-addon">lb(s)</span>\r\n                    </div>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="ShipHeight" class="col-sm-3 control-label">Ship Height</label>\r\n                <div class="col-sm-9">\r\n                    <input id="ShipHeight" type="number" min="0" step="any" class="form-control" ng-model="product.model.ShipHeight" />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="ShipWidth" class="col-sm-3 control-label">Ship Width</label>\r\n                <div class="col-sm-9">\r\n                    <input id="ShipWidth" type="number" min="0" step="any" class="form-control" ng-model="product.model.ShipWidth" />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <label for="ShipLength" class="col-sm-3 control-label">Ship Length</label>\r\n                <div class="col-sm-9">\r\n                    <input id="ShipLength" type="number" min="0" step="any" class="form-control" ng-model="product.model.ShipLength" />\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group" oc-if-roles="AddressRoles">\r\n                <label for="ShipFrom" class="col-sm-3 control-label">Ship From</label>\r\n                <div class="col-sm-9">\r\n                    <ui-select ng-model="product.model.ShipFromAddressID" close-on-select="true" id="ShipFrom" ng-disabled="!application.userIsAuthorized([\'ProductAdmin\'])">\r\n                        <ui-select-match placeholder="Search and select seller addresses...">\r\n                            <span ng-bind-html="$select.selected | address"></span>\r\n                        </ui-select-match>\r\n                        <ui-select-choices repeat="address.ID as address in (productShipping.sellerAddresses.Items | filter: $select.search) track by $index" refresh="productShipping.listAllAdminAddresses($select.search)" refresh-delay="300">\r\n                            <span ng-bind-html="address | address:\'full\'"></span>\r\n                        </ui-select-choices>\r\n                    </ui-select>\r\n                </div>\r\n            </fieldset>\r\n            <fieldset class="form-group">\r\n                <div class="col-sm-offset-3 col-sm-9">\r\n                    <button type="submit" cg-busy="productShipping.productUpdateLoading" class="btn btn-primary btn-block">Update</button>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n</div>'),$templateCache.put("productManagement/specs/templates/productSpecCreate.modal.html",'<form name="ProductSpecCreateModalForm" ng-submit="productSpecCreate.submit()" class="form-horizontal" autocomplete="off" novalidate cg-busy="productSpecCreate.loading">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="productSpecCreate.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Spec</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label for="SpecID" class="col-sm-3 control-label">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="SpecID" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="productSpecCreate.spec.ID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="SpecName" class="col-sm-3 control-label">Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="SpecName" type="text" class="form-control" ng-model="productSpecCreate.spec.Name" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <div class="col-sm-9 col-md-offset-3">\r\n                <div class="checkbox">\r\n                    <label for="SpecRequired">\r\n                        <input id="SpecRequired" placeholder="(Optional)" type="checkbox" ng-model="productSpecCreate.spec.Required"/>\r\n                        Required\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="ProductSpecCreateModalForm.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("productManagement/specs/templates/productSpecEdit.modal.html",'<form name="productSpecEditModal.form" ng-submit="productSpecEditModal.submit()" class="form-horizontal" autocomplete="off" novalidate cg-busy="productSpecEditModal.loading">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="productSpecEditModal.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span> {{productSpecEditModal.specName}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label for="ID" class="col-sm-3 control-label">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="ID" name="ID" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="productSpecEditModal.spec.ID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="Name" class="col-sm-3 control-label">Name</label>\r\n            <div class="col-sm-9">\r\n                <input id="Name" name="Name" type="text" class="form-control" ng-model="productSpecEditModal.spec.Name" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="DefaultValue" class="col-sm-3 control-label">Default Value</label>\r\n            <div class="col-sm-9">\r\n                <input id="DefaultValue" name="DefaultValue" placeholder="(Optional)" type="text" class="form-control" ng-model="productSpecEditModal.spec.DefaultValue" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <div class="col-sm-9 col-sm-offset-3">\r\n                <div class="checkbox">\r\n                    <label for="AllowOpenText">\r\n                        <input id="AllowOpenText" name="AllowOpenText" placeholder="(Optional)" type="checkbox" ng-model="productSpecEditModal.spec.AllowOpenText"/>\r\n                        Enable Open Text\r\n                    </label>\r\n                </div>\r\n                <div class="checkbox">\r\n                    <label for="Required">\r\n                        <input id="Required" name="Required" placeholder="(Optional)" type="checkbox" ng-model="productSpecEditModal.spec.Required"/>\r\n                        Required\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="productSpecEditModal.form.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("productManagement/specs/templates/productSpecOptionCreate.modal.html",'<form name="ProductSpecOptionCreateModalForm" ng-submit="productSpecOptionCreate.submit()" class="form-horizontal" autocomplete="off" novalidate cg-busy="productSpecOptionCreate.loading">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="productSpecOptionCreate.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title">New Spec Option</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label for="OptionID" class="col-sm-3 control-label">ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="OptionID" name="ID" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="productSpecOptionCreate.specOption.ID" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="OptionValue" class="col-sm-3 control-label">Value</label>\r\n            <div class="col-sm-9">\r\n                <input id="OptionValue" name="Value" type="text" class="form-control" ng-model="productSpecOptionCreate.specOption.Value" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="OptionPriceMarkupType" class="col-sm-3 control-label">Markup Type</label>\r\n            <div class="col-sm-9">\r\n                <select id="OptionPriceMarkupType" name="PriceMarkupType" class="form-control" ng-model="productSpecOptionCreate.specOption.PriceMarkupType" ng-options="markupType.Value as markupType.Label for markupType in productSpecOptionCreate.markupTypes"></select>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group" uib-collapse="productSpecOptionCreate.specOption.PriceMarkupType == \'NoMarkup\'">\r\n            <label for="OptionPriceMarkup" class="col-sm-3 control-label">Markup</label>\r\n            <div class="col-sm-9">\r\n                <input id="OptionPriceMarkup" name="PriceMarkup" type="number" class="form-control" ng-model="productSpecOptionCreate.specOption.PriceMarkup" ng-required="productSpecOptionCreate.specOption.PriceMarkupType != \'NoMarkup\'"/>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <div class="col-sm-9 col-md-offset-3">\r\n                <div class="checkbox">\r\n                    <label for="OptionIsOpenText">\r\n                        <input id="OptionIsOpenText" name="IsOpenText" type="checkbox" ng-model="productSpecOptionCreate.specOption.IsOpenText"/>\r\n                        Open Text\r\n                    </label>\r\n                </div>\r\n                <div class="checkbox">\r\n                    <label for="OptionDefaultOption">\r\n                        <input id="OptionDefaultOption" name="DefaultOption" type="checkbox" ng-model="productSpecOptionCreate.specOption.DefaultOption"/>\r\n                        Default Option\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block" ng-disabled="ProductSpecOptionCreateModalForm.$invalid">Save</button>\r\n    </div>\r\n</form>'),$templateCache.put("productManagement/specs/templates/productSpecOptionEdit.modal.html",'<form name="productSpecOptionEdit.form" ng-submit="productSpecOptionEdit.submit()" class="form-horizontal" autocomplete="off" novalidate cg-busy="productSpecOptionEdit.loading" oc-readonly-roles="ProductAdmin">\r\n    <div class="modal-header">\r\n        <button type="button" class="close" aria-label="Close" ng-click="productSpecOptionEdit.cancel()"><span aria-hidden="true">&times;</span></button>\r\n        <h4 class="modal-title"><span class="text-muted">Editing: </span> {{productSpecOptionEdit.specOptionValue}}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n        <fieldset class="form-group">\r\n            <label for="OptionID" class="col-sm-3 control-label">Option ID</label>\r\n            <div class="col-sm-9">\r\n                <input id="OptionID" name="ID" placeholder="(Optional)" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="productSpecOptionEdit.specOption.ID" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="OptionValue" class="col-sm-3 control-label">Value</label>\r\n            <div class="col-sm-9">\r\n                <input id="OptionValue" name="Value" type="text" class="form-control" ng-model="productSpecOptionEdit.specOption.Value" required />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <label for="OptionPriceMarkupType" class="col-sm-3 control-label">Markup Type</label>\r\n            <div class="col-sm-9">\r\n                <select id="OptionPriceMarkupType" name="PriceMarkupType" class="form-control" ng-model="productSpecOptionEdit.specOption.PriceMarkupType" ng-options="markupType.Value as markupType.Label for markupType in productSpecOptionEdit.markupTypes"></select>\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group" uib-collapse="productSpecOptionEdit.specOption.PriceMarkupType == \'NoMarkup\'">\r\n            <label for="OptionPriceMarkup" class="col-sm-3 control-label">Markup</label>\r\n            <div class="col-sm-9">\r\n                <input id="OptionPriceMarkup" name="PriceMarkup" type="number" class="form-control" ng-model="productSpecOptionEdit.specOption.PriceMarkup" ng-required="productSpecOptionEdit.specOption.PriceMarkupType != \'NoMarkup\'" />\r\n            </div>\r\n        </fieldset>\r\n        <fieldset class="form-group">\r\n            <div class="col-sm-9 col-md-offset-3">\r\n                <div class="checkbox">\r\n                    <label for="OptionIsOpenText">\r\n                        <input id="OptionIsOpenText" name="IsOpenText" type="checkbox" ng-model="productSpecCreate.spec.IsOpenText"/>\r\n                        Open Text\r\n                    </label>\r\n                </div>\r\n                <div class="checkbox">\r\n                    <label for="OptionDefaultOption">\r\n                        <input id="OptionDefaultOption" name="DefaultOption" type="checkbox" ng-model="productSpecOptionEdit.specOption.DefaultOption"/>\r\n                        Default Option\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </fieldset>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="submit" class="btn btn-primary btn-block">Save</button>\r\n    </div>\r\n</form>'),
$templateCache.put("productManagement/specs/templates/productSpecs.html",'<div ng-if="!productSpecs.specs.Items.length" class="no-matches">\r\n    This product does not have any specs. <br>\r\n    <a ng-click="productSpecs.createSpec(product.model.ID)" oc-if-roles="ProductAdmin">Create one now</a>\r\n</div>\r\n<div class="row" ng-if="productSpecs.specs.Items.length">\r\n    <div class="col-sm-5">\r\n        <div oc-if-roles="ProductAdmin">\r\n            <button type="button" class="btn btn-primary" ng-click="productSpecs.createSpec(product.model.ID)">\r\n                <i class="fa fa-plus-circle" aria-hidden="true"></i>\r\n                New Spec\r\n            </button>\r\n            <br>\r\n            <br>\r\n        </div>\r\n\r\n        <script type="text/ng-template" id="specs_renderer.html">\r\n            <div class="tree-node tree-node-content" ng-class="{\'selected-node\': node.Spec.ID == productSpecs.selectedSpec.Spec.ID}">\r\n                <p ng-click="productSpecs.specSelected(node)">{{node.Spec.Name}}</p>\r\n                <i ui-tree-handle class="fa fa-reorder text-muted"></i>\r\n            </div>\r\n        </script>\r\n        <div ui-tree="productSpecs.specTreeOptions" id="spec-tree-root" data-drag-delay="200">\r\n            <ol ui-tree-nodes ng-model="productSpecs.specs.Items">\r\n                <li ng-repeat="node in productSpecs.specs.Items" ui-tree-node ng-include="\'specs_renderer.html\'"></li>\r\n            </ol>\r\n        </div>\r\n    </div>\r\n    <div class="col-sm-7">\r\n        <div ng-if="!productSpecs.selectedSpec" class="well text-center">\r\n            Select a spec to view details\r\n        </div>\r\n        <div ng-if="productSpecs.selectedSpec">\r\n            <header>\r\n                <h3>\r\n                    <div class="pull-right" oc-if-roles="ProductAdmin">\r\n                        <button type="button" class="btn btn-default" ng-click="productSpecs.editSelectedSpec()"><i class="fa fa-edit"></i> Edit</button>\r\n                        <button type="button" class="btn btn-danger" ng-click="productSpecs.deleteSelectedSpec()"><i class="fa fa-trash"></i> Delete</button>\r\n                    </div>\r\n                    {{productSpecs.selectedSpec.Spec.Name}}\r\n                    <small>(ID: {{productSpecs.selectedSpec.Spec.ID}})</small>\r\n                </h3>\r\n                <b class="text-primary" ng-if="productSpecs.selectedSpec.Spec.Required">\r\n                    <i class="fa fa-star"></i> Required <br>\r\n                </b>\r\n                <b class="text-warning" ng-if="!productSpecs.selectedSpec.Spec.Required">\r\n                    <i class="fa fa-star-o"></i> Optional <br>\r\n                </b>\r\n                <b class="text-primary" ng-if="productSpecs.selectedSpec.Spec.AllowOpenText">\r\n                    <i class="fa fa-pencil-square"></i> Open Text Enabled <br>\r\n                </b>\r\n                <b class="text-warning" ng-if="!productSpecs.selectedSpec.Spec.AllowOpenText">\r\n                    <i class="fa fa-times"></i> Open Text Disabled <br>\r\n                </b>\r\n                <span ng-if="productSpecs.selectedSpec.Spec.DefaultValue">\r\n                    <b class="text-muted">Default Value:</b> <code>{{productSpecs.selectedSpec.Spec.DefaultValue}}</code>\r\n                    <br>\r\n                </span>\r\n            </header>\r\n            <div ng-if="!productSpecs.selectedSpec.Options.length">\r\n                <hr>\r\n                <div class="no-matches">\r\n                    There are no options for this spec. <span oc-if-roles="ProductAdmin"><a ng-click="productSpecs.createSpecOption()">Create</a> one now.</span>\r\n                </div>\r\n            </div>\r\n            <div ng-if="productSpecs.selectedSpec.Options.length">\r\n                <h4 class="page-header">\r\n                    Options\r\n                </h4>\r\n\r\n                <div oc-if-roles="ProductAdmin">\r\n                    <button type="button" class="btn btn-primary" ng-click="productSpecs.createSpecOption()">\r\n                        <i class="fa fa-plus-circle" aria-hidden="true"></i>\r\n                        New Option\r\n                    </button>\r\n                    <br>\r\n                    <br>\r\n                </div>\r\n\r\n                <script type="text/ng-template" id="spec_options_renderer.html">\r\n                    <div class="tree-node tree-node-content" cg-busy="node.loading">\r\n                        <i class="fa fa-trash-o text-danger" ng-click="productSpecs.deleteSpecOption(node)"></i>\r\n                        <p>\r\n                            {{node.Value}}\r\n                            <small ng-if="node.PriceMarkupType != \'NoMarkup\'" ng-class="{\'text-success\':node.PriceMarkup > 0, \'text-warning\': node.PriceMarkup < 0}">\r\n                                {{(node.PriceMarkup > 0 ? \'+\' : \'\') + (node.PriceMarkupType == \'Percentage\' ? node.PriceMarkup : (node.PriceMarkup | currency))}}<span ng-if="node.PriceMarkupType == \'Percentage\'">% / line</span>\r\n                                <span ng-if="node.PriceMarkupType == \'AmountTotal\'">/ line</span>\r\n                                <span ng-if="node.PriceMarkupType == \'AmountPerQuantity\'">/ unit</span>\r\n                            </small>\r\n                        </p>\r\n                        <small ng-if="node.DefaultOption" class="text-primary">DEFAULT OPTION</small>\r\n                        <i class="fa fa-edit text-primary" ng-click="productSpecs.editSpecOption(node)"></i>\r\n                        <i ui-tree-handle class="fa fa-reorder text-muted" oc-if-roles="ProductAdmin"></i>\r\n                    </div>\r\n                </script>\r\n                <div ui-tree="productSpecs.specOptionsTreeOptions" id="spec-options-tree-root" data-drag-delay="200">\r\n                    <ol ui-tree-nodes ng-model="productSpecs.selectedSpec.Options">\r\n                        <li ng-repeat="node in productSpecs.selectedSpec.Options" ui-tree-node ng-include="\'spec_options_renderer.html\'"></li>\r\n                    </ol>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("productManagement/userGroupProducts/templates/userGroupProducts.html",'<article>\r\n    <header class="l-page-header">\r\n        <h3 class="l-page-header__title">\r\n            Available Products\r\n        </h3>\r\n        <!--====== CREATE ======-->\r\n        <div class="l-page-header__btns" oc-if-roles="ProductAdmin">\r\n            <button type="button" class="btn btn-primary btn-block" ng-click="userGroupProducts.createProduct()"><i class="fa fa-plus-circle"></i>\r\n                New Product\r\n            </button>\r\n        </div>\r\n    </header>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <div ng-if="userGroupProducts.list.Items.length || (!userGroupProducts.list.Items.length && userGroupProducts.searchResults)">\r\n        <form name="userGroupProducts.searchForm" pretty-submit>\r\n            <fieldset class="form-group">\r\n                <div class="input-group">\r\n                    <span class="input-group-addon">\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                    <input type="search" ng-change="userGroupProducts.search()" ng-model-options="{debounce:1000}" placeholder="Search Products..."\r\n                        ng-model="userGroupProducts.parameters.search" class="form-control">\r\n                    <span ng-if="userGroupProducts.searchResults" class="input-group-btn">\r\n                        <button class="btn btn-default" type="button" aria-label="Clear Search" ng-click="userGroupProducts.clearSearch()"><i class="fa fa-times"></i> <span class="hidden-xs">Clear</span></button>\r\n                    </span>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div cg-busy="userGroupProducts.searchLoading">\r\n        <div class="no-matches" ng-if="!userGroupProducts.list.Items.length">\r\n            <b ng-if="userGroupProducts.searchResults">No matches found.</b>\r\n            <b ng-if="!userGroupProducts.searchResults">This seller organization does not have any Products.</b>\r\n        </div>\r\n        <div ng-if="userGroupProducts.list.Items.length">\r\n            <div class="row">\r\n                <div class="col-xs-6 col-xs-offset-6">\r\n                    <p class="text-right">{{(application.$ocMedia(\'min-width:768px\') ? userGroupProducts.list.Meta.ItemRange[0] : \'1\') + \' - \'\r\n                        + userGroupProducts.list.Meta.ItemRange[1] + \' of \' + userGroupProducts.list.Meta.TotalCount + \'\r\n                        results\'}}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            <form name="userGroupProducts.form" class="panel panel-default table-responsive">\r\n                <table class="table table-striped table-bordered l-product-table__usergroup">\r\n                    <colgroup>\r\n                        <col>\r\n                        <col>\r\n                        <col>\r\n                    </colgroup>\r\n                    <thead>\r\n                        <tr>\r\n                            <th rowspan="2" ng-click="userGroupProducts.updateSort(\'ID\')">\r\n                                ID\r\n                                <i class="fa fa-caret-down" ng-show="userGroupProducts.parameters.sortBy == \'ID\'"></i>\r\n                                <i class="fa fa-caret-up" ng-show="userGroupProducts.parameters.sortBy == \'!ID\'"></i>\r\n                            </th>\r\n                            <th rowspan="2" ng-click="userGroupProducts.updateSort(\'Name\')">\r\n                                Name\r\n                                <i class="fa fa-caret-down" ng-show="userGroupProducts.parameters.sortBy == \'Name\'"></i>\r\n                                <i class="fa fa-caret-up" ng-show="userGroupProducts.parameters.sortBy == \'!Name\'"></i>\r\n                            </th>\r\n                            <th colspan="2" class="text-center">Quantity Options</th>\r\n                            <th rowspan="2" class="text-right">Base Price</th>\r\n                        </tr>\r\n                        <tr>\r\n                            <th class="text-center">Min</th>\r\n                            <th class="text-center">Max</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr ng-repeat="product in userGroupProducts.list.Items">\r\n                            <td>{{product.ID}}</td>\r\n                            <td><a href="" ui-sref="product({productid:product.ID})">{{product.Name}}</a></td>\r\n                            <td ng-if="product.SelectedPrice" class="text-center">{{product.SelectedPrice.MinQuantity}}</td>\r\n                            <td ng-if="product.SelectedPrice" class="text-center" ng-class="{\'text-muted\':!product.SelectedPrice.MaxQuantity}">{{product.SelectedPrice.MaxQuantity || \'N/A\'}}</td>\r\n                            <td ng-if="product.SelectedPrice" class="text-right text-primary">\r\n                                <a ui-sref="product.pricing({productid:product.ID, pricescheduleid:product.SelectedPrice.ID})">\r\n                                    <small class="text-info" ng-if="product.DefaultPriceScheduleID == product.SelectedPrice.ID">(Default) </small>\r\n                                    <small class="text-info" ng-if="product.SelectedPrice.Inherited">(Inherited) </small>\r\n                                    <b>\r\n                                        {{product.SelectedPrice.PriceBreaks[0].Price | currency}} \r\n                                    </b>\r\n                                </a>\r\n                                <button style="margin-left:5px;" class="btn btn-default btn-xs" ng-click="userGroupProducts.updateProductPrice(this)">\r\n                                    {{(product.DefaultPriceScheduleID == product.SelectedPrice.ID || product.SelectedPrice.Inherited) ? \'Override\' : \'Change\'}}\r\n                                </button>\r\n                            </td>\r\n                            <td colspan="3" class="text-center" ng-if="!product.SelectedPrice">\r\n                                <button class="btn btn-primary btn-xs" ng-click="userGroupProducts.updateProductPrice(this)"><i class="fa fa-plus-circle"></i> Select or Create a Price</button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n        </div>\r\n        <ul uib-pagination class="pagination-sm pull-right hidden-xs" ng-if="userGroupProducts.list.Meta.TotalPages > 1" total-items="userGroupProducts.list.Meta.TotalCount"\r\n            items-per-page="userGroupProducts.list.Meta.PageSize" max-size="5" boundary-links="userGroupProducts.list.Meta.TotalPages > 5"\r\n            ng-model="userGroupProducts.list.Meta.Page" ng-change="userGroupProducts.pageChanged()">\r\n        </ul>\r\n        <button type="button" class="btn btn-default btn-block btn-lg visible-xs" ng-show="userGroupProducts.list.Meta.Page < userGroupProducts.list.Meta.TotalPages"\r\n            ng-click="userGroupProducts.loadMore()">Load More</button>\r\n    </div>\r\n    </div>\r\n</article>'),$templateCache.put("styles/styleguide/templates/styleguide.html",'<article>\r\n    <div class="row">\r\n        <div class="col-md-3 col-md-push-9 col-lg-2 col-lg-push-10 hidden-xs hidden-sm">\r\n            <ul class="nav nav-pills nav-stacked c-sidebar" hl-sticky anchor="top" offset-top="70">\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#headings">Headings</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#tables">Tables</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#content-formatting">Content Formatting</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#forms">Forms</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#buttons">Buttons</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#images">Images</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#dropdowns">Dropdowns</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#input-groups">Input Groups</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#navs">Navs</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#navbar">Navbar</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#pagination">Pagination</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#labels">Labels and Badges</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#alerts">Alerts</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#progress">Progress Bars</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#media-object">Media Object</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#list-group">List Group</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#panels">Panels</a></li>\r\n                <li class="c-sidebar__anchor" role="presentation"><a href="#wells">Wells</a></li>\r\n            </ul>\r\n        </div>\r\n        <div class="col-md-9 col-md-pull-3 col-lg-10 col-lg-pull-2">\r\n            <header class="jumbotron">\r\n                <h1>Styleguide</h1>\r\n                <p>A preview of common UI elements within your application.</p>\r\n            </header>\r\n            <section class="c-section" id="headings">\r\n                <h2 class="c-section__header">Headings\r\n                </h2>\r\n                <div class="c-section__body">\r\n                    <h1 class="page-header">Page Header <small>With Small Text</small></h1>\r\n                    <h1>This is an h1 heading</h1>\r\n                    <h2>This is an h2 heading</h2>\r\n                    <h3>This is an h3 heading</h3>\r\n                    <h4>This is an h4 heading</h4>\r\n                    <h5>This is an h5 heading</h5>\r\n                    <h6>This is an h6 heading</h6>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="tables">\r\n                <h2 class="c-section__header">Tables\r\n                </h2>\r\n                <div class="c-section__body">\r\n                    <table class="table table-hover">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>First Name</th>\r\n                                <th>Tables</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>1</td>\r\n                                <td>Michael</td>\r\n                                <td>Are formatted like this</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>2</td>\r\n                                <td>Lucille</td>\r\n                                <td>Do you like them?</td>\r\n                            </tr>\r\n                            <tr class="success ">\r\n                                <td>3</td>\r\n                                <td>Success</td>\r\n                                <td></td>\r\n                            </tr>\r\n                            <tr class="danger ">\r\n                                <td>4</td>\r\n                                <td>Danger</td>\r\n                                <td></td>\r\n                            </tr>\r\n                            <tr class="warning ">\r\n                                <td>5</td>\r\n                                <td>Warning</td>\r\n                                <td></td>\r\n                            </tr>\r\n                            <tr class="active ">\r\n                                <td>6</td>\r\n                                <td>Active</td>\r\n                                <td></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <table class="table table-striped table-bordered table-condensed ">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>First Name</th>\r\n                                <th>Tables</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>1</td>\r\n                                <td>Michael</td>\r\n                                <td>This one is bordered and condensed</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>2</td>\r\n                                <td>Lucille</td>\r\n                                <td>Do you still like it?</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="content-formatting">\r\n                <h2 class="c-section__header">Content Formatting\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <p class="lead">This is a lead paragraph.</p>\r\n                    <p>This is an <b>ordinary paragraph</b> that is <i>long enough</i> to wrap to\r\n                        <u>multiple lines</u> so that you can see how the line spacing looks.</p>\r\n                    <p class="text-muted ">Muted color paragraph.</p>\r\n                    <p class="text-warning ">Warning color paragraph.</p>\r\n                    <p class="text-danger ">Danger color paragraph.</p>\r\n                    <p class="text-info ">Info color paragraph.</p>\r\n                    <p class="text-success ">Success color paragraph.</p>\r\n                    <p><small>This is text in a <code>small</code> wrapper. <abbr title="No Big Deal">NBD</abbr>, right?</small></p>\r\n                    <hr>\r\n                    <address> <strong>Twitter, Inc.</strong><br> 795 Folsom Ave, Suite 600<br> San Francisco, CA 94107<br>                                <abbr title="Phone ">P:</abbr> (123) 456-7890 </address>\r\n                    <address class="col-6 "> <strong>Full Name</strong><br> <a href="mailto:# ">first.last@example.com</a> </address>\r\n                    <hr>\r\n                    <blockquote>Here\'s what a blockquote looks like in Bootstrap. <small>Use <code>small</code> to identify the source.</small>\r\n                    </blockquote>\r\n                    <hr>\r\n                    <div class="row ">\r\n                        <div class="col-xs-6 ">\r\n                            <ul>\r\n                                <li>Normal Unordered List</li>\r\n                                <li>Can Also Work\r\n                                    <ul>\r\n                                        <li>With Nested Children</li>\r\n                                    </ul>\r\n                                </li>\r\n                                <li>Adds Bullets to Page</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div class="col-xs-6 ">\r\n                            <ol>\r\n                                <li>Normal Ordered List</li>\r\n                                <li>Can Also Work\r\n                                    <ol>\r\n                                        <li>With Nested Children</li>\r\n                                    </ol>\r\n                                </li>\r\n                                <li>Adds Bullets to Page</li>\r\n                            </ol>\r\n                        </div>\r\n                    </div>\r\n                    <hr>\r\n                    <pre>function preFormatting() { // looks like this; var something = somethingElse; return true;}</pre>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="forms">\r\n                <h2 class="c-section__header">Forms\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <form>\r\n                        <fieldset>\r\n                            <legend>Legend</legend>\r\n                            <div class="form-group">\r\n                                <label for="exampleInputEmail ">Email address</label>\r\n                                <input type="text " class="form-control " id="exampleInputEmail " placeholder="Enter email ">\r\n                            </div>\r\n                            <div class="form-group ">\r\n                                <label for="exampleInputPassword ">Password</label>\r\n                                <input type="password " class="form-control " id="exampleInputPassword " placeholder="Password ">\r\n                            </div>\r\n                            <div class="form-group ">\r\n                                <label for="exampleInputFile ">File input</label>\r\n                                <input type="file " id="exampleInputFile ">\r\n                                <p class="help-block ">Example block-level help text here.</p>\r\n                            </div>\r\n                            <div class="checkbox ">\r\n                                <label>\r\n                            <input type="checkbox ">Check me out</label>\r\n                            </div>\r\n                            <button type="submit " class="btn btn-default ">Submit</button>\r\n                        </fieldset>\r\n                    </form>\r\n                    <hr>\r\n                    <form class="form-inline ">\r\n                        <input type="text " class="form-control " placeholder="Email " style="width: 200px; ">\r\n                        <input type="password " class="form-control " placeholder="Password " style="width: 200px; ">\r\n                        <div class="checkbox ">\r\n                            <label>\r\n                        <input type="checkbox ">Remember me</label>\r\n                        </div>\r\n                        <button type="submit " class="btn btn-default ">Sign in</button>\r\n                    </form>\r\n                    <hr>\r\n                    <form class="form-horizontal ">\r\n                        <div class="form-group ">\r\n                            <label for="inputEmail " class="col-lg-2 control-label ">Email</label>\r\n                            <div class="col-lg-10 ">\r\n                                <input type="text " class="form-control " id="inputEmail " placeholder="Email ">\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group has-warning ">\r\n                            <label for="inputEmail " class="col-lg-2 control-label ">Email</label>\r\n                            <div class="col-lg-10 ">\r\n                                <input type="text " class="form-control " id="inputEmail " placeholder="Email ">\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group has-error ">\r\n                            <label for="inputEmail " class="col-lg-2 control-label ">Email</label>\r\n                            <div class="col-lg-10 ">\r\n                                <input type="text " class="form-control " id="inputEmail " placeholder="Email ">\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group has-success ">\r\n                            <label for="inputEmail " class="col-lg-2 control-label ">Email</label>\r\n                            <div class="col-lg-10 ">\r\n                                <input type="text " class="form-control " id="inputEmail " placeholder="Email ">\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group ">\r\n                            <label for="inputPassword " class="col-lg-2 control-label ">Password</label>\r\n                            <div class="col-lg-10 ">\r\n                                <input type="password " class="form-control " id="inputPassword " placeholder="Password ">\r\n                                <div class="checkbox ">\r\n                                    <label>\r\n                                <input type="checkbox ">Remember me</label>\r\n                                </div>\r\n                                <button type="submit " class="btn btn-default ">Sign in</button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="buttons">\r\n                <h2 class="c-section__header">Buttons\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <p>\r\n                        <button type="button" class="btn btn-lg btn-default ">Default</button>\r\n                        <button type="button " class="btn btn-lg btn-primary ">Primary</button>\r\n                        <button type="button " class="btn btn-lg btn-success ">Success</button>\r\n                        <button type="button " class="btn btn-lg btn-info ">Info</button>\r\n                        <button type="button " class="btn btn-lg btn-warning ">Warning</button>\r\n                        <button type="button " class="btn btn-lg btn-danger ">Danger</button>\r\n                        <button type="button " class="btn btn-lg btn-link ">Link</button>\r\n                    </p>\r\n                    <p>\r\n                        <button type="button " class="btn btn-default ">Default</button>\r\n                        <button type="button " class="btn btn-primary ">Primary</button>\r\n                        <button type="button " class="btn btn-success ">Success</button>\r\n                        <button type="button " class="btn btn-info ">Info</button>\r\n                        <button type="button " class="btn btn-warning ">Warning</button>\r\n                        <button type="button " class="btn btn-danger ">Danger</button>\r\n                        <button type="button " class="btn btn-link ">Link</button>\r\n                    </p>\r\n                    <p>\r\n                        <button type="button " class="btn btn-sm btn-default ">Default</button>\r\n                        <button type="button " class="btn btn-sm btn-primary ">Primary</button>\r\n                        <button type="button " class="btn btn-sm btn-success ">Success</button>\r\n                        <button type="button " class="btn btn-sm btn-info ">Info</button>\r\n                        <button type="button " class="btn btn-sm btn-warning ">Warning</button>\r\n                        <button type="button " class="btn btn-sm btn-danger ">Danger</button>\r\n                        <button type="button " class="btn btn-sm btn-link ">Link</button>\r\n                    </p>\r\n                    <p>\r\n                        <button type="button " class="btn btn-xs btn-default ">Default</button>\r\n                        <button type="button " class="btn btn-xs btn-primary ">Primary</button>\r\n                        <button type="button " class="btn btn-xs btn-success ">Success</button>\r\n                        <button type="button " class="btn btn-xs btn-info ">Info</button>\r\n                        <button type="button " class="btn btn-xs btn-warning ">Warning</button>\r\n                        <button type="button " class="btn btn-xs btn-danger ">Danger</button>\r\n                        <button type="button " class="btn btn-xs btn-link ">Link</button>\r\n                    </p>\r\n                    <p>\r\n                        <button type="button " class="btn btn-default "><span class="glyphicon glyphicon-star "></span> Glyphicons!</button>\r\n                        <button type="button " class="btn btn-primary "><span class="glyphicon glyphicon-edit "></span></button>\r\n                        <button type="button " class="btn btn-success "><span class="glyphicon glyphicon-plus "></span></button>\r\n                        <button type="button " class="btn btn-info "><span class="glyphicon glyphicon-info-sign "></span></button>\r\n                        <button type="button " class="btn btn-warning "><span class="glyphicon glyphicon-flash "></span></button>\r\n                        <button type="button " class="btn btn-danger "><span class="glyphicon glyphicon-ban-circle "></span></button>\r\n                        <button type="button " class="btn btn-link "><span class="glyphicon glyphicon-arrow-right "></span></button>\r\n                    </p>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="images">\r\n                <h2 class="c-section__header">Images\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <p><img src="http://placehold.it/100x100" class="img-rounded ">\r\n                        <img src="http://placehold.it/100x100 " class="img-circle ">\r\n                        <img src="http://placehold.it/100x100 " class="img-thumbnail "></p>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="dropdowns">\r\n                <h2 class="c-section__header">Dropdowns\r\n                </h2>\r\n                <div class="panel-body clearfix">\r\n                    <div class="dropdown">\r\n                        <!-- Link or button to toggle dropdown -->\r\n                        <ul class="dropdown-menu " role="menu " aria-labelledby="dropdownMenu " style="display: block; position: static; ">\r\n                            <li class="dropdown-header ">Dropdown header</li>\r\n                            <li class="disabled ">\r\n                                <a tabindex="-1 " href="# ">Action</a>\r\n                            </li>\r\n                            <li>\r\n                                <a tabindex="-1 " href="# ">Another action</a>\r\n                            </li>\r\n                            <li>\r\n                                <a tabindex="-1 " href="# ">Something else here</a>\r\n                            </li>\r\n                            <li class="divider "></li>\r\n                            <li>\r\n                                <a tabindex="-1 " href="# ">Separated link</a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="input-groups">\r\n                <h2 class="c-section__header">Input Groups\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <div class="input-group">\r\n                        <span class="input-group-btn ">                <button class="btn btn-default " type="button ">Go!</button>              </span>\r\n                        <input\r\n                            type="text " class="form-control " placeholder="Username ">\r\n                    </div><br>\r\n                    <div class="input-group ">\r\n                        <input type="text " class="form-control input-large ">\r\n                        <span class="input-group-addon input-large ">.00</span>\r\n                    </div><br>\r\n                    <div class="input-group ">\r\n                        <span class="input-group-addon ">$</span><input type="text " class="form-control ">\r\n                        <span class="input-group-addon ">.00</span>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="navs">\r\n                <h2 class="c-section__header">Navs\r\n                </h2>\r\n                <div class="panel-body clearfix">\r\n                    <ul class="nav nav-tabs">\r\n                        <li class="active ">\r\n                            <a href="# ">Home</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">About</a>\r\n                        </li>\r\n                    </ul>\r\n                    <p></p>\r\n                    <p></p>\r\n                    <ul class="nav nav-pills ">\r\n                        <li class="active ">\r\n                            <a href="# ">Home</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">About</a>\r\n                        </li>\r\n                    </ul>\r\n                    <p></p>\r\n                    <p></p>\r\n                    <ul class="nav nav-stacked nav-pills ">\r\n                        <li class="active ">\r\n                            <a href="# ">Home</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">About</a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="navbar">\r\n                <h2 class="c-section__header">Navbar\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <p></p>\r\n                    <div class="navbar">\r\n                        <div class="navbar-header ">\r\n                            <a href="# " class="navbar-brand ">Your Company</a>\r\n                        </div>\r\n                        <div class="navbar-collapse ">\r\n                            <ul class="nav navbar-nav navbar-right ">\r\n                                <li class="active ">\r\n                                    <a href="# ">Home</a>\r\n                                </li>\r\n                                <li>\r\n                                    <a href="# ">About</a>\r\n                                </li>\r\n                                <li>\r\n                                    <a href="# ">Contact</a>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div class="navbar navbar-inverse ">\r\n                        <div class="navbar-header ">\r\n                            <a href="# " class="navbar-brand ">Your Company</a>\r\n                        </div>\r\n                        <div class="navbar-collapse ">\r\n                            <ul class="nav navbar-nav navbar-right ">\r\n                                <li class="active ">\r\n                                    <a href="# ">Home</a>\r\n                                </li>\r\n                                <li>\r\n                                    <a href="# ">About</a>\r\n                                </li>\r\n                                <li>\r\n                                    <a href="# ">Contact</a>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div class="navbar ">\r\n                        <div class="collapse navbar-collapse ">\r\n                            <a class="btn btn-primary navbar-btn ">Navbar Button</a>\r\n                            <p class="navbar-text navbar-right ">Navbar Text</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="pagination">\r\n                <h2 class="c-section__header">Pagination\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <ul class="pagination" style="margin-right: 10px; ">\r\n                        <li>\r\n                            <a href="# ">Prev</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">1</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">2</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">3</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">4</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">Next</a>\r\n                        </li>\r\n                    </ul>\r\n                    <ul class="pagination pagination-lg ">\r\n                        <li>\r\n                            <a href="# ">Prev</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">1</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">2</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">3</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">4</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">Next</a>\r\n                        </li>\r\n                    </ul>\r\n                    <ul class="pager ">\r\n                        <li>\r\n                            <a href="# ">Prev</a>\r\n                        </li>\r\n                        <li>\r\n                            <a href="# ">Next</a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="labels">\r\n                <h2 class="c-section__header">Labels and Badges\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <h3><span class="label label-default">Default</span>&nbsp;<span class="label label-success">Success</span>&nbsp;\r\n                        <span\r\n                            class="label label-warning">Warning</span>&nbsp;<span class="label label-danger">Danger</span>&nbsp;<span class="label label-info">Info</span></h3>\r\n                    <p class="lead"><a href="#">Inbox <span class="badge">42</span></a></p>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="alerts">\r\n                <h2 class="c-section__header">Alerts\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <div>\r\n                        <div class="alert alert-danger">\r\n                            <button type="button " class="close " data-dismiss="alert ">×</button>\r\n                            <strong>Oh snap!</strong> <a href="# " class="alert-link ">Change a few things up</a> and\r\n                            try submitting again.\r\n                        </div>\r\n                        <div class="alert alert-success ">\r\n                            <button type="button " class="close " data-dismiss="alert ">×</button>\r\n                            <strong>Well done!</strong> You successfully read <a href="# " class="alert-link ">this important alert message</a>.\r\n                        </div>\r\n                        <div class="alert alert-warning ">\r\n                            <button type="button " class="close " data-dismiss="alert ">×</button>\r\n                            <strong>Heads up!</strong> This <a href="# " class="alert-link ">alert needs your attention</a>,\r\n                            but it\'s not super important.\r\n                        </div>\r\n                        <div class="alert alert-info ">\r\n                            <button type="button " class="close " data-dismiss="alert ">×</button>\r\n                            <strong>Heads up!</strong> This <a href="# " class="alert-link ">alert needs your attention</a>,\r\n                            but it\'s not super important.\r\n                        </div>\r\n                        <div class="alert ">\r\n                            <button type="button " class="close " data-dismiss="alert ">×</button>\r\n                            <h4>Warning!</h4>\r\n                            <p>This is a block style alert.</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="progress">\r\n                <h2 class="c-section__header">Progress Bars\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <div class="progress">\r\n                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;"><span class="sr-only">60% Complete</span></div>\r\n                    </div>\r\n                    <div class="progress">\r\n                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"\r\n                            style="width: 40%"><span class="sr-only">40% Complete (success)</span></div>\r\n                    </div>\r\n                    <div class="progress">\r\n                        <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%"><span class="sr-only">20% Complete</span></div>\r\n                    </div>\r\n                    <div class="progress">\r\n                        <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"\r\n                            style="width: 60%"><span class="sr-only">60% Complete (warning)</span></div>\r\n                    </div>\r\n                    <div class="progress">\r\n                        <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"\r\n                            style="width: 80%"><span class="sr-only">80% Complete (danger)</span></div>\r\n                    </div>\r\n                    <div class="progress">\r\n                        <div class="progress-bar progress-bar-success" style="width: 35%"><span class="sr-only">35% Complete (success)</span></div>\r\n                        <div class="progress-bar progress-bar-warning" style="width: 20%"><span class="sr-only">20% Complete (warning)</span></div>\r\n                        <div class="progress-bar progress-bar-danger" style="width: 10%"><span class="sr-only">10% Complete (danger)</span></div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="media-object">\r\n                <h2 class="c-section__header">Media Object\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <p></p>\r\n                    <div class="media">\r\n                        <a class="pull-left" href="#"> <img class="media-object" src="https://app.divshot.com/img/placeholder-64x64.gif"> </a>\r\n                        <div class="media-body">\r\n                            <h4 class="media-heading">Media heading</h4>\r\n                            <p>This is the content for your media.</p>\r\n                            <div class="media">\r\n                                <a class="pull-left" href="#"> <img class="media-object" src="https://app.divshot.com/img/placeholder-64x64.gif">                                            </a>\r\n                                <div class="media-body">\r\n                                    <h4 class="media-heading">Media heading</h4>\r\n                                    <p>This is the content for your media.</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="list-group">\r\n                <h2 class="c-section__header">List Group\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <div class="row">\r\n                        <div class="col-lg-4 ">\r\n                            <ul class="list-group ">\r\n                                <li class="list-group-item ">Cras justo odio</li>\r\n                                <li class="list-group-item ">Dapibus ac facilisis in</li>\r\n                                <li class="list-group-item ">Morbi leo risus</li>\r\n                                <li class="list-group-item ">Porta ac consectetur ac</li>\r\n                                <li class="list-group-item ">Vestibulum at eros</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div class="col-lg-4 ">\r\n                            <div class="list-group ">\r\n                                <a href="# " class="list-group-item active ">Cras justo odio</a>\r\n                                <a href="# " class="list-group-item ">Dapibus ac facilisis in</a>\r\n                                <a href="# " class="list-group-item ">Morbi leo risus</a>\r\n                                <a href="# " class="list-group-item ">Porta ac consectetur ac</a>\r\n                                <a href="# " class="list-group-item ">Vestibulum at eros</a>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-lg-4 ">\r\n                            <div class="list-group ">\r\n                                <a href="# " class="list-group-item active ">\r\n                                    <h4 class="list-group-item-heading ">List group item heading</h4>\r\n                                    <p class="list-group-item-text ">Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p>\r\n                                </a>\r\n                                <a href="# " class="list-group-item ">\r\n                                    <h4 class="list-group-item-heading ">List group item heading</h4>\r\n                                    <p class="list-group-item-text ">Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p>\r\n                                </a>\r\n                                <a href="# " class="list-group-item ">\r\n                                    <h4 class="list-group-item-heading ">List group item heading</h4>\r\n                                    <p class="list-group-item-text ">Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="panels">\r\n                <h2 class="c-section__header">Panels\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <div class="row">\r\n                        <div class="col-lg-3">\r\n                            <div class="panel panel-primary" id="panels">\r\n                                <div class="panel-heading">This is a header\r\n                                </div>\r\n                                <div class="panel-body">This is a panel</div>\r\n                                <div class="panel-footer">This is a footer\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-lg-3">\r\n                            <div class="panel panel-success">\r\n                                <div class="panel-heading">This is a header\r\n                                </div>\r\n                                <div class="panel-body">This is a panel</div>\r\n                                <div class="panel-footer">This is a footer\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-lg-3">\r\n                            <div class="panel panel-danger">\r\n                                <div class="panel-heading">This is a header\r\n                                </div>\r\n                                <div class="panel-body">This is a panel</div>\r\n                                <div class="panel-footer">This is a footer\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-lg-3">\r\n                            <div class="panel panel-warning">\r\n                                <div class="panel-heading">This is a header\r\n                                </div>\r\n                                <div class="panel-body">This is a panel</div>\r\n                                <div class="panel-footer">This is a footer\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-lg-3">\r\n                            <div class="panel panel-info">\r\n                                <div class="panel-heading">This is a header\r\n                                </div>\r\n                                <div class="panel-body">This is a panel</div>\r\n                                <div class="panel-footer">This is a footer\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-lg-3">\r\n                            <div class="panel panel-default">\r\n                                <div class="panel-heading">This is a header\r\n                                </div>\r\n                                <div class="panel-body">This is a panel</div>\r\n                                <ul class="list-group list-group-flush">\r\n                                    <li class="list-group-item">First Item</li>\r\n                                    <li class="list-group-item">Second Item</li>\r\n                                    <li class="list-group-item">Third Item</li>\r\n                                </ul>\r\n                                <div class="panel-footer">This is a footer\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="c-section" id="wells">\r\n                <h2 class="c-section__header">Wells\r\n                </h2>\r\n                <div  class="c-section__body">\r\n                    <div class="col-lg-3">\r\n                        <div class="well" id="wells">Default Well\r\n                        </div>\r\n                        <div class="well well-sm">Small Well\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-lg-3">\r\n                        <div class="well well-lg">Large Padding Well\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</article>');
}])}()}(),function(){"use strict";angular.module("orderCloud").constant("appname","Angular Seller").constant("clientid","FA2E05CB-40DE-4210-AF48-AB7BF02B8F0B").constant("environment","staging").constant("defaultstate","home").constant("html5mode",!1).constant("bootswatchtheme",null).constant("scope",["FullAccess","AddressAdmin","AddressReader","AdminUserAdmin","AdminUserReader","AdminUserGroupAdmin","AdminUserGroupReader","ApprovalRuleAdmin","ApprovalRuleReader","BuyerAdmin","BuyerReader","BuyerUserAdmin","BuyerUserReader","CatalogAdmin","CatalogReader","CategoryAdmin","CategoryReader","CostCenterAdmin","CostCenterReader","CreditCardAdmin","CreditCardReader","InventoryAdmin","MeAdmin","MeXpAdmin","MessageConfigAssignmentAdmin","OrderAdmin","OrderReader","ShipmentAdmin","ShipmentReader","PasswordReset","PriceScheduleAdmin","PriceScheduleReader","ProductAdmin","ProductReader","ProductAssignmentAdmin","PromotionAdmin","PromotionReader","SpendingAccountAdmin","SpendingAccountReader","SupplierAdmin","SupplierReader","SupplierUserAdmin","SupplierUserReader","SupplierUserGroupAdmin","SupplierUserGroupReader","SetSecurityProfile","UserGroupAdmin","UserGroupReader","OverrideUnitPrice","OverrideShipping","OverrideTax","UnsubmittedOrderReader"]).constant("authurl","https://stagingauth.ordercloud.io").constant("apiurl","https://stagingapi.ordercloud.io")}(),function(){"use strict";function UserGroupProductsController($q,$exceptionHandler,$state,$stateParams,$uibModal,$filter,toastr,OrderCloudSDK,ocParameters,ocProducts,ocProductPricing,SelectedBuyer,SelectedUserGroup,ProductList,Parameters,MappedProductList,BuyerProductAssignments,UserGroupProductAssignments){function filter(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))}function search(){vm.filter(!0)}function clearSearch(){vm.parameters.search=null,vm.filter(!0)}function updateSort(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)}function pageChanged(){$state.go(".",{page:vm.list.Meta.Page})}function loadMore(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1,filters:{Active:void 0}});return OrderCloudSDK.Products.List(parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}var vm=this;vm.list=MappedProductList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0===Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.clearSearch=clearSearch,vm.filter=filter,vm.loadMore=loadMore,vm.pageChanged=pageChanged,vm.search=search,vm.updateSort=updateSort;var CurrentAssignments=BuyerProductAssignments.concat(UserGroupProductAssignments);vm.createProduct=function(){ocProducts.Create().then(function(newProduct){toastr.success(newProduct.Name+" was created."),$state.go("product",{productid:newProduct.ID})})},vm.updateProductPrice=function(scope){ocProductPricing.UpdateProductPrice(scope.product,SelectedBuyer,BuyerProductAssignments.concat(UserGroupProductAssignments),SelectedUserGroup).then(function(data){var message=scope.product.Name+" price was "+(data.SelectedPrice?"updated to "+$filter("currency")(data.SelectedPrice.PriceBreaks[0].Price):"removed ")+" for "+SelectedUserGroup.Name;toastr.success(message),CurrentAssignments=data.UpdatedAssignments,scope.product.SelectedPrice=data.SelectedPrice})["catch"](function(ex){"CREATE"===ex?ocProductPricing.CreateProductPrice(scope.product,SelectedBuyer,BuyerProductAssignments.concat(UserGroupProductAssignments),SelectedUserGroup).then(function(data){toastr.success(scope.product.Name+" price was updated to "+$filter("currency")(data.SelectedPrice.PriceBreaks[0].Price)+" for "+SelectedUserGroup.Name),CurrentAssignments=data.UpdatedAssignments,scope.product.SelectedPrice=data.SelectedPrice})["catch"](function(ex){$exceptionHandler(ex)}):$exceptionHandler(ex)})}}UserGroupProductsController.$inject=["$q","$exceptionHandler","$state","$stateParams","$uibModal","$filter","toastr","OrderCloudSDK","ocParameters","ocProducts","ocProductPricing","SelectedBuyer","SelectedUserGroup","ProductList","Parameters","MappedProductList","BuyerProductAssignments","UserGroupProductAssignments"],angular.module("orderCloud").controller("UserGroupProductsCtrl",UserGroupProductsController)}(),function(){"use strict";function UserGroupProductsConfig($stateProvider){$stateProvider.state("userGroupProducts",{parent:"userGroup",url:"/products?search&page&pageSize&searchOn&sortBy&filters&catalogID",templateUrl:"productManagement/userGroupProducts/templates/userGroupProducts.html",controller:"UserGroupProductsCtrl",controllerAs:"userGroupProducts",resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],BuyerProductAssignments:["$stateParams","ocProductPricing",function($stateParams,ocProductPricing){return ocProductPricing.Assignments.Get(null,"company",$stateParams.buyerid)}],UserGroupProductAssignments:["$stateParams","ocProductPricing",function($stateParams,ocProductPricing){return ocProductPricing.Assignments.Get(null,"group",$stateParams.usergroupid,$stateParams.buyerid,$stateParams.usergroupid)}],ProductList:["OrderCloudSDK","Parameters",function(OrderCloudSDK,Parameters){return Parameters.filters=angular.extend(Parameters.filters,{Active:!0}),OrderCloudSDK.Products.List(Parameters)}],MappedProductList:["$stateParams","ocProductPricing","ProductList","BuyerProductAssignments","UserGroupProductAssignments",function($stateParams,ocProductPricing,ProductList,BuyerProductAssignments,UserGroupProductAssignments){return ocProductPricing.GetProductListPriceSchedules(ProductList,BuyerProductAssignments,UserGroupProductAssignments).then(function(data){return ocProductPricing.Assignments.Map($stateParams.buyerid,$stateParams.usergroupid,ProductList,data,BuyerProductAssignments,UserGroupProductAssignments)})}]}})}UserGroupProductsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(UserGroupProductsConfig)}(),function(){"use strict";function ProductSpecsController($rootScope,toastr,ocProductSpecs,ProductSpecs){function createSpec(productID){ocProductSpecs.CreateSpec(productID).then(function(assignment){vm.specs.Items.push(assignment),vm.selectedSpec=assignment,$rootScope.$broadcast("ProductManagement:SpecCountChanged","increment")})}function editSelectedSpec(){ocProductSpecs.EditSpec(vm.selectedSpec.Spec).then(function(updatedSpec){vm.specs.Items[_.indexOf(vm.specs.Items,vm.selectedSpec)].Spec=updatedSpec,vm.specs.Items[_.indexOf(vm.specs.Items,vm.selectedSpec)].SpecID=updatedSpec.ID,vm.selectedSpec.Spec=updatedSpec,toastr.success("Spec: "+vm.selectedSpec.Spec.Name+" was updated.")})}function deleteSelectedSpec(){ocProductSpecs.DeleteSpec(vm.selectedSpec.Spec.ID).then(function(){var specIndex=0;angular.forEach(vm.specs.Items,function(spec,index){spec.Spec.ID==vm.selectedSpec.Spec.ID&&(specIndex=index)}),vm.specs.Items.splice(specIndex,1),toastr.success("Spec: "+vm.selectedSpec.Spec.Name+" was deleted."),vm.selectedSpec=null,$rootScope.$broadcast("ProductManagement:SpecCountChanged","decrement")})}function specSelected(node){vm.selectedSpec=node}function createSpecOption(){ocProductSpecs.CreateSpecOption(vm.selectedSpec).then(function(specOption){vm.selectedSpec.Options?vm.selectedSpec.Options.push(specOption):vm.selectedSpec.Options=[specOption],angular.forEach(vm.selectedSpec.Options,function(option,index){option.ID!=specOption.ID&&(vm.selectedSpec.Options[index].DefaultOption=specOption.DefaultOption?!1:option.DefaultOption)}),toastr.success("Spec option "+specOption.Value+" was created.")})}function editSpecOption(node){ocProductSpecs.EditSpecOption(vm.selectedSpec,node).then(function(specOption){angular.forEach(vm.selectedSpec.Options,function(option,index){option.ID==specOption.OriginalID?vm.selectedSpec.Options[index]=specOption:vm.selectedSpec.Options[index].DefaultOption=specOption.DefaultOption?!1:option.DefaultOption}),toastr.success("Spec option "+specOption.Value+" was updated.")})}function deleteSpecOption(node){ocProductSpecs.DeleteSpecOption(vm.selectedSpec.Spec.ID,node.ID).then(function(){var specOptionIndex=0;angular.forEach(vm.selectedSpec.Options,function(option,index){option.ID==node.ID&&(specOptionIndex=index)}),toastr.success("Spec option: "+node.Value+" was deleted."),vm.selectedSpec.Options.splice(specOptionIndex,1)})}var vm=this;vm.specs=angular.copy(ProductSpecs),vm.selectedSpec=null,vm.createSpec=createSpec,vm.editSelectedSpec=editSelectedSpec,vm.deleteSelectedSpec=deleteSelectedSpec,vm.specSelected=specSelected,vm.createSpecOption=createSpecOption,vm.editSpecOption=editSpecOption,vm.deleteSpecOption=deleteSpecOption,vm.specTreeOptions={dropped:function(event){ocProductSpecs.UpdateSpecListOrder(event).then(function(){vm.selectedSpec=null})}},vm.specOptionsTreeOptions={dropped:function(event){ocProductSpecs.UpdateSpecOptionsListOrder(event,vm.selectedSpec.Spec.ID)}}}ProductSpecsController.$inject=["$rootScope","toastr","ocProductSpecs","ProductSpecs"],angular.module("orderCloud").controller("ProductSpecsCtrl",ProductSpecsController)}(),function(){"use strict";function ocProductsSpecsService($q,$uibModal,OrderCloudSDK,ocConfirm){function _productSpecsDetail(productid){function getSpecs(data){var options={page:1,pageSize:100,filters:{ID:_.pluck(data.Items,"SpecID").join("|")}};OrderCloudSDK.Specs.List(options).then(function(details){getSpecOptions(data,details)})}function getSpecOptions(data,details){var optionQueue=[];angular.forEach(data.Items,function(specAssignment){specAssignment.Spec=_.where(details.Items,{ID:specAssignment.SpecID})[0],specAssignment.Spec&&specAssignment.Spec.OptionCount&&optionQueue.push(function(){var d=$q.defer(),options={page:1,pageSize:100};return OrderCloudSDK.Specs.ListOptions(specAssignment.Spec.ID,options).then(function(oData){specAssignment.Options=oData.Items,_.map(specAssignment.Options,function(option){option.DefaultOption=specAssignment.DefaultOptionID==option.ID}),d.resolve()}),d.promise}())}),$q.all(optionQueue).then(function(){deferred.resolve(data)})}var deferred=$q.defer(),options={filters:{productID:productid},page:1,pageSize:100};return OrderCloudSDK.Specs.ListProductAssignments(options).then(function(data){data.Items.length?getSpecs(data):deferred.resolve(data)}),deferred.promise}function _updateSpecListOrder(event){function run(i){queue[i]().then(function(){queueIndex++,queueIndex<queue.length?run(queueIndex):deferred.resolve()})}var deferred=$q.defer(),nodeList=event.source.nodesScope.$modelValue,queue=[];angular.forEach(nodeList,function(node,index){queue.push(function(){return OrderCloudSDK.Specs.Patch(node.Spec.ID,{listOrder:index})})});var queueIndex=0;return run(queueIndex),deferred.promise}function _updateSpecOptionsListOrder(event,specID){function run(i){queue[i]().then(function(){queueIndex++,queueIndex<queue.length?run(queueIndex):deferred.resolve()})}var deferred=$q.defer(),nodeList=event.source.nodesScope.$modelValue,queue=[];angular.forEach(nodeList,function(node,index){queue.push(function(){return OrderCloudSDK.Specs.PatchOption(specID,node.ID,{listOrder:index})})});var queueIndex=0;return run(queueIndex),deferred.promise}function _createSpec(productID){return $uibModal.open({templateUrl:"productManagement/specs/templates/productSpecCreate.modal.html",size:"md",controller:"ProductSpecCreateCtrl",controllerAs:"productSpecCreate",resolve:{ProductID:function(){return productID}}}).result}function _editSpec(spec){return $uibModal.open({templateUrl:"productManagement/specs/templates/productSpecEdit.modal.html",controller:"ProductSpecEditModalCtrl",controllerAs:"productSpecEditModal",resolve:{SelectedSpec:function(){return spec}}}).result}function _deleteSpec(specID){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+specID+"</b>?",confirmText:"Delete spec",type:"delete"}).then(function(){return OrderCloudSDK.Specs.Delete(specID)})}function _createSpecOption(selectedSpec){return $uibModal.open({templateUrl:"productManagement/specs/templates/productSpecOptionCreate.modal.html",size:"md",controller:"ProductSpecOptionCreateCtrl",controllerAs:"productSpecOptionCreate",resolve:{ProductID:function(){return selectedSpec.ProductID},SpecID:function(){return selectedSpec.Spec.ID}}}).result}function _editSpecOption(selectedSpec,node){return $uibModal.open({templateUrl:"productManagement/specs/templates/productSpecOptionEdit.modal.html",size:"md",controller:"ProductSpecOptionEditCtrl",controllerAs:"productSpecOptionEdit",resolve:{ProductID:function(){return selectedSpec.ProductID},SpecID:function(){return selectedSpec.Spec.ID},SpecOption:function(){return node}}}).result}function _deleteSpecOption(specID,specOptionID){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+specOptionID+"</b>?",confirmText:"Delete spec option",type:"delete"}).then(function(){return OrderCloudSDK.Specs.DeleteOption(specID,specOptionID)})}var service={ProductSpecsDetail:_productSpecsDetail,UpdateSpecListOrder:_updateSpecListOrder,UpdateSpecOptionsListOrder:_updateSpecOptionsListOrder,CreateSpec:_createSpec,EditSpec:_editSpec,DeleteSpec:_deleteSpec,CreateSpecOption:_createSpecOption,EditSpecOption:_editSpecOption,DeleteSpecOption:_deleteSpecOption};return service}ocProductsSpecsService.$inject=["$q","$uibModal","OrderCloudSDK","ocConfirm"],angular.module("orderCloud").factory("ocProductSpecs",ocProductsSpecsService)}(),function(){"use strict";function ProductSpecsConfig($stateProvider){$stateProvider.state("product.specs",{url:"/specs",templateUrl:"productManagement/specs/templates/productSpecs.html",controller:"ProductSpecsCtrl",controllerAs:"productSpecs",data:{pageTitle:"Product Specs"},resolve:{ProductSpecs:["$stateParams","ocProductSpecs",function($stateParams,ocProductSpecs){return ocProductSpecs.ProductSpecsDetail($stateParams.productid)}]}})}ProductSpecsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(ProductSpecsConfig)}(),function(){"use strict";function ProductSpecOptionCreateController($uibModalInstance,OrderCloudSDK,ProductID,SpecID){var vm=this;vm.markupTypes=[{Label:"None",Value:"NoMarkup"},{Label:"Fixed amount per unit",Value:"AmountPerQuantity"},{Label:"Fixed amount per line item",Value:"AmountTotal"},{Label:"Percentage of line total",Value:"Percentage"}],vm.specOption={PriceMarkupType:"NoMarkup"},vm.submit=function(){vm.loading=OrderCloudSDK.Specs.CreateOption(SpecID,vm.specOption).then(function(data){return vm.specOption.DefaultOption?OrderCloudSDK.Specs.SaveProductAssignment({productID:ProductID,specID:SpecID,defaultOptionID:data.ID}).then(function(){data.DefaultOption=!0,$uibModalInstance.close(data)}):(data.DefaultOption=!1,void $uibModalInstance.close(data))})},vm.cancel=function(){$uibModalInstance.dismiss()}}function ProductSpecOptionEditController($uibModalInstance,OrderCloudSDK,ProductID,SpecID,SpecOption){var vm=this;vm.specOption=angular.copy(SpecOption),vm.specOptionValue=angular.copy(SpecOption.Value),vm.markupTypes=[{Label:"None",Value:"NoMarkup"},{Label:"Fixed amount per unit",Value:"AmountPerQuantity"},{Label:"Fixed amount per line item",Value:"AmountTotal"},{Label:"Percentage of line total",Value:"Percentage"}],vm.submit=function(){var partial=_.pick(vm.specOption,["ID","Value","IsOpenText","PriceMarkupType","PriceMarkup"]);vm.loading=OrderCloudSDK.Specs.PatchOption(SpecID,SpecOption.ID,partial).then(function(data){return vm.specOption.DefaultOption&&vm.specOption.DefaultOption!=SpecOption.DefaultOption?OrderCloudSDK.Specs.SaveProductAssignment({productID:ProductID,specID:SpecID,defaultOptionID:data.ID}).then(function(){data.DefaultOption=!0,data.OriginalID=SpecOption.ID,$uibModalInstance.close(data)}):(data.DefaultOption=vm.specOption.DefaultOption,data.OriginalID=SpecOption.ID,$uibModalInstance.close(data),void 0)})},vm.cancel=function(){$uibModalInstance.dismiss()}}ProductSpecOptionCreateController.$inject=["$uibModalInstance","OrderCloudSDK","ProductID","SpecID"],ProductSpecOptionEditController.$inject=["$uibModalInstance","OrderCloudSDK","ProductID","SpecID","SpecOption"],angular.module("orderCloud").controller("ProductSpecOptionCreateCtrl",ProductSpecOptionCreateController).controller("ProductSpecOptionEditCtrl",ProductSpecOptionEditController)}(),function(){"use strict";function ProductSpecEditModalController($uibModalInstance,OrderCloudSDK,SelectedSpec){var vm=this;vm.spec=angular.copy(SelectedSpec),vm.specName=SelectedSpec.Name,vm.submit=function(){""===vm.spec.DefaultValue&&(vm.spec.DefaultValue=null),vm.loading=OrderCloudSDK.Specs.Update(SelectedSpec.ID,vm.spec).then(function(updatedSpec){$uibModalInstance.close(updatedSpec)})},vm.cancel=function(){$uibModalInstance.dismiss()}}ProductSpecEditModalController.$inject=["$uibModalInstance","OrderCloudSDK","SelectedSpec"],angular.module("orderCloud").controller("ProductSpecEditModalCtrl",ProductSpecEditModalController)}(),function(){"use strict";function ProductSpecCreateController($uibModalInstance,toastr,OrderCloudSDK,ProductID){var vm=this;vm.submit=function(){vm.loading=OrderCloudSDK.Specs.Create(vm.spec).then(function(data){var assignment={productID:ProductID,specID:data.ID};OrderCloudSDK.Specs.SaveProductAssignment(assignment).then(function(){assignment.Spec=data,toastr.success("Spec: "+data.Name+" created"),$uibModalInstance.close(assignment)})})},vm.cancel=function(){$uibModalInstance.dismiss()}}ProductSpecCreateController.$inject=["$uibModalInstance","toastr","OrderCloudSDK","ProductID"],angular.module("orderCloud").controller("ProductSpecCreateCtrl",ProductSpecCreateController)}(),function(){"use strict";function ProductShippingController(toastr,OrderCloudSDK,ocRoles){function updateProductShipping(product){var partial=_.pick(product,["ShipWeight","ShipHeight","ShipWidth","ShipLength","ShipFromAddressID"]);vm.productUpdateLoading=OrderCloudSDK.Products.Patch(product.ID,partial).then(function(){vm.ProductShippingForm.$setPristine(),toastr.success(product.Name+" shipping was updated")})}function listAllAdminAddresses(search){return ocRoles.UserIsAuthorized(["AddressAdmin"])?OrderCloudSDK.AdminAddresses.List({search:search}).then(function(data){vm.sellerAddresses=data}):void 0}var vm=this;vm.updateProductShipping=updateProductShipping,vm.listAllAdminAddresses=listAllAdminAddresses}ProductShippingController.$inject=["toastr","OrderCloudSDK","ocRoles"],angular.module("orderCloud").controller("ProductShippingCtrl",ProductShippingController)}(),function(){"use strict";function ProductShippingConfig($stateProvider){$stateProvider.state("product.shipping",{url:"/shipping",templateUrl:"productManagement/shipping/templates/productShipping.html",controller:"ProductShippingCtrl",controllerAs:"productShipping",data:{pageTitle:"Product Shipping"}})}ProductShippingConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(ProductShippingConfig)}(),function(){"use strict";function OrderCloudProducts($q,$uibModal,ocConfirm,OrderCloudSDK){function _create(){return $uibModal.open({templateUrl:"productManagement/products/templates/productCreate.modal.html",controller:"ProductCreateModalCtrl",controllerAs:"productCreateModal"}).result}function _createDefaultPrice(product){function setDefaultPriceSchedule(defaultPriceSchedule){product.DefaultPriceScheduleID=defaultPriceSchedule.ID,OrderCloudSDK.Products.Patch(product.ID,{defaultPriceScheduleID:defaultPriceSchedule.ID}).then(function(product){df.resolve(product)})}var df=$q.defer(),priceSchedule={name:product.Name+" Default Price",minQuantity:1,priceBreaks:[{quantity:1,price:product.DefaultPrice}]};return OrderCloudSDK.PriceSchedules.Create(priceSchedule).then(function(defaultPriceSchedule){setDefaultPriceSchedule(defaultPriceSchedule)}),df.promise}function _delete(product){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+product.Name+"</b>?",confirmText:"Delete product",type:"delete"}).then(function(){return OrderCloudSDK.Products.Delete(product.ID)})}var service={Create:_create,CreateDefaultPrice:_createDefaultPrice,Delete:_delete};return service}OrderCloudProducts.$inject=["$q","$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocProducts",OrderCloudProducts)}(),function(){"use strict";function ProductsController($state,toastr,OrderCloudSDK,ocParameters,ocProducts,ProductList,Parameters){function filter(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))}function search(){vm.filter(!0)}function clearSearch(){vm.parameters.search=null,vm.filter(!0)}function updateSort(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)}function pageChanged(){$state.go(".",{page:vm.list.Meta.Page})}function loadMore(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.Products.List(parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}var vm=this;vm.list=ProductList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.clearSearch=clearSearch,vm.filter=filter,vm.loadMore=loadMore,vm.pageChanged=pageChanged,vm.search=search,vm.updateSort=updateSort,vm.createProduct=function(){ocProducts.Create().then(function(newProduct){toastr.success(newProduct.Name+" was created."),$state.go("product",{productid:newProduct.ID})})},vm.deleteProduct=function(scope){ocProducts.Delete(scope.product).then(function(){vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,toastr.success(scope.product.Name+" was deleted.")})}}ProductsController.$inject=["$state","toastr","OrderCloudSDK","ocParameters","ocProducts","ProductList","Parameters"],angular.module("orderCloud").controller("ProductsCtrl",ProductsController)}(),function(){"use strict";function ProductsConfig($stateProvider){$stateProvider.state("products",{parent:"base",templateUrl:"productManagement/products/templates/products.html",controller:"ProductsCtrl",controllerAs:"products",url:"/products?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"Products"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],ProductList:["OrderCloudSDK","Parameters",function(OrderCloudSDK,Parameters){return OrderCloudSDK.Products.List(Parameters)}]}})}ProductsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(ProductsConfig)}(),function(){"use strict";function ProductCreateModalController($q,$exceptionHandler,$uibModalInstance,toastr,ocProductPricing,ocProducts,OrderCloudSDK){function _checkPrevNex(){vm.showNext=vm.currentStep<vm.steps.length-1,vm.showPrev=vm.currentStep>0}function listAllAdminAddresses(search){return OrderCloudSDK.AdminAddresses.List({search:search}).then(function(data){vm.sellerAddresses=data})}function submit(){function _createProduct(){vm.product.Inventory&&!vm.product.Inventory.Enabled&&delete vm.product.Inventory,OrderCloudSDK.Products.Create(vm.product).then(function(data){$uibModalInstance.close(data)})}var df=$q.defer();if(vm.loading=df.promise,vm.enableDefaultPricing){var priceSchedule=angular.copy(vm.product.DefaultPriceSchedule);priceSchedule.Name=vm.product.Name+" Default Price",OrderCloudSDK.PriceSchedules.Create(priceSchedule).then(function(data){vm.product.DefaultPriceScheduleID=data.ID,_createProduct()})["catch"](function(ex){$exceptionHandler(ex)})}else _createProduct()}function cancel(){return $uibModalInstance.dismiss()}var vm=this;vm.product={DefaultPriceSchedule:{RestrictedQuantity:!1,PriceBreaks:[],MinQuantity:1,OrderType:"Standard"},Active:!0,QuantityMultiplier:1},vm.steps=[{form:"info",name:"Basic Information"},{form:"pricing",name:"Default Pricing"},{form:"shipping",name:"Shipping Information"},{form:"inventory",name:"Product Inventory"},{form:"image",name:"Product Image"}],vm.currentStep=0,vm.showNext=!0,vm.initialized=!0,vm.nextStep=function(){vm.currentStep++,_checkPrevNex()},vm.prevStep=function(){vm.currentStep--,_checkPrevNex()},vm.submit=submit,vm.cancel=cancel,vm.listAllAdminAddresses=listAllAdminAddresses}ProductCreateModalController.$inject=["$q","$exceptionHandler","$uibModalInstance","toastr","ocProductPricing","ocProducts","OrderCloudSDK"],angular.module("orderCloud").controller("ProductCreateModalCtrl",ProductCreateModalController)}(),function(){"use strict";function ProductController($rootScope,$state,toastr,OrderCloudSDK,ocProducts,ocNavItems,ocProductPricing,SelectedProduct){function patchImage(imageXP){return OrderCloudSDK.Products.Patch(vm.model.ID,{xp:imageXP})}function updateProduct(){var currentPrice=angular.copy(vm.model.DefaultPriceSchedule),partial=_.pick(vm.model,["ID","Name","Description","QuantityMultiplier","Inventory","Active"]);vm.modelUpdateLoading=OrderCloudSDK.Products.Patch(SelectedProduct.ID,partial).then(function(data){vm.model=angular.copy(data),currentPrice&&data.Name!==SelectedProduct.Name?OrderCloudSDK.PriceSchedules.Patch(currentPrice.ID,{Name:data.Name+" Default Price"}).then(function(updatedPrice){vm.model.DefaultPriceSchedule=updatedPrice}):vm.model.DefaultPriceSchedule=currentPrice,vm.productName=angular.copy(data.Name),vm.inventoryEnabled=angular.copy(data.InventoryEnabled),SelectedProduct=data,vm.InfoForm.$setPristine(),toastr.success(data.Name+" was updated")})}function deleteProduct(){ocProducts.Delete(SelectedProduct).then(function(){toastr.success(SelectedProduct.Name+" was deleted."),$state.go("products",{},{reload:!0})})}function createDefaultPrice(){ocProductPricing.CreateProductPrice(vm.model,null,null,null,!0).then(function(data){toastr.success("Default price was successfully added to "+vm.model.Name),$state.go("product.pricing.priceSchedule",{pricescheduleid:data.SelectedPrice.ID},{reload:!0})})}var vm=this;vm.model=angular.copy(SelectedProduct),vm.productName=angular.copy(SelectedProduct.Name),vm.inventoryEnabled=angular.copy(SelectedProduct.Inventory?SelectedProduct.Inventory.Enabled:!1),vm.updateProduct=updateProduct,vm.deleteProduct=deleteProduct,vm.patchImage=patchImage,vm.createDefaultPrice=createDefaultPrice,vm.navigationItems=ocNavItems.Product(),$rootScope.$on("ProductManagement:SpecCountChanged",function(event,action){vm.model.SpecCount+="increment"==action?1:-1}),$rootScope.$on("OC:DefaultPriceUpdated",function(event,newID){vm.model.DefaultPriceScheduleID=newID})}ProductController.$inject=["$rootScope","$state","toastr","OrderCloudSDK","ocProducts","ocNavItems","ocProductPricing","SelectedProduct"],angular.module("orderCloud").controller("ProductCtrl",ProductController)}(),function(){"use strict";function ProductConfig($stateProvider){$stateProvider.state("product",{parent:"base",url:"/products/:productid",templateUrl:"productManagement/product/templates/product.html",controller:"ProductCtrl",controllerAs:"product",data:{pageTitle:"Product Info"},resolve:{SelectedProduct:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){return OrderCloudSDK.Products.Get($stateParams.productid).then(function(product){return product.DefaultPriceScheduleID?OrderCloudSDK.PriceSchedules.Get(product.DefaultPriceScheduleID).then(function(priceSchedule){return product.DefaultPriceSchedule=priceSchedule,product}):product})}]}})}ProductConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(ProductConfig)}(),function(){"use strict";function UpdateProductPriceModalController($exceptionHandler,$uibModalInstance,OrderCloudSDK,ocProductPricing,SelectPriceData){var vm=this;vm.buyerName=SelectPriceData.Buyer.Name,vm.userGroupName=SelectPriceData.UserGroup?SelectPriceData.UserGroup.Name:null,vm.product=SelectPriceData.Product,vm.selectedPriceSchedule=angular.copy(SelectPriceData.Product.SelectedPrice),vm.availablePriceSchedules=SelectPriceData.PriceScheduleList.Items,vm.removePrice=!1,vm.showRemovePriceOption=SelectPriceData.Product.SelectedPrice&&!SelectPriceData.Product.DefaultPriceScheduleID,vm.cancel=function(){$uibModalInstance.dismiss()},vm.createNewPrice=function(){$uibModalInstance.dismiss("CREATE")},vm.removeCurrentPrice=function(){vm.removePrice=!0,vm.selectedPriceSchedule=null},vm.selectNewPrice=function(scope){vm.removePrice=!1,vm.selectedPriceSchedule=scope.price},vm.submit=function(){vm.removePrice?vm.loading=ocProductPricing.RemovePrice(SelectPriceData,vm.availablePriceSchedules).then(function(data){$uibModalInstance.close(data)})["catch"](function(ex){$exceptionHandler(ex)}):vm.loading=ocProductPricing.SelectPrice(SelectPriceData,vm.selectedPriceSchedule,vm.availablePriceSchedules).then(function(data){$uibModalInstance.close(data)})["catch"](function(ex){$exceptionHandler(ex)})}}UpdateProductPriceModalController.$inject=["$exceptionHandler","$uibModalInstance","OrderCloudSDK","ocProductPricing","SelectPriceData"],angular.module("orderCloud").controller("UpdateProductPriceModalCtrl",UpdateProductPriceModalController)}(),function(){"use strict";function ocProductPricingService($q,$uibModal,OrderCloudSDK,ocConfirm){function _assignmentList(productid){var deferred=$q.defer(),options={productID:productid,page:1,pageSize:100};return OrderCloudSDK.Products.ListAssignments(options).then(function(data){var page,queue=[],assignments=data;if(data.Meta.TotalPages>data.Meta.Page){for(page=data.Meta.Page;page<data.Meta.TotalPages;)page+=1,options.page=page,queue.push(OrderCloudSDK.Products.ListAssignments(options));return $q.all(queue).then(function(results){angular.forEach(results,function(result){assignments.Items=[].concat(assignments.Items,result.Items),assignments.Meta=result.Meta}),assignments.buyerlist=_.uniq(_.pluck(assignments.Items,"BuyerID")),deferred.resolve(assignments)})}assignments.buyerlist=_.uniq(_.pluck(assignments.Items,"BuyerID")),deferred.resolve(assignments)}),deferred.promise}function _assignmentData(assignments){function groupBy(){var results={},priceSchedules=_.groupBy(assignments.Items,"PriceScheduleID");angular.forEach(priceSchedules,function(assignments,key){results[key]={PriceSchedule:assignments[0].PriceSchedule,Buyers:[],UserGroups:[]},angular.forEach(assignments,function(details){details.BuyerID&&!details.UserGroupID?results[key].Buyers.push(details.BuyerID):details.BuyerID&&details.UserGroupID&&results[key].UserGroups.push({BuyerID:details.BuyerID,UserGroupID:details.UserGroupID})})}),deferred.resolve(results)}var deferred=$q.defer(),psQueue=[],schedules=_.uniq(_.pluck(assignments.Items,"PriceScheduleID"));return angular.forEach(schedules,function(id){psQueue.push(OrderCloudSDK.PriceSchedules.Get(id))}),$q.all(psQueue).then(function(results){angular.forEach(results,function(ps){angular.forEach(_.where(assignments.Items,{PriceScheduleID:ps.ID}),function(p){p.PriceSchedule=ps,_formatQuantities(p.PriceSchedule.PriceBreaks)})}),groupBy()}),deferred.promise}function _assignmentDataDetail(assignmentData,priceScheduleID){function getUserGroups(){$q.all(userGroupQueue).then(function(results){deferred.resolve(result)})}function chunks(list){var i,j,listChunks=[],chunkSize=10;for(i=0,j=list.length;j>i;i+=chunkSize)listChunks.push(list.slice(i,i+chunkSize));return listChunks}var deferred=$q.defer(),data=assignmentData[priceScheduleID],result={PriceSchedule:data.PriceSchedule,Buyers:[]},buyerChunks=chunks(_.uniq(data.Buyers.concat(_.uniq(_.pluck(data.UserGroups,"BuyerID"))))),userGroupGroups=_.groupBy(data.UserGroups,"BuyerID"),userGroupChunks=[];angular.forEach(userGroupGroups,function(group){userGroupChunks=userGroupChunks.concat(chunks(group))});var buyerQueue=[],userGroupQueue=[];return angular.forEach(buyerChunks,function(chunk){
var options={page:1,pageSize:100,filters:{ID:chunk.join("|")}};buyerQueue.push(OrderCloudSDK.Buyers.List(options))}),angular.forEach(userGroupChunks,function(chunk){userGroupQueue.push(function(){var d=$q.defer(),buyerID=chunk[0].BuyerID,options={page:1,pageSize:100,filters:{ID:_.pluck(chunk,"UserGroupID").join("|")}};return OrderCloudSDK.UserGroups.List(buyerID,options).then(function(data){angular.forEach(_.where(result.Buyers,{ID:buyerID}),function(buyer){buyer.UserGroups||(buyer.UserGroups=[]),buyer.UserGroups=buyer.UserGroups.concat(data.Items)}),d.resolve()}),d.promise}())}),$q.all(buyerQueue).then(function(results){angular.forEach(results,function(r){_.map(r.Items,function(buyer){buyer.Assigned=data.Buyers.indexOf(buyer.ID)>-1}),result.Buyers=result.Buyers.concat(r.Items)}),getUserGroups()}),deferred.promise}function _createPrice(product,priceSchedule,selectedBuyer,selectedUserGroups,defaultPriceSchedule){var deferred=$q.defer();return priceSchedule=_setMinMax(priceSchedule),OrderCloudSDK.PriceSchedules.Create(priceSchedule).then(function(ps){if(defaultPriceSchedule)OrderCloudSDK.Products.Patch(product.ID,{DefaultPriceScheduleID:ps.ID}).then(function(){deferred.resolve({NewPriceSchedule:ps})});else{var assignment={ProductID:product.ID,PriceScheduleID:ps.ID,BuyerID:selectedBuyer.ID},catalogAssignment={catalogID:selectedBuyer.DefaultCatalogID,productID:product.ID},result={Assignment:assignment,NewPriceSchedule:ps};OrderCloudSDK.Catalogs.SaveProductAssignment(catalogAssignment).then(function(){if(!selectedBuyer||null!=selectedUserGroups&&0!==selectedUserGroups.length){if(selectedBuyer&&selectedUserGroups.length>0){var assignmentQueue=[];angular.forEach(selectedUserGroups,function(usergroup){var userGroupAssignment=angular.copy(assignment);userGroupAssignment.UserGroupID=usergroup.ID,assignmentQueue.push(OrderCloudSDK.Products.SaveAssignment(userGroupAssignment))}),$q.all(assignmentQueue).then(function(data){deferred.resolve(result)})["catch"](function(error){deferred.reject(error)})}}else OrderCloudSDK.Products.SaveAssignment(assignment).then(function(data){deferred.resolve(result)})["catch"](function(error){deferred.reject(error)})})}})["catch"](function(ex){deferred.reject(ex)}),deferred.promise}function _deletePrice(priceSchedule){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+priceSchedule.Name+"</b>?",confirmText:"Delete price",type:"delete"}).then(function(){return OrderCloudSDK.PriceSchedules.Delete(priceSchedule.ID)})}function _setMinMax(priceSchedule){var quantities=_.pluck(priceSchedule.PriceBreaks,"Quantity");return priceSchedule.MinQuantity=_.min(quantities),priceSchedule.RestrictedQuantity&&(priceSchedule.MaxQuantity=_.max(quantities)),priceSchedule}function _formatQuantities(priceBreaks){priceBreaks.sort(function(a,b){return a.Quantity-b.Quantity});for(var maxQuantity=Math.max.apply(Math,priceBreaks.map(function(object){return object.Quantity})),i=0;i<priceBreaks.length;i++)if(priceBreaks[i].Quantity==maxQuantity)priceBreaks[i].displayQuantity=priceBreaks[i].Quantity+"+";else{var itemQuantityRange=_.range(priceBreaks[i].Quantity,priceBreaks[i+1].Quantity);1===itemQuantityRange.length?priceBreaks[i].displayQuantity=itemQuantityRange[0]:priceBreaks[priceBreaks.length-1].Quantity-itemQuantityRange[0]<=1?priceBreaks[i].displayQuantity=itemQuantityRange[0]:priceBreaks[i].displayQuantity=itemQuantityRange[0]+" - "+itemQuantityRange[itemQuantityRange.length-1]}}function _getAssignments(productID,level,cacheID,buyerID){if(cachedProductAssignmentResults.cacheID===cacheID&&cachedProductAssignmentResults.level==level&&!productID)return cachedProductAssignmentResults.results;cachedProductAssignmentResults.cacheID=cacheID,cachedProductAssignmentResults.level=level;var options={level:level,buyerID:buyerID,productID:productID,pageSize:100};return OrderCloudSDK.Products.ListAssignments(options).then(function(data1){for(var df=$q.defer(),queue=[],totalPages=angular.copy(data1.Meta.TotalPages),currentPage=angular.copy(data1.Meta.Page);totalPages>currentPage;)currentPage++,options.page=currentPage,queue.push(OrderCloudSDK.Products.ListAssignments(options));return $q.all(queue).then(function(results){angular.forEach(results,function(r){data1.Items=data1.Items.concat(r.Items)}),productID||(cachedProductAssignmentResults.results=data1.Items),df.resolve(data1.Items)})["catch"](function(ex){df.reject(ex)}),df.promise})}function _getProductListPriceSchedules(productList,BuyerProductAssignments,UserGroupProductAssignments){function _retrievePriceSchedules(priceScheduleIDs){function chunks(list){var i,j,listChunks=[],chunkSize=80;for(i=0,j=list.length;j>i;i+=chunkSize)listChunks.push(list.slice(i,i+chunkSize));return listChunks}var priceChunks=chunks(priceScheduleIDs),priceQueue=[],fullPriceList=[];angular.forEach(priceChunks,function(chunk){priceQueue.push(OrderCloudSDK.PriceSchedules.List({pageSize:100,filters:{ID:chunk.join("|")}}))}),$q.all(priceQueue).then(function(results){angular.forEach(results,function(result){fullPriceList=fullPriceList.concat(result.Items)}),df.resolve(fullPriceList)})}var df=$q.defer();UserGroupProductAssignments||(UserGroupProductAssignments=[]);var priceScheduleIDs=_.uniq(_.pluck(BuyerProductAssignments.concat(UserGroupProductAssignments),"PriceScheduleID")),defaultPriceScheduleIDs=_.pluck(_.filter(productList.Items,function(product){return null!==product.DefaultPriceScheduleID}),"DefaultPriceScheduleID"),allIDs=_.unique(defaultPriceScheduleIDs.concat(priceScheduleIDs));return allIDs.length?_retrievePriceSchedules(allIDs):df.resolve([]),df.promise}function _mapAssignments(buyerID,userGroupID,productList,priceList,BuyerProductAssignments,UserGroupProductAssignments){return UserGroupProductAssignments||(UserGroupProductAssignments=[]),_.each(productList.Items,function(product){var assignedBuyerPrice=_.findWhere(BuyerProductAssignments,{ProductID:product.ID,BuyerID:buyerID,UserGroupID:null}),assignedUserGroupPrice=_.findWhere(UserGroupProductAssignments,{ProductID:product.ID,UserGroupID:userGroupID});assignedUserGroupPrice?product.SelectedPrice=_.findWhere(priceList,{ID:assignedUserGroupPrice.PriceScheduleID}):assignedBuyerPrice?(product.SelectedPrice=_.findWhere(priceList,{ID:assignedBuyerPrice.PriceScheduleID}),product.SelectedPrice.Inherited=null!==userGroupID):product.DefaultPriceScheduleID?product.SelectedPrice=_.findWhere(priceList,{ID:product.DefaultPriceScheduleID}):product.SelectedPrice=null}),productList}function _exists(SelectPriceData){var otherAssignmentsExist=_.filter(SelectPriceData.CurrentAssignments,function(assignment){var partiesMatch=SelectPriceData.Buyer.ID===assignment.BuyerID&&(SelectPriceData.UserGroup?SelectPriceData.UserGroup.ID===assignment.UserGroupID:!assignment.UserGroupID);return SelectPriceData.Product.SelectedPrice&&assignment.ProductID===SelectPriceData.Product.ID&&assignment.PriceScheduleID===SelectPriceData.Product.SelectedPrice.ID&&!partiesMatch}).length>0,index=_.findIndex(SelectPriceData.CurrentAssignments,function(assignment){return assignment.ProductID===SelectPriceData.Product.ID&&assignment.BuyerID===SelectPriceData.Buyer.ID&&(SelectPriceData.UserGroup&&SelectPriceData.UserGroup.ID===assignment.UserGroupID||!assignment.UserGroupID)});return{DoesExist:otherAssignmentsExist,Index:index}}function _editProductPricePrice(priceSchedule,isDefault){return $uibModal.open({templateUrl:"productManagement/pricing/templates/editProductPrice.modal.html",controller:"EditProductPriceModalCtrl",controllerAs:"editProductPriceModal",resolve:{SelectedPriceSchedule:function(){return priceSchedule},IsDefault:function(){return isDefault}}}).result}function _updateProductPrice(product,SelectedBuyer,CurrentAssignments,SelectedUserGroup){var priceScheduleIDs=_.unique((product.DefaultPriceScheduleID?[product.DefaultPriceScheduleID]:[]).concat(_.pluck(_.filter(CurrentAssignments,{ProductID:product.ID}),"PriceScheduleID")));return!priceScheduleIDs.length||1===priceScheduleIDs.length&&(priceScheduleIDs[0]===product.DefaultPriceScheduleID||product.SelectedPrice&&product.SelectedPrice.Inherited)?_createProductPrice(product,SelectedBuyer,CurrentAssignments,[SelectedUserGroup]):$uibModal.open({templateUrl:"productManagement/pricing/templates/updateProductPrice.modal.html",controller:"UpdateProductPriceModalCtrl",controllerAs:"updateProductPriceModal",resolve:{SelectPriceData:function(){var df=$q.defer(),result={Buyer:SelectedBuyer,UserGroup:SelectedUserGroup,Product:product,CurrentAssignments:CurrentAssignments};return OrderCloudSDK.PriceSchedules.List({filters:{ID:priceScheduleIDs.join("|")}}).then(function(data){SelectedUserGroup&&angular.forEach(data.Items,function(priceSchedule){var buyerAssignment=_.findWhere(CurrentAssignments,{ProductID:product.ID,PriceScheduleID:priceSchedule.ID,BuyerID:SelectedBuyer.ID,UserGroupID:null});buyerAssignment&&(priceSchedule.Inherited=!0)}),result.PriceScheduleList=data,df.resolve(result)}),df.promise}}}).result}function _createProductPrice(product,SelectedBuyer,CurrentAssignments,SelectedUserGroup,DefaultPriceSchedule){return $uibModal.open({templateUrl:"productManagement/pricing/templates/createProductPrice.modal.html",controller:"CreateProductPriceModalCtrl",controllerAs:"createProductPriceModal",resolve:{SelectPriceData:function(){return{Buyer:SelectedBuyer,UserGroup:SelectedUserGroup,Product:product,CurrentAssignments:CurrentAssignments,DefaultPriceSchedule:DefaultPriceSchedule}}}}).result}function _selectPrice(SelectPriceData,selectedPriceSchedule,availablePriceSchedules){function _complete(wasDeleted){wasDeleted?SelectPriceData.CurrentAssignments.splice(check.Index,1):check.Index>-1?SelectPriceData.CurrentAssignments[check.Index]=assignment:SelectPriceData.CurrentAssignments.push(assignment),df.resolve({SelectedPrice:selectedPriceSchedule,UpdatedAssignments:SelectPriceData.CurrentAssignments})}function select(){if(SelectPriceData.Product.DefaultPriceScheduleID===selectedPriceSchedule.ID){var defaultPriceSchedule=_.findWhere(availablePriceSchedules,{ID:SelectPriceData.Product.DefaultPriceScheduleID});check.DoesExist&&!SelectPriceData.Product.SelectedPrice.Inherited?OrderCloudSDK.Products.DeleteAssignment(SelectPriceData.Product.ID,SelectPriceData.Buyer.ID,{UserGroupID:SelectPriceData.UserGroup?SelectPriceData.UserGroup.ID:null}).then(function(){SelectPriceData.CurrentAssignments.splice(check.Index,1),df.resolve({SelectedPrice:defaultPriceSchedule,UpdatedAssignments:SelectPriceData.CurrentAssignments})}):check.DoesExist&&SelectPriceData.Product.SelectedPrice.Inherited?OrderCloudSDK.Products.SaveAssignment(assignment).then(function(data){_complete(!1)}):OrderCloudSDK.PriceSchedules.Delete(SelectPriceData.Product.SelectedPrice.ID).then(function(){SelectPriceData.CurrentAssignments.splice(check.Index,1),df.resolve({SelectedPrice:defaultPriceSchedule,UpdatedAssignments:SelectPriceData.CurrentAssignments})})}else if(selectedPriceSchedule.Inherited)if(!check.DoesExist&&SelectPriceData.Product.SelectedPrice&&SelectPriceData.Product.SelectedPrice.ID!==SelectPriceData.Product.DefaultPriceScheduleID)OrderCloudSDK.PriceSchedules.Delete(SelectPriceData.Product.SelectedPrice.ID).then(function(){_complete(!0)});else{var options={userGroupID:SelectPriceData.UserGroup.ID};OrderCloudSDK.Products.DeleteAssignment(SelectPriceData.Product.ID,SelectPriceData.Buyer.ID,options).then(function(){_complete(!1)})}else OrderCloudSDK.Products.SaveAssignment(assignment).then(function(){!check.DoesExist&&SelectPriceData.Product.SelectedPrice&&SelectPriceData.Product.SelectedPrice.ID!==SelectPriceData.Product.DefaultPriceScheduleID?OrderCloudSDK.PriceSchedules.Delete(SelectPriceData.Product.SelectedPrice.ID).then(function(){_complete(!0)}):_complete(!1)})["catch"](function(ex){"Product.CannotAssignNotInBuyerCatalog"===ex.response.body.Errors[0].ErrorCode?OrderCloudSDK.Catalogs.SaveProductAssignment({catalogID:SelectPriceData.Buyer.DefaultCatalogID,productID:SelectPriceData.Product.ID}).then(function(){select()}):df.reject(ex)})}var df=$q.defer(),check=_exists(SelectPriceData),assignment={BuyerID:SelectPriceData.Buyer.ID,ProductID:SelectPriceData.Product.ID,PriceScheduleID:selectedPriceSchedule.ID,UserGroupID:SelectPriceData.UserGroup?SelectPriceData.UserGroup.ID:null};return select(),df.promise}function _removePrice(SelectPriceData,availablePriceSchedules){function _complete(){SelectPriceData.CurrentAssignments.splice(check.Index,1),df.resolve({SelectedPrice:_.findWhere(availablePriceSchedules,{Inherited:!0}),UpdatedAssignments:SelectPriceData.CurrentAssignments})}var df=$q.defer(),check=_exists(SelectPriceData);return check.DoesExist?OrderCloudSDK.Products.DeleteAssignment(SelectPriceData.Product.ID,SelectPriceData.Buyer.ID,{userGroupID:SelectPriceData.UserGroup?SelectPriceData.UserGroup.ID:null}).then(function(){_complete()})["catch"](function(ex){df.reject(ex)}):OrderCloudSDK.PriceSchedules.Delete(SelectPriceData.Product.SelectedPrice.ID).then(function(){_complete()})["catch"](function(ex){df.reject(ex)}),df.promise}var service={AssignmentList:_assignmentList,AssignmentData:_assignmentData,AssignmentDataDetail:_assignmentDataDetail,CreatePrice:_createPrice,DeletePrice:_deletePrice,Assignments:{Get:_getAssignments,Map:_mapAssignments,Exists:_exists},GetProductListPriceSchedules:_getProductListPriceSchedules,PriceBreaks:{FormatQuantities:_formatQuantities},EditProductPrice:_editProductPricePrice,UpdateProductPrice:_updateProductPrice,CreateProductPrice:_createProductPrice,SelectPrice:_selectPrice,RemovePrice:_removePrice},cachedProductAssignmentResults={};return service}ocProductPricingService.$inject=["$q","$uibModal","OrderCloudSDK","ocConfirm"],angular.module("orderCloud").factory("ocProductPricing",ocProductPricingService)}(),function(){"use strict";function OrderCloudDefaultPriceFilter(){return function(priceObject,defaultPriceScheduleID,showDefault){var result={};return angular.forEach(priceObject,function(val,key){val.PriceSchedule.ID===defaultPriceScheduleID&&showDefault&&(result[key]=val),val.PriceSchedule.ID===defaultPriceScheduleID||showDefault||(result[key]=val)}),result}}angular.module("orderCloud").filter("ocDefaultPrice",OrderCloudDefaultPriceFilter)}(),function(){"use strict";function ProductPricingController($q,$rootScope,$stateParams,$uibModal,toastr,AssignmentList,AssignmentData,ocProductPricing,ocConfirm,SelectedProduct){var vm=this;vm.list=AssignmentList,vm.listAssignments=AssignmentData;var isDefault;vm.noPricesSet=!_.keys(vm.listAssignments).length,vm.noOverridesSet=1===_.keys(vm.listAssignments).length&&SelectedProduct.DefaultPriceScheduleID,vm.selectPrice=function(scope){vm.loadingPrice=ocProductPricing.AssignmentDataDetail(vm.listAssignments,scope.assignment.PriceSchedule.ID).then(function(data){vm.selectedPrice=scope.assignment,vm.selectedPrice.PriceSchedule=data.PriceSchedule,vm.selectedPrice.Availability=data.Buyers,isDefault=SelectedProduct.DefaultPriceScheduleID===data.PriceSchedule.ID})},SelectedProduct.DefaultPriceScheduleID&&!$stateParams.pricescheduleid?vm.selectPrice({assignment:vm.listAssignments[SelectedProduct.DefaultPriceScheduleID]}):$stateParams.pricescheduleid&&vm.listAssignments[$stateParams.pricescheduleid]?vm.selectPrice({assignment:vm.listAssignments[$stateParams.pricescheduleid]}):_.keys(vm.listAssignments).length&&vm.selectPrice({assignment:vm.listAssignments[_.keys(vm.listAssignments)[0]]}),vm.editPrice=function(){ocProductPricing.EditProductPrice(vm.selectedPrice.PriceSchedule,isDefault).then(function(updatedPriceSchedule){isDefault&&updatedPriceSchedule.ID!==vm.selectedPrice.PriceSchedule.ID&&$rootScope.$broadcast("OC:DefaultPriceUpdated",updatedPriceSchedule.ID);var oldAssignment=angular.copy(vm.listAssignments[vm.selectedPrice.PriceSchedule.ID]);oldAssignment.PriceSchedule=updatedPriceSchedule,oldAssignment.PriceScheduleID=updatedPriceSchedule.ID,delete vm.listAssignments[vm.selectedPrice.PriceSchedule.ID],vm.listAssignments[updatedPriceSchedule.ID]=oldAssignment,vm.selectedPrice=oldAssignment,vm.selectedPrice.PriceSchedule=updatedPriceSchedule,toastr.success(vm.selectedPrice.PriceSchedule.Name+" was updated.")})},vm.deletePrice=function(){ocProductPricing.DeletePrice(vm.selectedPrice.PriceSchedule).then(function(){delete vm.listAssignments[vm.selectedPrice.PriceSchedule.ID],vm.noPricesSet=0===_.keys(vm.listAssignments).length,toastr.success(vm.selectedPrice.PriceSchedule.Name+" was deleted"),vm.selectedPrice=null})}}ProductPricingController.$inject=["$q","$rootScope","$stateParams","$uibModal","toastr","AssignmentList","AssignmentData","ocProductPricing","ocConfirm","SelectedProduct"],angular.module("orderCloud").controller("ProductPricingCtrl",ProductPricingController)}(),function(){"use strict";function ProductPricingConfig($stateProvider){$stateProvider.state("product.pricing",{url:"/pricing",params:{pricescheduleid:void 0},templateUrl:"productManagement/pricing/templates/productPricing.html",controller:"ProductPricingCtrl",controllerAs:"productPricing",data:{pageTitle:"Product Pricing"},resolve:{AssignmentList:["ocProductPricing","$stateParams","SelectedProduct",function(ocProductPricing,$stateParams,SelectedProduct){return ocProductPricing.AssignmentList($stateParams.productid).then(function(data){return SelectedProduct.DefaultPriceScheduleID?(data.Items.push({ProductID:SelectedProduct.ID,PriceScheduleID:SelectedProduct.DefaultPriceScheduleID}),data):data})}],AssignmentData:["ocProductPricing","AssignmentList",function(ocProductPricing,AssignmentList){return ocProductPricing.AssignmentData(AssignmentList)}]}}).state("product.pricing.priceScheduleDetail",{url:"/:pricescheduleid",templateUrl:"productManagement/pricing/templates/priceScheduleDetail.html",controller:"PriceScheduleDetailCtrl",controllerAs:"priceScheduleDetail",resolve:{AssignmentDataDetail:["$stateParams","ocProductPricing","AssignmentData",function($stateParams,ocProductPricing,AssignmentData){return ocProductPricing.AssignmentDataDetail(AssignmentData,$stateParams.pricescheduleid)}]}})}ProductPricingConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(ProductPricingConfig)}(),function(){"use strict";function OrderCloudPriceBreaksDirective($filter,ocProductPricing,OrderCloudSDK,toastr){function linkFn(scope,element,attrs){function _initializeForm(shouldFocus){scope.newBreak={Quantity:null,Price:null},scope.newBreakForm.Quantity.$setPristine(),scope.newBreakForm.Quantity.$setUntouched(),scope.newBreakForm.Price.$setPristine(),scope.newBreakForm.Price.$setUntouched(),shouldFocus&&scope.newBreakForm.Quantity.$$element[0].focus()}function PriceBreakQuantityValidator(modelValue,viewValue){var value=modelValue||viewValue;return!_.findWhere(scope.priceschedule.PriceBreaks,{Quantity:value})}function PriceBreakStartingQuantityValidator(modelValue,viewValue){var value=modelValue||viewValue;return value?scope.priceschedule.PriceBreaks.length>0||scope.priceschedule.RestrictedQuantity?!0:scope.priceschedule.PriceBreaks.length>0?value>=scope.priceschedule.MinQuantity:value===scope.priceschedule.MinQuantity:!0}function PriceBreakOtherQuantitesValidator(modelValue,viewValue){var value=modelValue||viewValue;return value?0===scope.priceschedule.PriceBreaks.length||scope.priceschedule.RestrictedQuantity?!0:value>=scope.priceschedule.MinQuantity:!0}function onEnterKeypress($event){13===$event.keyCode&&($event.preventDefault(),scope.newBreakForm.$invalid||addPriceBreak())}function addPriceBreak(){scope.priceschedule.PriceBreaks.push(scope.newBreak),ocProductPricing.PriceBreaks.FormatQuantities(scope.priceschedule.PriceBreaks),scope.priceschedule.RestrictedQuantity&&syncMinMaxValues(),_initializeForm(!0)}function deletePriceBreak(index){0===index?(scope.priceschedule.PriceBreaks.splice(index,1),scope.priceschedule.PriceBreaks.length?syncMinMaxValues("min"):scope.priceschedule.MinQuantity=1):index===scope.priceschedule.PriceBreaks.length-1&&(scope.priceschedule.RestrictedQuantity||scope.priceschedule.MaxQuantity)?(scope.priceschedule.PriceBreaks.splice(index,1),syncMinMaxValues("max")):scope.priceschedule.PriceBreaks.splice(index,1),ocProductPricing.PriceBreaks.FormatQuantities(scope.priceschedule.PriceBreaks)}function syncMinMaxValues(which){var sortedPriceBreaks=$filter("orderBy")(angular.copy(scope.priceschedule.PriceBreaks),"Quantity");switch(which){case"min":scope.priceschedule.MinQuantity=sortedPriceBreaks[0].Quantity;break;case"max":scope.priceschedule.MaxQuantity=sortedPriceBreaks[sortedPriceBreaks.length-1].Quantity;break;default:scope.priceschedule.MinQuantity=sortedPriceBreaks[0].Quantity,scope.priceschedule.MaxQuantity=sortedPriceBreaks[sortedPriceBreaks.length-1].Quantity}}scope.newBreakForm.Quantity.$validators.priceBreakQuantityConflict=PriceBreakQuantityValidator,scope.newBreakForm.Quantity.$validators.priceBreakStartingQuantity=PriceBreakStartingQuantityValidator,scope.newBreakForm.Quantity.$validators.priceBreakOtherQuantity=PriceBreakOtherQuantitesValidator,scope.onEnterKeypress=onEnterKeypress,scope.addPriceBreak=addPriceBreak,scope.deletePriceBreak=deletePriceBreak,scope.$watch("priceschedule.RestrictedQuantity",function(n){n&&scope.priceschedule.PriceBreaks.length&&syncMinMaxValues()})}var directive={scope:{priceschedule:"="},templateUrl:"productManagement/pricing/templates/ocPriceBreaks.directive.html",link:linkFn};return directive}OrderCloudPriceBreaksDirective.$inject=["$filter","ocProductPricing","OrderCloudSDK","toastr"],angular.module("orderCloud").directive("ocPriceBreaks",OrderCloudPriceBreaksDirective)}(),function(){"use strict";function EditProductPriceModalController($q,$uibModalInstance,OrderCloudSDK,SelectedPriceSchedule,IsDefault,ocProductPricing){var vm=this;vm.data=angular.copy(SelectedPriceSchedule),vm.priceScheduleName=SelectedPriceSchedule.Name,vm.isDefault=IsDefault,vm.submit=function(){var previous={},current={};_.each(SelectedPriceSchedule.PriceBreaks,function(pb){previous[pb.Quantity]=pb.Price}),_.each(vm.data.PriceBreaks,function(pb){current[pb.Quantity]=pb.Price});var createQueue=[],deleteQueue=[];angular.forEach(current,function(price,quantity){(!previous[quantity]||previous[quantity]&&previous[quantity]!==price)&&createQueue.push(OrderCloudSDK.PriceSchedules.SavePriceBreak(SelectedPriceSchedule.ID,{Quantity:quantity,Price:price}))}),angular.forEach(previous,function(price,quantity){current[quantity]||deleteQueue.push(OrderCloudSDK.PriceSchedules.DeletePriceBreak(SelectedPriceSchedule.ID,quantity))}),vm.loading=$q.all(createQueue).then(function(){return $q.all(deleteQueue).then(function(){return OrderCloudSDK.PriceSchedules.Update(SelectedPriceSchedule.ID,vm.data).then(function(updatedPriceSchedule){ocProductPricing.PriceBreaks.FormatQuantities(updatedPriceSchedule.PriceBreaks),$uibModalInstance.close(updatedPriceSchedule)})})})},vm.cancel=function(){$uibModalInstance.dismiss()}}EditProductPriceModalController.$inject=["$q","$uibModalInstance","OrderCloudSDK","SelectedPriceSchedule","IsDefault","ocProductPricing"],angular.module("orderCloud").controller("EditProductPriceModalCtrl",EditProductPriceModalController)}(),function(){"use strict";function CreateProductPriceModalController($exceptionHandler,$uibModalInstance,SelectPriceData,ocProductPricing,toastr){var vm=this;SelectPriceData.DefaultPriceSchedule||(vm.buyerName=SelectPriceData.Buyer.Name,vm.userGroupName=SelectPriceData.UserGroup?SelectPriceData.UserGroup.Name:null,vm.previousPriceSchedule=angular.copy(SelectPriceData.Product.SelectedPrice),vm.selectedBuyer=SelectPriceData.Buyer,vm.selectedUserGroup=SelectPriceData.UserGroup),vm.product=SelectPriceData.Product,vm.priceSchedule={RestrictedQuantity:!1,PriceBreaks:[],MinQuantity:1,OrderType:"Standard"},vm.cancel=function(){$uibModalInstance.dismiss()},vm.submit=function(){var userGroups=vm.selectedUserGroup?[vm.selectedUserGroup]:[];SelectPriceData.DefaultPriceSchedule&&(vm.priceSchedule.Name=vm.product.Name+" Default Price"),vm.loading=ocProductPricing.CreatePrice(vm.product,vm.priceSchedule,vm.selectedBuyer,userGroups,SelectPriceData.DefaultPriceSchedule).then(function(data){SelectPriceData.DefaultPriceSchedule||SelectPriceData.CurrentAssignments.push(data.Assignment),$uibModalInstance.close({SelectedPrice:data.NewPriceSchedule,UpdatedAssignments:SelectPriceData.CurrentAssignments})})["catch"](function(ex){$exceptionHandler(ex)})}}CreateProductPriceModalController.$inject=["$exceptionHandler","$uibModalInstance","SelectPriceData","ocProductPricing","toastr"],angular.module("orderCloud").controller("CreateProductPriceModalCtrl",CreateProductPriceModalController)}(),function(){"use strict";function ocProductInventoryService($q,OrderCloudSDK){function _update(product){var deferred=$q.defer(),productPartial=_.pick(product,["Inventory"]);return OrderCloudSDK.Products.Patch(product.ID,productPartial).then(function(updatedProduct){deferred.resolve(updatedProduct)})["catch"](function(ex){deferred.reject(ex)}),deferred.promise}var service={Update:_update};return service}ocProductInventoryService.$inject=["$q","OrderCloudSDK"],angular.module("orderCloud").factory("ocProductInventory",ocProductInventoryService)}(),function(){"use strict";function ProductInventoryController($exceptionHandler,toastr,ocProductInventory,SelectedProduct){function updateProductInventory(product){vm.loading=ocProductInventory.Update(product).then(function(updatedProduct){vm.product=angular.copy(updatedProduct),vm.ProductInventoryForm.$setPristine(),toastr.success(updatedProduct.Name+" inventory was updated")})["catch"](function(ex){$exceptionHandler(ex)})}var vm=this;vm.product=angular.copy(SelectedProduct),vm.updateProductInventory=updateProductInventory}ProductInventoryController.$inject=["$exceptionHandler","toastr","ocProductInventory","SelectedProduct"],angular.module("orderCloud").controller("ProductInventoryCtrl",ProductInventoryController)}(),function(){"use strict";function ProductInventoryConfig($stateProvider){$stateProvider.state("product.inventory",{url:"/inventory",templateUrl:"productManagement/inventory/templates/productInventory.html",controller:"ProductInventoryCtrl",controllerAs:"productInventory",data:{pageTitle:"Product Inventory"}})}ProductInventoryConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(ProductInventoryConfig)}(),function(){"use strict";function OrderCloudProductCategoriesService($q,OrderCloudSDK){function _get(catalogID,productID){var df=$q.defer(),options={productID:productID,pageSize:100};return OrderCloudSDK.Categories.ListProductAssignments(catalogID,options).then(function(data){if(1==data.Meta.TotalPages)df.resolve(data.Items);else{for(var queue=[],totalPages=angular.copy(data.Meta.TotalPages),currentPage=angular.copy(data.Meta.Page);totalPages>currentPage;)currentPage++,options.page=currentPage,queue.push(OrderCloudSDK.Categories.ListProductAssignments(catalogID,options));$q.all(queue).then(function(results){angular.forEach(results,function(r){data.Items=data.Items.concat(r.Items)}),df.resolve(data.Items)})}}),df.promise}function _save(catalogID,categoryID,productID){var assignment={categoryID:categoryID,productID:productID};return OrderCloudSDK.Categories.SaveProductAssignment(catalogID,assignment)}function _delete(catalogID,categoryID,productID){return OrderCloudSDK.Categories.DeleteProductAssignment(catalogID,categoryID,productID)}var service={Assignments:{Get:_get,Save:_save,Delete:_delete}};return service}OrderCloudProductCategoriesService.$inject=["$q","OrderCloudSDK"],angular.module("orderCloud").factory("ocProductCategories",OrderCloudProductCategoriesService)}(),function(){"use strict";function ProductCategoriesController($stateParams,toastr,ocProductCategories,ocCatalog,SelectedCatalog,Tree,SelectedProduct){var vm=this;vm.selectedCatalog=SelectedCatalog,vm.selectedProduct=SelectedProduct,vm.tree=Tree,vm.catalogid=$stateParams.catalogid,vm.updateAssignment=function(node){node.Assigned?node.loading=ocProductCategories.Assignments.Save($stateParams.catalogid,node.ID,$stateParams.productid).then(function(){toastr.success(vm.selectedProduct.Name+" was assigned to "+node.Name)})["catch"](function(ex){$exceptionHandler(ex),node.Assigned=!1}):node.loading=ocProductCategories.Assignments.Delete($stateParams.catalogid,node.ID,$stateParams.productid).then(function(){toastr.success(vm.selectedProduct.Name+" was unassigned from "+node.Name)})["catch"](function(ex){$exceptionHandler(ex),node.Assigned=!0})},vm.createCategory=function(){ocCatalog.CreateCategory(null,$stateParams.catalogid).then(function(newCategory){newCategory.Assigned=!0,vm.tree.push(newCategory),newCategory.loading=ocProductCategories.Assignments.Save($stateParams.catalogid,newCategory.ID,$stateParams.productid).then(function(){toastr.success(vm.selectedProduct.Name+" was assigned to "+newCategory.Name)})})}}ProductCategoriesController.$inject=["$stateParams","toastr","ocProductCategories","ocCatalog","SelectedCatalog","Tree","SelectedProduct"],angular.module("orderCloud").controller("ProductCategoriesCtrl",ProductCategoriesController)}(),function(){"use strict";function ProductCategoriesConfig($stateProvider){$stateProvider.state("product.catalogs",{url:"/categories?search&page&pageSize&searchOn&sortBy&filters",templateUrl:"productManagement/categories/templates/productCatalogs.html",controller:"CatalogsCtrl",controllerAs:"productCatalogs",data:{pageTitle:"Product Categories"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CatalogList:["Parameters","OrderCloudSDK",function(Parameters,OrderCloudSDK){return OrderCloudSDK.Catalogs.List(Parameters)}]}}).state("product.categories",{url:"/categories/:catalogid",templateUrl:"productManagement/categories/templates/productCategories.html",controller:"ProductCategoriesCtrl",controllerAs:"productCategories",resolve:{SelectedCatalog:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){return OrderCloudSDK.Catalogs.Get($stateParams.catalogid)}],CategoryAssignments:["$stateParams","ocProductCategories",function($stateParams,ocProductCategories){return ocProductCategories.Assignments.Get($stateParams.catalogid,$stateParams.productid)}],CategoryList:["$stateParams","ocCatalogCategories",function($stateParams,ocCatalogCategories){return ocCatalogCategories.GetAll($stateParams.catalogid)}],Tree:["CategoryList","ocCatalogTree","ocCatalogCategories","CategoryAssignments",function(CategoryList,ocCatalogTree,ocCatalogCategories,CategoryAssignments){return ocCatalogTree.Get(ocCatalogCategories.Assignments.Map(CategoryList,CategoryAssignments))}]}})}ProductCategoriesConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(ProductCategoriesConfig)}(),function(){"use strict";function BuyerProductsController($q,$exceptionHandler,$state,$stateParams,$filter,toastr,OrderCloudSDK,ocParameters,ocProducts,ocProductPricing,SelectedBuyer,ProductList,Parameters,MappedProductList,CurrentAssignments,$uibModal){function filter(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))}function search(){vm.filter(!0)}function clearSearch(){vm.parameters.search=null,vm.filter(!0)}function updateSort(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)}function pageChanged(){$state.go(".",{page:vm.list.Meta.Page})}function loadMore(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1,filters:{Active:void 0}});return OrderCloudSDK.Products.List(parameters).then(function(data){vm.list.Items=vm.list.Items.concat(ocProductPricing.Assignments.Map($stateParams.buyerid,null,data,CurrentAssignments,data)),vm.list.Meta=data.Meta})}var vm=this;vm.list=MappedProductList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0===Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,
vm.clearSearch=clearSearch,vm.filter=filter,vm.loadMore=loadMore,vm.pageChanged=pageChanged,vm.search=search,vm.updateSort=updateSort,vm.createProduct=function(){ocProducts.Create().then(function(newProduct){toastr.success(newProduct.Name+" was created."),$state.go("product",{productid:newProduct.ID})})},vm.updateProductPrice=function(scope){ocProductPricing.UpdateProductPrice(scope.product,SelectedBuyer,CurrentAssignments).then(function(data){var message=scope.product.Name+" price was "+(data.SelectedPrice?"updated to "+$filter("currency")(data.SelectedPrice.PriceBreaks[0].Price):"removed ")+" for "+SelectedBuyer.Name;toastr.success(message),CurrentAssignments=data.UpdatedAssignments,scope.product.SelectedPrice=data.SelectedPrice})["catch"](function(ex){"CREATE"===ex?ocProductPricing.CreateProductPrice(scope.product,SelectedBuyer,CurrentAssignments).then(function(data){toastr.success(scope.product.Name+" price was updated to "+$filter("currency")(data.SelectedPrice.PriceBreaks[0].Price)+" for "+SelectedBuyer.Name),CurrentAssignments=data.UpdatedAssignments,scope.product.SelectedPrice=data.SelectedPrice})["catch"](function(ex){$exceptionHandler(ex)}):$exceptionHandler(ex)})}}BuyerProductsController.$inject=["$q","$exceptionHandler","$state","$stateParams","$filter","toastr","OrderCloudSDK","ocParameters","ocProducts","ocProductPricing","SelectedBuyer","ProductList","Parameters","MappedProductList","CurrentAssignments","$uibModal"],angular.module("orderCloud").controller("BuyerProductsCtrl",BuyerProductsController)}(),function(){"use strict";function BuyerProductsConfig($stateProvider){$stateProvider.state("buyerProducts",{parent:"buyer",url:"/products?search&page&pageSize&searchOn&sortBy&filters&catalogID",templateUrl:"productManagement/buyerProducts/templates/buyerProducts.html",controller:"BuyerProductsCtrl",controllerAs:"buyerProducts",resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$stateParams","ocProductPricing",function($stateParams,ocProductPricing){return ocProductPricing.Assignments.Get(null,null,$stateParams.buyerid)}],ProductList:["OrderCloudSDK","Parameters",function(OrderCloudSDK,Parameters){return Parameters.filters=angular.extend(Parameters.filters,{Active:!0}),OrderCloudSDK.Products.List(Parameters)}],MappedProductList:["$stateParams","ocProductPricing","ProductList","CurrentAssignments",function($stateParams,ocProductPricing,ProductList,CurrentAssignments){return ocProductPricing.GetProductListPriceSchedules(ProductList,CurrentAssignments).then(function(data){return ocProductPricing.Assignments.Map($stateParams.buyerid,null,ProductList,data,CurrentAssignments)})}]}})}BuyerProductsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(BuyerProductsConfig)}(),function(){"use strict";function OrderShipmentsCreateItemsController($q,$uibModalInstance,$exceptionHandler,$timeout,toastr,OrderCloudSDK,ocOrderShipmentsService,ShipmentLineItems,Shipment,OrderID,BuyerID){var vm=this;vm.lineItems=ShipmentLineItems,vm.shipment=Shipment,vm.selectedLineItemPage=ShipmentLineItems.Meta.Page;var existingShipmentsLineItemIDs=_.pluck(Shipment.Items,"LineItemID");angular.forEach(vm.lineItems.Items,function(item){item.MetaPage=vm.lineItems.Meta.Page,item.ExistingShipmentItem=existingShipmentsLineItemIDs.indexOf(item.ID)>-1}),vm.pageChanged=function(){var cachedItems=_.filter(vm.lineItems.Items,function(item){return item.MetaPage&&item.MetaPage==vm.lineItems.Meta.Page});cachedItems.length?vm.selectedLineItemPage=vm.lineItems.Meta.Page:ocOrderShipmentsService.ListLineItems(OrderID,vm.lineItems.Meta.Page,vm.lineItems.Meta.PageSize).then(function(data){vm.selectedLineItemPage=data.Meta.Page,angular.forEach(data.Items,function(item){item.MetaPage=data.Meta.Page,item.ExistingShipmentItem=existingShipmentsLineItemIDs.indexOf(item.ID)}),vm.lineItems.Items=vm.lineItems.Items.concat(data.Items)})},vm.loadMore=function(){vm.lineItems.Meta.Page++,ocOrderShipmentsService.ListLineItems(OrderID,vm.lineItems.Meta.Page,vm.lineItems.Meta.PageSize).then(function(data){vm.lineItems.Items=vm.lineItems.Items.concat(data.Items),vm.lineItem.Meta=data.Meta})},$timeout(function(){vm.form.$setValidity("ShipmentItem.ItemsSelected",!1)}),vm.itemChange=function(lineItem){var selectedItems=_.filter(vm.lineItems.Items,function(item){return item.Selected});if(vm.shipment.ShippingAddress&&selectedItems.length&&(vm.shipment.ShippingAddress.ID||vm.shipment.ShippingAddress.Street1)!=(vm.shipment.ShippingAddress.ID?lineItem.ShippingAddressID:lineItem.ShippingAddress.Street1))return toastr.error("All items within this shipment must be shipped to the same address."),void(lineItem.Selected=!1);var itemsSelected=!1;angular.forEach(vm.lineItems.Items,function(lineItem){lineItem.Selected&&lineItem.ShipQuantity>0&&(itemsSelected=!0)}),vm.form.$setValidity("ShipmentItem.ItemsSelected",itemsSelected)},vm.submit=function(){var queue=[];angular.forEach(vm.lineItems.Items,function(lineItem){if(lineItem.Selected&&lineItem.ShipQuantity&&lineItem.ShipQuantity>0){var product={};_.each(lineItem.Product,function(val,key){"ID"==key?product.ID=val:product[key]=val});var shipmentItem={orderID:OrderID,lineItemID:lineItem.ID,quantityShipped:lineItem.ShipQuantity,unitPrice:lineItem.UnitPrice,costCenter:lineItem.CostCenter,dateNeeded:lineItem.DatNeeded,product:product};queue.push(OrderCloudSDK.Shipments.SaveItem(Shipment.ID,shipmentItem))}}),vm.loading=$q.all(queue).then(function(results){angular.forEach(results,function(shipmentItem){shipmentItem.LineItem=_.findWhere(vm.lineItems.Items,{ID:shipmentItem.LineItemID})}),$uibModalInstance.close(results)},function(ex){$uibModalInstance.dismiss(),$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}function OrderShipmentsEditItemController($uibModalInstance,OrderCloudSDK,ShipmentItem,ShipmentID){var vm=this;vm.shipmentItem=angular.copy(ShipmentItem),vm.itemID=ShipmentItem.ID,vm.submit=function(){var product={};_.each(vm.shipmentItem.Product,function(val,key){"ID"==key?product.ID=val:product[key]=val});({orderID:vm.shipmentItem.OrderID,lineItemID:vm.shipmentItem.LineItemID,quantityShipped:vm.shipmentItem.ShipQuantity,unitPrice:vm.shipmentItem.UnitPrice,costCenter:vm.shipmentItem.CostCenter,dateNeeded:vm.shipmentItem.DatNeeded,product:product});vm.loading=OrderCloudSDK.Shipments.SaveItem(ShipmentID,vm.shipmentItem).then(function(data){$uibModalInstance.close(vm.shipmentItem)})["catch"](function(ex){409==ex.status?(vm.form.ID.$setValidity("Shipment.UnavailableID",!1),vm.form.ID.$$element[0].focus()):$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}OrderShipmentsCreateItemsController.$inject=["$q","$uibModalInstance","$exceptionHandler","$timeout","toastr","OrderCloudSDK","ocOrderShipmentsService","ShipmentLineItems","Shipment","OrderID","BuyerID"],OrderShipmentsEditItemController.$inject=["$uibModalInstance","OrderCloudSDK","ShipmentItem","ShipmentID"],angular.module("orderCloud").controller("OrderShipmentsCreateItemsCtrl",OrderShipmentsCreateItemsController).controller("OrderShipmentsEditItemCtrl",OrderShipmentsEditItemController)}(),function(){"use strict";function OrderCloudOrderShipmentsService($q,$uibModal,ocConfirm,OrderCloudSDK){function _list(orderID,page,pageSize){function getShipmentItems(data){var queue=[];angular.forEach(data.Items,function(shipment){queue.push(function(){var d=$q.defer();return OrderCloudSDK.Shipments.ListItems(shipment.ID).then(function(shipmentItems){shipment.Items=shipmentItems.Items,d.resolve()}),d.promise}())}),$q.all(queue).then(function(){getLineItems(data)})}function getLineItems(data){var lineItemIDs=_.uniq(_.flatten(_.map(data.Items,function(shipment){return _.pluck(shipment.Items,"LineItemID")}))),options={page:1,pageSize:100,filters:{ID:lineItemIDs.join("|")}};OrderCloudSDK.LineItems.List("incoming",orderID,options).then(function(lineItemData){angular.forEach(data.Items,function(shipment){angular.forEach(shipment.Items,function(shipmentItem){shipmentItem.LineItem=_.findWhere(lineItemData.Items,{ID:shipmentItem.LineItemID})})}),analyzeShippingAddresses(data)})}function analyzeShippingAddresses(data){angular.forEach(data.Items,function(shipment){var shippingAddressCount=_.uniq(_.map(shipment.Items,function(item){return item.LineItem.ShippingAddress?item.LineItem.ShippingAddress.ID?item.LineItem.ShippingAddress.ID:item.LineItem.ShippingAddress.Street1:item.LineItem.ShippingAddressID})).length;shipment.ShippingAddress=1==shippingAddressCount?shipment.Items[0].LineItem.ShippingAddress:null}),deferred.resolve(data)}var deferred=$q.defer(),options={orderID:orderID,page:page,pageSize:pageSize};return OrderCloudSDK.Shipments.List(options).then(function(data){getShipmentItems(data)}),deferred.promise}function _listLineItems(orderID,page,pageSize){function analyzeShipments(data){angular.forEach(data.Items,function(lineItem){lineItem.Selected=!1,lineItem.ShipQuantity=lineItem.Quantity-lineItem.QuantityShipped}),deferred.resolve(data)}var deferred=$q.defer(),options={page:page,pageSize:pageSize};return OrderCloudSDK.LineItems.List("incoming",orderID,options).then(function(data){analyzeShipments(data)}),deferred.promise}function _create(shipment,lineItems,orderID,buyerID){function createShipmentItems(shipmentData){var queue=[];angular.forEach(lineItems,function(lineItem){lineItem.Selected&&lineItem.ShipQuantity&&lineItem.ShipQuantity>0&&queue.push(function(){var d=$q.defer(),product={};_.each(lineItem.Product,function(val,key){"ID"==key?product.ID=val:product[key]=val});var shipmentItem={orderID:orderID,lineItemID:lineItem.ID,quantityShipped:lineItem.ShipQuantity,unitPrice:lineItem.UnitPrice,costCenter:lineItem.CostCenter,dateNeeded:lineItem.DatNeeded,product:product};return OrderCloudSDK.Shipments.SaveItem(shipmentData.ID,shipmentItem).then(function(item){d.resolve(item)}),d.promise}())}),$q.all(queue).then(function(results){shipmentData.Items=results,deferred.resolve(shipmentData)})}var deferred=$q.defer(),shipmentCopy=angular.copy(shipment);shipmentCopy.DateShipped&&"function"==typeof shipmentCopy.DateShipped.getDate&&(shipmentCopy.DateShipped=shipmentCopy.DateShipped.toISOString()),shipmentCopy.DateDelivered&&"function"==typeof shipmentCopy.DateDelivered.getDate&&(shipmentCopy.DateDelivered=shipmentCopy.DateDelivered.toISOString());var toAddressID=_.findWhere(lineItems,{Selected:!0}).ShippingAddressID,toAddress=_.findWhere(lineItems,{Selected:!0}).ShippingAddressID,shipmentModel={buyerID:buyerID,shipper:shipmentCopy.Shipper,dateShipped:shipmentCopy.DateShipped,dateDeliveryed:shipmentCopy.DateDelivered,trackingNumber:shipmentCopy.TrackingNumber,cost:shipmentCopy.Cost};return toAddressID?shipmentModel.ShipToAddressID=toAddressID:shipmentModel.ToAddress=toAddress,OrderCloudSDK.Shipments.Create(shipmentModel).then(function(data){createShipmentItems(data)}),deferred.promise}function _edit(shipment,buyerID){return $uibModal.open({templateUrl:"orderManagement/shipments/templates/orderShipmentsEdit.modal.html",controller:"OrderShipmentsEditCtrl",controllerAs:"orderShipmentsEdit",resolve:{OrderShipment:function(){return shipment},BuyerID:function(){return buyerID}}}).result}function _delete(shipmentID){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+shipmentID+"</b>?",confirmText:"Delete shipment",type:"delete"}).then(function(){return OrderCloudSDK.Shipments.Delete(shipmentID)})}function _createItems(shipment,orderID,buyerID){return $uibModal.open({templateUrl:"orderManagement/shipments/templates/orderShipmentsCreateItem.modal.html",size:"lg",controller:"OrderShipmentsCreateItemsCtrl",controllerAs:"orderShipmentsCreateItems",resolve:{Shipment:function(){return shipment},ShipmentLineItems:function(){return _listLineItems(orderID)},OrderID:function(){return orderID},BuyerID:function(){return buyerID}}}).result}function _editItem(item,shipmentID){return $uibModal.open({templateUrl:"orderManagement/shipments/templates/orderShipmentsEditItem.modal.html",controller:"OrderShipmentsEditItemCtrl",controllerAs:"orderShipmentsEditItem",resolve:{ShipmentItem:function(){return item},ShipmentID:function(){return shipmentID}}}).result}function _deleteItem(shipmentID,orderID,lineItemID){return ocConfirm.Confirm({message:"Are you sure you want to delete this shipment item? <br>"+lineItemID,confirmText:"Delete shipment item"}).then(function(){return OrderCloudSDK.Shipments.DeleteItem(shipmentID,orderID,lineItemID)})}var service={List:_list,ListLineItems:_listLineItems,Create:_create,Edit:_edit,Delete:_delete,CreateItems:_createItems,EditItem:_editItem,DeleteItem:_deleteItem};return service}OrderCloudOrderShipmentsService.$inject=["$q","$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocOrderShipmentsService",OrderCloudOrderShipmentsService)}(),function(){"use strict";function OrderShipmentsController($stateParams,toastr,ocOrderShipmentsService,OrderShipments){var vm=this;vm.list=OrderShipments,vm.orderID=$stateParams.orderid,vm.pageChanged=function(){ocOrderShipmentsService.List($stateParams.orderid,vm.list.Meta.Page,vm.list.Meta.PageSize).then(function(data){vm.list=data})},vm.loadMore=function(){vm.list.Meta.Page++,ocOrderShipmentsService.List($stateParams.orderid,vm.list.Meta.Page,vm.list.Meta.PageSize).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})},vm.selectShipment=function(shipment){vm.selectedShipment=angular.copy(shipment)},vm.list.Items.length&&vm.selectShipment(vm.list.Items[0]),vm.editShipment=function(){ocOrderShipmentsService.Edit(vm.selectedShipment,$stateParams.buyerid).then(function(data){vm.selectedShipment=angular.extend(vm.selectedShipment,data);var shipmentIndex=0;angular.forEach(vm.list.Items,function(shipment,index){shipment.ID==vm.selectedShipment.OriginalShipmentID&&(shipmentIndex=index)}),vm.list.Items[shipmentIndex]=data,toastr.success("Shipment was updated.")})},vm.deleteShipment=function(shipment){ocOrderShipmentsService.Delete(vm.selectedShipment.ID).then(function(){var shipmentIndex=0;angular.forEach(vm.list.Items,function(shipment,index){shipment.ID==vm.selectedShipment.ID&&(shipmentIndex=index)}),vm.list.Items.splice(shipmentIndex,1),vm.selectedShipment=null,toastr.success("Shipment was deleted.")})},vm.createShipmentItems=function(){ocOrderShipmentsService.CreateItems(vm.selectedShipment,$stateParams.orderid,$stateParams.buyerid).then(function(items){vm.selectedShipment.Items=vm.selectedShipment.Items.concat(items),toastr.success("Shipment items were created.")})},vm.editShipmentItem=function(item){ocOrderShipmentsService.EditItem(item,vm.selectedShipment.ID).then(function(data){angular.forEach(vm.selectedShipment.Items,function(item){item.LineItemID==data.LineItemID&&(item.QuantityShipped=data.QuantityShipped)}),toastr.success("Shipment item was updated.")})},vm.deleteShipmentItem=function(item){ocOrderShipmentsService.DeleteItem(vm.selectedShipment.ID,$stateParams.orderid,item.LineItemID).then(function(){var itemIndex=0;angular.forEach(vm.selectedShipment.Items,function(shipmentItem,index){shipmentItem.LineItemID==item.LineItemID&&(itemIndex=index)}),vm.selectedShipment.Items.splice(itemIndex,1),toastr.success("Shipment item was deleted.")})}}function OrderShipmentsCreateController($state,$stateParams,$timeout,toastr,ocOrderShipmentsService,ShipmentLineItems){var vm=this;vm.lineItems=ShipmentLineItems,vm.selectedLineItemPage=ShipmentLineItems.Meta.Page,_.each(vm.lineItems.Items,function(item){item.MetaPage=vm.lineItems.Meta.Page}),vm.pageChanged=function(){var cachedItems=_.filter(vm.lineItems.Items,function(item){return item.MetaPage&&item.MetaPage==vm.lineItems.Meta.Page});cachedItems.length?vm.selectedLineItemPage=vm.lineItems.Meta.Page:ocOrderShipmentsService.ListLineItems($stateParams.orderid,vm.lineItems.Meta.Page,vm.lineItems.Meta.PageSize).then(function(data){vm.selectedLineItemPage=data.Meta.Page,_.each(data.Items,function(item){item.MetaPage=data.Meta.Page}),vm.lineItems.Items=vm.lineItems.Items.concat(data.Items)})},vm.loadMore=function(){vm.lineItems.Meta.Page++,ocOrderShipmentsService.ListLineItems($stateParams.orderid,vm.lineItems.Meta.Page,vm.lineItems.Meta.PageSize).then(function(data){vm.lineItems.Items=vm.lineItems.Items.concat(data.Items),vm.lineItem.Meta=data.Meta})},$timeout(function(){vm.form.$setValidity("Shipment.ItemsSelected",!1)}),vm.itemChange=function(lineItem){var selectedItems=_.filter(vm.lineItems.Items,function(item){return item.Selected&&item.ID!=lineItem.ID});if(selectedItems.length&&(selectedItems[0].ShippingAddressID||selectedItems[0].ShippingAddress.Street1)!=(selectedItems[0].ShippingAddressID?lineItem.ShippingAddressID:lineItem.ShippingAddress.Street1))return toastr.error("All items within this shipment must be shipped to the same address."),void(lineItem.Selected=!1);var itemsSelected=!1;angular.forEach(vm.lineItems.Items,function(lineItem){lineItem.Selected&&lineItem.ShipQuantity>0&&(itemsSelected=!0)}),vm.form.$setValidity("Shipment.ItemsSelected",itemsSelected)},vm.submit=function(){ocOrderShipmentsService.Create(vm.shipment,vm.lineItems.Items,$stateParams.orderid,$stateParams.buyerid).then(function(){$state.go("^",{},{reload:!0}),toastr.success("Shipment was created.")})}}function OrderShipmentsEditController($uibModalInstance,OrderCloudSDK,OrderShipment){var vm=this;vm.shipment=angular.copy(OrderShipment),vm.shipmentID=OrderShipment.ID,vm.shipment.DateShipped&&(vm.shipment.DateShipped=new Date(vm.shipment.DateShipped)),vm.shipment.DateDelivered&&(vm.shipment.DateDelivered=new Date(vm.shipment.DateDelivered)),vm.updateValidity=function(){vm.form.ID.$error["Shipment.UnavailableID"]&&vm.form.ID.$setValidity("Shipment.UnavailableID",!0)},vm.submit=function(){var partial=_.pick(vm.shipment,["ID","BuyerID","TrackingNumber","Cost","DateShipped","DateDelivered","ShippingAddress"]);partial.DateShipped&&(partial.DateShipped=new Date(partial.DateShipped)),partial.DateDelivered&&(partial.DateDelivered=new Date(partial.DateDelivered));var shipmentPartial={ID:partial.ID,buyerID:partial.BuyerID,trackingNumber:partial.TrackingNumber,cost:partial.Cost,dateShipped:partial.DateShipped,dateDelivered:partial.DateDelivered},toAddressID=partial.ShippingAddress?partial.ShippingAddress.ID:null,toAddress=partial.ShippingAddress;toAddressID?shipmentPartial.toAddressID=toAddressID:shipmentPartial.toAddress=toAddress,vm.loading=OrderCloudSDK.Shipments.Patch(OrderShipment.ID,shipmentPartial).then(function(data){var result=_.pick(data,["ID","TrackingNumber","Cost","DateShipped","DateDelivered"]);result.OriginalShipmentID=OrderShipment.ID,$uibModalInstance.close(result)})["catch"](function(ex){409==ex.status?(vm.form.ID.$setValidity("Shipment.UnavailableID",!1),vm.form.ID.$$element[0].focus()):$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}OrderShipmentsController.$inject=["$stateParams","toastr","ocOrderShipmentsService","OrderShipments"],OrderShipmentsCreateController.$inject=["$state","$stateParams","$timeout","toastr","ocOrderShipmentsService","ShipmentLineItems"],OrderShipmentsEditController.$inject=["$uibModalInstance","OrderCloudSDK","OrderShipment"],angular.module("orderCloud").controller("OrderShipmentsCtrl",OrderShipmentsController).controller("OrderShipmentsCreateCtrl",OrderShipmentsCreateController).controller("OrderShipmentsEditCtrl",OrderShipmentsEditController)}(),function(){"use strict";function OrderShipmentsConfig($stateProvider){$stateProvider.state("orderDetail.shipments",{url:"/shipments",templateUrl:"orderManagement/shipments/templates/orderShipments.html",controller:"OrderShipmentsCtrl",controllerAs:"orderShipments",data:{pageTitle:"Order Shipments"},resolve:{OrderShipments:["$stateParams","ocOrderShipmentsService",function($stateParams,ocOrderShipmentsService){return ocOrderShipmentsService.List($stateParams.orderid)}]}}).state("orderDetail.shipments.create",{url:"/create",templateUrl:"orderManagement/shipments/templates/orderShipmentsCreate.html",controller:"OrderShipmentsCreateCtrl",controllerAs:"orderShipmentsCreate",data:{pageTitle:"Create Shipment"},resolve:{ShipmentLineItems:["$stateParams","ocOrderShipmentsService",function($stateParams,ocOrderShipmentsService){return ocOrderShipmentsService.ListLineItems($stateParams.orderid)}]}})}OrderShipmentsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(OrderShipmentsConfig)}(),function(){"use strict";function OrderCloudOrderPaymentsService($q,OrderCloudSDK){function _list(orderID,buyerID,page,pageSize){function getPaymentDetails(data){var queue=[];angular.forEach(data.Items,function(payment){queue.push(function(){var d=$q.defer();return payment.Details=null,"SpendingAccount"==payment.Type?OrderCloudSDK.SpendingAccounts.Get(buyerID,payment.SpendingAccountID).then(function(spendingAccount){payment.Details=spendingAccount,d.resolve()})["catch"](function(){d.resolve()}):"CreditCard"==payment.Type?OrderCloudSDK.CreditCards.Get(buyerID,payment.CreditCardID).then(function(creditCard){payment.Details=creditCard,d.resolve()})["catch"](function(){d.resolve()}):"PurchaseOrder"==payment.Type?(payment.xp&&payment.xp.PONumber&&(payment.Details={PONumber:payment.xp.PONumber}),d.resolve()):d.resolve(),d.promise}())}),deferred.resolve(data)}var deferred=$q.defer(),options={page:page,pageSize:pageSize};return OrderCloudSDK.Payments.List("incoming",orderID,options).then(function(data){getPaymentDetails(data)}),deferred.promise}var service={List:_list};return service}OrderCloudOrderPaymentsService.$inject=["$q","OrderCloudSDK"],angular.module("orderCloud").factory("ocOrderPaymentsService",OrderCloudOrderPaymentsService)}(),function(){"use strict";function OrderPaymentsController($stateParams,ocOrderPaymentsService,OrderPayments){var vm=this;vm.list=OrderPayments,vm.pageChanged=function(){ocOrderPaymentsService.List($stateParams.orderid,$stateParams.buyerid,vm.list.Meta.Page,vm.list.Meta.PageSize).then(function(data){vm.list=data})},vm.loadMore=function(){vm.list.Meta.Page++,ocOrderPaymentsService.List($stateParams.orderid,$stateParams.buyerid,vm.list.Meta.Page,vm.list.Meta.PageSize).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}OrderPaymentsController.$inject=["$stateParams","ocOrderPaymentsService","OrderPayments"],angular.module("orderCloud").controller("OrderPaymentsCtrl",OrderPaymentsController)}(),function(){"use strict";function OrderPaymentsConfig($stateProvider){$stateProvider.state("orderDetail.payments",{url:"/payments",templateUrl:"orderManagement/payments/templates/orderPayments.html",controller:"OrderPaymentsCtrl",controllerAs:"orderPayments",data:{pageTitle:"Order Payments"},resolve:{OrderPayments:["$stateParams","ocOrderPaymentsService",function($stateParams,ocOrderPaymentsService){return ocOrderPaymentsService.List($stateParams.orderid,$stateParams.buyerid,1,null)}]}})}OrderPaymentsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(OrderPaymentsConfig)}(),function(){"use strict";function OrderCloudOrdersService($q,$filter,OrderCloudSDK){function _list(parameters){function convertToDate(toDate){var result=new Date(toDate);return result=result.setDate(result.getDate()+1),$filter("date")(result,"MM-dd-yyyy")}function gatherBuyerCompanies(data){var buyerIDs=_.uniq(_.pluck(data.Items,"FromCompanyID")),options={page:1,pageSize:100,filters:{ID:buyerIDs.join("|")}};OrderCloudSDK.Buyers.List(options).then(function(buyerData){_.map(data.Items,function(order){order.FromCompany=_.findWhere(buyerData.Items,{ID:order.FromCompanyID})}),deferred.resolve(data)})}var deferred=$q.defer();return parameters.fromDate&&parameters.toDate?parameters.filters.DateSubmitted=[">"+parameters.fromDate,"<"+convertToDate(parameters.toDate)]:parameters.fromDate&&!parameters.toDate?parameters.filters.DateSubmitted=[">"+parameters.fromDate]:!parameters.fromDate&&parameters.toDate&&(parameters.filters.DateSubmitted=["<"+convertToDate(parameters.toDate)]),OrderCloudSDK.Orders.List("incoming",parameters).then(function(data){gatherBuyerCompanies(data)}),deferred.promise}var service={List:_list};return service}OrderCloudOrdersService.$inject=["$q","$filter","OrderCloudSDK"],angular.module("orderCloud").factory("ocOrdersService",OrderCloudOrdersService)}(),function(){"use strict";function OrdersController($state,$ocMedia,OrderCloudSDK,ocParameters,ocOrdersService,Parameters,OrderList,BuyerCompanies){var vm=this;Parameters.fromDate&&(Parameters.fromDate=new Date(Parameters.fromDate)),Parameters.toDate&&(Parameters.toDate=new Date(Parameters.toDate)),delete Parameters.filters.DateSubmitted,vm.parameters=Parameters,vm.list=OrderList,vm.buyerCompanies=BuyerCompanies,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.orderStatuses=[{Value:"Open",Name:"Open"},{Value:"AwaitingApproval",Name:"Awaiting Approval"},{Value:"Completed",Name:"Completed"},{Value:"Declined",Name:"Declined"}],vm.filtersApplied=vm.parameters.filters||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.toggleFilters=function(){vm.showFilters=!vm.showFilters},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.searchResults=!1,vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return vm.parameters.page=vm.list.Meta.Page+1,vm.parameters.pageSize=vm.list.Meta.PageSize,ocOrdersService.List(vm.parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})},vm.searchBuyerCompanies=function(search){var options={search:search,page:1,pageSize:100};return OrderCloudSDK.Buyers.List(options).then(function(data){vm.buyerCompanies=data})}}OrdersController.$inject=["$state","$ocMedia","OrderCloudSDK","ocParameters","ocOrdersService","Parameters","OrderList","BuyerCompanies"],angular.module("orderCloud").controller("OrdersCtrl",OrdersController)}(),function(){"use strict";function OrdersConfig($stateProvider){$stateProvider.state("orders",{parent:"base",url:"/orders?buyerID&fromDate&toDate&search&page&pageSize&searchOn&sortBy&filters",templateUrl:"orderManagement/orders/templates/orders.html",controller:"OrdersCtrl",controllerAs:"orders",data:{pageTitle:"Orders"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],OrderList:["ocOrdersService","Parameters",function(ocOrdersService,Parameters){return ocOrdersService.List(Parameters)}],BuyerCompanies:["OrderCloudSDK",function(OrderCloudSDK){var options={page:1,pageSize:100};return OrderCloudSDK.Buyers.List(options)}]}})}OrdersConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(OrdersConfig)}(),function(){"use strict";function OrderCloudOrderDetailService($q,$uibModal,$exceptionHandler,OrderCloudSDK){function _getOrderDetails(orderID){function getBuyerCompany(data){OrderCloudSDK.Buyers.Get(data.FromCompanyID).then(function(buyer){data.FromCompany=buyer,deferred.resolve(data)})["catch"](function(ex){$exceptionHandler(ex),deferred.resolve(data)})}var deferred=$q.defer();return OrderCloudSDK.Orders.Get("incoming",orderID).then(function(data){getBuyerCompany(data)}),deferred.promise}function _editLineItem(buyerID,orderID,lineItem){return $uibModal.open({templateUrl:"orderManagement/order/templates/orderDetail.lineItemEdit.modal.html",controller:"OrderLineItemEditModalCtrl",controllerAs:"orderLineItemEditModal",size:"md",resolve:{OrderID:function(){return orderID},LineItem:function(){return lineItem},Product:function(){return OrderCloudSDK.Products.Get(lineItem.ProductID).then(function(data){return data})["catch"](function(){return null})}}}).result}var service={GetOrderDetails:_getOrderDetails,EditLineItem:_editLineItem};return service}OrderCloudOrderDetailService.$inject=["$q","$uibModal","$exceptionHandler","OrderCloudSDK"],angular.module("orderCloud").factory("ocOrderDetailService",OrderCloudOrderDetailService)}(),function(){"use strict";function OrderLineItemEditModalController($exceptionHandler,$uibModalInstance,OrderCloudSDK,OrderID,LineItem,Product){var vm=this;vm.lineItem=angular.copy(LineItem),vm.lineItemID=LineItem.ID,vm.lineItem.DateNeeded&&(vm.lineItem.DateNeeded=new Date(vm.lineItem.DateNeeded)),vm.product=Product,vm.updateValidity=function(){vm.form.ID.$error.UnavailableID&&vm.form.ID.$setValidity("UnavailableID",!0)},vm.submit=function(){var partial=_.pick(vm.lineItem,["ID","Quantity","UnitPrice","DateNeeded"]);partial.DateNeeded&&(partial.DateNeeded=new Date(partial.DateNeeded)),vm.loading=OrderCloudSDK.LineItems.Patch("incoming",OrderID,LineItem.ID,partial).then(function(data){data.OriginalID=LineItem.ID,$uibModalInstance.close(data)})["catch"](function(ex){409==ex.status?(vm.form.ID.$setValidity("UnavailableID",!1),vm.form.ID.$$element[0].focus()):$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}OrderLineItemEditModalController.$inject=["$exceptionHandler","$uibModalInstance","OrderCloudSDK","OrderID","LineItem","Product"],angular.module("orderCloud").controller("OrderLineItemEditModalCtrl",OrderLineItemEditModalController)}(),function(){"use strict";function OrderController($stateParams,toastr,OrderCloudSDK,ocOrderDetailService,ocNavItems,SelectedOrder,OrderLineItems){var vm=this;vm.order=SelectedOrder,vm.lineItems=OrderLineItems,vm.navigationItems=ocNavItems.Order(),vm.pageChanged=function(){var options={page:vm.lineItems.Meta.Page,pageSize:vm.lineItems.Meta.PageSize};OrderCloudSDK.LineItems.List("incoming",$stateParams.orderid,options).then(function(data){vm.lineItems=data})},vm.loadMore=function(){var options={page:vm.lineItems.Meta.Page++,pageSize:vm.lineItems.Meta.PageSize};OrderCloudSDK.LineItems.List("incoming",$stateParams.orderid,options).then(function(data){vm.lineItems.Items=vm.lineItems.Items.concat(data.Items),vm.lineItem.Meta=data.Meta})},vm.editLineItem=function(lineItem){ocOrderDetailService.EditLineItem(vm.order.FromCompanyID,vm.order.ID,lineItem).then(function(data){var itemIndex=0;angular.forEach(vm.lineItems.Items,function(item,index){item.ID==data.OriginalID&&(itemIndex=index)}),vm.lineItems.Items[itemIndex]=data,OrderCloudSDK.Orders.Get("incoming",$stateParams.orderid).then(function(orderData){vm.order=angular.extend(vm.order,_.pick(orderData,["Subtotal","TaxCost","ShippingCost","Total"])),toastr.success("Line item updated.")})})}}OrderController.$inject=["$stateParams","toastr","OrderCloudSDK","ocOrderDetailService","ocNavItems","SelectedOrder","OrderLineItems"],angular.module("orderCloud").controller("OrderCtrl",OrderController)}(),function(){"use strict";function OrderConfig($stateProvider){$stateProvider.state("orderDetail",{parent:"base",url:"/order/:buyerid/:orderid",templateUrl:"orderManagement/order/templates/orderDetail.html",controller:"OrderCtrl",controllerAs:"orderDetail",data:{pageTitle:"Order"},resolve:{SelectedOrder:["$stateParams","ocOrderDetailService",function($stateParams,ocOrderDetailService){return ocOrderDetailService.GetOrderDetails($stateParams.orderid)}],OrderLineItems:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){var options={
page:1};return OrderCloudSDK.LineItems.List("incoming",$stateParams.orderid,options)}]}})}OrderConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(OrderConfig)}(),function(){"use strict";function OrderCloudApprovalsService($q,OrderCloudSDK,ocRoles){function _list(orderID,buyerID,page,pageSize){function getApprovingUserGroups(data){var userGroupIDs=_.pluck(data.Items,"ApprovingGroupID"),options={page:1,pageSize:100,filters:{ID:userGroupIDs.join("|")}};OrderCloudSDK.UserGroups.List(buyerID,options).then(function(userGroupData){angular.forEach(data.Items,function(approval){approval.ApprovingUserGroup=_.findWhere(userGroupData.Items,{ID:approval.ApprovingGroupID})}),getApprovalRules(data)})["catch"](function(){getApprovalRules(data)})}function getApprovalRules(data){var approvalRuleIDs=_.pluck(data.Items,"ApprovalRuleID"),options={page:1,pageSize:100,filters:{ID:approvalRuleIDs.join("|")}};OrderCloudSDK.ApprovalRules.List(buyerID,options).then(function(approvalRuleData){angular.forEach(data.Items,function(approval){approval.ApprovalRule=_.findWhere(approvalRuleData.Items,{ID:approval.ApprovalRuleID})}),deferred.resolve(data)})["catch"](function(){deferred.resolve(data)})}var deferred=$q.defer(),options={page:page,pageSize:pageSize,sortBy:"Status"};return OrderCloudSDK.Orders.ListApprovals("incoming",orderID,options).then(function(data){data.Items.length?ocRoles.UserIsAuthorized(["UserGroupReader","UserGroupAdmin"],!0)?getApprovingUserGroups(data):getApprovalRules(data):deferred.resolve(data)}),deferred.promise}var service={List:_list};return service}OrderCloudApprovalsService.$inject=["$q","OrderCloudSDK","ocRoles"],angular.module("orderCloud").factory("ocOrderApprovalsService",OrderCloudApprovalsService)}(),function(){"use strict";function OrderApprovalsController(OrderApprovals){var vm=this;vm.list=OrderApprovals,vm.pageChanged=function(){ocOrderApprovalsService.List($stateParams.orderid,$stateParams.buyerid,vm.list.Meta.Page,vm.list.Meta.PageSize).then(function(data){vm.list=data})},vm.loadMore=function(){vm.list.Meta.Page++,ocOrderApprovalsService.List($stateParams.orderid,$stateParams.buyerid,vm.list.Meta.Page,vm.list.Meta.PageSize).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}OrderApprovalsController.$inject=["OrderApprovals"],angular.module("orderCloud").controller("OrderApprovalsCtrl",OrderApprovalsController)}(),function(){"use strict";function OrderApprovalsConfig($stateProvider){$stateProvider.state("orderDetail.approvals",{url:"/approvals",templateUrl:"orderManagement/approvals/templates/orderApprovals.html",controller:"OrderApprovalsCtrl",controllerAs:"orderApprovals",data:{pageTitle:"Order Approvals"},resolve:{OrderApprovals:["$stateParams","ocOrderApprovalsService",function($stateParams,ocOrderApprovalsService){return ocOrderApprovalsService.List($stateParams.orderid,$stateParams.buyerid,1,100)}]}})}OrderApprovalsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(OrderApprovalsConfig)}(),function(){"use strict";angular.module("orderCloud").factory("ocStateLoading",["$rootScope","$ocMedia","$exceptionHandler","defaultstate","$q",function($rootScope,$ocMedia,$exceptionHandler,defaultstate,$q){function _init(){$rootScope.$on("$stateChangeStart",function(e,toState,toParams,fromState){var toParent=toState.parent||toState.name.split(".")[0],fromParent=fromState.parent||fromState.name.split(".")[0];stateLoading[fromParent===toParent?toParent:"base"]=$q.defer()}),$rootScope.$on("$stateChangeSuccess",function(){document.body.scrollTop=document.documentElement.scrollTop=0,_end()}),$rootScope.$on("$stateChangeError",function(event,toState,toParams,fromState,fromParams,error){toState.name==defaultstate&&event.preventDefault(),$exceptionHandler(error.data?error:{message:error}),_end()})}function _watch(key){return stateLoading[key]}function _end(){angular.forEach(stateLoading,function(val,key){stateLoading[key].promise&&!stateLoading[key].promise.$cgBusyFulfilled&&stateLoading[key].resolve()})}var stateLoading={},service={Init:_init,Watch:_watch};return service}])}(),function(){"use strict";function OrderCloudRolesService($window,$ocRoles,OrderCloudSDK){function base64Decode(string){var output=string.replace(/-/g,"+").replace(/_/g,"/");switch(output.length%4){case 0:break;case 2:output+="==";break;case 3:output+="=";break;default:return void console.warn("Illegal base64url string")}return $window.decodeURIComponent(escape($window.atob(output)))}function _set(token){if(token){var tokenParts=token.split(".");if(3!=tokenParts.length)return void console.warn("ocRoles","Token is not valid");var decodedToken=base64Decode(tokenParts[1]);if(!decodedToken)return void console.warn("ocRoles","Cannot decode token");var decodedTokenObject=JSON.parse(decodedToken);return roles=decodedTokenObject.role,"string"==typeof roles&&(roles=[roles]),roles||[]}}function _get(){return roles||_set(OrderCloudSDK.GetToken())}function _remove(){roles=null}function _userIsAuthorized(roleItems,any){function analyzeRoles(roles,hasAny){return hasAny?_.intersection(roles,userRoles).length>0:0===_.difference(roles,userRoles).length}var userRoles=_get();if(userRoles){if(userRoles.indexOf("FullAccess")>-1)return!0;var authorized=!1,roleGroups=$ocRoles.GetRoleGroups(),roles=[];return angular.forEach(roleItems,function(item){if(!authorized||!any)if(roleGroups[item]){var roleGroup=roleGroups[item];authorized=analyzeRoles(roleGroup.Roles,"Any"===roleGroup.Type)}else roles.push(item)}),authorized&&any?authorized:(authorized&&any||!roles.length||(authorized=analyzeRoles(roles,any)),authorized)}}var roles,service={Set:_set,Get:_get,Remove:_remove,UserIsAuthorized:_userIsAuthorized};return service}function OrderCloudRolesProvider(scope){var roleGroups={};return{$get:function(){return{GetRoleGroups:function(){return roleGroups}}},AddRoleGroup:function(roleGroup){if(!roleGroup.Name)throw"ocRoles: RoleGroup must have a Name value";if(scope.indexOf(roleGroup.Name)>-1)throw"ocRole: RoleGroup Name cannot match an OrderCloud role name: "+roleGroup.Name;if(!roleGroup.Roles||!roleGroup.Roles.length)throw"ocRoles: RoleGroup must have Roles";if(!angular.isArray(roleGroup.Roles))throw"ocRoles: RoleGroup Roles must be an array";if(!roleGroup.Type||-1==["All","Any"].indexOf(roleGroup.Type))throw"ocRoles: RoleGroup Type must be 'All' or 'Any'";roleGroups[roleGroup.Name]=roleGroup}}}OrderCloudRolesService.$inject=["$window","$ocRoles","OrderCloudSDK"],OrderCloudRolesProvider.$inject=["scope"],angular.module("orderCloud").factory("ocRoles",OrderCloudRolesService).provider("$ocRoles",OrderCloudRolesProvider)}(),function(){"use strict";function OrderCloudParametersService($filter){function _get(stateParams,suffix){var suffixParams,parameters=angular.copy(stateParams);return parameters.filters?parameters.filters=JSON.parse(parameters.filters):parameters.filters={},parameters.from?parameters.from=new Date(parameters.from):angular.noop(),parameters.to?parameters.to=new Date(parameters.to):angular.noop(),suffix&&(suffixParams={},angular.forEach(parameters,function(val,key){suffixParams[key.split(suffix)[0]]=val})),suffixParams||parameters}function _create(params,resetPage,suffix){var suffixParams,parameters=angular.copy(params);return resetPage?parameters.page=null:angular.noop(),parameters.filters&&(""==parameters.filters.orderType?delete parameters.filters.orderType:angular.noop(),""==parameters.filters.type?delete parameters.filters.type:angular.noop(),null==parameters.filters.status||""==parameters.filters.status?delete parameters.filters.status:angular.noop(),parameters.filters=JSON.stringify(parameters.filters),"{}"==parameters.filters?parameters.filters=null:angular.noop()),parameters.fromDate&&(parameters.fromDate=$filter("date")(parameters.fromDate,"MM-dd-yyyy")),parameters.toDate&&(parameters.toDate=$filter("date")(parameters.toDate,"MM-dd-yyyy")),suffix&&(suffixParams={},angular.forEach(parameters,function(val,key){suffixParams[key+suffix]=val})),suffixParams||parameters}var service={Get:_get,Create:_create};return service}OrderCloudParametersService.$inject=["$filter"],angular.module("orderCloud").factory("ocParameters",OrderCloudParametersService)}(),function(){"use strict";function OrderCloudNavItemsService(ocRoles){function _product(){var productNavItems=[{icon:"fa-cube",state:"product",name:"Product",roles:{Items:["ProductRoles"],Any:!1}},{icon:"fa-edit",state:"product.specs",name:"Specs",roles:{Items:["ProductRoles"],Any:!1}},{icon:"fa-truck",state:"product.shipping",name:"Shipping",roles:{Items:["ProductRoles"],Any:!1}},{icon:"fa-clipboard",state:"product.inventory",name:"Inventory",roles:{Items:["ProductRoles"],Any:!1}},{icon:"fa-dollar",state:"product.pricing",name:"Pricing",roles:{Items:["PriceScheduleRoles","ProductRoles","BuyerRoles","UserGroupRoles"],Any:!1}},{icon:"fa-th-large",state:"product.catalogs",name:"Categories",activeWhen:["product.catalogs","product.categories"],roles:{Items:["CatalogRoles","CategoryRoles"],Any:!1}}];return _filterNavItems(productNavItems)}function _catalog(){var catalogNavItems=[{icon:"fa-sitemap",state:"catalog",name:"Catalog",roles:{Items:["CatalogRoles"],Any:!1}},{icon:"fa-th-large",state:"categories",name:"Categories",activeWhen:["categories","categories.category","categories.category.products"],roles:{Items:["CategoryRoles"],Any:!1}},{icon:"fa-tags",state:"catalog.buyers",name:"Buyers",roles:{Items:["BuyerRoles","CatalogAdmin"],Any:!1}}];return _filterNavItems(catalogNavItems)}function _buyer(){var buyerNavItems=[{icon:"fa-cog",state:"buyer",name:"Settings",roles:{Items:["BuyerRoles","CatalogRoles"],Any:!1}},{icon:"fa-lock",state:"buyerPermissions",name:"Permissions",roles:{Items:["SetSecurityProfile"],Any:!1}},{icon:"fa-dollar",state:"buyerProducts",name:"Pricing",roles:{Items:["PriceScheduleRoles","ProductRoles"],Any:!1}},{icon:"fa-sitemap",state:"buyerCatalogs",name:"Categories",activeWhen:["buyerCatalogs","buyerCatalog"],roles:{Items:["CatalogRoles","CategoryRoles"],Any:!1}},{icon:"fa-user",state:"users",name:"Users",roles:{Items:["BuyerUserRoles"],Any:!1}},{icon:"fa-users",state:"userGroups",name:"User Groups",activeWhen:["userGroups","userGroup*"],roles:{Items:["UserGroupRoles"],Any:!1}},{icon:"fa-map-marker",state:"addresses",name:"Addresses",roles:{Items:["AddressRoles"],Any:!1}},{icon:"fa-credit-card",state:"creditCards",name:"Credit Cards",roles:{Items:["CreditCardRoles"],Any:!1}},{icon:"fa-money",state:"spendingAccounts",name:"Spending Accounts",roles:{Items:["SpendingAccountRoles"],Any:!1}},{icon:"fa-asterisk",state:"costCenters",name:"Cost Centers",roles:{Items:["CostCenterRoles"],Any:!1}},{icon:"fa-check-square-o",state:"approvalRules",name:"Approval Rules",roles:{Items:["ApprovalRuleRoles"],Any:!1}},{icon:"fa-bullhorn",state:"promotions",name:"Promotions",roles:{Items:["PromotionRoles"],Any:!1}}];return _filterNavItems(buyerNavItems)}function _order(){var orderNavItems=[{icon:"fa-file",state:"orderDetail",name:"Details",roles:{Items:["OrderRoles","BuyerRoles"],Any:!1}},{icon:"fa-dollar",state:"orderDetail.payments",name:"Payments",roles:{Items:["OrderRoles"],Any:!1}},{icon:"fa-truck",state:"orderDetail.shipments",name:"Shipments",activeWhen:["orderDetail.shipments","orderDetail.shipments.create"],roles:{Items:["ShipmentRoles"],Any:!1}},{icon:"fa-check-square-o",state:"orderDetail.approvals",name:"Approvals"}];return _filterNavItems(orderNavItems)}function _filterNavItems(navItems){return _.filter(navItems,function(navItem){return navItem.roles?ocRoles.UserIsAuthorized(navItem.roles.Items,navItem.roles.any):!0})}var service={Product:_product,Catalog:_catalog,Buyer:_buyer,Order:_order,Filter:_filterNavItems};return service}OrderCloudNavItemsService.$inject=["ocRoles"],angular.module("orderCloud").factory("ocNavItems",OrderCloudNavItemsService)}(),function(){"use strict";function MEDIA_CONSTANT(){return{sm:"(max-width: 600px)","gt-sm":"(min-width: 600px)",md:"(min-width: 600px) and (max-width: 960px)","gt-md":"(min-width: 960px)",lg:"(min-width: 960px) and (max-width: 1200px)","gt-lg":"(min-width: 1200px)"}}function MEDIA_PRIORITY_CONSTANT(){return["gt-lg","lg","gt-md","md","gt-sm","sm"]}function ocMediaFactory(MEDIA,MEDIA_PRIORITY,$rootScope,$window){function $ocMedia(query){var validated=queries[query];angular.isUndefined(validated)&&(validated=queries[query]=validate(query));var result=results[validated];return angular.isUndefined(result)&&(result=add(validated)),result}function validate(query){return MEDIA[query]||("("!==query.charAt(0)?"("+query+")":query)}function add(query){var result=mqls[query]=$window.matchMedia(query);return result.addListener(onQueryChange),results[result.media]=!!result.matches}function onQueryChange(query){$rootScope.$evalAsync(function(){results[query.media]=!!query.matches})}function getQuery(name){return mqls[name]}function getResponsiveAttribute(attrs,attrName){for(var i=0;i<MEDIA_PRIORITY.length;i++){var mediaName=MEDIA_PRIORITY[i];if(mqls[queries[mediaName]].matches){var normalizedName=getNormalizedName(attrs,attrName+"-"+mediaName);if(attrs[normalizedName])return attrs[normalizedName]}}return attrs[getNormalizedName(attrs,attrName)]}function watchResponsiveAttributes(attrNames,attrs,watchFn){var unwatchFns=[];return attrNames.forEach(function(attrName){var normalizedName=getNormalizedName(attrs,attrName);attrs[normalizedName]&&unwatchFns.push(attrs.$observe(normalizedName,angular.bind(void 0,watchFn,null)));for(var mediaName in MEDIA){if(normalizedName=getNormalizedName(attrs,attrName+"-"+mediaName),!attrs[normalizedName])return;unwatchFns.push(attrs.$observe(normalizedName,angular.bind(void 0,watchFn,mediaName)))}}),function(){unwatchFns.forEach(function(fn){fn()})}}function getNormalizedName(attrs,attrName){return normalizeCache[attrName]||(normalizeCache[attrName]=attrs.$normalize(attrName))}var queries={},mqls={},results={},normalizeCache={};return $ocMedia.getResponsiveAttribute=getResponsiveAttribute,$ocMedia.getQuery=getQuery,$ocMedia.watchResponsiveAttributes=watchResponsiveAttributes,$ocMedia}ocMediaFactory.$inject=["MEDIA","MEDIA_PRIORITY","$rootScope","$window"],angular.module("orderCloud").factory("$ocMedia",ocMediaFactory).constant("MEDIA",MEDIA_CONSTANT).constant("MEDIA_PRIORITY",MEDIA_PRIORITY_CONSTANT)}(),function(){"use strict";function OrderCloudGeography(){var _countries=[{label:"United States of America",value:"US"},{label:"Afghanistan",value:"AF"},{label:"Åland Islands",value:"AX"},{label:"Albania",value:"AL"},{label:"Algeria",value:"DZ"},{label:"American Samoa",value:"AS"},{label:"Andorra",value:"AD"},{label:"Angola",value:"AO"},{label:"Anguilla",value:"AI"},{label:"Antarctica",value:"AQ"},{label:"Antigua and Barbuda",value:"AG"},{label:"Argentina",value:"AR"},{label:"Armenia",value:"AM"},{label:"Aruba",value:"AW"},{label:"Australia",value:"AU"},{label:"Austria",value:"AT"},{label:"Azerbaijan",value:"AZ"},{label:"Bahamas",value:"BS"},{label:"Bahrain",value:"BH"},{label:"Bangladesh",value:"BD"},{label:"Barbados",value:"BB"},{label:"Belarus",value:"BY"},{label:"Belgium",value:"BE"},{label:"Belize",value:"BZ"},{label:"Benin",value:"BJ"},{label:"Bermuda",value:"BM"},{label:"Bhutan",value:"BT"},{label:"Bolivia",value:"BO"},{label:"Bosnia and Herzegovina",value:"BA"},{label:"Botswana",value:"BW"},{label:"Bouvet Island",value:"BV"},{label:"Brazil",value:"BR"},{label:"British Indian Ocean Territory",value:"IO"},{label:"Brunei Darussalam",value:"BN"},{label:"Bulgaria",value:"BG"},{label:"Burkina Faso",value:"BF"},{label:"Burundi",value:"BI"},{label:"Cambodia",value:"KH"},{label:"Cameroon",value:"CM"},{label:"Canada",value:"CA"},{label:"Cape Verde",value:"CV"},{label:"Cayman Islands",value:"KY"},{label:"Central African Republic",value:"CF"},{label:"Chad",value:"TD"},{label:"Chile",value:"CL"},{label:"China",value:"CN"},{label:"Christmas Island Australia",value:"CX"},{label:"Cocos Keeling Islands",value:"CC"},{label:"Colombia",value:"CO"},{label:"Comoros",value:"KM"},{label:"Congo",value:"CG"},{label:"Congo, D.R.",value:"CD"},{label:"Cook Islands",value:"CK"},{label:"Costa Rica",value:"CR"},{label:"Cote D'Ivoire Ivory Coast",value:"CI"},{label:"Croatia Hrvatska",value:"HR"},{label:"Cuba",value:"CU"},{label:"Cyprus",value:"CY"},{label:"Czech Republic",value:"CZ"},{label:"Denmark",value:"DK"},{label:"Djibouti",value:"DJ"},{label:"Dominica",value:"DM"},{label:"Dominican Republic",value:"DO"},{label:"Ecuador",value:"EC"},{label:"Egypt",value:"EG"},{label:"El Salvador",value:"SV"},{label:"Equatorial Guinea",value:"GQ"},{label:"Eritrea",value:"ER"},{label:"Estonia",value:"EE"},{label:"Ethiopia",value:"ET"},{label:"Faeroe Islands",value:"FO"},{label:"Falkland Islands Malvinas",value:"FK"},{label:"Fiji",value:"FJ"},{label:"Finland",value:"FI"},{label:"France",value:"FR"},{label:"France, Metropolitan",value:"FX"},{label:"French Guiana",value:"GF"},{label:"French Polynesia",value:"PF"},{label:"French Southern Territories",value:"TF"},{label:"Gabon",value:"GA"},{label:"Gambia",value:"GM"},{label:"Georgia",value:"GE"},{label:"Germany",value:"DE"},{label:"Ghana",value:"GH"},{label:"Gibraltar",value:"GI"},{label:"Greece",value:"GR"},{label:"Greenland",value:"GL"},{label:"Grenada",value:"GD"},{label:"Guadeloupe",value:"GP"},{label:"Guam",value:"GU"},{label:"Guatemala",value:"GT"},{label:"Guinea",value:"GN"},{label:"Guinea Bissau",value:"GW"},{label:"Guyana",value:"GY"},{label:"Haiti",value:"HT"},{label:"Heard and McDonald Is.",value:"HM"},{label:"Honduras",value:"HN"},{label:"Hong Kong",value:"HK"},{label:"Hungary",value:"HU"},{label:"Iceland",value:"IS"},{label:"India",value:"IN"},{label:"Indonesia",value:"ID"},{label:"Iran",value:"IR"},{label:"Iraq",value:"IQ"},{label:"Isle of Man",value:"IM"},{label:"Ireland",value:"IE"},{label:"Israel",value:"IL"},{label:"Italy",value:"IT"},{label:"Jamaica",value:"JM"},{label:"Japan",value:"JP"},{label:"Jersey",value:"JE"},{label:"Jordan",value:"JO"},{label:"Kazakhstan",value:"KZ"},{label:"Kenya",value:"KE"},{label:"Kiribati",value:"KI"},{label:"Korea North",value:"KP"},{label:"Korea South",value:"KR"},{label:"Kuwait",value:"KW"},{label:"Kyrgyzstan",value:"KG"},{label:"Lao P.Dem.R.",value:"LA"},{label:"Latvia",value:"LV"},{label:"Lebanon",value:"LB"},{label:"Lesotho",value:"LS"},{label:"Liberia",value:"LR"},{label:"Libyan Arab Jamahiriya",value:"LY"},{label:"Liechtenstein",value:"LI"},{label:"Lithuania",value:"LT"},{label:"Luxembourg",value:"LU"},{label:"Macau",value:"MO"},{label:"Macedonia",value:"MK"},{label:"Madagascar",value:"MG"},{label:"Malawi",value:"MW"},{label:"Malaysia",value:"MY"},{label:"Maldives",value:"MV"},{label:"Mali",value:"ML"},{label:"Malta",value:"MT"},{label:"Marshall Islands",value:"MH"},{label:"Martinique",value:"MQ"},{label:"Mauritania",value:"MR"},{label:"Mauritius",value:"MU"},{label:"Mayotte",value:"YT"},{label:"Mexico",value:"MX"},{label:"Micronesia",value:"FM"},{label:"Moldova",value:"MD"},{label:"Monaco",value:"MC"},{label:"Mongolia",value:"MN"},{label:"Montenegro",value:"ME"},{label:"Montserrat",value:"MS"},{label:"Morocco",value:"MA"},{label:"Mozambique",value:"MZ"},{label:"Myanmar",value:"MM"},{label:"Namibia",value:"NA"},{label:"Nauru",value:"NR"},{label:"Nepal",value:"NP"},{label:"Netherlands",value:"NL"},{label:"Netherlands Antilles",value:"AN"},{label:"New Caledonia",value:"NC"},{label:"New Zealand",value:"NZ"},{label:"Nicaragua",value:"NI"},{label:"Niger",value:"NE"},{label:"Nigeria",value:"NG"},{label:"Niue",value:"NU"},{label:"Norfolk Island",value:"NF"},{label:"Northern Mariana Islands",value:"MP"},{label:"Norway",value:"NO"},{label:"Oman",value:"OM"},{label:"Pakistan",value:"PK"},{label:"Palau",value:"PW"},{label:"Palestinian Territory, Occupied",value:"PS"},{label:"Panama",value:"PA"},{label:"Papua New Guinea",value:"PG"},{label:"Paraguay",value:"PY"},{label:"Peru",value:"PE"},{label:"Philippines",value:"PH"},{label:"Pitcairn",value:"PN"},{label:"Poland",value:"PL"},{label:"Portugal",value:"PT"},{label:"Puerto Rico",value:"PR"},{label:"Qatar",value:"QA"},{label:"Reunion",value:"RE"},{label:"Romania",value:"RO"},{label:"Russian Federation",value:"RU"},{label:"Rwanda",value:"RW"},{label:"Saint Helena",value:"SH"},{label:"Saint Kitts and Nevis",value:"KN"},{label:"Saint Lucia",value:"LC"},{label:"Saint Pierre and Miquelon",value:"PM"},{label:"Saint Vincent and the Grenadines",value:"VC"},{label:"Samoa",value:"WS"},{label:"San Marino",value:"SM"},{label:"Sao Tome and Principe",value:"ST"},{label:"Saudi Arabia",value:"SA"},{label:"Senegal",value:"SN"},{label:"Serbia",value:"RS"},{label:"Seychelles",value:"SC"},{label:"Sierra Leone",value:"SL"},{label:"Singapore",value:"SG"},{label:"Slovakia",value:"SK"},{label:"Slovenia",value:"SI"},{label:"Solomon Islands",value:"SB"},{label:"Somalia",value:"SO"},{label:"South Africa",value:"ZA"},{label:"S. Georgia &amp; S. Sandwich Is.",value:"GS"},{label:"Spain",value:"ES"},{label:"Sri Lanka",value:"LK"},{label:"Sudan",value:"SD"},{label:"Suriname",value:"SR"},{label:"Svalbard &amp; Jan Mayen Is.",value:"SJ"},{label:"Swaziland",value:"SZ"},{label:"Sweden",value:"SE"},{label:"Switzerland",value:"CH"},{label:"Syrian Arab Rep.",value:"SY"},{label:"Taiwan",value:"TW"},{label:"Tajikistan",value:"TJ"},{label:"Tanzania",value:"TZ"},{label:"Thailand",value:"TH"},{label:"Timor-Leste",value:"TG"},{label:"Togo",value:"TG"},{label:"Tokelau",value:"TK"},{label:"Tonga",value:"TO"},{label:"Trinidad and Tobago",value:"TT"},{label:"Tunisia",value:"TN"},{label:"Turkey",value:"TR"},{label:"Turkmenistan",value:"TM"},{label:"Turks and Caicos Islands",value:"TC"},{label:"Tuvalu",value:"TU"},{label:"Uganda",value:"UG"},{label:"Ukraine",value:"UA"},{label:"United Kingdom",value:"GB"},{label:"United Arab Emirates",value:"AE"},{label:"US Minor Outlying Is.",value:"UM"},{label:"Uruguay",value:"UY"},{label:"Uzbekistan",value:"UZ"},{label:"Vanuatu",value:"VU"},{label:"Vatican City State",value:"VC"},{label:"Venezuela",value:"VE"},{label:"Viet Nam",value:"VN"},{label:"Virgin Islands British",value:"VG"},{label:"Virgin Islands US",value:"VI"},{label:"Wallis and Futuna Islnds",value:"WF"},{label:"Western Sahara",value:"EH"},{label:"Yemen",value:"YE"},{label:"Yugoslavia",value:"YU"},{label:"Zambia",value:"ZM"},{label:"Zimbabwe",value:"ZW"}],_states=[{label:"Alabama",value:"AL",country:"US"},{label:"Alaska",value:"AK",country:"US"},{label:"Arizona",value:"AZ",country:"US"},{label:"Arkansas",value:"AR",country:"US"},{label:"California",value:"CA",country:"US"},{label:"Colorado",value:"CO",country:"US"},{label:"Connecticut",value:"CT",country:"US"},{label:"Delaware",value:"DE",country:"US"},{label:"District of Columbia",value:"DC",country:"US"},{label:"Florida",value:"FL",country:"US"},{label:"Georgia",value:"GA",country:"US"},{label:"Hawaii",value:"HI",country:"US"},{label:"Idaho",value:"ID",country:"US"},{label:"Illinois",value:"IL",country:"US"},{label:"Indiana",value:"IN",country:"US"},{label:"Iowa",value:"IA",country:"US"},{label:"Kansas",value:"KS",country:"US"},{label:"Kentucky",value:"KY",country:"US"},{label:"Louisiana",value:"LA",country:"US"},{label:"Maine",value:"ME",country:"US"},{label:"Maryland",value:"MD",country:"US"},{label:"Massachusetts",value:"MA",country:"US"},{label:"Michigan",value:"MI",country:"US"},{label:"Minnesota",value:"MN",country:"US"},{label:"Mississippi",value:"MS",country:"US"},{label:"Missouri",value:"MO",country:"US"},{label:"Montana",value:"MT",country:"US"},{label:"Nebraska",value:"NE",country:"US"},{label:"Nevada",value:"NV",country:"US"},{label:"New Hampshire",value:"NH",country:"US"},{label:"New Jersey",value:"NJ",country:"US"},{label:"New Mexico",value:"NM",country:"US"},{label:"New York",value:"NY",country:"US"},{label:"North Carolina",value:"NC",country:"US"},{label:"North Dakota",value:"ND",country:"US"},{label:"Ohio",value:"OH",country:"US"},{label:"Oklahoma",value:"OK",country:"US"},{label:"Oregon",value:"OR",country:"US"},{label:"Pennsylvania",value:"PA",country:"US"},{label:"Rhode Island",value:"RI",country:"US"},{label:"South Carolina",value:"SC",country:"US"},{label:"South Dakota",value:"SD",country:"US"},{label:"Tennessee",value:"TN",country:"US"},{label:"Texas",value:"TX",country:"US"},{label:"Utah",value:"UT",country:"US"},{label:"Vermont",value:"VT",country:"US"},{label:"Virginia",value:"VA",country:"US"},{label:"Washington",value:"WA",country:"US"},{label:"West Virginia",value:"WV",country:"US"},{label:"Wisconsin",value:"WI",country:"US"},{label:"Wyoming",value:"WY",country:"US"},{label:"Armed Forces Americas (AA)",value:"AA",country:"US"},{label:"Armed Forces Africa/Canada/Europe/Middle East (AE)",value:"AE",country:"US"},{label:"Armed Forces Pacific (AP)",value:"AP",country:"US"},{label:"American Samoa",value:"AS",country:"US"},{label:"Federated States of Micronesia",value:"FM",country:"US"},{label:"Guam",value:"GU",country:"US"},{label:"Marshall Islands",value:"MH",country:"US"},{label:"Northern Mariana Islands",value:"MP",country:"US"},{label:"Palau",value:"PW",country:"US"},{label:"Puerto Rico",value:"PR",country:"US"},{label:"Virgin Islands",value:"VI",country:"US"},{label:"Drenthe",value:"Drenthe",country:"NL"},{label:"Flevoland",value:"Flevoland",country:"NL"},{label:"Friesland",value:"Friesland",country:"NL"},{label:"Gelderland",value:"Gelderland",country:"NL"},{label:"Groningen",value:"Groningen",country:"NL"},{label:"Limburg",value:"Limburg",country:"NL"},{label:"Noord-Brabant",value:"Noord-Brabant",country:"NL"},{label:"Noord-Holland",value:"Noord-Holland",country:"NL"},{label:"Overijssel",value:"Overijssel",country:"NL"},{label:"Utrecht",value:"Utrecht",country:"NL"},{label:"Zeeland",value:"Zeeland",country:"NL"},{label:"Zuid-Holland",value:"Zuid-Holland",country:"NL"},{label:"Alberta",value:"AB",country:"CA"},{label:"British Columbia",value:"BC",country:"CA"},{label:"Manitoba",value:"MB",country:"CA"},{label:"New Brunswick",value:"NB",country:"CA"},{label:"Newfoundland and Labrador",value:"NL",country:"CA"},{label:"Northwest Territories",value:"NT",country:"CA"},{label:"Nova Scotia",value:"NS",country:"CA"},{label:"Nunavut",value:"NU",country:"CA"},{label:"Ontario",value:"ON",country:"CA"},{label:"Prince Edward Island",value:"PE",country:"CA"},{label:"Quebec",value:"QC",country:"CA"},{label:"Saskatchewan",value:"SK",country:"CA"},{label:"Yukon",value:"YT",country:"CA"}];return{Countries:_countries,States:_states}}angular.module("orderCloud").factory("ocGeography",OrderCloudGeography)}(),function(){"use strict";function OrderCloudFilesService($q){function randomString(){for(var chars="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",string_length=15,randomstring="",i=0;string_length>i;i++){var rnum=Math.floor(Math.random()*chars.length);randomstring+=chars.substring(rnum,rnum+1)}return randomstring}function _get(fileKey){var deferred=$q.defer(),s3=new AWS.S3,params={Bucket:"marketplace-application-test",Key:fileKey};return s3.getObject(params,function(err,data){err?console.log(err):console.log(data),deferred.resolve(data)}),deferred.promise}function _upload(file){var deferred=$q.defer(),s3=new AWS.S3,params={Bucket:"marketplace-application-test",Key:randomString(),ContentType:file.type,Body:file};return s3.upload(params,function(err,data){err?console.log(err):console.log(data),deferred.resolve(data)}),deferred.promise}function _delete(fileKey){var deferred=$q.defer(),s3=new AWS.S3,params={Bucket:"marketplace-application-test",Key:fileKey};return s3.deleteObject(params,function(err,data){err?console.log(err):console.log(data),deferred.resolve(data)}),deferred.promise}var service={Get:_get,Upload:_upload,Delete:_delete};return AWS.config.region="us-west-2",AWS.config.update({accessKeyId:"AKIAJDDM5ZWWOIH4AZZQ",secretAccessKey:"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"}),service}OrderCloudFilesService.$inject=["$q"],angular.module("orderCloud").factory("ocFilesService",OrderCloudFilesService)}(),function(){"use strict";function OrderCloudFileReader($q){function onLoad(reader,deferred,scope){return function(){scope.$apply(function(){deferred.resolve(reader)})}}function onError(reader,deferred,scope){return function(){scope.$apply(function(){deferred.reject(reader)})}}function onProgress(reader,scope){return function(event){scope.$broadcast("fileProgress",{total:event.total,loaded:event.loaded})}}function getReader(deferred,scope){var reader=new FileReader;return reader.onload=onLoad(reader,deferred,scope),reader.onerror=onError(reader,deferred,scope),reader.onprogress=onProgress(reader,scope),reader}function _readAsDataURL(file,scope){var deferred=$q.defer(),reader=getReader(deferred,scope);return reader.readAsDataURL(file),deferred.promise}var service={ReadAsDataUrl:_readAsDataURL};return service}OrderCloudFileReader.$inject=["$q"],angular.module("orderCloud").factory("ocFileReader",OrderCloudFileReader)}(),function(){"use strict";function CreditCardUtility(){function convertYearToString(year){return Year=year.toString().substring(2,4)}function _ccExpireYears(){var today=new Date;today=today.getFullYear();for(var x=today;today+21>x;x++)creditCardUtility.ExpirationYears.push(x);return creditCardUtility.ExpirationYears}var ExpirationDate,Year,creditCardUtility={ExpirationMonths:[{number:1,string:"01"},{number:2,string:"02"},{number:3,string:"03"},{number:4,string:"04"},{number:5,string:"05"},{number:6,string:"06"},{number:7,string:"07"},{number:8,string:"08"},{number:9,string:"09"},{number:10,string:"10"},{number:11,string:"11"},{number:12,string:"12"}],ExpirationYears:[],isLeapYear:function(year){return year%4==0&&year%100!=0||year%400==0},CreditCardTypes:["MasterCard","American Express","Discover","Visa"],ExpirationDateFormat:function(month,year){return ExpirationDate=month.concat(convertYearToString(year))}};return _ccExpireYears(),creditCardUtility}angular.module("orderCloud").factory("ocCreditCardUtility",CreditCardUtility)}(),function(){"use strict";function OrderCloudConfirmService($uibModal){function _confirm(options){return $uibModal.open({backdrop:"static",templateUrl:"common/services/oc-confirm/oc-confirm.modal.html",controller:"ConfirmModalCtrl",controllerAs:"confirmModal",size:options.size||"confirm",resolve:{ConfirmOptions:function(){return options}}}).result}var service={Confirm:_confirm};return service}function ConfirmModalController($uibModalInstance,ConfirmOptions){var vm=this;vm.message=ConfirmOptions.message,vm.confirmText=ConfirmOptions.confirmText,vm.cancelText=ConfirmOptions.cancelText,vm.type=ConfirmOptions.type,vm.confirm=function(){$uibModalInstance.close()},vm.cancel=function(){$uibModalInstance.dismiss()}}OrderCloudConfirmService.$inject=["$uibModal"],ConfirmModalController.$inject=["$uibModalInstance","ConfirmOptions"],angular.module("orderCloud").factory("ocConfirm",OrderCloudConfirmService).controller("ConfirmModalCtrl",ConfirmModalController)}(),function(){"use strict";function AuthorizeNet($q,$resource,OrderCloudSDK,apiurl,ocCreditCardUtility){function _createCreateCard(creditCard,buyerID){var ExpirationDate=ocCreditCardUtility.ExpirationDateFormat(creditCard.ExpirationMonth,creditCard.ExpirationYear);return _makeApiCall("POST",{BuyerID:buyerID,TransactionType:"createCreditCard",CardDetails:{CreditCardID:creditCard.ID,CardholderName:creditCard.CardholderName,CardType:creditCard.CardType,CardNumber:creditCard.CardNumber,ExpirationDate:ExpirationDate,CardCode:creditCard.CardCode,Shared:creditCard.Shared}})}function _updateCreditCard(creditCard,buyerID){var ExpirationDate=ocCreditCardUtility.ExpirationDateFormat(creditCard.ExpirationMonth,creditCard.ExpirationYear);return _makeApiCall("POST",{BuyerID:buyerID,TransactionType:"updateCreditCard",CardDetails:{UpdatedCreditCardID:creditCard.UpdatedCreditCardID,CreditCardID:creditCard.ID,CardholderName:creditCard.CardholderName,CardType:creditCard.CardType,CardNumber:"XXXX"+creditCard.PartialAccountNumber,ExpirationDate:ExpirationDate,Shared:creditCard.Shared}})}function _deleteCreditCard(creditCard,buyerID){return _makeApiCall("POST",{
BuyerID:buyerID,TransactionType:"deleteCreditCard",CardDetails:{CreditCardID:creditCard.ID,Shared:creditCard.Shared}})}function _makeApiCall(method,requestBody){var apiUrl=apiurl+"/v1/integrationproxy/authorizenet",d=$q.defer();return $resource(apiUrl,null,{callApi:{method:method,headers:{Authorization:"Bearer "+OrderCloudSDK.GetToken()}}}).callApi(requestBody).$promise.then(function(data){d.resolve(data.ResponseBody.Result?data.ResponseBody.Result:data.ResponseBody)})["catch"](function(ex){d.reject(ex)}),d.promise}var service={CreateCreditCard:_createCreateCard,UpdateCreditCard:_updateCreditCard,DeleteCreditCard:_deleteCreditCard};return service}AuthorizeNet.$inject=["$q","$resource","OrderCloudSDK","apiurl","ocCreditCardUtility"],angular.module("orderCloud").factory("ocAuthNet",AuthorizeNet)}(),function(){"use strict";function ocCachedList(){return function(items,page){if(items&&page){var results=[];return angular.forEach(items,function(item){item.MetaPage&&item.MetaPage==page&&results.push(item)}),results}}}angular.module("orderCloud").filter("ocCachedList",ocCachedList)}(),function(){"use strict";function AddressFilter(){return function(address,option){if(!address)return null;if("full"===option){var result=[];return address.AddressName&&result.push("<b>"+address.AddressName+"</b>"),(address.FirstName||address.LastName)&&result.push(address.FirstName&&!address.LastName?address.FirstName:!address.FirstName&&address.LastName?address.LastName:address.FirstName+" "+address.LastName),address.CompanyName&&result.push(address.CompanyName),result.push(address.Street1),address.Street2&&result.push(address.Street2),result.push(address.City+", "+address.State+" "+address.Zip),address.Phone&&result.push(address.Phone),result.join("<br/>")}return"fullOneLine"==option?address.Street1+(address.Street2?", "+address.Street2:"")+" "+address.City+", "+address.State+" "+address.Zip:address.Street1+(address.Street2?", "+address.Street2:"")}}angular.module("orderCloud").filter("address",AddressFilter)}(),function(){"use strict";function humanize(){return function(string){return string?string.replace(/([A-Z])/g," $1").replace(/^./,function(str){return str.toUpperCase()}).trim():void 0}}angular.module("orderCloud").filter("humanize",humanize)}(),function(){"use strict";function faCreditCard(){return function(type){var result="fa-credit-card-alt";if(!type)return result;switch(type.toLowerCase()){case"visa":result="fa-cc-visa";break;case"mastercard":result="fa-cc-mastercard";break;case"american express":result="fa-cc-amex";break;case"diners club":result="fa-cc-diners-club";break;case"discover":result="fa-cc-discover";break;case"jcb":result="fa-cc-jcb";break;default:result="fa-credit-card-alt"}return result}}angular.module("orderCloud").filter("faCreditCard",faCreditCard)}(),function(){"use strict";angular.module("orderCloud").directive("ocResponsiveTabs",["$state","$window",function($state,$window){var directive={scope:{navItems:"="},templateUrl:"common/directives/oc-responsive-tabs/oc-responsive-tabs.html",controller:function($scope,$element){function evaluateVisibleTabs(applyScope){var parentWidth=$element[0].clientWidth,reservedWidth=tabs[tabs.length-1],previousHiddenCount=_.filter($scope.navItems,{dropdown:!0}).length;angular.forEach($scope.navItems,function(item,$index){reservedWidth+=tabs[$index],item.dropdown=reservedWidth>=parentWidth}),applyScope&&previousHiddenCount!==_.filter($scope.navItems,{dropdown:!0}).length&&$scope.$apply()}$scope.isActive=function(navItem){function checkNavItem(item){if(!isActive)if(item.activeWhen)_.each(item.activeWhen,checkNavItem);else if(item.state)isActive=$state.is(item.state);else{var splitItem=item.split("*");isActive=$state[splitItem.length>1?"includes":"is"](splitItem[0])}}var isActive=!1;if("more"===navItem){var dropdownItems=_.filter($scope.navItems,{dropdown:!0});_.each(dropdownItems,checkNavItem)}else"more"!==navItem&&checkNavItem(navItem);return isActive},this.$onInit=function(){_.each($scope.navItems,function(item){item.dropdown=!1})},this.$doCheck=function(){if(!$scope.isRendered){var tabElements=$element[0].children[0].children;tabElements[lastIndex]&&tabElements[lastIndex].clientWidth&&($scope.isRendered=!0)}},$scope.isRendered=!1;var lastIndex=$scope.navItems.length,tabs=[];$scope.$watch("isRendered",function(n){n&&(angular.forEach($element[0].children[0].children,function(tabEl){tabs.push(tabEl.clientWidth)}),evaluateVisibleTabs())}),angular.element($window).bind("resize",function(){return $scope.isRendered?evaluateVisibleTabs(!0):void 0})}};return directive}])}(),function(){"use strict";function prettySubmit(){return{restrict:"A",link:function(scope,element){var el=document.createElement("div");el.setAttribute("ongesturestart","return;");var isTouch="function"==typeof el.ongesturestart;isTouch&&($(element).attr("action","."),$(element).submit(function(event){event.preventDefault(),$(document.activeElement).blur()}))}}}angular.module("orderCloud").directive("prettySubmit",prettySubmit)}(),function(){"use strict";function OrderCloudReadonlyRoles($ocRoles,ocRoles){var directive={restrict:"A",controller:function($scope,$attrs,$element){function analyzeRoles(requiredRoles,any){ocRoles.UserIsAuthorized(requiredRoles,any)?$element.removeClass("oc-read-only"):(vm.Authorized=!1,$element.addClass("oc-read-only"))}var vm=this;vm.Authorized=!0;var attrValue=$attrs.ocReadonlyRoles,roleGroups=$ocRoles.GetRoleGroups();if(attrValue&&!/[^a-z]/i.test(attrValue))if(roleGroups[attrValue]){var roleGroup=roleGroups[attrValue];analyzeRoles(roleGroup.Roles,"Any"==roleGroup.Type)}else analyzeRoles([attrValue]);else if(attrValue.split(" || ").length>1)analyzeRoles(attrValue.split(" || "),!0);else{var value=JSON.parse($attrs.ocReadonlyRoles.replace(/'/g,'"'));angular.isArray(value)&&value.length&&"string"==typeof value[0]&&analyzeRoles(value)}}};return directive}function OrderCloudReadonlyRolesInput(){function link(scope,element,attr,ctrl){var ocReadonlyRolesCtrl=ctrl[0];if(ocReadonlyRolesCtrl){var authorized=ocReadonlyRolesCtrl.Authorized;authorized||("checkbox"==element.attr("type")||attr.uibDatepickerPopup?element.attr("disabled",!0):element.attr("readonly",!0))}}var directive={restrict:"E",priority:-1e3,require:["^?ocReadonlyRoles"],link:link};return directive}function OrderCloudReadonlyRolesTextArea(){function link(scope,element,attr,ctrl){var ocReadonlyRolesCtrl=ctrl[0];if(ocReadonlyRolesCtrl){var authorized=ocReadonlyRolesCtrl.Authorized;authorized||element.attr("readonly",!0)}}var directive={restrict:"E",priority:-1e3,require:["^?ocReadonlyRoles"],link:link};return directive}function OrderCloudReadonlyRolesSelect(){function link(scope,element,attr,ctrl){var ocReadonlyRolesCtrl=ctrl[0];if(ocReadonlyRolesCtrl){var authorized=ocReadonlyRolesCtrl.Authorized;authorized||element.attr("disabled",!0)}}var directive={restrict:"E",require:["^?ocReadonlyRoles"],link:link};return directive}function OrderCloudReadonlyRolesButton(){function link(scope,element,attr,ctrl){var ocReadonlyRolesCtrl=ctrl[0];if(ocReadonlyRolesCtrl){var authorized=ocReadonlyRolesCtrl.Authorized;authorized||element.attr("ng-disabled")||element.hasClass("close")||element.attr("disabled",!0)}}var directive={restrict:"E",priority:-1e3,require:["^?ocReadonlyRoles"],link:link};return directive}OrderCloudReadonlyRoles.$inject=["$ocRoles","ocRoles"],angular.module("orderCloud").directive("ocReadonlyRoles",OrderCloudReadonlyRoles).directive("input",OrderCloudReadonlyRolesInput).directive("textarea",OrderCloudReadonlyRolesTextArea).directive("select",OrderCloudReadonlyRolesSelect).directive("button",OrderCloudReadonlyRolesButton)}(),function(){"use strict";function OrderCloudIfRoles(ocRoles,$ocRoles){function link(scope,element,attr){function analyzeRoles(requiredRoles,any){ocRoles.UserIsAuthorized(requiredRoles,any)||removeElement()}function removeElement(){element.before("<!-- ocIfPermissions: "+attr.ocIfRoles+" -->"),element.remove()}var roleGroups=$ocRoles.GetRoleGroups(),ocIfRolesObj=scope.$eval(scope.ocIfRoles);if("object"==typeof ocIfRolesObj)analyzeRoles(ocIfRolesObj.Items,ocIfRolesObj.Any);else if(scope.ocIfRoles&&!/[^a-z]/i.test(scope.ocIfRoles))if(roleGroups[scope.ocIfRoles]){var roleGroup=roleGroups[scope.ocIfRoles];analyzeRoles(roleGroup.Roles,"Any"===roleGroup.Type)}else analyzeRoles([scope.ocIfRoles]);else scope.ocIfRoles.split(" || ").length>1?analyzeRoles(scope.ocIfRoles.split(" || "),!0):scope.$watch("ocIfRoles",function(value){angular.isArray(value)&&value.length&&"string"==typeof value[0]&&analyzeRoles(value)})}var directive={scope:{ocIfRoles:"@"},multiElement:!0,restrict:"A",priority:599,link:link};return directive}OrderCloudIfRoles.$inject=["ocRoles","$ocRoles"],angular.module("orderCloud").directive("ocIfRoles",OrderCloudIfRoles)}(),function(){"use strict";function ordercloudFileUpload($parse,ocFileReader,ocFilesService){function link(scope,element,attrs,formCtrl){function afterSelection(file,fileName){ocFilesService.Upload(file,fileName).then(function(fileData){scope.model.xp||(scope.model.xp={}),scope.model.xp.image={},scope.model.xp.image.URL=fileData.Location,scope.patch&&scope.patch({xp:scope.model.xp})})}function updateModel(event){switch(event.target.name){case"upload":if(null==event.target.files[0])return;var fileName=event.target.files[0].name,valid=!0;if((allowed.Extensions.length||allowed.Types.length)&&fileName){var ext=fileName.split(".").pop().toLowerCase();valid=-1!=allowed.Extensions.indexOf(ext)||allowed.Types.indexOf(event.target.files[0].type.split("/")[0])>-1}valid?(scope.invalidExtension=!1,scope.$apply(function(){ocFileReader.ReadAsDataUrl(event.target.files[0],scope).then(function(){afterSelection(event.target.files[0],fileName)}),file_input.assign(scope,event.target.files[0])})):scope.$apply(function(){scope.invalidExtension=!0;var input;event.target.files[0]=null,el.find("input").replaceWith(input=el.find("input").clone(!0)),scope.model.xp&&scope.model.xp.image&&(scope.model.xp.image=null)})}}var file_input=$parse("file"),el=element;scope.invalidExtension=!1,scope.upload=function(){$("#orderCloudUpload").click()},scope.remove=function(){scope.invalidExtension=!1,scope.model.xp&&scope.model.xp.image&&delete scope.model.xp.image};var allowed={Extensions:[],Types:[]};if(scope.extensions){var items=_.map(scope.extensions.split(","),function(ext){return ext.replace(/ /g,"").replace(/\./g,"").toLowerCase()});angular.forEach(items,function(item){item.indexOf("/")>-1?item.indexOf("*")>-1?allowed.Types.push(item.split("/")[0]):allowed.Extensions.push(item.split("/")[1]):allowed.Extensions.push(item)})}element.bind("change",updateModel)}var directive={scope:{model:"=",extensions:"@",invalidExtension:"@",patch:"&",uploadText:"="},restrict:"E",templateUrl:"common/directives/oc-file-upload/oc-file-upload.html",replace:!0,link:link};return directive}ordercloudFileUpload.$inject=["$parse","ocFileReader","ocFilesService"],angular.module("orderCloud").directive("ocFileUpload",ordercloudFileUpload)}(),function(){"use strict";function confirmpassword(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){if(ngModel){scope.$watch(attrs.ngModel,function(){validate()}),attrs.$observe("confirmpassword",function(val){validate()});var validate=function(){var val1=ngModel.$viewValue,val2=attrs.confirmpassword;val1&&val2&&val1!==val2?ngModel.$setValidity("confirmpassword",!1):ngModel.$setValidity("confirmpassword",!0)}}}}}angular.module("orderCloud").directive("confirmpassword",confirmpassword)}(),function(){"use strict";angular.module("orderCloud").config(["$urlMatcherFactoryProvider","$locationProvider","$urlRouterProvider","defaultstate","html5mode",function($urlMatcherFactoryProvider,$locationProvider,$urlRouterProvider,defaultstate,html5mode){$urlMatcherFactoryProvider.strictMode(!1),$locationProvider.html5Mode(html5mode),$urlRouterProvider.otherwise(function($injector){$injector.get("$state").go(defaultstate)})}])}(),function(){"use strict";function OrderCloudAngularSDKConfig(OrderCloudSDK,appname,apiurl,authurl){var cookiePrefix=appname.replace(/ /g,"_").toLowerCase(),apiVersion="v1";OrderCloudSDK.Config(cookiePrefix,apiurl+"/"+apiVersion,authurl)}OrderCloudAngularSDKConfig.$inject=["OrderCloudSDK","appname","apiurl","authurl"],angular.module("orderCloud").run(OrderCloudAngularSDKConfig)}(),function(){"use strict";angular.module("orderCloud").value("ocIsTouchDevice",!1).config(["$provide",function($provide){$provide.decorator("ocIsTouchDevice",function(){var el=document.createElement("div");return el.setAttribute("ongesturestart","return;"),"function"==typeof el.ongesturestart})}])}(),function(){"use strict";angular.module("orderCloud").config(["$ocRolesProvider",function($ocRolesProvider){var roleGroups=[{Name:"AddressRoles",Type:"Any",Roles:["AddressReader","AddressAdmin"]},{Name:"ApprovalRuleRoles",Type:"Any",Roles:["ApprovalRuleReader","ApprovalRuleAdmin"]},{Name:"BuyerRoles",Type:"Any",Roles:["BuyerReader","BuyerAdmin"]},{Name:"BuyerUserRoles",Type:"Any",Roles:["BuyerUserReader","BuyerUserAdmin"]},{Name:"CatalogRoles",Type:"Any",Roles:["CatalogReader","CatalogAdmin"]},{Name:"CategoryRoles",Type:"Any",Roles:["CategoryReader","CategoryAdmin"]},{Name:"CostCenterRoles",Type:"Any",Roles:["CostCenterReader","CostCenterAdmin"]},{Name:"CreditCardRoles",Type:"Any",Roles:["CreditCardReader","CreditCardAdmin"]},{Name:"OrderRoles",Type:"Any",Roles:["OrderReader","OrderAdmin"]},{Name:"PriceScheduleRoles",Type:"Any",Roles:["PriceScheduleReader","PriceScheduleAdmin"]},{Name:"PromotionRoles",Type:"Any",Roles:["PromotionReader","PromotionAdmin"]},{Name:"ProductRoles",Type:"Any",Roles:["ProductReader","ProductAdmin"]},{Name:"SellerUserGroupRoles",Type:"Any",Roles:["AdminUserGroupReader","AdminUserGroupAdmin"]},{Name:"SellerUserRoles",Type:"Any",Roles:["AdminUserReader","AdminUserAdmin"]},{Name:"ShipmentRoles",Type:"Any",Roles:["ShipmentReader","ShipmentAdmin"]},{Name:"SpendingAccountRoles",Type:"Any",Roles:["SpendingAccountReader","SpendingAccountAdmin"]},{Name:"SupplierRoles",Type:"Any",Roles:["SupplierReader","SupplierAdmin"]},{Name:"SupplierUserGroupRoles",Type:"Any",Roles:["SupplierUserGroupReader","SupplierUserGroupAdmin"]},{Name:"SupplierUserRoles",Type:"Any",Roles:["SupplierUserReader","SupplierUserAdmin"]},{Name:"UserGroupRoles",Type:"Any",Roles:["UserGroupReader","UserGroupAdmin"]}];angular.forEach(roleGroups,function(roleGroup){$ocRolesProvider.AddRoleGroup(roleGroup)})}])}(),function(){"use strict";angular.module("orderCloud").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$q","$injector",function($q,$injector){return{responseError:function(rejection){if(rejection.config.url.indexOf("ordercloud.io")>-1&&401==rejection.status){var currentState=$injector.get("$state").current.name;$injector.get("LoginService").RememberMe(currentState)}return rejection.config.url.indexOf("ordercloud.io")>-1&&403==rejection.status&&(rejection.data.Errors[0].Message="You do not have permission to do this."),$q.reject(rejection)}}}])}])}(),function(){"use strict";angular.module("orderCloud").config(["$qProvider","$provide",function($qProvider,$provide){function handler($delegate,$injector){return function(ex,cause){if(ex){$delegate(ex,cause);var message=ex.response&&ex.response.body&&ex.response.body.Errors&&ex.response.body.Errors.length?ex.response.body.Errors[0].Message:ex.message;$injector.get("toastr").error(message,"Error")}}}handler.$inject=["$delegate","$injector"],$provide.value("ocErrorMessages",{customPassword:"Password must be at least eight characters long and include at least one letter and one number",positiveInteger:"Please enter a positive integer",ID_Name:"Only Alphanumeric characters, hyphens and underscores are allowed",confirmpassword:"Your passwords do not match",noSpecialChars:"Only Alphanumeric characters are allowed",UnavailableID:"This ID is already in use.","User.UsernameMustBeUnique":"This username is already in use.",step:"Please enter a valid dollar amount.",priceBreakRequired:"At least one price break is required.",priceBreakExceedsMaxQuantity:"Must be less than the maximum quantity.",priceBreakQuantityConflict:"This quantity already has a price.",priceBreakStartingQuantity:"First price break must equal the minimum quantity.",priceBreakOtherQuantity:"Must be greater than the minimum quantity."}),$provide.decorator("$exceptionHandler",handler),$qProvider.errorOnUnhandledRejections(!1)}])}(),function(){"use strict";angular.module("orderCloud").config(["toastrConfig",function(toastrConfig){angular.extend(toastrConfig,{containerId:"toast-container",maxOpened:5,newestOnTop:!0,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!0,progressBar:!0,tapToClose:!0,target:"body",extendedTimeOut:1e3,timeOut:4e3,iconClasses:{error:"alert-danger",info:"alert-info",success:"alert-success",warning:"alert-warning"},toastClass:"alert alert-dismissable",closeButton:!0,closeHtml:'<button type="button" class="close hidden-xs" aria-label="Close"><span aria-hidden="true">&times;</span></button>'})}])}(),function(){"use strict";angular.module("orderCloud").config(["angularBusyDefaults",function(angularBusyDefaults){angular.extend(angularBusyDefaults,{templateUrl:"common/config/angular-busy/angular-busy.html",message:null,wrapperClass:"indicator-container"})}])}(),function(){"use strict";angular.module("orderCloud").config(["uibDatepickerConfig","uibDatepickerPopupConfig","$uibModalProvider",function(uibDatepickerConfig,uibDatepickerPopupConfig,$uibModalProvider){uibDatepickerConfig.showWeeks=!1,uibDatepickerPopupConfig.onOpenFocus=!1,uibDatepickerPopupConfig.showButtonBar=!1,$uibModalProvider.options.backdrop="static"}])}(),function(){"use strict";function UserGroupCatalogsController($exceptionHandler,$state,$stateParams,toastr,ocCatalog,OrderCloudSDK,ocParameters,Parameters,CatalogList,SelectedUserGroup){var vm=this;vm.list=CatalogList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.Catalogs.List(parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}UserGroupCatalogsController.$inject=["$exceptionHandler","$state","$stateParams","toastr","ocCatalog","OrderCloudSDK","ocParameters","Parameters","CatalogList","SelectedUserGroup"],angular.module("orderCloud").controller("UserGroupCatalogsCtrl",UserGroupCatalogsController)}(),function(){"use strict";function UserGroupCatalogsConfig($stateProvider){$stateProvider.state("userGroupCatalogs",{parent:"userGroup",url:"/catalogs?search&page&pageSize&searchOn&sortBy&filters",templateUrl:"catalogManagement/userGroupCatalogs/templates/userGroupCatalogs.html",controller:"UserGroupCatalogsCtrl",controllerAs:"userGroupCatalogs",data:{pageTitle:"User Group Catalogs"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$stateParams","ocCatalog",function($stateParams,ocCatalog){return ocCatalog.Assignments.Get(null,$stateParams.buyerid)}],CatalogList:["Parameters","CurrentAssignments","OrderCloudSDK",function(Parameters,CurrentAssignments,OrderCloudSDK){var catalogIDs=_.pluck(CurrentAssignments,"CatalogID");return Parameters.filters.ID=catalogIDs.join("|"),Parameters.pageSize=100,OrderCloudSDK.Catalogs.List(Parameters).then(function(data){return angular.forEach(data.Items,function(catalog){var assignment=_.findWhere(CurrentAssignments,{CatalogID:catalog.ID});catalog.ViewAllProducts=assignment.ViewAllProducts,catalog.ViewAllCategories=assignment.ViewAllCategories}),data})}]}})}UserGroupCatalogsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(UserGroupCatalogsConfig)}(),function(){"use strict";function UserGroupCatalogController($q,$exceptionHandler,$stateParams,toastr,ocCatalog,ocCatalogTree,ocCatalogCategories,SelectedUserGroup,SelectedCatalog,BuyerCategoryAssignments,UserGroupCategoryAssignments,CategoryList,CatalogAssignment,Tree){var vm=this;vm.viewAllCategories=CatalogAssignment.ViewAllCategories,vm.viewAllProducts=CatalogAssignment.ViewAllProducts,vm.selectedCatalog=SelectedCatalog,vm.tree=Tree,vm.updateAssignment=function(node){node.Assigned?node.loading=ocCatalogCategories.Assignments.Save($stateParams.catalogid,node.ID,$stateParams.buyerid,$stateParams.usergroupid).then(function(){toastr.success("Category "+node.Name+" was assigned to "+SelectedUserGroup.Name)})["catch"](function(ex){$exceptionHandler(ex),node.Assigned=!1}):node.loading=ocCatalogCategories.Assignments.Delete($stateParams.catalogid,node.ID,$stateParams.buyerid,$stateParams.usergroupid).then(function(){toastr.success("Category "+node.Name+" was unassigned from "+SelectedUserGroup.Name)})["catch"](function(ex){$exceptionHandler(ex),node.Assigned=!0})}}UserGroupCatalogController.$inject=["$q","$exceptionHandler","$stateParams","toastr","ocCatalog","ocCatalogTree","ocCatalogCategories","SelectedUserGroup","SelectedCatalog","BuyerCategoryAssignments","UserGroupCategoryAssignments","CategoryList","CatalogAssignment","Tree"],angular.module("orderCloud").controller("UserGroupCatalogCtrl",UserGroupCatalogController)}(),function(){"use strict";function UserGroupCatalogConfig($stateProvider){$stateProvider.state("userGroupCatalog",{parent:"userGroup",url:"/catalog/:catalogid",templateUrl:"catalogManagement/userGroupCatalog/templates/userGroupCatalog.html",controller:"UserGroupCatalogCtrl",controllerAs:"userGroupCatalog",data:{pageTitle:"User Group Catalog"},resolve:{SelectedCatalog:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){return OrderCloudSDK.Catalogs.Get($stateParams.catalogid)}],CatalogAssignment:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){var options={catalogID:$stateParams.catalogid,userGroupID:$stateParams.userGroupid};return OrderCloudSDK.Catalogs.ListAssignments(options).then(function(data){return data.Items[0]})}],BuyerCategoryAssignments:["$stateParams","ocCatalogCategories",function($stateParams,ocCatalogCategories){return ocCatalogCategories.Assignments.Get($stateParams.catalogid,$stateParams.buyerid)}],UserGroupCategoryAssignments:["$stateParams","ocCatalogCategories",function($stateParams,ocCatalogCategories){return ocCatalogCategories.Assignments.Get($stateParams.catalogid,$stateParams.buyerid,$stateParams.usergroupid)}],CategoryList:["$stateParams","ocCatalogCategories",function($stateParams,ocCatalogCategories){return ocCatalogCategories.GetAll($stateParams.catalogid)}],Tree:["CategoryList","ocCatalogTree","ocCatalogCategories","CatalogAssignment","BuyerCategoryAssignments","UserGroupCategoryAssignments",function(CategoryList,ocCatalogTree,ocCatalogCategories,CatalogAssignment,BuyerCategoryAssignments,UserGroupCategoryAssignments){var buyerMappedData=ocCatalogCategories.Assignments.Map(CategoryList,CatalogAssignment.ViewAllCategories?!0:BuyerCategoryAssignments,!0),userGroupMappedData=CatalogAssignment.ViewAllCategories?{}:ocCatalogCategories.Assignments.Map(CategoryList,UserGroupCategoryAssignments);_.pluck(buyerMappedData,"ID");return angular.forEach(userGroupMappedData,function(category){var index=_.findIndex(buyerMappedData,function(cat){return cat.ID==category.ID});buyerMappedData[index].Assigned||(buyerMappedData[index]=category)}),ocCatalogTree.Get(buyerMappedData)}]}})}UserGroupCatalogConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(UserGroupCatalogConfig)}(),function(){"use strict";function CatalogSelectModalController($uibModalInstance,OrderCloudSDK,BuyerList){function submit(){$uibModalInstance.close(vm.replacementDefaultCatalog)}function searchCatalogs(term){var options={search:term,page:1,pageSize:8,filters:{ID:"!"+selectedCatalogID}};return OrderCloudSDK.Catalogs.List(options).then(function(data){return data.Items})}var vm=this,selectedCatalogID=angular.copy(BuyerList.Items[0].DefaultCatalogID);vm.buyers=BuyerList,vm.submit=submit,vm.searchCatalogs=searchCatalogs,vm.cancel=$uibModalInstance.dismiss,vm.replacementDefaultCatalog=null}CatalogSelectModalController.$inject=["$uibModalInstance","OrderCloudSDK","BuyerList"],angular.module("orderCloud").controller("CatalogSelectModalCtrl",CatalogSelectModalController)}(),function(){"use strict";function CatalogsService($q,$uibModal,ocConfirm,OrderCloudSDK){function _create(){return $uibModal.open({templateUrl:"catalogManagement/catalogs/templates/catalogCreate.modal.html",controller:"CatalogCreateModalCtrl",controllerAs:"catalogCreateModal"}).result}function _delete(catalog){function isDefaultCatalog(){OrderCloudSDK.Buyers.List({filters:{DefaultCatalogID:catalog.ID}}).then(function(data){data.Items.length>0?catalogSelect(data):deleteCatalog()})["catch"](function(ex){deferred.reject(ex)})}function catalogSelect(buyerListData){$uibModal.open({templateUrl:"catalogManagement/catalogs/templates/catalogSelect.modal.html",controller:"CatalogSelectModalCtrl",controllerAs:"catalogSelectModal",resolve:{BuyerList:function(){return buyerListData}}}).result.then(function(replacementCatalog){assignBuyers(buyerListData.Items,replacementCatalog)})["catch"](function(ex){deferred.reject(ex)})}function assignBuyers(buyers,defaultCatalog){var assignQueue=[];angular.forEach(buyers,function(buyer){assignQueue.push(OrderCloudSDK.Catalogs.SaveAssignment({catalogID:defaultCatalog.ID,buyerID:buyer.ID,ViewAllCategories:!0,ViewAllProducts:!0}))}),$q.all(assignQueue).then(function(){patchBuyers(buyers,defaultCatalog)})}function patchBuyers(buyers,defaultCatalog){var patchQueue=[];angular.forEach(buyers,function(buyer){patchQueue.push(OrderCloudSDK.Buyers.Patch(buyer.ID,{DefaultCatalogID:defaultCatalog.ID}))}),$q.all(patchQueue).then(function(){deleteCatalog()})}function deleteCatalog(){deferred.resolve(OrderCloudSDK.Catalogs.Delete(catalog.ID))}var deferred=$q.defer();return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+catalog.Name+"</b>? <br><br> This will delete all of the catalog's categories and product assignments.",confirmText:"Delete catalog",type:"delete"}).then(function(){isDefaultCatalog()})["catch"](function(ex){deferred.reject(ex)}),deferred.promise}var service={Create:_create,Delete:_delete};return service}CatalogsService.$inject=["$q","$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocCatalogs",CatalogsService)}(),function(){"use strict";function CatalogsController($exceptionHandler,$state,toastr,ocCatalogs,OrderCloudSDK,ocParameters,Parameters,CatalogList){var vm=this,vm=this;vm.list=CatalogList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.Catalogs.List(parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})},vm.createCatalog=function(){ocCatalogs.Create().then(function(data){toastr.success(data.Name+" was created."),$state.go("catalog",{catalogid:data.ID})})},vm.deleteCatalog=function(scope){ocCatalogs.Delete(scope.catalog).then(function(){vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,toastr.success(scope.catalog.Name+" was deleted.")})["catch"](function(ex){$exceptionHandler(ex)})}}CatalogsController.$inject=["$exceptionHandler","$state","toastr","ocCatalogs","OrderCloudSDK","ocParameters","Parameters","CatalogList"],angular.module("orderCloud").controller("CatalogsCtrl",CatalogsController)}(),function(){"use strict";function CatalogsConfig($stateProvider){$stateProvider.state("catalogs",{parent:"base",url:"/catalogs?search&page&pageSize&searchOn&sortBy&filters",templateUrl:"catalogManagement/catalogs/templates/catalogs.html",controller:"CatalogsCtrl",controllerAs:"catalogs",data:{pageTitle:"Catalog Management"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CatalogList:["Parameters","OrderCloudSDK",function(Parameters,OrderCloudSDK){return OrderCloudSDK.Catalogs.List(Parameters)}]}})}CatalogsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(CatalogsConfig)}(),function(){"use strict";function CatalogCreateModalController($exceptionHandler,$uibModalInstance,OrderCloudSDK){function updateValidity(){vm.form.ID.$error.UnavailableID&&vm.form.ID.$setValidity("UnavailableID",!0)}function submit(){vm.loading=OrderCloudSDK.Catalogs.Create(vm.catalog).then(function(newCatalog){$uibModalInstance.close(newCatalog)})["catch"](function(ex){409===ex.status?(vm.form.ID.$setValidity("UnavailableID",!1),vm.form.ID.$$element[0].focus()):$exceptionHandler(ex)})}var vm=this;vm.catalog={ID:null,Name:null,Description:null,Active:!0},vm.updateValidity=updateValidity,vm.submit=submit,vm.cancel=$uibModalInstance.dismiss}CatalogCreateModalController.$inject=["$exceptionHandler","$uibModalInstance","OrderCloudSDK"],angular.module("orderCloud").controller("CatalogCreateModalCtrl",CatalogCreateModalController)}(),function(){"use strict";function OrderCloudCatalogTreeService($q,OrderCloudSDK){function _getTree(categoryArray){function getnode(node){var children=_.where(categoryArray,{ParentID:node.ID});return children.length>0?(node.children=children,angular.forEach(children,function(child){return getnode(child)})):node.children=[],node}var tree=[],deferred=$q.defer(),query=_.where(categoryArray,{ParentID:null});return angular.forEach(query,function(node){tree.push(getnode(node))}),deferred.resolve(tree),deferred.promise}function update(event,catalogid){function updateNodeList(nodeList){function run(i){nodeQueue[i]().then(function(){queueIndex++,queueIndex<nodeQueue.length?run(queueIndex):deferred.resolve()})}var deferred=$q.defer(),nodeQueue=[];angular.forEach(nodeList,function(cat,index){nodeQueue.push(function(){return OrderCloudSDK.Categories.Patch(catalogid,cat.ID,{listOrder:index})})});var queueIndex=0;return run(queueIndex),deferred.promise}function updateParentID(){var parentID,deferred=$q.defer();return parentID=event.dest.nodesScope.node?event.dest.nodesScope.node.ID:null,event.source.nodeScope.node.ParentID=parentID,OrderCloudSDK.Categories.Update(catalogid,event.source.nodeScope.node.ID,event.source.nodeScope.node).then(function(){deferred.resolve()}),deferred.promise}var sourceParentNodeList=event.source.nodesScope.$modelValue,destParentNodeList=event.dest.nodesScope.$modelValue,masterDeferred=$q.defer();return updateNodeList(destParentNodeList).then(function(){sourceParentNodeList!=destParentNodeList&&(sourceParentNodeList.length?updateNodeList(sourceParentNodeList).then(function(){
updateParentID().then(function(){masterDeferred.resolve()})}):updateParentID().then(function(){masterDeferred.resolve()}))}),masterDeferred.promise}return{Get:_getTree,UpdateCategoryNode:update}}function OrderCloudCatalogTreeConfig(treeConfig){treeConfig.treeClass="angular-ui-tree",treeConfig.emptyTreeClass="angular-ui-tree-empty",treeConfig.hiddenClass="angular-ui-tree-hidden",treeConfig.nodesClass="angular-ui-tree-nodes",treeConfig.nodeClass="angular-ui-tree-node",treeConfig.handleClass="angular-ui-tree-handle",treeConfig.placeholderClass="angular-ui-tree-placeholder",treeConfig.dragClass="angular-ui-tree-drag",treeConfig.dragThreshold=3,treeConfig.defaultCollapsed=!1,treeConfig.appendChildOnHover=!0}OrderCloudCatalogTreeService.$inject=["$q","OrderCloudSDK"],OrderCloudCatalogTreeConfig.$inject=["treeConfig"],angular.module("orderCloud").factory("ocCatalogTree",OrderCloudCatalogTreeService).config(OrderCloudCatalogTreeConfig)}(),function(){"use strict";function CatalogProductsController($state,$stateParams,toastr,OrderCloudSDK,ocCatalog,ocParameters,Parameters,CurrentAssignments,ProductList){function selectedCheck(){vm.allItemsSelected=_.where(vm.list.Items,{Assigned:!0}).length==vm.list.Items.length}function changedCheck(){vm.changedAssignments=ocCatalog.Products.CompareAssignments(CurrentAssignments,vm.list,$stateParams.categoryid)}var vm=this;vm.list=ProductList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.Products.List(parameters).then(function(data){var mappedData=ocCatalog.Products.MapAssignments(CurrentAssignments,data);vm.list.Items=vm.list.Items.concat(mappedData.Items),vm.list.Meta=mappedData.Meta,selectedCheck()})},selectedCheck(),vm.selectAllItems=function(){vm.allItemsSelected=!vm.allItemsSelected,_.map(vm.list.Items,function(i){i.Assigned=vm.allItemsSelected}),changedCheck()},vm.selectItem=function(scope){scope.product.Assigned||(vm.allItemsSelected=!1),vm.selectedCount=_.where(vm.list.Items,{Assigned:!0}).length,changedCheck()},vm.resetAssignments=function(){vm.list=ocCatalog.Products.MapAssignments(CurrentAssignments,vm.list),vm.changedAssignments=[],selectedCheck()},vm.updateAssignments=function(){vm.searchLoading=ocCatalog.Products.UpdateAssignments(CurrentAssignments,vm.changedAssignments,$stateParams.catalogid).then(function(data){angular.forEach(data.Errors,function(ex){$exceptionHandler(ex)}),CurrentAssignments=data.UpdatedAssignments,changedCheck(),selectedCheck(),toastr.success("Product assignments updated.")})}}CatalogProductsController.$inject=["$state","$stateParams","toastr","OrderCloudSDK","ocCatalog","ocParameters","Parameters","CurrentAssignments","ProductList"],angular.module("orderCloud").controller("CatalogProductsCtrl",CatalogProductsController)}(),function(){"use strict";function EditCategoryModalController($exceptionHandler,$uibModalInstance,OrderCloudSDK,SelectedCategory,CatalogID){function patchImage(imageXP){return OrderCloudSDK.Categories.Patch(CatalogID,vm.category.ID,{xp:imageXP})}var vm=this;vm.category=angular.copy(SelectedCategory),vm.categoryName=SelectedCategory.Name,vm.catalogid=CatalogID,vm.patchImage=patchImage,vm.cancel=function(){$uibModalInstance.dismiss()},vm.submit=function(){""===vm.category.ParentID&&(vm.category.ParentID=null),vm.loading=OrderCloudSDK.Categories.Update(vm.catalogid,SelectedCategory.ID,vm.category).then(function(category){$uibModalInstance.close(category)})["catch"](function(ex){$exceptionHandler(ex)})}}EditCategoryModalController.$inject=["$exceptionHandler","$uibModalInstance","OrderCloudSDK","SelectedCategory","CatalogID"],angular.module("orderCloud").controller("EditCategoryModalCtrl",EditCategoryModalController)}(),function(){"use strict";function CreateCategoryModalController($exceptionHandler,$uibModalInstance,OrderCloudSDK,ParentID,CatalogID){function patchImage(imageXP){return OrderCloudSDK.Categories.Patch(CatalogID,vm.category.ID,{xp:imageXP})}var vm=this;vm.category={},vm.category.ParentID=ParentID,vm.category.Active=!0,vm.catalogid=CatalogID,vm.patchImage=patchImage,vm.cancel=function(){$uibModalInstance.dismiss()},vm.submit=function(){""===vm.category.ParentID&&(vm.category.ParentID=null),vm.loading=OrderCloudSDK.Categories.Create(vm.catalogid,vm.category).then(function(category){$uibModalInstance.close(category)})["catch"](function(ex){$exceptionHandler(ex)})}}CreateCategoryModalController.$inject=["$exceptionHandler","$uibModalInstance","OrderCloudSDK","ParentID","CatalogID"],angular.module("orderCloud").controller("CreateCategoryModalCtrl",CreateCategoryModalController)}(),function(){"use strict";function CatalogManagementCategoryController($rootScope,$stateParams,$state,toastr,ocCatalog,SelectedCategory){var vm=this;vm.category=SelectedCategory,$rootScope.$broadcast("CatalogViewManagement:CategoryIDChanged",vm.category.ID),vm.editCategory=function(){ocCatalog.EditCategory(vm.category,$stateParams.catalogid).then(function(updatedCategory){$rootScope.$broadcast("CatalogManagement:CategoryUpdated",{OriginalID:vm.category.ID,Category:updatedCategory}),vm.category=updatedCategory,toastr.success(updatedCategory.Name+" was updated.")})},vm.deleteCategory=function(){ocCatalog.DeleteCategory(vm.category,$stateParams.catalogid).then(function(){$rootScope.$broadcast("CatalogManagement:CategoryDeleted",vm.category),$state.go("categories"),toastr.success(vm.category.Name+" was deleted.")})}}CatalogManagementCategoryController.$inject=["$rootScope","$stateParams","$state","toastr","ocCatalog","SelectedCategory"],angular.module("orderCloud").controller("CatalogCategoryCtrl",CatalogManagementCategoryController)}(),function(){"use strict";function OrderCloudCatalogCategoriesSerivce($q,OrderCloudSDK){function _getAllCategories(catalogID){var options={pageSize:100,depth:"all"};return OrderCloudSDK.Categories.List(catalogID,options).then(function(data1){for(var df=$q.defer(),queue=[],totalPages=angular.copy(data1.Meta.TotalPages),currentPage=angular.copy(data1.Meta.Page);totalPages>currentPage;)currentPage++,options.page=currentPage,queue.push(OrderCloudSDK.Categories.List(catalogID,options));return $q.all(queue).then(function(results){angular.forEach(results,function(r){data1.Items=data1.Items.concat(r.Items)}),df.resolve(data1.Items)}),df.promise})}function _getAssignments(catalogID,buyerID,userGroupID){var level=userGroupID?"group":"company",options={buyerID:buyerID,userGroupID:userGroupID,pageSize:100,level:level};return OrderCloudSDK.Categories.ListAssignments(catalogID,options).then(function(data1){for(var df=$q.defer(),queue=[],totalPages=angular.copy(data1.Meta.TotalPages),currentPage=angular.copy(data1.Meta.Page);totalPages>currentPage;)currentPage++,options.page=currentPage,queue.push(OrderCloudSDK.Categories.ListAssignments(catalogID,options));return $q.all(queue).then(function(results){angular.forEach(results,function(r){data1.Items=data1.Items.concat(r.Items)}),df.resolve(data1.Items)}),df.promise})}function _mapAssignments(categoryList,currentAssignments,markInherited){var copiedList=angular.copy(categoryList);if(!currentAssignments)return copiedList;if(currentAssignments===!0)_.map(copiedList,function(category){category.Assigned=!0});else if(currentAssignments){var categoryIDs=_.pluck(currentAssignments,"CategoryID");_.map(copiedList,function(category){category.Assigned=categoryIDs.indexOf(category.ID)>-1,category.Assigned&&markInherited&&(category.Inherited=!0)})}return copiedList}function _saveAssignment(catalogID,categoryID,buyerID,userGroupID){var assignment={categoryID:categoryID,buyerID:buyerID,userGroupID:userGroupID};return OrderCloudSDK.Categories.SaveAssignment(catalogID,assignment)}function _deleteAssignment(catalogID,categoryID,buyerID,userGroupID){return OrderCloudSDK.Categories.DeleteAssignment(catalogID,categoryID,buyerID,{userGroupID:userGroupID})}var service={GetAll:_getAllCategories,Assignments:{Get:_getAssignments,Map:_mapAssignments,Save:_saveAssignment,Delete:_deleteAssignment}};return service}OrderCloudCatalogCategoriesSerivce.$inject=["$q","OrderCloudSDK"],angular.module("orderCloud").service("ocCatalogCategories",OrderCloudCatalogCategoriesSerivce)}(),function(){"use strict";function CatalogCategoriesController($rootScope,$stateParams,$state,ocCatalog,ocCatalogTree,Tree){function updateTree(originalID,updatedCategory,array,action){var catIndex,found=!1;angular.forEach(array,function(category,index){category.ID==originalID&&(catIndex=index,found=!0)}),found?"update"==action?(array[catIndex]=updatedCategory,vm.selectedCategoryID=updatedCategory.ID,$state.go("categories.category.products",{categoryid:updatedCategory.ID},{reload:"categories.category.products"})):"delete"==action&&(array.splice(catIndex,1),vm.selectedCategoryID=null):angular.forEach(array,function(category){category.children&&category.children.length&&updateTree(originalID,updatedCategory,category.children,action)})}var vm=this;vm.tree=Tree,vm.catalogid=$stateParams.catalogid,vm.treeOptions={dropped:function(event){ocCatalogTree.UpdateCategoryNode(event,vm.catalogid)}},vm.categorySelected=function(categoryID){vm.selectedCategoryID=categoryID,$state.go("categories.category.products",{categoryid:categoryID})},vm.createCategory=function(parentid){ocCatalog.CreateCategory(parentid,vm.catalogid).then(function(newCategory){newCategory.children=[],vm.tree.push(newCategory),vm.selectedCategoryID=newCategory.ID,$state.go("categories.category.products",{categoryid:newCategory.ID}),toastr.success(newCategory.Name+" was created.")})},$rootScope.$on("CatalogViewManagement:CategoryIDChanged",function(e,categoryID){vm.selectedCategoryID=categoryID}),$rootScope.$on("CatalogManagement:CategoryUpdated",function(e,data){updateTree(data.OriginalID,data.Category,vm.tree,"update")}),$rootScope.$on("CatalogManagement:CategoryDeleted",function(e,category){updateTree(category.ID,category,vm.tree,"delete")})}CatalogCategoriesController.$inject=["$rootScope","$stateParams","$state","ocCatalog","ocCatalogTree","Tree"],angular.module("orderCloud").controller("CatalogCategoriesCtrl",CatalogCategoriesController)}(),function(){"use strict";function CatalogBuyersController($exceptionHandler,$state,$stateParams,toastr,ocCatalog,OrderCloudSDK,SelectedCatalog,ocParameters,Parameters,BuyerList,CurrentAssignments){function selectedCheck(){vm.allItemsSelected=_.where(vm.list.Items,{Assigned:!0}).length==vm.list.Items.length}function changedCheck(){vm.changedAssignments=ocCatalog.Assignments.Compare(CurrentAssignments,vm.list,$stateParams.catalogid)}var vm=this;vm.list=BuyerList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.Buyers.List(parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})},selectedCheck(),vm.selectAllItems=function(){vm.allItemsSelected=!vm.allItemsSelected,_.map(vm.list.Items,function(i){i.Assigned=vm.allItemsSelected}),changedCheck()},vm.selectItem=function(scope){scope.buyer.Assigned||(vm.allItemsSelected=!1),vm.selectedCount=_.where(vm.list.Items,{Assigned:!0}).length,changedCheck()},vm.resetAssignments=function(){vm.list=ocCatalog.Assignments.Map(CurrentAssignments,vm.list),vm.changedAssignments=[],selectedCheck()},vm.updateAssignments=function(){vm.searchLoading=ocCatalog.Assignments.Update(CurrentAssignments,vm.changedAssignments,$stateParams.catalogid).then(function(data){angular.forEach(data.Errors,function(ex){$exceptionHandler(ex)}),CurrentAssignments=data.UpdatedAssignments,changedCheck(),selectedCheck(),toastr.success("Catalog assignments updated.")})},vm.updateAssignment=function(buyer,type){vm.searchLoading=ocCatalog.Assignments.UpdateAssignment($stateParams.catalogid,buyer.ID,buyer).then(function(updatedAssignment){angular.forEach(CurrentAssignments,function(assignment){assignment.BuyerID==updatedAssignment.BuyerID&&(assignment=updatedAssignment)}),toastr.success("View all "+type+(("categories"==type?updatedAssignment.viewAllCategories:updatedAssignment.viewAllProducts)?" enabled":" disabled")+" for "+buyer.Name)})}}CatalogBuyersController.$inject=["$exceptionHandler","$state","$stateParams","toastr","ocCatalog","OrderCloudSDK","SelectedCatalog","ocParameters","Parameters","BuyerList","CurrentAssignments"],angular.module("orderCloud").controller("CatalogBuyersCtrl",CatalogBuyersController)}(),function(){"use strict";function OrderCloudCatalog($q,$uibModal,OrderCloudSDK,ocConfirm){function _createCategory(parentid,catalogid){return $uibModal.open({templateUrl:"catalogManagement/catalog/templates/catalogCategoryCreate.modal.html",controller:"CreateCategoryModalCtrl",controllerAs:"createCategory",size:"md",resolve:{ParentID:function(){return parentid},CatalogID:function(){return catalogid}}}).result}function _editCategory(category,catalogid){return $uibModal.open({templateUrl:"catalogManagement/catalog/templates/catalogCategoryEdit.modal.html",controller:"EditCategoryModalCtrl",controllerAs:"editCategory",size:"md",resolve:{SelectedCategory:function(){return category},CatalogID:function(){return catalogid}}}).result}function _deleteCategory(category,catalogid){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+category.Name+"</b>?",confirmText:"Delete category",type:"delete"}).then(function(){return OrderCloudSDK.Categories.Delete(catalogid,category.ID)})}function _getProductAssignments(categoryid,catalogid){var deferred=$q.defer(),assignments=[],options={categoryID:categoryid,page:1,pageSize:100};return OrderCloudSDK.Categories.ListProductAssignments(catalogid,options).then(function(data){assignments=data.Items;for(var page=data.Meta.Page,queue=[];page<=data.Meta.TotalPages;)page++,options.page=page,queue.push(OrderCloudSDK.Categories.ListProductAssignments(catalogid,options));$q.all(queue).then(function(results){angular.forEach(results,function(result){assignments=assignments.concat(result.Items)}),deferred.resolve(assignments)})}),deferred.promise}function _mapProductAssignments(allAssignments,productList){return productList.Items=_.map(productList.Items,function(product){return product.Assigned=!1,angular.forEach(allAssignments,function(assignment){product.ID==assignment.ProductID&&(product.Assigned=!0)}),product}),productList}function _compareProductAssignments(allAssignments,productList,categoryID){var changedAssignments=[];return angular.forEach(productList.Items,function(product){var existingAssignment=_.where(allAssignments,{ProductID:product.ID})[0];existingAssignment&&!product.Assigned?changedAssignments.push({old:existingAssignment,"new":null}):!existingAssignment&&product.Assigned&&changedAssignments.push({old:null,"new":{ProductID:product.ID,CategoryID:categoryID}})}),changedAssignments}function _updateProductAssignments(allAssignments,changedAssignments,catalogid){var deferred=$q.defer(),assignmentQueue=[],errors=[];return angular.forEach(changedAssignments,function(diff){!diff.old&&diff["new"]?assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.Categories.SaveProductAssignment(catalogid,diff["new"]).then(function(){allAssignments.push(diff["new"]),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}()):diff.old&&!diff["new"]&&assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.Categories.DeleteProductAssignment(catalogid,diff.old.CategoryID,diff.old.ProductID).then(function(){allAssignments.splice(allAssignments.indexOf(diff.old),1),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}())}),$q.all(assignmentQueue).then(function(){deferred.resolve({UpdatedAssignments:allAssignments,Error:errors})}),deferred.promise}function _getAvailabilityAssignments(categoryid,buyerid,catalogid){function getUserGroupAssignments(){var options={categoryID:categoryid,page:1,pageSize:100,buyerID:buyerid};OrderCloudSDK.Categories.ListAssignments(catalogid,options).then(function(assignmentList){var userGroupIDs=_.compact(_.pluck(assignmentList.Items,"UserGroupID"));if(resolve.Meta=assignmentList.Meta,resolve.Items=assignmentList.Items,userGroupIDs.length){resolve.Type="userGroups";for(var page=assignmentList.Meta.Page,queue=[];page<=assignmentList.Meta.TotalPages;)page++,options.page=page,queue.push(OrderCloudSDK.Categories.ListAssignments(catalogid,options));$q.all(queue).then(function(results){angular.forEach(results,function(result){resolve.Items=resolve.Items.concat(result.Items)}),deferred.resolve(resolve)})}else deferred.resolve(resolve)})}var deferred=$q.defer(),resolve={Type:"none",Meta:{},Items:[]},options={categoryID:categoryid,level:"Company",buyerID:buyerid};return OrderCloudSDK.Categories.ListAssignments(catalogid,options).then(function(buyerAssignment){buyerAssignment.Meta.TotalCount?(resolve.Type="buyer",resolve.Meta=buyerAssignment.Meta,resolve.Items=buyerAssignment.Items,deferred.resolve(resolve)):getUserGroupAssignments()}),deferred.promise}function _mapAvailabilityAssignments(allAssignments,userGroupList){return userGroupList.Items=_.map(userGroupList.Items,function(userGroup){return userGroup.Assigned=!1,angular.forEach(allAssignments,function(assignment){userGroup.ID==assignment.UserGroupID&&(userGroup.Assigned=!0)}),userGroup}),userGroupList}function _compareAvailabilityAssignments(allAssignments,userGroupList,categoryID,buyerID){var changedAssignments=[];return angular.forEach(userGroupList.Items,function(userGroup){var existingAssignment=_.where(allAssignments,{UserGroupID:userGroup.ID})[0];existingAssignment&&!userGroup.Assigned?changedAssignments.push({old:existingAssignment,"new":null}):!existingAssignment&&userGroup.Assigned&&changedAssignments.push({old:null,"new":{BuyerID:buyerID,UserGroupID:userGroup.ID,CategoryID:categoryID}})}),changedAssignments}function _updateAvailabilityAssignments(allAssignments,changedAssignments,categoryid,catalogid,buyerid){var deferred=$q.defer(),assignmentQueue=[],errors=[];return _.filter(allAssignments,function(assignment){return assignment.BuyerID&&!assignment.UserGroupID}).length&&changedAssignments.push({old:{BuyerID:buyerid,CategoryID:categoryid}}),angular.forEach(changedAssignments,function(diff){!diff.old&&diff["new"]?assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.Categories.SaveAssignment(catalogid,diff["new"]).then(function(){allAssignments.push(diff["new"]),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}()):diff.old&&!diff["new"]&&assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.Categories.DeleteAssignment(catalogid,diff.old.CategoryID,buyerid,{userGroupID:diff.old.UserGroupID}).then(function(){allAssignments.splice(allAssignments.indexOf(diff.old),1),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}())}),$q.all(assignmentQueue).then(function(){deferred.resolve({UpdatedAssignments:allAssignments,Error:errors})}),deferred.promise}function _toggleAvailabilityAssignments(assignmentType,category,buyer,currentAssignments,catalogID){var deferred=$q.defer();if("buyer"==assignmentType){var assignment={CategoryID:category.ID,BuyerID:buyer.ID,UserID:null,UserGroupID:null};OrderCloudSDK.Categories.SaveAssignment(catalogID,assignment).then(function(){deferred.resolve()})}else if("none"==assignmentType){var queue=[];angular.forEach(currentAssignments.Items,function(assignment){queue.push(OrderCloudSDK.Categories.DeleteAssignment(catalogID,category.ID,buyer.ID,{userGroupID:assignment.UserGroupID}))}),$q.all(queue).then(function(){deferred.resolve(queue.length)})}else deferred.resolve();return deferred.promise}function _getAssignments(catalogid,buyerid){var options={catalogID:catalogid,buyerID:buyerid,pageSize:100};return OrderCloudSDK.Catalogs.ListAssignments(options).then(function(data){for(var df=$q.defer(),queue=[],totalPages=angular.copy(data.Meta.TotalPages),currentPage=angular.copy(data.Meta.Page);totalPages>currentPage;)currentPage++,options.page=currentPage,queue.push(OrderCloudSDK.Catalogs.ListAssignments(options));return $q.all(queue).then(function(results){angular.forEach(results,function(r){data.Items=data.Items.concat(r.Items)}),df.resolve(data.Items)}),df.promise})}function _mapAssignments(allAssignments,buyerList){return buyerList.Items=_.map(buyerList.Items,function(buyer){return buyer.Assigned=!1,angular.forEach(allAssignments,function(assignment){buyer.ID==assignment.BuyerID&&(buyer.Assigned=!0,buyer.ViewAllProducts=assignment.ViewAllProducts,buyer.ViewAllCategories=assignment.ViewAllCategories)}),buyer}),buyerList}function _compareAssignments(allAssignments,buyerList,catalogID){var changedAssignments=[];return angular.forEach(buyerList.Items,function(buyer){var existingAssignment=_.where(allAssignments,{BuyerID:buyer.ID})[0];existingAssignment&&!buyer.Assigned?changedAssignments.push({old:existingAssignment,"new":null}):!existingAssignment&&buyer.Assigned&&changedAssignments.push({old:null,"new":{BuyerID:buyer.ID,CatalogID:catalogID}})}),changedAssignments}function _updateAssignments(allAssignments,changedAssignments,catalogID){var df=$q.defer(),assignmentQueue=[],errors=[];return angular.forEach(changedAssignments,function(diff){!diff.old&&diff["new"]?assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.Catalogs.SaveAssignment(diff["new"]).then(function(){allAssignments.push(diff["new"]),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}()):diff.old&&!diff["new"]&&assignmentQueue.push(function(){var d=$q.defer();({userGroupID:diff.old.UserGroupID});return OrderCloudSDK.Catalogs.DeleteAssignment(catalogID,diff.old.BuyerID).then(function(){allAssignments.splice(allAssignments.indexOf(diff.old),1),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}())}),$q.all(assignmentQueue).then(function(){df.resolve({UpdatedAssignments:allAssignments,Errors:errors})}),df.promise}function _updateAssignment(catalogID,buyerID,options){var df=$q.defer(),assignment={catalogID:catalogID,buyerID:buyerID,viewAllCategories:options.ViewAllCategories,viewAllProducts:options.ViewAllProducts};return OrderCloudSDK.Catalogs.SaveAssignment(assignment).then(function(){df.resolve(assignment)}),df.promise}var service={CreateCategory:_createCategory,EditCategory:_editCategory,DeleteCategory:_deleteCategory,Products:{GetAssignments:_getProductAssignments,MapAssignments:_mapProductAssignments,CompareAssignments:_compareProductAssignments,UpdateAssignments:_updateProductAssignments},Availability:{GetAssignments:_getAvailabilityAssignments,MapAssignments:_mapAvailabilityAssignments,CompareAssignments:_compareAvailabilityAssignments,UpdateAssignments:_updateAvailabilityAssignments,ToggleAssignment:_toggleAvailabilityAssignments},Assignments:{Get:_getAssignments,Map:_mapAssignments,Compare:_compareAssignments,Update:_updateAssignments,UpdateAssignment:_updateAssignment}};return service}OrderCloudCatalog.$inject=["$q","$uibModal","OrderCloudSDK","ocConfirm"],angular.module("orderCloud").factory("ocCatalog",OrderCloudCatalog)}(),function(){"use strict";function CatalogController($exceptionHandler,$state,toastr,SelectedCatalog,OrderCloudSDK,ocCatalogs,ocNavItems){function updateValidity(){vm.editForm.ID.$error.UnavailableID&&vm.editForm.ID.$setValidity("UnavailableID",!0)}function updateCatalog(){OrderCloudSDK.Catalogs.Update(SelectedCatalog.ID,vm.model).then(function(data){toastr.success(data.Name+" was updated."),vm.selectedCatalog.ID!==data.ID?$state.go(".",{catalogid:data.ID}):(vm.selectedCatalog=angular.copy(data),SelectedCatalog=data)})["catch"](function(ex){409===ex.status?(vm.editForm.ID.$setValidity("UnavailableID",!1),vm.editForm.ID.$$element[0].focus()):$exceptionHandler(ex)})}function deleteCatalog(){ocCatalogs.Delete(SelectedCatalog).then(function(){toastr.success(SelectedCatalog.Name+" was deleted."),$state.go("catalogs",{},{reload:"catalogs"})})}var vm=this;vm.selectedCatalog=SelectedCatalog,vm.model=angular.copy(SelectedCatalog),vm.updateValidity=updateValidity,vm.updateCatalog=updateCatalog,vm.deleteCatalog=deleteCatalog,vm.navigationItems=ocNavItems.Catalog()}CatalogController.$inject=["$exceptionHandler","$state","toastr","SelectedCatalog","OrderCloudSDK","ocCatalogs","ocNavItems"],angular.module("orderCloud").controller("CatalogCtrl",CatalogController)}(),function(){"use strict";function CatalogConfig($stateProvider){$stateProvider.state("catalog",{parent:"base",url:"/catalog/:catalogid",templateUrl:"catalogManagement/catalog/templates/catalog.html",controller:"CatalogCtrl",controllerAs:"catalog",resolve:{SelectedCatalog:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){return OrderCloudSDK.Catalogs.Get($stateParams.catalogid)}]}}).state("catalog.buyers",{url:"/buyers?search&page&pageSize&searchOn&sortBy&filters",templateUrl:"catalogManagement/catalog/templates/catalogBuyers.html",controller:"CatalogBuyersCtrl",controllerAs:"catalogBuyers",resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$stateParams","ocCatalog",function($stateParams,ocCatalog){return ocCatalog.Assignments.Get($stateParams.catalogid)}],BuyerList:["OrderCloudSDK","ocCatalog","Parameters","CurrentAssignments",function(OrderCloudSDK,ocCatalog,Parameters,CurrentAssignments){return OrderCloudSDK.Buyers.List(Parameters).then(function(data){return ocCatalog.Assignments.Map(CurrentAssignments,data)})}]}}).state("categories",{parent:"catalog",params:{preSelectID:void 0},url:"/categories",templateUrl:"catalogManagement/catalog/templates/catalogCategories.html",controller:"CatalogCategoriesCtrl",controllerAs:"catalogCategories",data:{pageTitle:"Catalog Categories"},resolve:{CategoryList:["$stateParams","ocCatalogCategories",function($stateParams,ocCatalogCategories){return ocCatalogCategories.GetAll($stateParams.catalogid)}],Tree:["CategoryList","ocCatalogTree",function(CategoryList,ocCatalogTree){return ocCatalogTree.Get(CategoryList)}]}}).state("categories.category",{url:"/:categoryid",templateUrl:"catalogManagement/catalog/templates/catalogCategory.html",controller:"CatalogCategoryCtrl",controllerAs:"catalogCategory",resolve:{SelectedCategory:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){return OrderCloudSDK.Categories.Get($stateParams.catalogid,$stateParams.categoryid)}]}}).state("categories.category.products",{url:"/products?search&page&pageSize&searchOn&sortBy&filters",templateUrl:"catalogManagement/catalog/templates/catalogCategoryProducts.html",controller:"CatalogProductsCtrl",controllerAs:"catalogProducts",resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$q","$stateParams","ocCatalog",function($q,$stateParams,ocCatalog){return ocCatalog.Products.GetAssignments($stateParams.categoryid,$stateParams.catalogid)}],ProductList:["OrderCloudSDK","ocCatalog","Parameters","CurrentAssignments",function(OrderCloudSDK,ocCatalog,Parameters,CurrentAssignments){return OrderCloudSDK.Products.List(Parameters).then(function(data){return ocCatalog.Products.MapAssignments(CurrentAssignments,data)})}]}})}CatalogConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(CatalogConfig)}(),function(){"use strict";function BuyerCatalogsController($exceptionHandler,$state,$stateParams,toastr,ocCatalog,OrderCloudSDK,ocParameters,Parameters,CatalogList,SelectedBuyer){var vm=this,vm=this;vm.list=CatalogList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.Catalogs.List(parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})},vm.updateAssignment=function(catalog,type){vm.searchLoading=ocCatalog.Assignments.UpdateAssignment(catalog.ID,$stateParams.buyerid,catalog).then(function(assignment){toastr.success("View all "+type+(("categories"==type?assignment.viewAllCategories:assignment.viewAllProducts)?" enabled":" disabled")+" for catalog "+catalog.Name)})}}BuyerCatalogsController.$inject=["$exceptionHandler","$state","$stateParams","toastr","ocCatalog","OrderCloudSDK","ocParameters","Parameters","CatalogList","SelectedBuyer"],angular.module("orderCloud").controller("BuyerCatalogsCtrl",BuyerCatalogsController)}(),function(){"use strict";function BuyerCatalogsConfig($stateProvider){$stateProvider.state("buyerCatalogs",{parent:"buyer",url:"/catalogs?search&page&pageSize&searchOn&sortBy&filters",templateUrl:"catalogManagement/buyerCatalogs/templates/buyerCatalogs.html",controller:"BuyerCatalogsCtrl",controllerAs:"buyerCatalogs",data:{pageTitle:"Buyer Catalogs"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$stateParams","ocCatalog",function($stateParams,ocCatalog){return ocCatalog.Assignments.Get(null,$stateParams.buyerid)}],CatalogList:["Parameters","CurrentAssignments","OrderCloudSDK",function(Parameters,CurrentAssignments,OrderCloudSDK){var catalogIDs=_.pluck(CurrentAssignments,"CatalogID");return Parameters.filters.ID=catalogIDs.join("|"),Parameters.pageSize=100,OrderCloudSDK.Catalogs.List(Parameters).then(function(data){return angular.forEach(data.Items,function(catalog){var assignment=_.findWhere(CurrentAssignments,{CatalogID:catalog.ID});catalog.ViewAllProducts=assignment.ViewAllProducts,catalog.ViewAllCategories=assignment.ViewAllCategories}),data})}]}})}BuyerCatalogsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(BuyerCatalogsConfig)}(),function(){"use strict";function BuyerCatalogController($q,$exceptionHandler,$stateParams,toastr,ocCatalog,ocCatalogTree,ocCatalogCategories,SelectedBuyer,SelectedCatalog,CategoryAssignments,CategoryList,CatalogAssignment,Tree){var vm=this;vm.viewAllCategories=CatalogAssignment.ViewAllCategories,
vm.viewAllProducts=CatalogAssignment.ViewAllProducts,vm.selectedCatalog=SelectedCatalog,vm.tree=Tree,vm.updateCategoryAssignment=function(node){node.Assigned?node.loading=ocCatalogCategories.Assignments.Save($stateParams.catalogid,node.ID,$stateParams.buyerid,$stateParams.usergroupid).then(function(){toastr.success("Category "+node.Name+" was assigned to "+SelectedBuyer.Name)})["catch"](function(ex){$exceptionHandler(ex),node.Assigned=!1}):node.loading=ocCatalogCategories.Assignments.Delete($stateParams.catalogid,node.ID,$stateParams.buyerid,$stateParams.usergroupid).then(function(){toastr.success("Category "+node.Name+" was unassigned from "+SelectedBuyer.Name)})["catch"](function(ex){$exceptionHandler(ex),node.Assigned=!0})},vm.updateCatalogAssignment=function(type){var df=$q.defer();vm.loading=df.promise,ocCatalog.Assignments.UpdateAssignment($stateParams.catalogid,$stateParams.buyerid,{ViewAllCategories:vm.viewAllCategories,ViewAllProducts:vm.viewAllProducts}).then(function(updatedAssignment){"categories"==type?ocCatalogTree.Get(ocCatalogCategories.Assignments.Map(CategoryList,updatedAssignment.viewAllCategories?!0:CategoryAssignments)).then(function(updatedTree){vm.tree=updatedTree,df.resolve(),toastr.success("View all categories "+(updatedAssignment.viewAllCategories?" enabled":" disabled"))}):(df.resolve(),toastr.success("View all products "+(updatedAssignment.viewAllProducts?" enabled":" disabled")))})}}BuyerCatalogController.$inject=["$q","$exceptionHandler","$stateParams","toastr","ocCatalog","ocCatalogTree","ocCatalogCategories","SelectedBuyer","SelectedCatalog","CategoryAssignments","CategoryList","CatalogAssignment","Tree"],angular.module("orderCloud").controller("BuyerCatalogCtrl",BuyerCatalogController)}(),function(){"use strict";function BuyerCatalogConfig($stateProvider){$stateProvider.state("buyerCatalog",{parent:"buyer",url:"/catalog/:catalogid",templateUrl:"catalogManagement/buyerCatalog/templates/buyerCatalog.html",controller:"BuyerCatalogCtrl",controllerAs:"buyerCatalog",data:{pageTitle:"Buyer Catalog"},resolve:{SelectedCatalog:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){return OrderCloudSDK.Catalogs.Get($stateParams.catalogid)}],CatalogAssignment:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){var options={catalogID:$stateParams.catalogid,buyerID:$stateParams.buyerid};return OrderCloudSDK.Catalogs.ListAssignments(options).then(function(data){return data.Items[0]})}],CategoryAssignments:["$stateParams","ocCatalogCategories",function($stateParams,ocCatalogCategories){return ocCatalogCategories.Assignments.Get($stateParams.catalogid,$stateParams.buyerid)}],CategoryList:["$stateParams","ocCatalogCategories",function($stateParams,ocCatalogCategories){return ocCatalogCategories.GetAll($stateParams.catalogid)}],Tree:["CategoryList","ocCatalogTree","ocCatalogCategories","CategoryAssignments","CatalogAssignment",function(CategoryList,ocCatalogTree,ocCatalogCategories,CategoryAssignments,CatalogAssignment){return ocCatalogTree.Get(ocCatalogCategories.Assignments.Map(CategoryList,CatalogAssignment.ViewAllCategories?!0:CategoryAssignments))}]}})}BuyerCatalogConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(BuyerCatalogConfig)}(),function(){"use strict";function OrderCloudUsers($q,$uibModal,ocConfirm,OrderCloudSDK){function _create(buyerid){return $uibModal.open({templateUrl:"buyerManagement/users/templates/userCreate.modal.html",controller:"UserCreateModalCtrl",controllerAs:"userCreateModal",resolve:{SelectedBuyerID:function(){return buyerid}}}).result}function _edit(user,buyerid){return $uibModal.open({templateUrl:"buyerManagement/users/templates/userEdit.modal.html",controller:"UserEditModalCtrl",controllerAs:"userEditModal",resolve:{SelectedBuyerID:function(){return buyerid},SelectedUser:function(){return user}}}).result}function _delete(user,buyerid){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+user.Username+"</b>?",confirmText:"Delete user",type:"delete"}).then(function(){return OrderCloudSDK.Users.Delete(buyerid,user.ID)})}function _getAssignments(buyerid,usergroupid){var options={buyerID:buyerid,userGroupID:usergroupid,pageSize:100};return OrderCloudSDK.UserGroups.ListUserAssignments(buyerid,options).then(function(data1){for(var df=$q.defer(),queue=[],totalPages=angular.copy(data1.Meta.TotalPages),currentPage=angular.copy(data1.Meta.Page);totalPages>currentPage;)currentPage++,options.page=currentPage,queue.push(OrderCloudSDK.UserGroups.ListUserAssignments(buyerid,options));return $q.all(queue).then(function(results){angular.forEach(results,function(r){data1.Items=data1.Items.concat(r.Items)}),df.resolve(data1.Items)}),df.promise})}function _mapAssignments(allAssignments,userList){return userList.Items=_.map(userList.Items,function(user){return user.Assigned=!1,angular.forEach(allAssignments,function(assignment){user.ID==assignment.UserID&&(user.Assigned=!0)}),user}),userList}function _compareAssignments(allAssignments,userList,userGroupID){var changedAssignments=[];return angular.forEach(userList.Items,function(user){var existingAssignment=_.where(allAssignments,{UserID:user.ID})[0];existingAssignment&&!user.Assigned?changedAssignments.push({old:existingAssignment,"new":null}):!existingAssignment&&user.Assigned&&changedAssignments.push({old:null,"new":{UserGroupID:userGroupID,UserID:user.ID}})}),changedAssignments}function _updateAssignments(allAssignments,changedAssignments,buyerid){var df=$q.defer(),assignmentQueue=[],errors=[];return angular.forEach(changedAssignments,function(diff){!diff.old&&diff["new"]?assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.UserGroups.SaveUserAssignment(buyerid,diff["new"]).then(function(){allAssignments.push(diff["new"]),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}()):diff.old&&!diff["new"]&&assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.UserGroups.DeleteUserAssignment(buyerid,diff.old.UserGroupID,diff.old.UserID).then(function(){allAssignments.splice(allAssignments.indexOf(diff.old),1),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}())}),$q.all(assignmentQueue).then(function(){df.resolve({UpdatedAssignments:allAssignments,Errors:errors})}),df.promise}var service={Create:_create,Edit:_edit,Delete:_delete,Assignments:{Get:_getAssignments,Map:_mapAssignments,Compare:_compareAssignments,Update:_updateAssignments}};return service}OrderCloudUsers.$inject=["$q","$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocUsers",OrderCloudUsers)}(),function(){"use strict";function UsersController($state,$stateParams,toastr,$ocMedia,OrderCloudSDK,ocUsers,ocParameters,UserList,Parameters){var vm=this;vm.list=UserList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.Users.List($stateParams.buyerid,Parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})},vm.editUser=function(scope){ocUsers.Edit(scope.user,$stateParams.buyerid).then(function(updatedUser){vm.list.Items[scope.$index]=updatedUser,toastr.success(updatedUser.Username+" was updated.")})},vm.createUser=function(){ocUsers.Create($stateParams.buyerid).then(function(newUser){vm.list.Items.push(newUser),vm.list.Meta.TotalCount++,vm.list.Meta.ItemRange[1]++,toastr.success(newUser.Username+" was created.")})},vm.deleteUser=function(scope){ocUsers.Delete(scope.user,$stateParams.buyerid).then(function(){toastr.success(scope.user.Username+" was deleted."),vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--})}}UsersController.$inject=["$state","$stateParams","toastr","$ocMedia","OrderCloudSDK","ocUsers","ocParameters","UserList","Parameters"],angular.module("orderCloud").controller("UsersCtrl",UsersController)}(),function(){"use strict";function UsersConfig($stateProvider){$stateProvider.state("users",{parent:"buyer",templateUrl:"buyerManagement/users/templates/users.html",controller:"UsersCtrl",controllerAs:"users",url:"/users?userGroupID&search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"Buyer Users"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],UserList:["OrderCloudSDK","$stateParams","Parameters",function(OrderCloudSDK,$stateParams,Parameters){return OrderCloudSDK.Users.List($stateParams.buyerid,Parameters)}]}}).state("userGroup.users",{url:"/users?search&page&pageSize&searchOn&sortBy&filters",templateUrl:"buyerManagement/users/templates/userGroupUsers.html",controller:"UserGroupUsersCtrl",controllerAs:"userGroupUsers",data:{pageTitle:"User Group Members"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$stateParams","ocUsers",function($stateParams,ocUsers){return ocUsers.Assignments.Get($stateParams.buyerid,$stateParams.usergroupid)}],UserList:["$stateParams","Parameters","CurrentAssignments","ocUsers","OrderCloudSDK",function($stateParams,Parameters,CurrentAssignments,ocUsers,OrderCloudSDK){return OrderCloudSDK.Users.List($stateParams.buyerid,Parameters).then(function(data){return ocUsers.Assignments.Map(CurrentAssignments,data)})}]}})}UsersConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(UsersConfig)}(),function(){"use strict";function UserGroupUsersController($exceptionHandler,$filter,$state,$stateParams,toastr,ocUsers,OrderCloudSDK,ocParameters,UserList,CurrentAssignments,Parameters){function selectedCheck(){vm.allItemsSelected=_.where(vm.list.Items,{Assigned:!0}).length==vm.list.Items.length}function changedCheck(){vm.changedAssignments=ocUsers.Assignments.Compare(CurrentAssignments,vm.list,$stateParams.usergroupid)}var vm=this;vm.list=UserList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go("userGroup.users",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.Users.List($stateParams.buyerid,parameters).then(function(data){var mappedData=ocUsers.Assignments.Map(CurrentAssignments,data);vm.list.Items=vm.list.Items.concat(mappedData.Items),vm.list.Meta=mappedData.Meta,selectedCheck()})},selectedCheck(),vm.selectAllItems=function(){vm.allItemsSelected=!vm.allItemsSelected,_.map(vm.list.Items,function(i){i.Assigned=vm.allItemsSelected}),changedCheck()},vm.selectItem=function(scope){scope.user.Assigned||(vm.allItemsSelected=!1),vm.selectedCount=$filter("filter")(vm.list.Items,{Assigned:!0}).length,changedCheck()},vm.resetAssignments=function(){vm.list=ocUsers.Assignments.Map(CurrentAssignments,vm.list),vm.changedAssignments=[],selectedCheck()},vm.updateAssignments=function(){vm.searchLoading=ocUsers.Assignments.Update(CurrentAssignments,vm.changedAssignments,$stateParams.buyerid).then(function(data){angular.forEach(data.Errors,function(ex){$exceptionHandler(ex)}),CurrentAssignments=data.UpdatedAssignments,changedCheck(),selectedCheck(),toastr.success("User assignments updated.")})},vm.createUser=function(){function _updateList(n){vm.list.Items.push(n),vm.list.Meta.TotalCount++,vm.list.Meta.ItemRange[1]++,toastr.success(n.Username+" was created.")}ocUsers.Create($stateParams.buyerid).then(function(newUser){var newAssignment={UserID:newUser.ID,UserGroupID:$stateParams.usergroupid};vm.searchLoading=OrderCloudSDK.UserGroups.SaveUserAssignment($stateParams.buyerid,newAssignment).then(function(){newUser.Assigned=!0,CurrentAssignments.push(newAssignment),_updateList(newUser)})["catch"](function(){newUser.Assigned=!1,_updateList(newUser)})})},vm.editUser=function(scope){ocUsers.Edit(scope.user,$stateParams.buyerid).then(function(updatedUser){updatedUser.Assigned=vm.list.Items[scope.$index].Assigned,vm.list.Items[scope.$index]=updatedUser,updatedUser.ID!=scope.user.ID&&(_.map(CurrentAssignments,function(assignment){return assignment.UserID==scope.user.ID&&(assignment.UserID=updatedUser.ID),assignment}),changedCheck()),toastr.success(updatedUser.Username+" was updated.")})},vm.deleteUser=function(scope){ocUsers.Delete(scope.user,$stateParams.buyerid).then(function(){toastr.success(scope.user.Username+" was deleted."),vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,changedCheck()})}}UserGroupUsersController.$inject=["$exceptionHandler","$filter","$state","$stateParams","toastr","ocUsers","OrderCloudSDK","ocParameters","UserList","CurrentAssignments","Parameters"],angular.module("orderCloud").controller("UserGroupUsersCtrl",UserGroupUsersController)}(),function(){"use strict";function UserEditModalController($exceptionHandler,$uibModalInstance,OrderCloudSDK,SelectedUser,SelectedBuyerID){var vm=this;vm.user=angular.copy(SelectedUser),vm.username=SelectedUser.Username,vm.fullName=SelectedUser.FirstName?SelectedUser.FirstName+(SelectedUser.LastName?" "+SelectedUser.LastName:""):SelectedUser.LastName?SelectedUser.LastName:null,null!=vm.user.TermsAccepted&&(vm.TermsAccepted=!0),vm.submit=function(){var today=new Date;vm.user.TermsAccepted=today,vm.loading={backdrop:!1},vm.loading.promise=OrderCloudSDK.Users.Update(SelectedBuyerID,SelectedUser.ID,vm.user).then(function(updatedUser){$uibModalInstance.close(updatedUser)})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}UserEditModalController.$inject=["$exceptionHandler","$uibModalInstance","OrderCloudSDK","SelectedUser","SelectedBuyerID"],angular.module("orderCloud").controller("UserEditModalCtrl",UserEditModalController)}(),function(){"use strict";function UserCreateModalController($exceptionHandler,$uibModalInstance,OrderCloudSDK,SelectedBuyerID){var vm=this;vm.user={Email:"",Password:"",Active:!1},vm.submit=function(){vm.user.TermsAccepted=new Date,vm.loading={backdrop:!1},vm.loading.promise=OrderCloudSDK.Users.Create(SelectedBuyerID,vm.user).then(function(newUser){$uibModalInstance.close(newUser)})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}UserCreateModalController.$inject=["$exceptionHandler","$uibModalInstance","OrderCloudSDK","SelectedBuyerID"],angular.module("orderCloud").controller("UserCreateModalCtrl",UserCreateModalController)}(),function(){"use strict";function OrderCloudUserGroups($uibModal,ocConfirm,OrderCloudSDK){function _create(buyerid){return $uibModal.open({templateUrl:"buyerManagement/userGroups/templates/userGroupCreate.modal.html",controller:"UserGroupCreateModalCtrl",controllerAs:"userGroupCreateModal",resolve:{SelectedBuyerID:function(){return buyerid}}}).result}function _delete(userGroup,buyerid){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+userGroup.Name+"</b>?",confirmText:"Delete user group",type:"delete"}).then(function(){return OrderCloudSDK.UserGroups.Delete(buyerid,userGroup.ID)})}var service={Create:_create,Delete:_delete};return service}OrderCloudUserGroups.$inject=["$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocUserGroups",OrderCloudUserGroups)}(),function(){"use strict";function UserGroupsController($state,$stateParams,toastr,ocUserGroups,OrderCloudSDK,ocParameters,UserGroupList,Parameters){var vm=this;vm.list=UserGroupList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){angular.extend(Parameters,vm.list.Meta.Page+1);return OrderCloudSDK.UserGroups.List($stateParams.buyerid,Parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})},vm.createGroup=function(){ocUserGroups.Create($stateParams.buyerid).then(function(newUserGroup){toastr.success(newUserGroup.Name+" was created."),$state.go("userGroup",{usergroupid:newUserGroup.ID})})},vm.deleteGroup=function(scope){ocUserGroups.Delete(scope.userGroup,$stateParams.buyerid).then(function(){toastr.success(scope.userGroup.Name+" was deleted."),vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--})}}UserGroupsController.$inject=["$state","$stateParams","toastr","ocUserGroups","OrderCloudSDK","ocParameters","UserGroupList","Parameters"],angular.module("orderCloud").controller("UserGroupsCtrl",UserGroupsController)}(),function(){"use strict";function UserGroupsConfig($stateProvider){$stateProvider.state("userGroups",{parent:"buyer",url:"/user-groups?search&page&pageSize&searchOn&sortBy&filters",templateUrl:"buyerManagement/userGroups/templates/userGroups.html",controller:"UserGroupsCtrl",controllerAs:"userGroups",data:{pageTitle:"Buyer User Groups"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],UserGroupList:["$stateParams","OrderCloudSDK","Parameters",function($stateParams,OrderCloudSDK,Parameters){return OrderCloudSDK.UserGroups.List($stateParams.buyerid,Parameters)}]}}).state("userGroup",{parent:"buyer",url:"/user-groups/:usergroupid",templateUrl:"buyerManagement/userGroups/templates/userGroup.html",controller:"UserGroupCtrl",controllerAs:"userGroup",data:{pageTitle:"Buyer User Group"},resolve:{SelectedUserGroup:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){return OrderCloudSDK.UserGroups.Get($stateParams.buyerid,$stateParams.usergroupid)}]}})}UserGroupsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(UserGroupsConfig)}(),function(){"use strict";function UserGroupCreateModalController($uibModalInstance,$exceptionHandler,OrderCloudSDK,SelectedBuyerID){var vm=this;vm.submit=function(){vm.loading=OrderCloudSDK.UserGroups.Create(SelectedBuyerID,vm.userGroup).then(function(data){$uibModalInstance.close(data)})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}UserGroupCreateModalController.$inject=["$uibModalInstance","$exceptionHandler","OrderCloudSDK","SelectedBuyerID"],angular.module("orderCloud").controller("UserGroupCreateModalCtrl",UserGroupCreateModalController)}(),function(){"use strict";function UserGroupController($state,$stateParams,toastr,OrderCloudSDK,ocUserGroups,SelectedUserGroup){var vm=this;vm.group=SelectedUserGroup,vm.model=angular.copy(SelectedUserGroup),vm.update=function(){OrderCloudSDK.UserGroups.Update($stateParams.buyerid,vm.group.ID,vm.model).then(function(updatedUserGroup){updatedUserGroup.ID!=vm.group.ID&&$state.go(".",{usergroupid:updatedUserGroup.ID},{notify:!1}),vm.group=updatedUserGroup,vm.model=angular.copy(updatedUserGroup),SelectedUserGroup=angular.copy(updatedUserGroup),toastr.success(vm.group.Name+" was updated.")})},vm["delete"]=function(){ocUserGroups.Delete(vm.group,$stateParams.buyerid).then(function(){toastr.success(vm.group.Name+" was deleted."),$state.go("userGroups")})}}UserGroupController.$inject=["$state","$stateParams","toastr","OrderCloudSDK","ocUserGroups","SelectedUserGroup"],angular.module("orderCloud").controller("UserGroupCtrl",UserGroupController)}(),function(){"use strict";function OrderCloudSpendingAccounts($q,$uibModal,ocConfirm,OrderCloudSDK){function _create(buyerid){return $uibModal.open({templateUrl:"buyerManagement/spendingAccounts/templates/spendingAccountCreate.modal.html",controller:"SpendingAccountCreateModalCtrl",controllerAs:"spendingAccountCreateModal",resolve:{SelectedBuyerID:function(){return buyerid}}}).result}function _edit(spendingAccount,buyerid){return $uibModal.open({templateUrl:"buyerManagement/spendingAccounts/templates/spendingAccountEdit.modal.html",controller:"SpendingAccountEditModalCtrl",controllerAs:"spendingAccountEditModal",bindToController:!0,resolve:{SelectedSpendingAccount:function(){return spendingAccount},SelectedBuyerID:function(){return buyerid}}}).result}function _delete(spendingAccount,buyerid){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+spendingAccount.Name+"</b>?",confirmText:"Delete spending account",type:"delete"}).then(function(){return OrderCloudSDK.SpendingAccounts.Delete(buyerid,spendingAccount.ID)})}function _getAssignments(level,buyerid,usergroupid){var options={userGroupID:usergroupid,level:level,pageSize:100};return OrderCloudSDK.SpendingAccounts.ListAssignments(buyerid,options).then(function(data1){for(var df=$q.defer(),queue=[],totalPages=angular.copy(data1.Meta.TotalPages),currentPage=angular.copy(data1.Meta.Page);totalPages>currentPage;)currentPage++,options.page=currentPage,queue.push(OrderCloudSDK.SpendingAccounts.ListAssignments(buyerid,options));return $q.all(queue).then(function(results){angular.forEach(results,function(r){data1.Items=data1.Items.concat(r.Items)}),df.resolve(data1.Items)}),df.promise})}function _mapAssignments(allAssignments,spendingAccountList){return spendingAccountList.Items=_.map(spendingAccountList.Items,function(spendingAccount){return spendingAccount.Assigned=!1,angular.forEach(allAssignments,function(assignment){spendingAccount.ID==assignment.SpendingAccountID&&(spendingAccount.Assigned=!0)}),spendingAccount}),spendingAccountList}function _compareAssignments(allAssignments,spendingAccountList,userGroupID){var changedAssignments=[];return angular.forEach(spendingAccountList.Items,function(spendingAccount){var existingAssignment=_.where(allAssignments,{SpendingAccountID:spendingAccount.ID})[0];existingAssignment&&!spendingAccount.Assigned?changedAssignments.push({old:existingAssignment,"new":null}):!existingAssignment&&spendingAccount.Assigned&&changedAssignments.push({old:null,"new":{UserGroupID:userGroupID,SpendingAccountID:spendingAccount.ID}})}),changedAssignments}function _updateAssignments(allAssignments,changedAssignments,buyerid){var df=$q.defer(),assignmentQueue=[],errors=[];return angular.forEach(changedAssignments,function(diff){!diff.old&&diff["new"]?assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.SpendingAccounts.SaveAssignment(buyerid,diff["new"]).then(function(){allAssignments.push(diff["new"]),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}()):diff.old&&!diff["new"]&&assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.SpendingAccounts.DeleteAssignment(buyerid,diff.old.SpendingAccountID,{userGroupID:diff.old.UserGroupID}).then(function(){allAssignments.splice(allAssignments.indexOf(diff.old),1),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}())}),$q.all(assignmentQueue).then(function(){df.resolve({UpdatedAssignments:allAssignments,Errors:errors})}),df.promise}var service={Create:_create,Edit:_edit,Delete:_delete,Assignments:{Get:_getAssignments,Map:_mapAssignments,Compare:_compareAssignments,Update:_updateAssignments}};return service}OrderCloudSpendingAccounts.$inject=["$q","$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocSpendingAccounts",OrderCloudSpendingAccounts)}(),function(){"use strict";function SpendingAccountsController($exceptionHandler,$state,$stateParams,toastr,OrderCloudSDK,ocParameters,ocSpendingAccounts,CurrentAssignments,SpendingAccountList,Parameters){function selectedCheck(){vm.allItemsSelected=_.where(vm.list.Items,{Assigned:!0}).length==vm.list.Items.length}function changedCheck(){vm.changedAssignments=ocSpendingAccounts.Assignments.Compare(CurrentAssignments,vm.list,$stateParams.usergroupid)}var vm=this;vm.list=SpendingAccountList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.userGroupID=$stateParams.usergroupid,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.SpendingAccounts.List($stateParams.buyerid,parameters).then(function(data){var mappedData=ocSpendingAccounts.Assignments.Map(CurrentAssignments,data);vm.list.Items=vm.list.Items.concat(mappedData.Items),vm.list.Meta=mappedData.Meta,selectedCheck()})},selectedCheck(),vm.selectAllItems=function(){vm.allItemsSelected=!vm.allItemsSelected,_.map(vm.list.Items,function(i){i.Assigned=vm.allItemsSelected}),changedCheck()},vm.selectItem=function(scope){scope.spendingAccount.Assigned||(vm.allItemsSelected=!1),vm.selectedCount=_.where(vm.list.Items,{Assigned:!0}).length,changedCheck()},vm.resetAssignments=function(){vm.list=ocSpendingAccounts.Assignments.Map(CurrentAssignments,vm.list),vm.changedAssignments=[],selectedCheck()},vm.updateAssignments=function(){vm.searchLoading=ocSpendingAccounts.Assignments.Update(CurrentAssignments,vm.changedAssignments,$stateParams.buyerid).then(function(data){angular.forEach(data.Errors,function(ex){$exceptionHandler(ex)}),CurrentAssignments=data.UpdatedAssignments,changedCheck(),selectedCheck(),toastr.success("Spending account assignments updated.")})},vm.createSpendingAccount=function(){function _updateList(n){vm.list.Items.push(n),vm.list.Meta.TotalCount++,vm.list.Meta.ItemRange[1]++,toastr.success(n.Name+" was created.")}ocSpendingAccounts.Create($stateParams.buyerid).then(function(newSpendingAccount){if($stateParams.usergroupid){var newAssignment={SpendingAccountID:newSpendingAccount.ID,UserGroupID:$stateParams.usergroupid};vm.searchLoading=OrderCloudSDK.SpendingAccounts.SaveAssignment($stateParams.buyerid,newAssignment).then(function(){newSpendingAccount.Assigned=!0,CurrentAssignments.push(newAssignment),_updateList(newSpendingAccount)})["catch"](function(){newSpendingAccount.Assigned=!1,_updateList(newSpendingAccount)})}else newSpendingAccount.Assigned=!1,_updateList(newSpendingAccount)})},vm.editSpendingAccount=function(scope){ocSpendingAccounts.Edit(scope.spendingAccount,$stateParams.buyerid).then(function(updatedSpendingAccount){updatedSpendingAccount.Assigned=vm.list.Items[scope.$index].Assigned,vm.list.Items[scope.$index]=updatedSpendingAccount,updatedSpendingAccount.ID!=scope.spendingAccount.ID&&(_.map(CurrentAssignments,function(assignment){return assignment.SpendingAccountID==scope.spendingAccount.ID&&(assignment.SpendingAccountID=updatedSpendingAccount.ID),assignment}),changedCheck()),toastr.success(updatedSpendingAccount.Name+" was updated.")})},vm.deleteSpendingAccount=function(scope){ocSpendingAccounts.Delete(scope.spendingAccount,$stateParams.buyerid).then(function(){toastr.success(scope.spendingAccount.Name+" was deleted."),vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,changedCheck()})}}SpendingAccountsController.$inject=["$exceptionHandler","$state","$stateParams","toastr","OrderCloudSDK","ocParameters","ocSpendingAccounts","CurrentAssignments","SpendingAccountList","Parameters"],angular.module("orderCloud").controller("SpendingAccountsCtrl",SpendingAccountsController)}(),function(){"use strict";function SpendingAccountsConfig($stateProvider){$stateProvider.state("spendingAccounts",{parent:"buyer",templateUrl:"buyerManagement/spendingAccounts/templates/spendingAccounts.html",controller:"SpendingAccountsCtrl",controllerAs:"spendingAccounts",url:"/spending-accounts?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"Buyer Spending Accounts"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$q","ocSpendingAccounts","$stateParams",function($q,ocSpendingAccounts,$stateParams){return ocSpendingAccounts.Assignments.Get("company",$stateParams.buyerid)}],SpendingAccountList:["$stateParams","OrderCloudSDK","Parameters","CurrentAssignments","ocSpendingAccounts",function($stateParams,OrderCloudSDK,Parameters,CurrentAssignments,ocSpendingAccounts){var parameters=angular.copy(Parameters);return parameters.filters=angular.extend(parameters.filters||{},{RedemptionCode:"!*"}),OrderCloudSDK.SpendingAccounts.List($stateParams.buyerid,parameters).then(function(data){return ocSpendingAccounts.Assignments.Map(CurrentAssignments,data)})}]}}).state("userGroup.spendingAccounts",{templateUrl:"buyerManagement/spendingAccounts/templates/spendingAccounts.html",controller:"SpendingAccountsCtrl",controllerAs:"spendingAccounts",url:"/spending-accounts?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"User Group Spending Accounts"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$q","ocSpendingAccounts","$stateParams",function($q,ocSpendingAccounts,$stateParams){return ocSpendingAccounts.Assignments.Get("group",$stateParams.buyerid,$stateParams.usergroupid)}],SpendingAccountList:["$stateParams","OrderCloudSDK","Parameters","CurrentAssignments","ocSpendingAccounts",function($stateParams,OrderCloudSDK,Parameters,CurrentAssignments,ocSpendingAccounts){var parameters=angular.copy(Parameters);return parameters.filters=angular.extend(parameters.filters||{},{RedemptionCode:"!*"}),OrderCloudSDK.SpendingAccounts.List($stateParams.buyerid,parameters).then(function(data){return ocSpendingAccounts.Assignments.Map(CurrentAssignments,data)})}]}})}SpendingAccountsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(SpendingAccountsConfig)}(),function(){"use strict";function SpendingAccountEditModalController($uibModalInstance,OrderCloudSDK,SelectedSpendingAccount,SelectedBuyerID){var vm=this;vm.spendingAccount=angular.copy(SelectedSpendingAccount),vm.spendingAccountName=SelectedSpendingAccount.Name,vm.spendingAccount.StartDate&&(vm.spendingAccount.StartDate=new Date(vm.spendingAccount.StartDate)),
vm.spendingAccount.EndDate&&(vm.spendingAccount.EndDate=new Date(vm.spendingAccount.EndDate)),vm.submit=function(){vm.loading=OrderCloudSDK.SpendingAccounts.Update(SelectedBuyerID,SelectedSpendingAccount.ID,vm.spendingAccount).then(function(updatedSpendingAccount){$uibModalInstance.close(updatedSpendingAccount)})},vm.cancel=function(){$uibModalInstance.dismiss()}}SpendingAccountEditModalController.$inject=["$uibModalInstance","OrderCloudSDK","SelectedSpendingAccount","SelectedBuyerID"],angular.module("orderCloud").controller("SpendingAccountEditModalCtrl",SpendingAccountEditModalController)}(),function(){"use strict";function SpendingAccountCreateModalController($uibModalInstance,OrderCloudSDK,SelectedBuyerID){var vm=this;vm.spendingAccount={},vm.submit=function(){vm.loading=OrderCloudSDK.SpendingAccounts.Create(SelectedBuyerID,vm.spendingAccount).then(function(newSpendingAccount){$uibModalInstance.close(newSpendingAccount)})},vm.cancel=function(){$uibModalInstance.dismiss()}}SpendingAccountCreateModalController.$inject=["$uibModalInstance","OrderCloudSDK","SelectedBuyerID"],angular.module("orderCloud").controller("SpendingAccountCreateModalCtrl",SpendingAccountCreateModalController)}(),function(){"use strict";function OrderCloudPromotions($q,$uibModal,ocConfirm,OrderCloudSDK){function _create(buyerid){return $uibModal.open({templateUrl:"buyerManagement/promotions/templates/promotionCreate.modal.html",controller:"PromotionCreateModalCtrl",controllerAs:"promotionCreateModal",resolve:{SelectedBuyerID:function(){return buyerid}}}).result}function _edit(promotion,buyerid){return $uibModal.open({templateUrl:"buyerManagement/promotions/templates/promotionEdit.modal.html",controller:"PromotionEditModalCtrl",controllerAs:"promotionEditModal",bindToController:!0,resolve:{SelectedPromotion:function(){return promotion},SelectedBuyerID:function(){return buyerid}}}).result}function _delete(promotion,buyerid){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+(promotion.Name?promotion.Name:promotion.Code)+"</b>?",confirmText:"Delete promotion",type:"delete"}).then(function(){return OrderCloudSDK.Promotions.Delete(promotion.ID,buyerid)})}function _getAssignments(level,buyerid,usergroupid){var options={userGroupID:usergroupid,level:level,pageSize:100,buyerID:buyerid};return OrderCloudSDK.Promotions.ListAssignments(options).then(function(data1){for(var df=$q.defer(),queue=[],totalPages=angular.copy(data1.Meta.TotalPages),currentPage=angular.copy(data1.Meta.Page);totalPages>currentPage;)currentPage++,options.page=currentPage,queue.push(OrderCloudSDK.Promotions.ListAssignments(options));return $q.all(queue).then(function(results){angular.forEach(results,function(r){data1.Items=data1.Items.concat(r.Items)}),df.resolve(data1.Items)}),df.promise})}function _mapAssignments(allAssignments,promotionList,buyerID){return promotionList.Items=_.map(promotionList.Items,function(promotion){return promotion.Assigned=!1,angular.forEach(allAssignments,function(assignment){promotion.ID==assignment.PromotionID&&buyerID==assignment.BuyerID&&(promotion.Assigned=!0)}),promotion}),promotionList}function _compareAssignments(allAssignments,promotionList,userGroupID,buyerID){var changedAssignments=[];return angular.forEach(promotionList.Items,function(promotion){var existingAssignment=_.where(allAssignments,{PromotionID:promotion.ID,BuyerID:buyerID})[0];existingAssignment&&!promotion.Assigned?changedAssignments.push({old:existingAssignment,"new":null}):!existingAssignment&&promotion.Assigned&&changedAssignments.push({old:null,"new":{BuyerID:buyerID,UserGroupID:userGroupID,PromotionID:promotion.ID}})}),changedAssignments}function _updateAssignments(allAssignments,changedAssignments){var df=$q.defer(),assignmentQueue=[],errors=[];return angular.forEach(changedAssignments,function(diff){!diff.old&&diff["new"]?assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.Promotions.SaveAssignment(diff["new"]).then(function(){allAssignments.push(diff["new"]),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}()):diff.old&&!diff["new"]&&assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.Promotions.DeleteAssignment(diff.old.PromotionID,diff.old.BuyerID,{userGroupID:diff.old.UserGroupID}).then(function(){allAssignments.splice(allAssignments.indexOf(diff.old),1),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}())}),$q.all(assignmentQueue).then(function(){df.resolve({UpdatedAssignments:allAssignments,Errors:errors})}),df.promise}var service={Create:_create,Edit:_edit,Delete:_delete,Assignments:{Get:_getAssignments,Map:_mapAssignments,Compare:_compareAssignments,Update:_updateAssignments}};return service}OrderCloudPromotions.$inject=["$q","$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocPromotions",OrderCloudPromotions)}(),function(){"use strict";function PromotionsController($exceptionHandler,$state,$stateParams,toastr,OrderCloudSDK,ocParameters,ocPromotions,CurrentAssignments,PromotionList,Parameters){function selectedCheck(){vm.allItemsSelected=_.where(vm.list.Items,{Assigned:!0}).length==vm.list.Items.length}function changedCheck(){vm.changedAssignments=ocPromotions.Assignments.Compare(CurrentAssignments,vm.list,$stateParams.usergroupid,$stateParams.buyerid)}var vm=this;vm.list=PromotionList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.userGroupID=$stateParams.usergroupid,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.Promotions.List(parameters).then(function(data){var mappedData=ocPromotions.Assignments.Map(CurrentAssignments,data,$stateParams.buyerid);vm.list.Items=vm.list.Items.concat(mappedData.Items),vm.list.Meta=mappedData.Meta,selectedCheck()})},selectedCheck(),vm.selectAllItems=function(){vm.allItemsSelected=!vm.allItemsSelected,_.map(vm.list.Items,function(i){i.Assigned=vm.allItemsSelected}),changedCheck()},vm.selectItem=function(scope){scope.promotion.Assigned||(vm.allItemsSelected=!1),vm.selectedCount=_.where(vm.list.Items,{Assigned:!0}).length,changedCheck()},vm.resetAssignments=function(){vm.list=ocPromotions.Assignments.Map(CurrentAssignments,vm.list,$stateParams.buyerid),vm.changedAssignments=[],selectedCheck()},vm.updateAssignments=function(){vm.searchLoading=ocPromotions.Assignments.Update(CurrentAssignments,vm.changedAssignments).then(function(data){angular.forEach(data.Errors,function(ex){$exceptionHandler(ex)}),CurrentAssignments=data.UpdatedAssignments,changedCheck(),selectedCheck(),toastr.success("Promotion assignments updated.")})},vm.createPromotion=function(){function _updateList(n){vm.list.Items.push(n),vm.list.Meta.TotalCount++,vm.list.Meta.ItemRange[1]++,toastr.success(n.Code+" was created.")}ocPromotions.Create($stateParams.buyerid).then(function(newPromotion){if($stateParams.usergroupid){var newAssignment={BuyerID:$stateParams.buyerid,PromotionID:newPromotion.ID,UserGroupID:$stateParams.usergroupid};vm.searchLoading=OrderCloudSDK.Promotions.SaveAssignment(newAssignment).then(function(){newPromotion.Assigned=!0,CurrentAssignments.push(newAssignment),_updateList(newPromotion)})["catch"](function(){newPromotion.Assigned=!1,_updateList(newPromotion)})}else newPromotion.Assigned=!1,_updateList(newPromotion)})},vm.editPromotion=function(scope){ocPromotions.Edit(scope.promotion,$stateParams.buyerid).then(function(updatedPromotion){updatedPromotion.Assigned=vm.list.Items[scope.$index].Assigned,vm.list.Items[scope.$index]=updatedPromotion,updatedPromotion.ID!=scope.promotion.ID&&(_.map(CurrentAssignments,function(assignment){return assignment.PromotionID==scope.promotion.ID&&(assignment.PromotionID=updatedPromotion.ID),assignment}),changedCheck()),toastr.success(updatedPromotion.Code+" was updated.")})},vm.deletePromotion=function(scope){ocPromotions.Delete(scope.promotion,$stateParams.buyerid).then(function(){toastr.success(scope.promotion.Code+" was deleted."),vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,changedCheck()})}}PromotionsController.$inject=["$exceptionHandler","$state","$stateParams","toastr","OrderCloudSDK","ocParameters","ocPromotions","CurrentAssignments","PromotionList","Parameters"],angular.module("orderCloud").controller("PromotionsCtrl",PromotionsController)}(),function(){"use strict";function PromotionsConfig($stateProvider){$stateProvider.state("promotions",{parent:"buyer",templateUrl:"buyerManagement/promotions/templates/promotions.html",controller:"PromotionsCtrl",controllerAs:"promotions",url:"/promotions?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"Buyer Promotions"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$q","ocPromotions","$stateParams",function($q,ocPromotions,$stateParams){return ocPromotions.Assignments.Get("company",$stateParams.buyerid)}],PromotionList:["OrderCloudSDK","Parameters","CurrentAssignments","ocPromotions",function(OrderCloudSDK,Parameters,CurrentAssignments,ocPromotions){return OrderCloudSDK.Promotions.List(Parameters).then(function(data){return ocPromotions.Assignments.Map(CurrentAssignments,data,Parameters.buyerid)})}]}}).state("userGroup.promotions",{templateUrl:"buyerManagement/promotions/templates/promotions.html",controller:"PromotionsCtrl",controllerAs:"promotions",url:"/promotions?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"User Group Promotions"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$q","ocPromotions","$stateParams",function($q,ocPromotions,$stateParams){return ocPromotions.Assignments.Get("group",$stateParams.buyerid,$stateParams.usergroupid)}],PromotionList:["OrderCloudSDK","Parameters","CurrentAssignments","ocPromotions",function(OrderCloudSDK,Parameters,CurrentAssignments,ocPromotions){return OrderCloudSDK.Promotions.List(Parameters).then(function(data){return ocPromotions.Assignments.Map(CurrentAssignments,data,Parameters.buyerid)})}]}})}PromotionsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(PromotionsConfig)}(),function(){"use strict";function PromotionEditModalController($uibModalInstance,OrderCloudSDK,SelectedPromotion,SelectedBuyerID){var vm=this;vm.promotion=angular.copy(SelectedPromotion),vm.promotionName=SelectedPromotion.Name?SelectedPromotion.Name:SelectedPromotion.Code,vm.promotion.StartDate&&(vm.promotion.StartDate=new Date(vm.promotion.StartDate)),vm.promotion.ExpirationDate&&(vm.promotion.ExpirationDate=new Date(vm.promotion.ExpirationDate)),vm.submit=function(){vm.loading=OrderCloudSDK.Promotions.Update(SelectedPromotion.ID,vm.promotion).then(function(updatedPromotion){$uibModalInstance.close(updatedPromotion)})},vm.cancel=function(){$uibModalInstance.dismiss()}}PromotionEditModalController.$inject=["$uibModalInstance","OrderCloudSDK","SelectedPromotion","SelectedBuyerID"],angular.module("orderCloud").controller("PromotionEditModalCtrl",PromotionEditModalController)}(),function(){"use strict";function PromotionCreateModalController($uibModalInstance,OrderCloudSDK,SelectedBuyerID){var vm=this;vm.promotion={},vm.submit=function(){vm.loading=OrderCloudSDK.Promotions.Create(vm.promotion).then(function(newPromotion){$uibModalInstance.close(newPromotion)})},vm.cancel=function(){$uibModalInstance.dismiss()}}PromotionCreateModalController.$inject=["$uibModalInstance","OrderCloudSDK","SelectedBuyerID"],angular.module("orderCloud").controller("PromotionCreateModalCtrl",PromotionCreateModalController)}(),function(){"use strict";function OrderCloudCreditCards($q,$uibModal,ocConfirm,OrderCloudSDK,ocAuthNet){function _create(buyerID){return $uibModal.open({templateUrl:"buyerManagement/creditCards/templates/creditCardCreate.modal.html",controller:"CreditCardCreateModalCtrl",controllerAs:"creditCardCreateModal",resolve:{SelectedBuyerID:function(){return buyerID}}}).result}function _edit(creditCard,buyerid){return $uibModal.open({templateUrl:"buyerManagement/creditCards/templates/creditCardEdit.modal.html",controller:"CreditCardEditModalCtrl",controllerAs:"creditCardEditModal",bindToController:!0,resolve:{SelectedCreditCard:function(){return creditCard},SelectedBuyerID:function(){return buyerid}}}).result}function _delete(creditCard,buyerid){return creditCard.Shared=!0,ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>xxxx-xxxx-xxxx-"+creditCard.PartialAccountNumber+"</b>?",confirmText:"Delete credit card",type:"delete"}).then(function(){return ocAuthNet.DeleteCreditCard(creditCard,buyerid)})}function _getAssignments(level,buyerid,usergroupid){var options={userGroupID:usergroupid,level:level,pageSize:100};return OrderCloudSDK.CreditCards.ListAssignments(buyerid,options).then(function(data1){for(var df=$q.defer(),queue=[],totalPages=angular.copy(data1.Meta.TotalPages),currentPage=angular.copy(data1.Meta.Page);totalPages>currentPage;)currentPage++,options.page=currentPage,queue.push(OrderCloudSDK.CreditCards.ListAssignments(buyerid,options));return $q.all(queue).then(function(results){angular.forEach(results,function(r){data1.Items=data1.Items.concat(r.Items)}),df.resolve(data1.Items)}),df.promise})}function _mapAssignments(allAssignments,creditCardList){return creditCardList.Items=_.map(creditCardList.Items,function(creditCard){return creditCard.Assigned=!1,angular.forEach(allAssignments,function(assignment){creditCard.ID==assignment.CreditCardID&&(creditCard.Assigned=!0)}),creditCard}),creditCardList}function _compareAssignments(allAssignments,creditCardList,userGroupID){var changedAssignments=[];return angular.forEach(creditCardList.Items,function(creditCard){var existingAssignment=_.where(allAssignments,{CreditCardID:creditCard.ID})[0];existingAssignment&&!creditCard.Assigned?changedAssignments.push({old:existingAssignment,"new":null}):!existingAssignment&&creditCard.Assigned&&changedAssignments.push({old:null,"new":{UserGroupID:userGroupID,CreditCardID:creditCard.ID}})}),changedAssignments}function _updateAssignments(allAssignments,changedAssignments,buyerid){var df=$q.defer(),assignmentQueue=[],errors=[];return angular.forEach(changedAssignments,function(diff){!diff.old&&diff["new"]?assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.CreditCards.SaveAssignment(buyerid,diff["new"]).then(function(){allAssignments.push(diff["new"]),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}()):diff.old&&!diff["new"]&&assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.CreditCards.DeleteAssignment(buyerid,diff.old.CreditCardID,{userGroupID:diff.old.UserGroupID}).then(function(){allAssignments.splice(allAssignments.indexOf(diff.old),1),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}())}),$q.all(assignmentQueue).then(function(){df.resolve({UpdatedAssignments:allAssignments,Errors:errors})}),df.promise}var service={Create:_create,Edit:_edit,Delete:_delete,Assignments:{Get:_getAssignments,Map:_mapAssignments,Compare:_compareAssignments,Update:_updateAssignments}};return service}OrderCloudCreditCards.$inject=["$q","$uibModal","ocConfirm","OrderCloudSDK","ocAuthNet"],angular.module("orderCloud").factory("ocCreditCards",OrderCloudCreditCards)}(),function(){"use strict";function CreditCardsController($state,$stateParams,$exceptionHandler,toastr,OrderCloudSDK,ocParameters,ocCreditCards,CreditCardList,CurrentAssignments,Parameters){function selectedCheck(){vm.allItemsSelected=_.where(vm.list.Items,{Assigned:!0}).length==vm.list.Items.length}function changedCheck(){vm.changedAssignments=ocCreditCards.Assignments.Compare(CurrentAssignments,vm.list,$stateParams.usergroupid)}var vm=this;vm.list=CreditCardList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.userGroupID=$stateParams.usergroupid,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.CreditCards.List($stateParams.buyerid,parameters).then(function(data){var mappedData=ocCreditCards.Assignments.Map(CurrentAssignments,data);vm.list.Items=vm.list.Items.concat(mappedData.Items),vm.list.Meta=mappedData.Meta,selectedCheck()})},selectedCheck(),vm.selectAllItems=function(){vm.allItemsSelected=!vm.allItemsSelected,_.map(vm.list.Items,function(i){i.Assigned=vm.allItemsSelected}),changedCheck()},vm.selectItem=function(scope){scope.creditCard.Assigned||(vm.allItemsSelected=!1),vm.selectedCount=_.where(vm.list.Items,{Assigned:!0}).length,changedCheck()},vm.resetAssignments=function(){vm.list=ocCreditCards.Assignments.Map(CurrentAssignments,vm.list),vm.changedAssignments=[],selectedCheck()},vm.updateAssignments=function(){vm.searchLoading=ocCreditCards.Assignments.Update(CurrentAssignments,vm.changedAssignments,$stateParams.buyerid).then(function(data){angular.forEach(data.Errors,function(ex){$exceptionHandler(ex)}),CurrentAssignments=data.UpdatedAssignments,changedCheck(),selectedCheck(),toastr.success("Credit card assignments updated.")})},vm.createCreditCard=function(){function _updateList(n){vm.list.Items.push(n),vm.list.Meta.TotalCount++,vm.list.Meta.ItemRange[1]++,toastr.success("Credit card ending in "+n.PartialAccountNumber+" was saved.")}ocCreditCards.Create($stateParams.buyerid).then(function(creditCard){if($stateParams.usergroupid){var newAssignment={CreditCardID:creditCard.ID,UserGroupID:$stateParams.usergroupid};vm.searchLoading=OrderCloudSDK.CreditCards.SaveAssignment($stateParams.buyerid,newAssignment).then(function(){creditCard.Assigned=!0,CurrentAssignments.push(newAssignment),_updateList(creditCard)})["catch"](function(){creditCard.Assigned=!1,_updateList(creditCard)})}else creditCard.Assigned=!1,_updateList(creditCard)})},vm.editCreditCard=function(scope){ocCreditCards.Edit(scope.creditCard,$stateParams.buyerid).then(function(updatedCreditCard){updatedCreditCard.Assigned=vm.list.Items[scope.$index].Assigned,vm.list.Items[scope.$index]=updatedCreditCard,updatedCreditCard.ID!=scope.creditCard.ID&&(_.map(CurrentAssignments,function(assignment){return assignment.CreditCardID==scope.creditCard.ID&&(assignment.CreditCardID=updatedCreditCard.ID),assignment}),changedCheck()),toastr.success("Credit card ending in "+updatedCreditCard.PartialAccountNumber+" was updated.")})},vm.deleteCreditCard=function(scope){ocCreditCards.Delete(scope.creditCard,$stateParams.buyerid).then(function(){toastr.success("Credit card ending in "+scope.creditCard.PartialAccountNumber+" was deleted."),vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,changedCheck()})}}CreditCardsController.$inject=["$state","$stateParams","$exceptionHandler","toastr","OrderCloudSDK","ocParameters","ocCreditCards","CreditCardList","CurrentAssignments","Parameters"],angular.module("orderCloud").controller("CreditCardsCtrl",CreditCardsController)}(),function(){"use strict";function CreditCardsConfig($stateProvider){$stateProvider.state("creditCards",{parent:"buyer",templateUrl:"buyerManagement/creditCards/templates/creditCards.html",controller:"CreditCardsCtrl",controllerAs:"creditCards",url:"/credit-cards?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"Buyer Credit Cards"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["ocCreditCards","$stateParams",function(ocCreditCards,$stateParams){return ocCreditCards.Assignments.Get("company",$stateParams.buyerid)}],CreditCardList:["$stateParams","OrderCloudSDK","Parameters","CurrentAssignments","ocCreditCards",function($stateParams,OrderCloudSDK,Parameters,CurrentAssignments,ocCreditCards){return OrderCloudSDK.CreditCards.List($stateParams.buyerid,Parameters).then(function(data){return ocCreditCards.Assignments.Map(CurrentAssignments,data)})}]}}).state("userGroup.creditCards",{templateUrl:"buyerManagement/creditCards/templates/creditCards.html",controller:"CreditCardsCtrl",controllerAs:"creditCards",url:"/credit-cards?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"User Group Credit Cards"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$q","ocCreditCards","$stateParams",function($q,ocCreditCards,$stateParams){return ocCreditCards.Assignments.Get("group",$stateParams.buyerid,$stateParams.usergroupid)}],CreditCardList:["$stateParams","OrderCloudSDK","Parameters","CurrentAssignments","ocCreditCards",function($stateParams,OrderCloudSDK,Parameters,CurrentAssignments,ocCreditCards){return OrderCloudSDK.CreditCards.List($stateParams.buyerid,Parameters).then(function(data){return ocCreditCards.Assignments.Map(CurrentAssignments,data)})}]}})}CreditCardsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(CreditCardsConfig)}(),function(){"use strict";function CreditCardEditModalController($uibModalInstance,$filter,ocAuthNet,ocCreditCardUtility,SelectedCreditCard,SelectedBuyerID){var vm=this;vm.creditCard=angular.copy(SelectedCreditCard),vm.creditCard.UpdatedCreditCardID=angular.copy(SelectedCreditCard.ID),vm.creditCardInfo=ocCreditCardUtility,vm.creditCard.ExpirationMonth=$filter("date")(vm.creditCard.ExpirationDate,"MM"),vm.creditCard.ExpirationYear=+$filter("date")(vm.creditCard.ExpirationDate,"yyyy"),-1==vm.creditCardInfo.ExpirationYears.indexOf(vm.creditCard.ExpirationYear)&&vm.creditCardInfo.ExpirationYears.unshift(vm.creditCard.ExpirationYear),vm.submit=function(){vm.creditCard.Shared=!0,vm.creditCard.CardNumber=vm.creditCard.PartialAccountNumber,vm.loading=ocAuthNet.UpdateCreditCard(vm.creditCard,SelectedBuyerID).then(function(creditCard){$uibModalInstance.close(creditCard)})["catch"](function(ex){$uibModalInstance.dismiss(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}CreditCardEditModalController.$inject=["$uibModalInstance","$filter","ocAuthNet","ocCreditCardUtility","SelectedCreditCard","SelectedBuyerID"],angular.module("orderCloud").controller("CreditCardEditModalCtrl",CreditCardEditModalController)}(),function(){"use strict";function CreditCardCreateModalController($uibModalInstance,ocAuthNet,ocCreditCardUtility,SelectedBuyerID){var vm=this;vm.creditCardInfo=ocCreditCardUtility,vm.submit=function(){vm.creditCard.Shared=!0,vm.loading=ocAuthNet.CreateCreditCard(vm.creditCard,SelectedBuyerID).then(function(creditCard){$uibModalInstance.close(creditCard)})["catch"](function(ex){$uibModalInstance.dismiss(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}CreditCardCreateModalController.$inject=["$uibModalInstance","ocAuthNet","ocCreditCardUtility","SelectedBuyerID"],angular.module("orderCloud").controller("CreditCardCreateModalCtrl",CreditCardCreateModalController)}(),function(){"use strict";function OrderCloudCostCenters($q,$uibModal,ocConfirm,OrderCloudSDK){function _create(buyerid){return $uibModal.open({templateUrl:"buyerManagement/costCenters/templates/costCenterCreate.modal.html",controller:"CostCenterCreateModalCtrl",controllerAs:"costCenterCreateModal",resolve:{SelectedBuyerID:function(){return buyerid}}}).result}function _edit(costCenter,buyerid){return $uibModal.open({templateUrl:"buyerManagement/costCenters/templates/costCenterEdit.modal.html",controller:"CostCenterEditModalCtrl",controllerAs:"costCenterEditModal",bindToController:!0,resolve:{SelectedCostCenter:function(){return costCenter},SelectedBuyerID:function(){return buyerid}}}).result}function _delete(costCenter,buyerid){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+costCenter.Name+"</b>?",confirmText:"Delete cost center",type:"delete"}).then(function(){return OrderCloudSDK.CostCenters.Delete(buyerid,costCenter.ID)})}function _getAssignments(level,buyerid,usergroupid){var options={userGroupID:usergroupid,level:level,pageSize:100};return OrderCloudSDK.CostCenters.ListAssignments(buyerid,options).then(function(data1){for(var df=$q.defer(),queue=[],totalPages=angular.copy(data1.Meta.TotalPages),currentPage=angular.copy(data1.Meta.Page);totalPages>currentPage;)currentPage++,options.page=currentPage,queue.push(OrderCloudSDK.CostCenters.ListAssignments(buyerid,options));return $q.all(queue).then(function(results){angular.forEach(results,function(r){data1.Items=data1.Items.concat(r.Items)}),df.resolve(data1.Items)}),df.promise})}function _mapAssignments(allAssignments,costCenterList){return costCenterList.Items=_.map(costCenterList.Items,function(costCenter){return costCenter.Assigned=!1,angular.forEach(allAssignments,function(assignment){costCenter.ID==assignment.CostCenterID&&(costCenter.Assigned=!0)}),costCenter}),costCenterList}function _compareAssignments(allAssignments,costCenterList,userGroupID){var changedAssignments=[];return angular.forEach(costCenterList.Items,function(costCenter){var existingAssignment=_.where(allAssignments,{CostCenterID:costCenter.ID})[0];existingAssignment&&!costCenter.Assigned?changedAssignments.push({old:existingAssignment,"new":null}):!existingAssignment&&costCenter.Assigned&&changedAssignments.push({old:null,"new":{UserGroupID:userGroupID,CostCenterID:costCenter.ID}})}),changedAssignments}function _updateAssignments(allAssignments,changedAssignments,buyerid){var df=$q.defer(),assignmentQueue=[],errors=[];return angular.forEach(changedAssignments,function(diff){!diff.old&&diff["new"]?assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.CostCenters.SaveAssignment(buyerid,diff["new"]).then(function(){allAssignments.push(diff["new"]),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}()):diff.old&&!diff["new"]&&assignmentQueue.push(function(){var d=$q.defer(),options={userGroupID:diff.old.UserGroupID};return OrderCloudSDK.CostCenters.DeleteAssignment(buyerid,diff.old.CostCenterID,options).then(function(){allAssignments.splice(allAssignments.indexOf(diff.old),1),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}())}),$q.all(assignmentQueue).then(function(){df.resolve({UpdatedAssignments:allAssignments,Errors:errors})}),df.promise}var service={Create:_create,Edit:_edit,Delete:_delete,Assignments:{Get:_getAssignments,Map:_mapAssignments,Compare:_compareAssignments,Update:_updateAssignments}};return service}OrderCloudCostCenters.$inject=["$q","$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocCostCenters",OrderCloudCostCenters)}(),function(){"use strict";function CostCentersController($exceptionHandler,$state,$stateParams,toastr,OrderCloudSDK,ocParameters,ocCostCenters,CurrentAssignments,CostCentersList,Parameters){function selectedCheck(){vm.allItemsSelected=_.where(vm.list.Items,{Assigned:!0}).length==vm.list.Items.length}function changedCheck(){vm.changedAssignments=ocCostCenters.Assignments.Compare(CurrentAssignments,vm.list,$stateParams.usergroupid)}var vm=this;vm.list=CostCentersList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.userGroupID=$stateParams.usergroupid,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.CostCenters.List(parameters.buyerid,parameters).then(function(data){var mappedData=ocCostCenters.Assignments.Map(CurrentAssignments,data);vm.list.Items=vm.list.Items.concat(mappedData.Items),vm.list.Meta=mappedData.Meta,selectedCheck()})},selectedCheck(),vm.selectAllItems=function(){vm.allItemsSelected=!vm.allItemsSelected,_.map(vm.list.Items,function(i){i.Assigned=vm.allItemsSelected}),changedCheck()},vm.selectItem=function(scope){scope.costCenter.Assigned||(vm.allItemsSelected=!1),vm.selectedCount=_.where(vm.list.Items,{Assigned:!0}).length,changedCheck()},vm.resetAssignments=function(){vm.list=ocCostCenters.Assignments.Map(CurrentAssignments,vm.list),vm.changedAssignments=[],selectedCheck()},vm.updateAssignments=function(){vm.searchLoading=ocCostCenters.Assignments.Update(CurrentAssignments,vm.changedAssignments,$stateParams.buyerid).then(function(data){angular.forEach(data.Errors,function(ex){$exceptionHandler(ex)}),CurrentAssignments=data.UpdatedAssignments,changedCheck(),selectedCheck(),toastr.success("Cost center assignments updated.")})},vm.createCostCenter=function(){function _updateList(n){vm.list.Items.push(n),vm.list.Meta.TotalCount++,vm.list.Meta.ItemRange[1]++,toastr.success(n.Name+" was created.")}ocCostCenters.Create($stateParams.buyerid).then(function(newCostCenter){if($stateParams.usergroupid){var newAssignment={CostCenterID:newCostCenter.ID,UserGroupID:$stateParams.usergroupid};vm.searchLoading=OrderCloudSDK.CostCenters.SaveAssignment($stateParams.buyerid,newAssignment).then(function(){newCostCenter.Assigned=!0,CurrentAssignments.push(newAssignment),_updateList(newCostCenter)})["catch"](function(){newCostCenter.Assigned=!1,_updateList(newCostCenter)})}else newCostCenter.Assigned=!1,_updateList(newCostCenter)})},vm.editCostCenter=function(scope){ocCostCenters.Edit(scope.costCenter,$stateParams.buyerid).then(function(updatedCostCenter){updatedCostCenter.Assigned=vm.list.Items[scope.$index].Assigned,vm.list.Items[scope.$index]=updatedCostCenter,updatedCostCenter.ID!=scope.costCenter.ID&&(_.map(CurrentAssignments,function(assignment){return assignment.CostCenterID==scope.costCenter.ID&&(assignment.CostCenterID=updatedCostCenter.ID),assignment}),changedCheck()),toastr.success(updatedCostCenter.Name+" was updated.")})},vm.deleteCostCenter=function(scope){ocCostCenters.Delete(scope.costCenter,$stateParams.buyerid).then(function(){toastr.success(scope.costCenter.Name+" was deleted."),vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,changedCheck()})}}CostCentersController.$inject=["$exceptionHandler","$state","$stateParams","toastr","OrderCloudSDK","ocParameters","ocCostCenters","CurrentAssignments","CostCentersList","Parameters"],angular.module("orderCloud").controller("CostCentersCtrl",CostCentersController);
}(),function(){"use strict";function CostCentersConfig($stateProvider){$stateProvider.state("costCenters",{parent:"buyer",templateUrl:"buyerManagement/costCenters/templates/costCenters.html",controller:"CostCentersCtrl",controllerAs:"costCenters",url:"/costcenters?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"Buyer Cost Centers"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$q","ocCostCenters","$stateParams",function($q,ocCostCenters,$stateParams){return ocCostCenters.Assignments.Get("company",$stateParams.buyerid)}],CostCentersList:["OrderCloudSDK","ocCostCenters","Parameters","CurrentAssignments",function(OrderCloudSDK,ocCostCenters,Parameters,CurrentAssignments){return OrderCloudSDK.CostCenters.List(Parameters.buyerid,Parameters).then(function(data){return ocCostCenters.Assignments.Map(CurrentAssignments,data)})}]}}).state("userGroup.costCenters",{templateUrl:"buyerManagement/costCenters/templates/costCenters.html",controller:"CostCentersCtrl",controllerAs:"costCenters",url:"/costcenters?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"User Group Cost Centers"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$q","ocCostCenters","$stateParams",function($q,ocCostCenters,$stateParams){return ocCostCenters.Assignments.Get("group",$stateParams.buyerid,$stateParams.usergroupid)}],CostCentersList:["OrderCloudSDK","ocCostCenters","Parameters","CurrentAssignments",function(OrderCloudSDK,ocCostCenters,Parameters,CurrentAssignments){return OrderCloudSDK.CostCenters.List(Parameters.buyerid,Parameters).then(function(data){return ocCostCenters.Assignments.Map(CurrentAssignments,data)})}]}})}CostCentersConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(CostCentersConfig)}(),function(){"use strict";function CostCenterEditModalController($uibModalInstance,OrderCloudSDK,SelectedCostCenter,SelectedBuyerID){var vm=this;vm.costCenter=angular.copy(SelectedCostCenter),vm.costCenterName=SelectedCostCenter.Name,vm.submit=function(){vm.loading=OrderCloudSDK.CostCenters.Update(SelectedBuyerID,SelectedCostCenter.ID,vm.costCenter).then(function(updatedCostCenter){$uibModalInstance.close(updatedCostCenter)})},vm.cancel=function(){$uibModalInstance.dismiss()}}CostCenterEditModalController.$inject=["$uibModalInstance","OrderCloudSDK","SelectedCostCenter","SelectedBuyerID"],angular.module("orderCloud").controller("CostCenterEditModalCtrl",CostCenterEditModalController)}(),function(){"use strict";function CostCenterCreateModalController($uibModalInstance,OrderCloudSDK,SelectedBuyerID){var vm=this;vm.costCenter={},vm.submit=function(){vm.loading=OrderCloudSDK.CostCenters.Create(SelectedBuyerID,vm.costCenter).then(function(newCostCenter){$uibModalInstance.close(newCostCenter)})},vm.cancel=function(){$uibModalInstance.dismiss()}}CostCenterCreateModalController.$inject=["$uibModalInstance","OrderCloudSDK","SelectedBuyerID"],angular.module("orderCloud").controller("CostCenterCreateModalCtrl",CostCenterCreateModalController)}(),function(){"use strict";function BuyersService($uibModal,ocConfirm,OrderCloudSDK){function _create(){return $uibModal.open({templateUrl:"buyerManagement/buyers/templates/buyerCreate.modal.html",controller:"BuyerCreateModalCtrl",controllerAs:"buyerCreateModal",bindToController:!0}).result}function _delete(buyer){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+buyer.Name+"</b>? <br><br> This will delete all of the buyer's data.",confirmText:"Delete buyer organization",type:"delete"}).then(function(){return OrderCloudSDK.Buyers.Delete(buyer.ID)})}var service={Create:_create,Delete:_delete};return service}BuyersService.$inject=["$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocBuyers",BuyersService)}(),function(){"use strict";function BuyersController($exceptionHandler,$state,toastr,ocBuyers,OrderCloudSDK,ocParameters,Parameters,BuyerList){var vm=this;vm.list=BuyerList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0===Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.Buyers.List(parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})},vm.createBuyer=function(){ocBuyers.Create().then(function(data){toastr.success(data.Name+" was created."),$state.go("buyer",{buyerid:data.ID})})},vm.deleteBuyer=function(scope){ocBuyers.Delete(scope.buyer).then(function(){vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,toastr.success(scope.buyer.Name+" was deleted.")})["catch"](function(ex){$exceptionHandler(ex)})}}BuyersController.$inject=["$exceptionHandler","$state","toastr","ocBuyers","OrderCloudSDK","ocParameters","Parameters","BuyerList"],angular.module("orderCloud").controller("BuyersCtrl",BuyersController)}(),function(){"use strict";function BuyersConfig($stateProvider){$stateProvider.state("buyers",{parent:"base",url:"/buyers?search&page&pageSize&searchOn&sortBy&filters",templateUrl:"buyerManagement/buyers/templates/buyers.html",controller:"BuyersCtrl",controllerAs:"buyers",data:{pageTitle:"Buyer Organizations"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],BuyerList:["OrderCloudSDK","Parameters",function(OrderCloudSDK,Parameters){return OrderCloudSDK.Buyers.List(Parameters)}]}})}BuyersConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(BuyersConfig)}(),function(){"use strict";function BuyerCreateModalController($uibModalInstance,$exceptionHandler,OrderCloudSDK){function updateValidity(which){"BuyerID"===which&&vm.form.ID.$error.UnavailableID&&vm.form.ID.$setValidity("UnavailableID",!0),"CatalogID"===which&&vm.form.NewCatalogID.$error.UnavailableID&&vm.form.NewCatalogID.$setValidity("UnavailableID",!0)}function submit(){function saveCatalog(catalogModel){return OrderCloudSDK.Catalogs.Create(catalogModel).then(function(newCatalog){return vm.buyer.DefaultCatalogID=newCatalog.ID,saveBuyer(vm.buyer)})["catch"](function(ex){409===ex.status?(vm.form.NewCatalogID.$setValidity("UnavailableID",!1),vm.form.NewCatalogID.$$element[0].focus()):$exceptionHandler(ex)})}function saveBuyer(buyerModel){return OrderCloudSDK.Buyers.Create(buyerModel).then(function(data){$uibModalInstance.close(data)})["catch"](function(ex){vm.UseExistingCatalog||OrderCloudSDK.Catalogs.Delete(vm.buyer.DefaultCatalogID),409===ex.status?(vm.form.ID.$setValidity("UnavailableID",!1),vm.form.ID.$$element[0].focus()):$exceptionHandler(ex)})}vm.buyer.UseExistingCatalog?(vm.buyer.DefaultCatalogID=vm.buyer.SelectedDefaultCatalog.ID,vm.loading=saveBuyer(vm.buyer)):vm.loading=saveCatalog(vm.defaultCatalog)}function cancel(){$uibModalInstance.dismiss()}function searchCatalogs(term){var options={search:term,page:1,pageSize:8};return OrderCloudSDK.Catalogs.List(options).then(function(data){return data.Items})}var vm=this;vm.submit=submit,vm.cancel=cancel,vm.searchCatalogs=searchCatalogs,vm.updateValidity=updateValidity,vm.buyer={UseExistingCatalog:!1}}BuyerCreateModalController.$inject=["$uibModalInstance","$exceptionHandler","OrderCloudSDK"],angular.module("orderCloud").controller("BuyerCreateModalCtrl",BuyerCreateModalController)}(),function(){"use strict";function BuyerController($timeout,$scope,$window,$state,$exceptionHandler,toastr,OrderCloudSDK,ocBuyers,ocNavItems,SelectedBuyer){function updateValidity(){vm.settingsForm.buyerIDinput.$error.UnavailableID&&vm.settingsForm.buyerIDinput.$setValidity("UnavailableID",!0)}function updateBuyer(){function createAssignment(){var assignmentModel=angular.extend(options,{ViewAllCategories:!0,ViewAllProducts:!0});return OrderCloudSDK.Catalogs.SaveAssignment(assignmentModel).then(function(){return saveBuyer()})}function saveBuyer(){return OrderCloudSDK.Buyers.Update(SelectedBuyer.ID,vm.settings).then(function(data){data.SelectedDefaultCatalog=vm.settings.SelectedDefaultCatalog,vm.selectedBuyer=data,SelectedBuyer=data,vm.settings=angular.copy(data),toastr.success(data.Name+" was updated"),vm.settingsForm.$setPristine()})["catch"](function(ex){409===ex.status?(vm.settingsForm.buyerIDinput.$setValidity("UnavailableID",!1),vm.settingsForm.buyerIDinput.$$element[0].focus()):$exceptionHandler(ex)})}var options={catalogID:vm.settings.SelectedDefaultCatalog.ID,buyerID:SelectedBuyer.ID};vm.settings.DefaultCatalogID!==vm.settings.SelectedDefaultCatalog.ID?(vm.settings.DefaultCatalogID=vm.settings.SelectedDefaultCatalog.ID,vm.loading=OrderCloudSDK.Catalogs.ListAssignments(options).then(function(data){return data.Items.length>0?saveBuyer():createAssignment()})):vm.loading=saveBuyer()}function deleteBuyer(){ocBuyers.Delete(vm.selectedBuyer).then(function(){toastr.success(vm.selectedBuyer.Name+" was deleted."),$state.go("buyers")})}function searchCatalogs(term){var options={search:term,page:1,pageSize:8};return OrderCloudSDK.Catalogs.List(options).then(function(data){return data.Items})}var vm=this;vm.selectedBuyer=SelectedBuyer,vm.settings=angular.copy(SelectedBuyer),vm.updateValidity=updateValidity,vm.updateBuyer=updateBuyer,vm.deleteBuyer=deleteBuyer,vm.searchCatalogs=searchCatalogs,vm.navigationItems=ocNavItems.Buyer()}BuyerController.$inject=["$timeout","$scope","$window","$state","$exceptionHandler","toastr","OrderCloudSDK","ocBuyers","ocNavItems","SelectedBuyer"],angular.module("orderCloud").controller("BuyerCtrl",BuyerController)}(),function(){"use strict";function BuyerConfig($stateProvider){$stateProvider.state("buyer",{parent:"base",url:"/buyers/:buyerid",templateUrl:"buyerManagement/buyer/templates/buyer.html",controller:"BuyerCtrl",controllerAs:"buyer",data:{pageTitle:"Buyer Settings"},resolve:{SelectedBuyer:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){return OrderCloudSDK.Buyers.Get($stateParams.buyerid).then(function(buyer){return buyer.DefaultCatalogID?OrderCloudSDK.Catalogs.Get(buyer.DefaultCatalogID).then(function(catalog){return buyer.SelectedDefaultCatalog=catalog,buyer}):buyer})}]}})}BuyerConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(BuyerConfig)}(),function(){"use strict";function OrderCloudApprovalRules($q,$uibModal,ocConfirm,OrderCloudSDK){function _create(buyerid){return $uibModal.open({templateUrl:"buyerManagement/approvalRules/templates/approvalRuleCreate.modal.html",controller:"ApprovalRuleCreateModalCtrl",controllerAs:"approvalRuleCreateModal",resolve:{SelectedBuyerID:function(){return buyerid}}}).result}function _edit(approvalRule,buyerid){return $uibModal.open({templateUrl:"buyerManagement/approvalRules/templates/approvalRuleEdit.modal.html",controller:"ApprovalRuleEditModalCtrl",controllerAs:"approvalRuleEditModal",resolve:{SelectedBuyerID:function(){return buyerid},SelectedApprovalRule:function(){return approvalRule}}}).result}function _delete(approvalRule,buyerid){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+approvalRule.Name+"</b>?",confirmText:"Delete approval rule",type:"delete"}).then(function(){return OrderCloudSDK.ApprovalRules.Delete(buyerid,approvalRule.ID)})}var service={Create:_create,Edit:_edit,Delete:_delete};return service}OrderCloudApprovalRules.$inject=["$q","$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocApprovalRules",OrderCloudApprovalRules)}(),function(){"use strict";function ApprovalRulesController($state,$stateParams,toastr,$ocMedia,OrderCloudSDK,ocApprovalRules,ocParameters,ApprovalRuleList,Parameters){var vm=this;vm.list=ApprovalRuleList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.ApprovalRules.List(parameters.buyerid,parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})},vm.editApprovalRule=function(scope){ocApprovalRules.Edit(scope.approvalRule,$stateParams.buyerid).then(function(updatedApprovalRule){vm.list.Items[scope.$index]=updatedApprovalRule,toastr.success(updatedApprovalRule.Name+" was updated.")})},vm.createApprovalRule=function(){ocApprovalRules.Create($stateParams.buyerid).then(function(newApprovalRule){vm.list.Items.push(newApprovalRule),vm.list.Meta.TotalCount++,vm.list.Meta.ItemRange[1]++,toastr.success(newApprovalRule.Name+" was created.")})},vm.deleteApprovalRule=function(scope){ocApprovalRules.Delete(scope.approvalRule,$stateParams.buyerid).then(function(){toastr.success(scope.approvalRule.Name+" was deleted."),vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--})}}ApprovalRulesController.$inject=["$state","$stateParams","toastr","$ocMedia","OrderCloudSDK","ocApprovalRules","ocParameters","ApprovalRuleList","Parameters"],angular.module("orderCloud").controller("ApprovalRulesCtrl",ApprovalRulesController)}(),function(){"use strict";function ApprovalRulesConfig($stateProvider){$stateProvider.state("approvalRules",{parent:"buyer",templateUrl:"buyerManagement/approvalRules/templates/approvalRules.html",controller:"ApprovalRulesCtrl",controllerAs:"approvalRules",url:"/approval-rules?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"Buyer Approval Rules"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],ApprovalRuleList:["OrderCloudSDK","Parameters",function(OrderCloudSDK,Parameters){return OrderCloudSDK.ApprovalRules.List(Parameters.buyerid,Parameters)}]}})}ApprovalRulesConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(ApprovalRulesConfig)}(),function(){"use strict";function ApprovalRuleEditModalController($exceptionHandler,$uibModalInstance,OrderCloudSDK,SelectedApprovalRule,SelectedBuyerID){var vm=this;vm.approvalRule=angular.copy(SelectedApprovalRule),vm.approvalRuleName=SelectedApprovalRule.Name,vm.searchGroups=function(term){return OrderCloudSDK.UserGroups.List(SelectedBuyerID,term,1,6,null,null,null).then(function(data){return data.Items})},vm.submit=function(){vm.loading={backdrop:!1},vm.loading.promise=OrderCloudSDK.ApprovalRules.Update(SelectedBuyerID,SelectedApprovalRule.ID,vm.approvalRule).then(function(updatedApprovalRule){$uibModalInstance.close(updatedApprovalRule)})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}ApprovalRuleEditModalController.$inject=["$exceptionHandler","$uibModalInstance","OrderCloudSDK","SelectedApprovalRule","SelectedBuyerID"],angular.module("orderCloud").controller("ApprovalRuleEditModalCtrl",ApprovalRuleEditModalController)}(),function(){"use strict";function ApprovalRuleCreateModalController($exceptionHandler,$uibModalInstance,OrderCloudSDK,SelectedBuyerID){var vm=this;vm.approvalRule={},vm.searchGroups=function(term){return OrderCloudSDK.UserGroups.List(SelectedBuyerID,term,1,6,null,null,null).then(function(data){return data.Items})},vm.submit=function(){vm.loading={backdrop:!1},vm.loading.promise=OrderCloudSDK.ApprovalRules.Create(SelectedBuyerID,vm.approvalRule).then(function(newApprovalRule){$uibModalInstance.close(newApprovalRule)})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}ApprovalRuleCreateModalController.$inject=["$exceptionHandler","$uibModalInstance","OrderCloudSDK","SelectedBuyerID"],angular.module("orderCloud").controller("ApprovalRuleCreateModalCtrl",ApprovalRuleCreateModalController)}(),function(){"use strict";function OrderCloudAddresses($q,$uibModal,ocConfirm,OrderCloudSDK){function _create(buyerid){return $uibModal.open({templateUrl:"buyerManagement/addresses/templates/addressCreate.modal.html",controller:"AddressCreateModalCtrl",controllerAs:"addressCreateModal",resolve:{SelectedBuyerID:function(){return buyerid}}}).result}function _edit(address,buyerid){return $uibModal.open({templateUrl:"buyerManagement/addresses/templates/addressEdit.modal.html",controller:"AddressEditModalCtrl",controllerAs:"addressEditModal",bindToController:!0,resolve:{SelectedAddress:function(){return address},SelectedBuyerID:function(){return buyerid}}}).result}function _delete(address,buyerid){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+(address.AddressName?address.AddressName:address.ID)+"</b>?",confirmText:"Delete address",type:"delete"}).then(function(){return OrderCloudSDK.Addresses.Delete(buyerid,address.ID)})}function _getAssignments(level,buyerid,usergroupid){var options={userGroupID:usergroupid,level:level,pageSize:100};return OrderCloudSDK.Addresses.ListAssignments(buyerid,options).then(function(data1){for(var df=$q.defer(),queue=[],totalPages=angular.copy(data1.Meta.TotalPages),currentPage=angular.copy(data1.Meta.Page);totalPages>currentPage;)currentPage++,options.page=currentPage,queue.push(OrderCloudSDK.Addresses.ListAssignments(buyerid,options));return $q.all(queue).then(function(results){angular.forEach(results,function(r){data1.Items=data1.Items.concat(r.Items)}),df.resolve(data1.Items)}),df.promise})}function _mapAssignments(allAssignments,addressList){return addressList.Items=_.map(addressList.Items,function(address){return angular.forEach(allAssignments,function(assignment){address.ID==assignment.AddressID&&(address.shipping=assignment.IsShipping,address.billing=assignment.IsBilling)}),address}),addressList}function _compareAssignments(allAssignments,addressList,userGroupID){var changedAssignments=[];return angular.forEach(addressList.Items,function(address){var existingAssignment=_.where(allAssignments,{AddressID:address.ID})[0];!existingAssignment||existingAssignment.IsShipping==address.shipping&&existingAssignment.IsBilling==address.billing?existingAssignment||!address.shipping&&!address.billing||changedAssignments.push({old:null,"new":{UserGroupID:userGroupID,AddressID:address.ID,IsShipping:address.shipping,IsBilling:address.billing}}):changedAssignments.push({old:existingAssignment,"new":{UserGroupID:existingAssignment.UserGroupID,AddressID:existingAssignment.AddressID,IsShipping:address.shipping,IsBilling:address.billing}})}),changedAssignments}function _updateAssignments(allAssignments,changedAssignments,buyerid){var df=$q.defer(),assignmentQueue=[],errors=[];return angular.forEach(changedAssignments,function(diff){diff.old?diff["new"].IsBilling||diff["new"].IsShipping?assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.Addresses.SaveAssignment(buyerid,diff["new"]).then(function(){allAssignments[allAssignments.indexOf(diff.old)]=diff["new"],d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}()):assignmentQueue.push(function(){var d=$q.defer(),options={userID:diff["new"].UserID,userGroupID:diff["new"].UserGroupID};return OrderCloudSDK.Addresses.DeleteAssignment(buyerid,diff["new"].AddressID,options).then(function(){allAssignments.splice(allAssignments.indexOf(diff.old),1),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}()):assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.Addresses.SaveAssignment(buyerid,diff["new"]).then(function(){allAssignments.push(diff["new"]),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}())}),$q.all(assignmentQueue).then(function(){df.resolve({UpdatedAssignments:allAssignments,Errors:errors})}),df.promise}var service={Create:_create,Edit:_edit,Delete:_delete,Assignments:{Get:_getAssignments,Map:_mapAssignments,Compare:_compareAssignments,Update:_updateAssignments}};return service}OrderCloudAddresses.$inject=["$q","$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocAddresses",OrderCloudAddresses)}(),function(){"use strict";function AddressesController($exceptionHandler,$state,$stateParams,$ocMedia,toastr,OrderCloudSDK,ocParameters,ocAddresses,CurrentAssignments,AddressList,Parameters){function selectedCheck(){vm.allShippingSelected=_.where(vm.list.Items,{shipping:!0}).length==vm.list.Items.length,vm.allBillingSelected=_.where(vm.list.Items,{billing:!0}).length==vm.list.Items.length}function changedCheck(){vm.changedAssignments=ocAddresses.Assignments.Compare(CurrentAssignments,vm.list,$stateParams.usergroupid)}var vm=this;vm.list=AddressList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.changedAssignments=[],vm.userGroupID=$stateParams.usergroupid,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width: 767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.Addresses.List(parameters.buyerid,parameters).then(function(data){var mappedData=ocAddresses.Assignments.Map(CurrentAssignments,data);vm.list.Items=vm.list.Items.concat(mappedData.Items),vm.list.Meta=mappedData.Meta,selectedCheck()})},selectedCheck(),vm.selectAllItems=function(type){switch(type){case"shipping":vm.allShippingSelected=!vm.allShippingSelected,_.map(vm.list.Items,function(a){a.shipping=vm.allShippingSelected});break;case"billing":vm.allBillingSelected=!vm.allBillingSelected,_.map(vm.list.Items,function(a){a.billing=vm.allBillingSelected})}changedCheck()},vm.selectItem=function(scope,type){switch(type){case"shipping":scope.address.shipping||(vm.allShippingSelected=!1);break;case"billing":scope.address.billing||(vm.allBillingSelected=!1)}changedCheck()},vm.resetAssignments=function(){vm.list=ocAddresses.Assignments.Map(CurrentAssignments,vm.list),vm.changedAssignments=[],selectedCheck()},vm.updateAssignments=function(){vm.searchLoading=ocAddresses.Assignments.Update(CurrentAssignments,vm.changedAssignments,$stateParams.buyerid).then(function(data){angular.forEach(data.Errors,function(ex){$exceptionHandler(ex)}),CurrentAssignments=data.UpdatedAssignments,changedCheck(),selectedCheck(),toastr.success("Address assignments updated.")})},vm.createAddress=function(){ocAddresses.Create($stateParams.buyerid).then(function(newAddress){vm.list.Items.push(newAddress),vm.list.Meta.TotalCount++,vm.list.Meta.ItemRange[1]++,toastr.success(newAddress.AddressName+" was created.")})},vm.editAddress=function(scope){ocAddresses.Edit(scope.address,$stateParams.buyerid).then(function(updatedAddress){updatedAddress.shipping=vm.list.Items[scope.$index].shipping,updatedAddress.billing=vm.list.Items[scope.$index].billing,updatedAddress.userGroupID=vm.list.Items[scope.$index].userGroupID,vm.list.Items[scope.$index]=updatedAddress,updatedAddress.ID!=scope.address.ID&&(_.map(CurrentAssignments,function(assignment){return assignment.AddressID==scope.address.ID&&(assignment.AddressID=updatedAddress.ID),assignment}),vm.changedAssignments=ocAddresses.Assignments.Compare(CurrentAssignments,vm.list,$stateParams.usergroupid)),toastr.success(updatedAddress.AddressName+" was updated.")})},vm.deleteAddress=function(scope){ocAddresses.Delete(scope.address,$stateParams.buyerid).then(function(){vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,toastr.success(scope.address.AddressName+" was deleted."),vm.changedAssignments=ocAddresses.Assignments.Compare(CurrentAssignments,vm.list,$stateParams.usergroupid)})}}AddressesController.$inject=["$exceptionHandler","$state","$stateParams","$ocMedia","toastr","OrderCloudSDK","ocParameters","ocAddresses","CurrentAssignments","AddressList","Parameters"],angular.module("orderCloud").controller("AddressesCtrl",AddressesController)}(),function(){"use strict";function AddressesConfig($stateProvider){$stateProvider.state("addresses",{parent:"buyer",templateUrl:"buyerManagement/addresses/templates/addresses.html",controller:"AddressesCtrl",controllerAs:"addresses",url:"/addresses?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"Buyer Addresses"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$q","ocAddresses","$stateParams",function($q,ocAddresses,$stateParams){return ocAddresses.Assignments.Get("company",$stateParams.buyerid)}],AddressList:["ocAddresses","OrderCloudSDK","Parameters","CurrentAssignments",function(ocAddresses,OrderCloudSDK,Parameters,CurrentAssignments){return OrderCloudSDK.Addresses.List(Parameters.buyerid,Parameters).then(function(data){return ocAddresses.Assignments.Map(CurrentAssignments,data)})}]}}).state("userGroup.addresses",{templateUrl:"buyerManagement/addresses/templates/addresses.html",controller:"AddressesCtrl",controllerAs:"addresses",url:"/addresses?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"User Group Addresses"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$q","ocAddresses","$stateParams",function($q,ocAddresses,$stateParams){return ocAddresses.Assignments.Get("group",$stateParams.buyerid,$stateParams.usergroupid)}],AddressList:["ocAddresses","OrderCloudSDK","Parameters","CurrentAssignments",function(ocAddresses,OrderCloudSDK,Parameters,CurrentAssignments){return OrderCloudSDK.Addresses.List(Parameters.buyerid,Parameters).then(function(data){return ocAddresses.Assignments.Map(CurrentAssignments,data)})}]}})}AddressesConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(AddressesConfig)}(),function(){"use strict";function AddressEditModalController($timeout,$uibModalInstance,$exceptionHandler,$scope,OrderCloudSDK,ocGeography,SelectedAddress,SelectedBuyerID){var vm=this;vm.address=angular.copy(SelectedAddress),vm.addressName=SelectedAddress.AddressName,vm.countries=ocGeography.Countries,vm.states=ocGeography.States,$scope.$watch(function(){return vm.address.Country},function(n,o){n&&n!=o&&(vm.address.State=null,$timeout(function(){vm.form.State.$$element.focus()},100))}),vm.submit=function(){vm.loading=OrderCloudSDK.Addresses.Update(SelectedBuyerID,SelectedAddress.ID,vm.address).then(function(updatedAddress){$uibModalInstance.close(updatedAddress)})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}AddressEditModalController.$inject=["$timeout","$uibModalInstance","$exceptionHandler","$scope","OrderCloudSDK","ocGeography","SelectedAddress","SelectedBuyerID"],angular.module("orderCloud").controller("AddressEditModalCtrl",AddressEditModalController)}(),function(){"use strict";function AddressCreateModalController($timeout,$uibModalInstance,$exceptionHandler,$scope,OrderCloudSDK,ocGeography,SelectedBuyerID){var vm=this;vm.address={Country:"US"},vm.countries=ocGeography.Countries,vm.states=ocGeography.States,$scope.$watch(function(){return vm.address.Country},function(n,o){n&&n!=o&&(vm.address.State=null),$timeout(function(){vm.form.State.$$element.focus()},100)}),vm.submit=function(){vm.loading=OrderCloudSDK.Addresses.Create(SelectedBuyerID,vm.address).then(function(newAddress){$uibModalInstance.close(newAddress)})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}AddressCreateModalController.$inject=["$timeout","$uibModalInstance","$exceptionHandler","$scope","OrderCloudSDK","ocGeography","SelectedBuyerID"],angular.module("orderCloud").controller("AddressCreateModalCtrl",AddressCreateModalController)}(),function(){"use strict";function StyleguideConfig($stateProvider){$stateProvider.state("styleguide",{parent:"base",url:"/styleguide",templateUrl:"/styles/styleguide/templates/styleguide.html",controller:"StyleguideCtrl",controllerAs:"styleguide"})}function StyleguideController(){}StyleguideConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(StyleguideConfig).controller("StyleguideCtrl",StyleguideController)}(),function(){"use strict";function OrderCloudSellerUsers($q,$uibModal,ocConfirm,OrderCloudSDK){function _create(){return $uibModal.open({templateUrl:"sellerUsers/templates/sellerUserCreate.modal.html",controller:"SellerUserCreateModalCtrl",controllerAs:"sellerUserCreateModal"}).result}function _edit(user){return $uibModal.open({templateUrl:"sellerUsers/templates/sellerUserEdit.modal.html",controller:"SellerUserEditModalCtrl",controllerAs:"sellerUserEditModal",resolve:{SelectedUser:function(){return user}}}).result}function _delete(user){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+user.Username+"</b>?",confirmText:"Delete seller user",type:"delete"}).then(function(){return OrderCloudSDK.AdminUsers.Delete(user.ID)})}function _getAssignments(usergroupid){var options={userGroupID:usergroupid,pageSize:100};return OrderCloudSDK.AdminUserGroups.ListUserAssignments(options).then(function(data1){for(var df=$q.defer(),queue=[],totalPages=angular.copy(data1.Meta.TotalPages),currentPage=angular.copy(data1.Meta.Page);totalPages>currentPage;){var options={userGroupID:usergroupid,pageSize:100,page:currentPage++};currentPage++,queue.push(OrderCloudSDK.AdminUserGroups.ListUserAssignments(options))}return $q.all(queue).then(function(results){angular.forEach(results,function(r){data1.Items=data1.Items.concat(r.Items)}),df.resolve(data1.Items)}),df.promise})}function _mapAssignments(allAssignments,userList){return userList.Items=_.map(userList.Items,function(user){return user.Assigned=!1,angular.forEach(allAssignments,function(assignment){user.ID==assignment.UserID&&(user.Assigned=!0)}),user}),userList}function _compareAssignments(allAssignments,userList,userGroupID){var changedAssignments=[];return angular.forEach(userList.Items,function(user){var existingAssignment=_.where(allAssignments,{UserID:user.ID})[0];existingAssignment&&!user.Assigned?changedAssignments.push({old:existingAssignment,
"new":null}):!existingAssignment&&user.Assigned&&changedAssignments.push({old:null,"new":{UserGroupID:userGroupID,UserID:user.ID}})}),changedAssignments}function _updateAssignments(allAssignments,changedAssignments){var df=$q.defer(),assignmentQueue=[],errors=[];return angular.forEach(changedAssignments,function(diff){!diff.old&&diff["new"]?assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.AdminUserGroups.SaveUserAssignment(diff["new"]).then(function(){allAssignments.push(diff["new"]),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}()):diff.old&&!diff["new"]&&assignmentQueue.push(function(){var d=$q.defer();return OrderCloudSDK.AdminUserGroups.DeleteUserAssignment(diff.old.UserGroupID,diff.old.UserID).then(function(){allAssignments.splice(allAssignments.indexOf(diff.old),1),d.resolve()})["catch"](function(ex){errors.push(ex),d.resolve()}),d.promise}())}),$q.all(assignmentQueue).then(function(){df.resolve({UpdatedAssignments:allAssignments,Errors:errors})}),df.promise}var service={Create:_create,Edit:_edit,Delete:_delete,Assignments:{Get:_getAssignments,Map:_mapAssignments,Compare:_compareAssignments,Update:_updateAssignments}};return service}OrderCloudSellerUsers.$inject=["$q","$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocSellerUsers",OrderCloudSellerUsers)}(),function(){"use strict";function SellerUsersController($state,toastr,OrderCloudSDK,ocSellerUsers,ocParameters,SellerUsersList,Parameters){var vm=this;vm.list=SellerUsersList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.AdminUsers.List(parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})},vm.createUser=function(){ocSellerUsers.Create().then(function(newSellerUser){vm.list.Items.push(newSellerUser),vm.list.Meta.TotalCount++,vm.list.Meta.ItemRange[1]++,toastr.success(newSellerUser.Username+" was created.")})},vm.editUser=function(scope){ocSellerUsers.Edit(scope.user).then(function(updatedSellerUser){vm.list.Items[scope.$index]=updatedSellerUser,toastr.success(updatedSellerUser.Username+" was updated.")})},vm.deleteUser=function(scope){ocSellerUsers.Delete(scope.user).then(function(){vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,toastr.success(scope.user.Username+" was deleted.")})}}SellerUsersController.$inject=["$state","toastr","OrderCloudSDK","ocSellerUsers","ocParameters","SellerUsersList","Parameters"],angular.module("orderCloud").controller("SellerUsersCtrl",SellerUsersController)}(),function(){"use strict";function SellerUsersConfig($stateProvider){$stateProvider.state("sellerUsers",{parent:"base",templateUrl:"sellerUsers/templates/sellerUsers.html",controller:"SellerUsersCtrl",controllerAs:"sellerUsers",url:"/seller-users?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"Seller Users"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],SellerUsersList:["OrderCloudSDK","Parameters",function(OrderCloudSDK,Parameters){return OrderCloudSDK.AdminUsers.List(Parameters)}]}}).state("sellerUserGroup.users",{url:"/users?search&page&pageSize&searchOn&sortBy&filters",templateUrl:"sellerUsers/templates/sellerUserGroupUsers.html",controller:"SellerUserGroupUsersCtrl",controllerAs:"sellerUserGroupUsers",data:{pageTitle:"Seller User Group Members"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],CurrentAssignments:["$stateParams","ocSellerUsers",function($stateParams,ocSellerUsers){return ocSellerUsers.Assignments.Get($stateParams.sellerusergroupid)}],UserList:["Parameters","CurrentAssignments","ocSellerUsers","OrderCloudSDK",function(Parameters,CurrentAssignments,ocSellerUsers,OrderCloudSDK){return OrderCloudSDK.AdminUsers.List(Parameters).then(function(data){return ocSellerUsers.Assignments.Map(CurrentAssignments,data)})}]}})}SellerUsersConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(SellerUsersConfig)}(),function(){"use strict";function SellerUserGroupUsersController($exceptionHandler,$filter,$state,$stateParams,toastr,ocSellerUsers,OrderCloudSDK,ocParameters,ocRoles,UserList,SelectedSellerUserGroup,CurrentAssignments,Parameters){function selectedCheck(){vm.allItemsSelected=_.where(vm.list.Items,{Assigned:!0}).length==vm.list.Items.length}function changedCheck(){vm.changedAssignments=ocSellerUsers.Assignments.Compare(CurrentAssignments,vm.list,$stateParams.sellerusergroupid)}var vm=this;vm.list=UserList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go("sellerUserGroup.users",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.AdminUsers.List(parameters).then(function(data){var mappedData=ocSellerUsers.Assignments.Map(CurrentAssignments,data);vm.list.Items=vm.list.Items.concat(mappedData.Items),vm.list.Meta=mappedData.Meta,selectedCheck()})},selectedCheck(),vm.selectAllItems=function(){vm.allItemsSelected=!vm.allItemsSelected,_.map(vm.list.Items,function(i){i.Assigned=vm.allItemsSelected}),changedCheck()},vm.selectItem=function(scope){scope.user.Assigned||(vm.allItemsSelected=!1),changedCheck(),selectedCheck()},vm.resetAssignments=function(){vm.list=ocSellerUsers.Assignments.Map(CurrentAssignments,vm.list),vm.changedAssignments=[],selectedCheck()},vm.updateAssignments=function(){vm.searchLoading=ocSellerUsers.Assignments.Update(CurrentAssignments,vm.changedAssignments).then(function(data){angular.forEach(data.Errors,function(ex){$exceptionHandler(ex)}),CurrentAssignments=data.UpdatedAssignments,toastr.success("Seller user assignments updated for "+SelectedSellerUserGroup.Name+"."),changedCheck(),selectedCheck()})},vm.createUser=function(){function _updateList(n){vm.list.Items.push(n),vm.list.Meta.TotalCount++,vm.list.Meta.ItemRange[1]++,toastr.success(n.Username+" was created.")}ocSellerUsers.Create().then(function(newSellerUser){if(ocRoles.UserIsAuthorized(["AdminUserGroupAdmin"])){var newAssignment={UserID:newSellerUser.ID,UserGroupID:$stateParams.sellerusergroupid};vm.searchLoading=OrderCloudSDK.AdminUserGroups.SaveUserAssignment(newAssignment).then(function(){newSellerUser.Assigned=!0,CurrentAssignments.push(newAssignment),_updateList(newSellerUser)})["catch"](function(){newSellerUser.Assigned=!1,_updateList(newSellerUser)})}else newSellerUser.Assigned=!1,_updateList(newSellerUser)})},vm.editUser=function(scope){ocSellerUsers.Edit(scope.user).then(function(updatedSellerUser){updatedSellerUser.Assigned=vm.list.Items[scope.$index].Assigned,vm.list.Items[scope.$index]=updatedSellerUser,updatedSellerUser.ID!=scope.user.ID&&(_.map(CurrentAssignments,function(assignment){return assignment.UserID==scope.user.ID&&(assignment.UserID=updatedSellerUser.ID),assignment}),changedCheck()),toastr.success(updatedSellerUser.Username+" was updated.")})},vm.deleteUser=function(scope){ocSellerUsers.Delete(scope.user).then(function(){toastr.success(scope.user.Username+" was deleted."),vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,changedCheck()})}}SellerUserGroupUsersController.$inject=["$exceptionHandler","$filter","$state","$stateParams","toastr","ocSellerUsers","OrderCloudSDK","ocParameters","ocRoles","UserList","SelectedSellerUserGroup","CurrentAssignments","Parameters"],angular.module("orderCloud").controller("SellerUserGroupUsersCtrl",SellerUserGroupUsersController)}(),function(){"use strict";function SellerUserEditModalController($exceptionHandler,$uibModalInstance,OrderCloudSDK,SelectedUser){var vm=this;vm.user=angular.copy(SelectedUser),vm.username=SelectedUser.Username,vm.fullName=SelectedUser.FirstName?SelectedUser.FirstName+(SelectedUser.LastName?" "+SelectedUser.LastName:""):SelectedUser.LastName?SelectedUser.LastName:null,null!=vm.user.TermsAccepted&&(vm.TermsAccepted=!0),vm.submit=function(){var today=new Date;vm.user.TermsAccepted=today,vm.loading=OrderCloudSDK.AdminUsers.Update(SelectedUser.ID,vm.user).then(function(data){$uibModalInstance.close(data)})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}SellerUserEditModalController.$inject=["$exceptionHandler","$uibModalInstance","OrderCloudSDK","SelectedUser"],angular.module("orderCloud").controller("SellerUserEditModalCtrl",SellerUserEditModalController)}(),function(){"use strict";function SellerUserCreateModalController($exceptionHandler,$uibModalInstance,OrderCloudSDK){var vm=this;vm.user={Active:!1},vm.submit=function(){vm.user.TermsAccepted=new Date,vm.loading=OrderCloudSDK.AdminUsers.Create(vm.user).then(function(data){$uibModalInstance.close(data)})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}SellerUserCreateModalController.$inject=["$exceptionHandler","$uibModalInstance","OrderCloudSDK"],angular.module("orderCloud").controller("SellerUserCreateModalCtrl",SellerUserCreateModalController)}(),function(){"use strict";function OrderCloudSellerUserGroups($uibModal,ocConfirm,OrderCloudSDK){function _create(){return $uibModal.open({templateUrl:"sellerUserGroups/templates/sellerUserGroupCreate.modal.html",controller:"SellerUserGroupCreateModalCtrl",controllerAs:"sellerUserGroupCreateModal"}).result}function _delete(userGroup){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+userGroup.Name+"</b>?",confirmText:"Delete seller user group",type:"delete"}).then(function(){return OrderCloudSDK.AdminUserGroups.Delete(userGroup.ID)})}var service={Create:_create,Delete:_delete};return service}OrderCloudSellerUserGroups.$inject=["$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocSellerUserGroups",OrderCloudSellerUserGroups)}(),function(){"use strict";function SellerUserGroupsController($state,toastr,OrderCloudSDK,ocSellerUserGroups,ocParameters,SellerUserGroupList,Parameters){var vm=this;vm.list=SellerUserGroupList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.AdminUserGroups.List(parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})},vm.createGroup=function(){ocSellerUserGroups.Create().then(function(newUserGroup){toastr.success(newUserGroup.Name+" was created."),$state.go("sellerUserGroup",{sellerusergroupid:newUserGroup.ID})})},vm.deleteGroup=function(scope){ocSellerUserGroups.Delete(scope.sellerUserGroup).then(function(){vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,toastr.success(scope.sellerUserGroup.Name+" was deleted.")})}}SellerUserGroupsController.$inject=["$state","toastr","OrderCloudSDK","ocSellerUserGroups","ocParameters","SellerUserGroupList","Parameters"],angular.module("orderCloud").controller("SellerUserGroupsCtrl",SellerUserGroupsController)}(),function(){"use strict";function SellerUserGroupsConfig($stateProvider){$stateProvider.state("sellerUserGroups",{parent:"base",templateUrl:"sellerUserGroups/templates/sellerUserGroups.html",controller:"SellerUserGroupsCtrl",controllerAs:"sellerUserGroups",url:"/seller-user-groups?search&page&pageSize&sortBy&searchOn&filters",data:{pageTitle:"Seller User Groups"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],SellerUserGroupList:["OrderCloudSDK","Parameters",function(OrderCloudSDK,Parameters){return OrderCloudSDK.AdminUserGroups.List(Parameters)}]}}).state("sellerUserGroup",{parent:"base",url:"/seller-user-groups/:sellerusergroupid",templateUrl:"sellerUserGroups/templates/sellerUserGroup.html",controller:"SellerUserGroupCtrl",controllerAs:"sellerUserGroup",data:{pageTitle:"Seller User Group"},resolve:{SelectedSellerUserGroup:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){return OrderCloudSDK.AdminUserGroups.Get($stateParams.sellerusergroupid)}]}})}SellerUserGroupsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(SellerUserGroupsConfig)}(),function(){"use strict";function SellerUserGroupCreateModalController($uibModalInstance,$exceptionHandler,OrderCloudSDK){var vm=this;vm.submit=function(){vm.loading=OrderCloudSDK.AdminUserGroups.Create(vm.userGroup).then(function(data){$uibModalInstance.close(data)})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}SellerUserGroupCreateModalController.$inject=["$uibModalInstance","$exceptionHandler","OrderCloudSDK"],angular.module("orderCloud").controller("SellerUserGroupCreateModalCtrl",SellerUserGroupCreateModalController)}(),function(){"use strict";function SellerUserGroupController($state,toastr,OrderCloudSDK,ocSellerUserGroups,SelectedSellerUserGroup){var vm=this;vm.group=SelectedSellerUserGroup,vm.model=angular.copy(SelectedSellerUserGroup),vm.update=function(){OrderCloudSDK.AdminUserGroups.Update(vm.group.ID,vm.model).then(function(updatedUserGroup){updatedUserGroup.ID!=vm.group.ID&&$state.go(".",{sellerusergroupid:updatedUserGroup.ID},{notify:!1}),vm.group=updatedUserGroup,vm.model=angular.copy(updatedUserGroup),SelectedSellerUserGroup=angular.copy(updatedUserGroup),toastr.success(vm.group.Name+" was updated.")})},vm["delete"]=function(){ocSellerUserGroups.Delete(vm.group).then(function(){toastr.success(vm.group.Name+" was deleted."),$state.go("sellerUserGroups")})}}SellerUserGroupController.$inject=["$state","toastr","OrderCloudSDK","ocSellerUserGroups","SelectedSellerUserGroup"],angular.module("orderCloud").controller("SellerUserGroupCtrl",SellerUserGroupController)}(),function(){"use strict";function OrderCloudSellerAddresses($uibModal,ocConfirm,OrderCloudSDK){function _create(){return $uibModal.open({templateUrl:"sellerAddresses/templates/sellerAddressCreate.modal.html",controller:"SellerAddressCreateModalCtrl",controllerAs:"sellerAddressCreateModal"}).result}function _edit(address){return $uibModal.open({templateUrl:"sellerAddresses/templates/sellerAddressEdit.modal.html",controller:"SellerAddressEditModalCtrl",controllerAs:"sellerAddressEditModal",resolve:{SelectedAddress:function(){return address}}}).result}function _delete(address){return ocConfirm.Confirm({message:"Are you sure you want to delete <br> <b>"+(address.AddressName?address.AddressName:address.ID)+"</b>?",confirmText:"Delete seller address",type:"delete"}).then(function(){return OrderCloudSDK.AdminAddresses.Delete(address.ID)})}var service={Create:_create,Edit:_edit,Delete:_delete};return service}OrderCloudSellerAddresses.$inject=["$uibModal","ocConfirm","OrderCloudSDK"],angular.module("orderCloud").factory("ocSellerAddresses",OrderCloudSellerAddresses)}(),function(){"use strict";function SellerAddressesController($state,toastr,OrderCloudSDK,ocSellerAddresses,ocParameters,AddressList,Parameters){var vm=this;vm.list=AddressList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",ocParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.extend(Parameters,{page:vm.list.Meta.Page+1});return OrderCloudSDK.AdminAddresses.List(parameters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})},vm.createAddress=function(){ocSellerAddresses.Create().then(function(newAddress){vm.list.Items.push(newAddress),vm.list.Meta.TotalCount++,vm.list.Meta.ItemRange[1]++,toastr.success(newAddress.AddressName+" was created.")})},vm.editAddress=function(scope){ocSellerAddresses.Edit(scope.sellerAddress).then(function(updatedAddress){vm.list.Items[scope.$index]=updatedAddress,toastr.success(updatedAddress.AddressName+" was updated.")})},vm.deleteAddress=function(scope){ocSellerAddresses.Delete(scope.sellerAddress).then(function(){vm.list.Items.splice(scope.$index,1),vm.list.Meta.TotalCount--,vm.list.Meta.ItemRange[1]--,toastr.success(scope.sellerAddress.AddressName+" was deleted.")})}}SellerAddressesController.$inject=["$state","toastr","OrderCloudSDK","ocSellerAddresses","ocParameters","AddressList","Parameters"],angular.module("orderCloud").controller("SellerAddressesCtrl",SellerAddressesController)}(),function(){"use strict";function SellerAddressesConfig($stateProvider){$stateProvider.state("sellerAddresses",{parent:"base",templateUrl:"sellerAddresses/templates/sellerAddresses.html",controller:"SellerAddressesCtrl",controllerAs:"sellerAddresses",url:"/seller-addresses?search&page&pageSize&searchOn&sortBy&filters",data:{pageTitle:"Seller Addresses"},resolve:{Parameters:["$stateParams","ocParameters",function($stateParams,ocParameters){return ocParameters.Get($stateParams)}],AddressList:["OrderCloudSDK","Parameters",function(OrderCloudSDK,Parameters){return OrderCloudSDK.AdminAddresses.List(Parameters)}]}})}SellerAddressesConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(SellerAddressesConfig)}(),function(){"use strict";function SellerAddressEditModalController($timeout,$uibModalInstance,$exceptionHandler,$scope,OrderCloudSDK,ocGeography,SelectedAddress){var vm=this;vm.sellerAddress=angular.copy(SelectedAddress),vm.sellerAddressName=SelectedAddress.AddressName,vm.countries=ocGeography.Countries,vm.states=ocGeography.States,$scope.$watch(function(){return vm.sellerAddress.Country},function(n,o){n&&n!=o&&(vm.sellerAddress.State=null,$timeout(function(){vm.form.State.$$element.focus()},100))}),vm.submit=function(){vm.loading=OrderCloudSDK.AdminAddresses.Update(SelectedAddress.ID,vm.sellerAddress).then(function(updatedAddress){$uibModalInstance.close(updatedAddress)})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}SellerAddressEditModalController.$inject=["$timeout","$uibModalInstance","$exceptionHandler","$scope","OrderCloudSDK","ocGeography","SelectedAddress"],angular.module("orderCloud").controller("SellerAddressEditModalCtrl",SellerAddressEditModalController)}(),function(){"use strict";function SellerAddressCreateModalController($timeout,$uibModalInstance,$exceptionHandler,$scope,OrderCloudSDK,ocGeography){var vm=this;vm.sellerAddress={Country:"US"},vm.countries=ocGeography.Countries,vm.states=ocGeography.States,$scope.$watch(function(){return vm.sellerAddress.Country},function(n,o){n&&n!=o&&(vm.sellerAddress.State=null,$timeout(function(){vm.form.State.$$element.focus()},100))}),vm.submit=function(){vm.loading=OrderCloudSDK.AdminAddresses.Create(vm.sellerAddress).then(function(newAddress){$uibModalInstance.close(newAddress)})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}SellerAddressCreateModalController.$inject=["$timeout","$uibModalInstance","$exceptionHandler","$scope","OrderCloudSDK","ocGeography"],angular.module("orderCloud").controller("SellerAddressCreateModalCtrl",SellerAddressCreateModalController)}(),function(){"use strict";function PermissionsController($state,$exceptionHandler,$stateParams,toastr,Assignments,AvailableProfiles,OrderCloudSDK){var vm=this;vm.pageTitle=$state.current.data.pageTitle,vm.assignments=Assignments,vm.profiles=AvailableProfiles,vm.buyerid=$stateParams.buyerid,vm.usergroupid=$stateParams.usergroupid,vm.adminusergroupid=$stateParams.adminusergroupid,vm.updateAssignment=function(scope){if(scope.profile.selected){var assignment={securityProfileID:scope.profile.ID,buyerID:$stateParams.buyerid,userGroupID:$stateParams.usergroupid||$stateParams.sellerusergroupid};OrderCloudSDK.SecurityProfiles.SaveAssignment(assignment).then(function(){toastr.success(scope.profile.Name+" was enabled.")})["catch"](function(ex){scope.profile.selected=!1,$exceptionHandler(ex)})}else{var options={buyerID:$stateParams.buyerid,userGroupID:$stateParams.usergroupid||$stateParams.sellerusergroupid};OrderCloudSDK.SecurityProfiles.DeleteAssignment(scope.profile.ID,options).then(function(){toastr.success(scope.profile.Name+" was disabled.")})["catch"](function(ex){scope.profile.selected=!0,$exceptionHandler(ex)})}}}PermissionsController.$inject=["$state","$exceptionHandler","$stateParams","toastr","Assignments","AvailableProfiles","OrderCloudSDK"],angular.module("orderCloud").controller("PermissionsCtrl",PermissionsController)}(),function(){"use strict";function PermissionsConfig($stateProvider){$stateProvider.state("permissions",{parent:"base",url:"/permissions",templateUrl:"permissions/templates/permissions.html",controller:"PermissionsCtrl",controllerAs:"permissions",data:{pageTitle:"Seller Permissions"},resolve:{Assignments:["OrderCloudSDK",function(OrderCloudSDK){return OrderCloudSDK.SecurityProfiles.ListAssignments({level:"company",pageSize:100,commerceRole:"seller"})}],AvailableProfiles:["$q","OrderCloudSDK","Assignments",function($q,OrderCloudSDK,Assignments){return OrderCloudSDK.SecurityProfiles.List({pageSize:100}).then(function(data){return _.map(data.Items,function(sp){return sp.selected=_.pluck(Assignments.Items,"SecurityProfileID").indexOf(sp.ID)>-1,sp})})}]}}).state("sellerUserGroup.permissions",{url:"/permissions",templateUrl:"permissions/templates/permissions.html",controller:"PermissionsCtrl",controllerAs:"permissions",data:{pageTitle:"Seller User Group Permissions"},resolve:{Assignments:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){return OrderCloudSDK.SecurityProfiles.ListAssignments({level:"group",pageSize:100,userGroupID:$stateParams.adminusergroupid,commerceRole:"seller"})}],AvailableProfiles:["$q","OrderCloudSDK","Assignments",function($q,OrderCloudSDK,Assignments){return OrderCloudSDK.SecurityProfiles.List({pageSize:100}).then(function(data){return _.map(data.Items,function(sp){return sp.selected=_.pluck(Assignments.Items,"SecurityProfileID").indexOf(sp.ID)>-1,sp})})}]}}).state("buyerPermissions",{parent:"buyer",url:"/permissions",templateUrl:"permissions/templates/permissions.html",controller:"PermissionsCtrl",controllerAs:"permissions",data:{pageTitle:"Buyer Permissions"},resolve:{Assignments:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){return OrderCloudSDK.SecurityProfiles.ListAssignments({level:"company",pageSize:100,buyerID:$stateParams.buyerid,commerceRole:"buyer"})}],AvailableProfiles:["$q","OrderCloudSDK","Assignments",function($q,OrderCloudSDK,Assignments){return OrderCloudSDK.SecurityProfiles.List({pageSize:100}).then(function(data){return _.map(data.Items,function(sp){return sp.selected=_.pluck(Assignments.Items,"SecurityProfileID").indexOf(sp.ID)>-1,sp})})}]}}).state("userGroup.permissions",{url:"/permissions",templateUrl:"permissions/templates/permissions.html",controller:"PermissionsCtrl",controllerAs:"permissions",data:{pageTitle:"User Group Permissions"},resolve:{Assignments:["$stateParams","OrderCloudSDK",function($stateParams,OrderCloudSDK){return OrderCloudSDK.SecurityProfiles.ListAssignments({level:"group",pageSize:100,userGroupID:$stateParams.usergroupid,commerceRole:"buyer"})}],AvailableProfiles:["$q","OrderCloudSDK","Assignments",function($q,OrderCloudSDK,Assignments){return OrderCloudSDK.SecurityProfiles.List({pageSize:100}).then(function(data){return _.map(data.Items,function(sp){return sp.selected=_.pluck(Assignments.Items,"SecurityProfileID").indexOf(sp.ID)>-1,sp})})}]}})}PermissionsConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(PermissionsConfig)}(),function(){"use strict";function LoginService($q,$window,$state,$cookies,toastr,OrderCloudSDK,ocRoles,clientid,scope,defaultstate){function _sendVerificationCode(email){var deferred=$q.defer(),passwordResetRequest={email:email,clientID:clientid,URL:encodeURIComponent($window.location.href)+"{0}"};return OrderCloudSDK.PasswordResets.SendVerificationCode(passwordResetRequest).then(function(){deferred.resolve()})["catch"](function(ex){deferred.reject(ex)}),deferred.promise}function _resetPassword(resetPasswordCredentials,verificationCode){var deferred=$q.defer(),passwordReset={clientID:clientid,username:resetPasswordCredentials.ResetUsername,password:resetPasswordCredentials.NewPassword};return OrderCloudSDK.PasswordResets.ResetPassword(verificationCode,passwordReset).then(function(){deferred.resolve()})["catch"](function(ex){deferred.reject(ex)}),deferred.promise}function _logout(){angular.forEach($cookies.getAll(),function(val,key){$cookies.remove(key)}),ocRoles.Remove(),$state.go("login",{},{reload:!0})}function _rememberMe(currentState){var availableRefreshToken=OrderCloudSDK.GetRefreshToken()||null;availableRefreshToken?OrderCloudSDK.Auth.RefreshToken(availableRefreshToken,clientid,scope).then(function(data){OrderCloudSDK.Auth.SetToken(data.access_token);var redirectTo=currentState||defaultstate;$state.go(redirectTo)})["catch"](function(){toastr.error("Your token has expired, please log in again."),_logout()}):_logout()}return{SendVerificationCode:_sendVerificationCode,ResetPassword:_resetPassword,RememberMe:_rememberMe,Logout:_logout}}LoginService.$inject=["$q","$window","$state","$cookies","toastr","OrderCloudSDK","ocRoles","clientid","scope","defaultstate"],angular.module("orderCloud").factory("LoginService",LoginService)}(),function(){"use strict";function LoginController($state,$stateParams,$exceptionHandler,LoginService,ocRoles,OrderCloudSDK,clientid,scope){var vm=this;vm.credentials={Username:null,Password:null},vm.token=$stateParams.token,vm.form=vm.token?"reset":"login",vm.setForm=function(form){vm.form=form},vm.rememberStatus=!1,vm.submit=function(){vm.loading=OrderCloudSDK.Auth.Login(vm.credentials.Username,vm.credentials.Password,clientid,scope).then(function(data){OrderCloudSDK.SetToken(data.access_token),vm.rememberStatus&&OrderCloudSDK.SetRefreshToken(data.refresh_token);var roles=ocRoles.Set(data.access_token);1===roles.length&&"PasswordReset"===roles[0]?(vm.token=data.access_token,vm.form="resetByToken"):$state.go("home")})["catch"](function(ex){$exceptionHandler(ex)})},vm.forgotPassword=function(){vm.loading=LoginService.SendVerificationCode(vm.credentials.Email).then(function(){vm.setForm("verificationCodeSuccess"),vm.credentials.Email=null})["catch"](function(ex){$exceptionHandler(ex)})},vm.resetPasswordByToken=function(){vm.loading=OrderCloudSDK.Me.ResetPasswordByToken({NewPassword:vm.credentials.NewPassword}).then(function(data){vm.setForm("resetSuccess"),vm.credentials={Username:null,Password:null}})["catch"](function(ex){$exceptionHandler(ex)})},vm.resetPassword=function(){vm.loading=LoginService.ResetPassword(vm.credentials,vm.token).then(function(){vm.setForm("resetSuccess"),vm.token=null,vm.credentials.ResetUsername=null,vm.credentials.NewPassword=null,vm.credentials.ConfirmPassword=null})["catch"](function(ex){$exceptionHandler(ex),vm.credentials.ResetUsername=null,vm.credentials.NewPassword=null,vm.credentials.ConfirmPassword=null})}}LoginController.$inject=["$state","$stateParams","$exceptionHandler","LoginService","ocRoles","OrderCloudSDK","clientid","scope"],angular.module("orderCloud").controller("LoginCtrl",LoginController)}(),function(){"use strict";function LoginConfig($stateProvider){$stateProvider.state("login",{url:"/login/:token",templateUrl:"login/templates/login.html",controller:"LoginCtrl",controllerAs:"login",data:{pageTitle:"Login"}})}LoginConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(LoginConfig)}(),function(){"use strict";function HomeController(){}angular.module("orderCloud").controller("HomeCtrl",HomeController)}(),function(){"use strict";function HomeConfig($stateProvider){$stateProvider.state("home",{parent:"base",url:"/home",templateUrl:"home/templates/home.tpl.html",controller:"HomeCtrl",controllerAs:"home"})}HomeConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(HomeConfig)}(),function(){"use strict";function BaseController(CurrentUser,$state){var vm=this;vm.currentUser=CurrentUser,vm.addContainerClass=function(){var result=!1,containedStates=["products","catalogs","buyers","home","orders","sellerUsers","sellerUserGroups","sellerUserGroup*","sellerAddresses","permissions"];return _.each(containedStates,function(state){if(result!==!0){var test=state.split("*");$state[test.length>1?"includes":"is"](test[0])&&(result=!0)}}),result},$("#GlobalNav").offcanvas({canvas:"body",placement:"left",toggle:!1}),vm.toggleGlobalNav=function(){$("#GlobalNav").offcanvas("toggle")},vm.selectNavItem=function(stateName){$state.go(stateName),$("#GlobalNav").offcanvas("hide")}}BaseController.$inject=["CurrentUser","$state"],angular.module("orderCloud").controller("BaseCtrl",BaseController)}(),function(){"use strict";function BaseConfig($stateProvider){$stateProvider.state("base",{url:"","abstract":!0,templateUrl:"base/templates/base.tpl.html",controller:"BaseCtrl",controllerAs:"base",resolve:{CurrentUser:["$q","$state","OrderCloudSDK","LoginService",function($q,$state,OrderCloudSDK,LoginService){return OrderCloudSDK.Me.Get()["catch"](function(){LoginService.Logout()})}]}})}BaseConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(BaseConfig)}(),function(){"use strict";function ConfirmPasswordModalController($exceptionHandler,$uibModalInstance,CurrentUser,$cookies,OrderCloudSDK,appname,clientid,scope){var vm=this;vm.submit=function(){var checkPasswordCredentials={Username:CurrentUser.Username,Password:vm.password};OrderCloudSDK.Auth.Login(checkPasswordCredentials.Username,checkPasswordCredentials.Password,clientid,scope).then(function(){
var expiresIn=new Date;expiresIn.setMinutes(expiresIn.getMinutes()+20),$cookies.put("oc_has_confirmed."+appname,!0,{expires:expiresIn}),$uibModalInstance.close()})["catch"](function(ex){$exceptionHandler(ex),vm.password=null,vm.form.ConfirmPassword.$$element.focus()})},vm.cancel=function(){$uibModalInstance.dismiss()}}ConfirmPasswordModalController.$inject=["$exceptionHandler","$uibModalInstance","CurrentUser","$cookies","OrderCloudSDK","appname","clientid","scope"],angular.module("orderCloud").controller("ConfirmPasswordModalCtrl",ConfirmPasswordModalController)}(),function(){"use strict";function ChangePasswordModalController($exceptionHandler,OrderCloudSDK,$uibModalInstance,CurrentUser,clientid,scope){var vm=this;vm.currentUser=CurrentUser,vm.submit=function(){var checkPasswordCredentials={Username:vm.currentUser.Username,Password:vm.currentUser.CurrentPassword};return vm.loading=OrderCloudSDK.Auth.Login(checkPasswordCredentials.Username,checkPasswordCredentials.Password,clientid,scope).then(function(){return OrderCloudSDK.Me.ResetPasswordByToken({NewPassword:vm.currentUser.NewPassword}).then(function(){$uibModalInstance.close()})})["catch"](function(ex){$exceptionHandler(ex)})},vm.cancel=function(){$uibModalInstance.dismiss()}}ChangePasswordModalController.$inject=["$exceptionHandler","OrderCloudSDK","$uibModalInstance","CurrentUser","clientid","scope"],angular.module("orderCloud").controller("ChangePasswordModalCtrl",ChangePasswordModalController)}(),function(){"use strict";function OrderCloudAccountService($q,$uibModal,$cookies,appname){function _confirmPassword(currentUser){var hasConfirmed=$cookies.get("oc_has_confirmed."+appname);if(hasConfirmed){var df=$q.defer();return df.resolve(),df.promise}return $uibModal.open({animation:!0,templateUrl:"account/templates/confirmPassword.modal.html",controller:"ConfirmPasswordModalCtrl",controllerAs:"confirmPasswordModal",size:"confirm",resolve:{CurrentUser:function(){return currentUser}}}).result}function _changePassword(currentUser){return $uibModal.open({animation:!0,templateUrl:"account/templates/changePassword.modal.html",controller:"ChangePasswordModalCtrl",controllerAs:"changePasswordModal",backdrop:"static",size:"confirm",resolve:{CurrentUser:function(){return currentUser}}}).result}var service={ConfirmPassword:_confirmPassword,ChangePassword:_changePassword};return service}OrderCloudAccountService.$inject=["$q","$uibModal","$cookies","appname"],angular.module("orderCloud").factory("ocAccount",OrderCloudAccountService)}(),function(){"use strict";function AccountController($exceptionHandler,CurrentUser,ocAccount,OrderCloudSDK,toastr){var vm=this;vm.profile=angular.copy(CurrentUser),vm.currentUser=CurrentUser,vm.usernameChange=function(){vm.settingsForm.Username.$setValidity("User.UsernameMustBeUnique",!0)},vm.updateProfile=function(){ocAccount.ConfirmPassword(vm.currentUser).then(function(){vm.profileUpdateLoading=OrderCloudSDK.Me.Patch(_.pick(vm.profile,["FirstName","LastName","Email","Phone"])).then(function(updatedUser){vm.profile=angular.copy(updatedUser),vm.currentUser=updatedUser,vm.profileForm.$setPristine(),toastr.success("Your profile information was updated.")})})},vm.updateUsername=function(){ocAccount.ConfirmPassword(vm.currentUser).then(function(){vm.profileUpdateLoading=OrderCloudSDK.Me.Patch(_.pick(vm.profile,"Username")).then(function(updatedUser){vm.profile=angular.copy(updatedUser),vm.currentUser=updatedUser,vm.settingsForm.$setPristine(),toastr.success("Your username was updated.")})["catch"](function(ex){409===ex.status&&vm.settingsForm.Username.$setValidity(ex.data.Errors[0].ErrorCode,!1),$exceptionHandler(ex)})})},vm.changePassword=function(){ocAccount.ChangePassword(vm.currentUser).then(function(){toastr.success("Your password was successfully changed. Next time you log in you will have to use your new password.")})}}AccountController.$inject=["$exceptionHandler","CurrentUser","ocAccount","OrderCloudSDK","toastr"],angular.module("orderCloud").controller("AccountCtrl",AccountController)}(),function(){"use strict";function AccountConfig($stateProvider){$stateProvider.state("account",{parent:"base",url:"/account",templateUrl:"account/templates/account.html",controller:"AccountCtrl",controllerAs:"account",data:{pageTitle:"My Account"}})}AccountConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(AccountConfig)}(),function(){"use strict";function AppRun(ocStateLoading,defaultErrorMessageResolver,ocErrorMessages,validator){ocStateLoading.Init(),defaultErrorMessageResolver.getErrorMessages().then(function(errorMessages){angular.extend(errorMessages,ocErrorMessages)}),validator.setValidElementStyling(!1)}AppRun.$inject=["ocStateLoading","defaultErrorMessageResolver","ocErrorMessages","validator"],angular.module("orderCloud").run(AppRun)}(),function(){"use strict";function AppController($state,$ocMedia,LoginService,appname,ocStateLoading,ocIsTouchDevice,ocRoles){var vm=this;vm.name=appname,vm.$state=$state,vm.$ocMedia=$ocMedia,vm.isTouchDevice=ocIsTouchDevice,vm.stateLoading=ocStateLoading.Watch,vm.logout=LoginService.Logout,vm.userIsAuthorized=ocRoles.UserIsAuthorized}AppController.$inject=["$state","$ocMedia","LoginService","appname","ocStateLoading","ocIsTouchDevice","ocRoles"],angular.module("orderCloud").controller("AppCtrl",AppController)}();